function reverse_directions(){temp=$("start_address").value,$("start_address").value=$("end_address").value,$("end_address").value=temp,$("start_address").hasAttribute("disabled")?($("start_address").enable(),$("end_address").disable()):($("start_address").disable(),$("end_address").enable())}function getDirections(){switch(directions_provider_url="",google_url="saddr="+$("start_address").value,rtc_url="sname="+$("start_address").value,google_url+="&daddr="+$("end_address").value,rtc_url+="&ename="+$("end_address").value,$("travel_mode").value){case"Driving":directions_provider_url="http://maps.google.com/?"+google_url;break;case"Transit":directions_provider_url="http://maps.google.com/?"+google_url+"&dirflg=r";break;case"Bicycling":directions_provider_url="http://maps.google.com/?"+google_url+"&dirflg=b"}HideDialog(),window.open(directions_provider_url)}function openGMaps(t){window.open("http://maps.google.com/maps?q="+escape(t)+"&oe=utf-8um=1&ie=UTF-8&oi=geocode_result&ct=title&resnum=1&z=19")}function updateMap(t,e,i,n){if(i=Object.extend({updateDelay:250,xUpdateThreshold:.33,yUpdateThreshold:.33},i||{}),t._savedMapCenter&&t._savedMapZoom==t.getZoom()){var o=t.getCenter(),s=o.lng-t._savedMapCenter.lng,r=o.lat-t._savedMapCenter.lat,a=t.getBounds(),l=Math.abs(a.getNorthEast().lng-a.getSouthWest().lng),u=Math.abs(a.getNorthEast().lat-a.getSouthWest().lat);if(Math.abs(s)<l*i.xUpdateThreshold&&Math.abs(r)<u*i.yUpdateThreshold)return}t._savedMapCenter=null,t._savedMapZoom=null,cancelUpdateMap(t);var c="name="+t._easyName+"&map[lon_min]="+t.getBounds().getSouthWest().lng+"&map[lon_max]="+t.getBounds().getNorthEast().lng+"&map[lat_min]="+t.getBounds().getSouthWest().lat+"&map[lat_max]="+t.getBounds().getNorthEast().lat+"&map[map_width]="+t._container.clientWidth+"&map[map_height]="+t._container.clientHeight+"&map[zoom]="+t.getZoom();return t.easySetStatus("<blink>Loading...</blink>"),ajax_options={method:"get",parameters:c,onComplete:function(e){t.easySetStatus(""),e.responseText.length>0&&(t._savedMapCenter=t.getCenter(),t._savedMapZoom=t.getZoom(),n.onComplete&&n.onComplete())},onFailure:function(){alert("Ajax Error")}},t._updateRequestTimeoutID=window.setTimeout(function(){t._updateRequest=new Ajax.Request(e,ajax_options)},i.updateDelay),!0}function cancelUpdateMap(t){return t._updateRequest&&t._updateRequest.transport.abort(),window.clearTimeout(t._updateRequestTimeoutID),t.easySetStatus(""),!0}function number_with_delimiter(t,e,i){try{var e=e||",",i=i||".",n=t.toString().split(".");return n[0]=n[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+e),n.join(i)}catch(e){return t}}function toggle_claim_btn(){SE.user&&SE.user.agent&&$j("td.closing-claim, th.closing-claim").show()}!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function i(t){var e=t.length,i=ot.type(t);return"function"!==i&&!ot.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t))}function n(t,e,i){if(ot.isFunction(e))return ot.grep(t,function(t,n){return!!e.call(t,n,t)!==i});if(e.nodeType)return ot.grep(t,function(t){return t===e!==i});if("string"==typeof e){if(dt.test(e))return ot.filter(e,t,i);e=ot.filter(e,t)}return ot.grep(t,function(t){return ot.inArray(t,e)>=0!==i})}function o(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function s(t){var e=bt[t]={};return ot.each(t.match(yt)||[],function(t,i){e[i]=!0}),e}function r(){ft.addEventListener?(ft.removeEventListener("DOMContentLoaded",a,!1),t.removeEventListener("load",a,!1)):(ft.detachEvent("onreadystatechange",a),t.detachEvent("onload",a))}function a(){(ft.addEventListener||"load"===event.type||"complete"===ft.readyState)&&(r(),ot.ready())}function l(t,e,i){if(void 0===i&&1===t.nodeType){var n="data-"+e.replace(Et,"-$1").toLowerCase();if(i=t.getAttribute(n),"string"==typeof i){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:Ct.test(i)?ot.parseJSON(i):i)}catch(t){}ot.data(t,e,i)}else i=void 0}return i}function u(t){var e;for(e in t)if(("data"!==e||!ot.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function c(t,e,i,n){if(ot.acceptData(t)){var o,s,r=ot.expando,a=t.nodeType,l=a?ot.cache:t,u=a?t[r]:t[r]&&r;if(u&&l[u]&&(n||l[u].data)||void 0!==i||"string"!=typeof e)return u||(u=a?t[r]=V.pop()||ot.guid++:r),l[u]||(l[u]=a?{}:{toJSON:ot.noop}),"object"!=typeof e&&"function"!=typeof e||(n?l[u]=ot.extend(l[u],e):l[u].data=ot.extend(l[u].data,e)),s=l[u],n||(s.data||(s.data={}),s=s.data),void 0!==i&&(s[ot.camelCase(e)]=i),"string"==typeof e?(o=s[e],null==o&&(o=s[ot.camelCase(e)])):o=s,o}}function h(t,e,i){if(ot.acceptData(t)){var n,o,s=t.nodeType,r=s?ot.cache:t,a=s?t[ot.expando]:ot.expando;if(r[a]){if(e&&(n=i?r[a]:r[a].data)){ot.isArray(e)?e=e.concat(ot.map(e,ot.camelCase)):e in n?e=[e]:(e=ot.camelCase(e),e=e in n?[e]:e.split(" ")),o=e.length;for(;o--;)delete n[e[o]];if(i?!u(n):!ot.isEmptyObject(n))return}(i||(delete r[a].data,u(r[a])))&&(s?ot.cleanData([t],!0):it.deleteExpando||r!=r.window?delete r[a]:r[a]=null)}}}function d(){return!0}function p(){return!1}function f(){try{return ft.activeElement}catch(t){}}function m(t){var e=Ot.split("|"),i=t.createDocumentFragment();if(i.createElement)for(;e.length;)i.createElement(e.pop());return i}function g(t,e){var i,n,o=0,s=typeof t.getElementsByTagName!==xt?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==xt?t.querySelectorAll(e||"*"):void 0;if(!s)for(s=[],i=t.childNodes||t;null!=(n=i[o]);o++)!e||ot.nodeName(n,e)?s.push(n):ot.merge(s,g(n,e));return void 0===e||e&&ot.nodeName(t,e)?ot.merge([t],s):s}function v(t){Mt.test(t.type)&&(t.defaultChecked=t.checked)}function _(t,e){return ot.nodeName(t,"table")&&ot.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function y(t){return t.type=(null!==ot.find.attr(t,"type"))+"/"+t.type,t}function b(t){var e=Zt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function w(t,e){for(var i,n=0;null!=(i=t[n]);n++)ot._data(i,"globalEval",!e||ot._data(e[n],"globalEval"))}function S(t,e){if(1===e.nodeType&&ot.hasData(t)){var i,n,o,s=ot._data(t),r=ot._data(e,s),a=s.events;if(a){delete r.handle,r.events={};for(i in a)for(n=0,o=a[i].length;n<o;n++)ot.event.add(e,i,a[i][n])}r.data&&(r.data=ot.extend({},r.data))}}function x(t,e){var i,n,o;if(1===e.nodeType){if(i=e.nodeName.toLowerCase(),!it.noCloneEvent&&e[ot.expando]){o=ot._data(e);for(n in o.events)ot.removeEvent(e,n,o.handle);e.removeAttribute(ot.expando)}"script"===i&&e.text!==t.text?(y(e).text=t.text,b(e)):"object"===i?(e.parentNode&&(e.outerHTML=t.outerHTML),it.html5Clone&&t.innerHTML&&!ot.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===i&&Mt.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===i?e.defaultSelected=e.selected=t.defaultSelected:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}}function C(e,i){var n,o=ot(i.createElement(e)).appendTo(i.body),s=t.getDefaultComputedStyle&&(n=t.getDefaultComputedStyle(o[0]))?n.display:ot.css(o[0],"display");return o.detach(),s}function E(t){var e=ft,i=Kt[t];return i||(i=C(t,e),"none"!==i&&i||(Jt=(Jt||ot("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=(Jt[0].contentWindow||Jt[0].contentDocument).document,e.write(),e.close(),i=C(t,e),Jt.detach()),Kt[t]=i),i}function k(t,e){return{get:function(){var i=t();if(null!=i)return i?void delete this.get:(this.get=e).apply(this,arguments)}}}function T(t,e){if(e in t)return e;for(var i=e.charAt(0).toUpperCase()+e.slice(1),n=e,o=de.length;o--;)if(e=de[o]+i,e in t)return e;return n}function L(t,e){for(var i,n,o,s=[],r=0,a=t.length;r<a;r++)n=t[r],n.style&&(s[r]=ot._data(n,"olddisplay"),i=n.style.display,e?(s[r]||"none"!==i||(n.style.display=""),""===n.style.display&&Lt(n)&&(s[r]=ot._data(n,"olddisplay",E(n.nodeName)))):(o=Lt(n),(i&&"none"!==i||!o)&&ot._data(n,"olddisplay",o?i:ot.css(n,"display"))));for(r=0;r<a;r++)n=t[r],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?s[r]||"":"none"));return t}function D(t,e,i){var n=le.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function M(t,e,i,n,o){for(var s=i===(n?"border":"content")?4:"width"===e?1:0,r=0;s<4;s+=2)"margin"===i&&(r+=ot.css(t,i+Tt[s],!0,o)),n?("content"===i&&(r-=ot.css(t,"padding"+Tt[s],!0,o)),"margin"!==i&&(r-=ot.css(t,"border"+Tt[s]+"Width",!0,o))):(r+=ot.css(t,"padding"+Tt[s],!0,o),"padding"!==i&&(r+=ot.css(t,"border"+Tt[s]+"Width",!0,o)));return r}function P(t,e,i){var n=!0,o="width"===e?t.offsetWidth:t.offsetHeight,s=te(t),r=it.boxSizing&&"border-box"===ot.css(t,"boxSizing",!1,s);if(o<=0||null==o){if(o=ee(t,e,s),(o<0||null==o)&&(o=t.style[e]),ne.test(o))return o;n=r&&(it.boxSizingReliable()||o===t.style[e]),o=parseFloat(o)||0}return o+M(t,e,i||(r?"border":"content"),n,s)+"px"}function j(t,e,i,n,o){return new j.prototype.init(t,e,i,n,o)}function A(){return setTimeout(function(){pe=void 0}),pe=ot.now()}function F(t,e){var i,n={height:t},o=0;for(e=e?1:0;o<4;o+=2-e)i=Tt[o],n["margin"+i]=n["padding"+i]=t;return e&&(n.opacity=n.width=t),n}function $(t,e,i){for(var n,o=(ye[e]||[]).concat(ye["*"]),s=0,r=o.length;s<r;s++)if(n=o[s].call(i,e,t))return n}function O(t,e,i){var n,o,s,r,a,l,u,c,h=this,d={},p=t.style,f=t.nodeType&&Lt(t),m=ot._data(t,"fxshow");i.queue||(a=ot._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,ot.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],u=ot.css(t,"display"),c="none"===u?ot._data(t,"olddisplay")||E(t.nodeName):u,"inline"===c&&"none"===ot.css(t,"float")&&(it.inlineBlockNeedsLayout&&"inline"!==E(t.nodeName)?p.zoom=1:p.display="inline-block")),i.overflow&&(p.overflow="hidden",it.shrinkWrapBlocks()||h.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(n in e)if(o=e[n],me.exec(o)){if(delete e[n],s=s||"toggle"===o,o===(f?"hide":"show")){if("show"!==o||!m||void 0===m[n])continue;f=!0}d[n]=m&&m[n]||ot.style(t,n)}else u=void 0;if(ot.isEmptyObject(d))"inline"===("none"===u?E(t.nodeName):u)&&(p.display=u);else{m?"hidden"in m&&(f=m.hidden):m=ot._data(t,"fxshow",{}),s&&(m.hidden=!f),f?ot(t).show():h.done(function(){ot(t).hide()}),h.done(function(){var e;ot._removeData(t,"fxshow");for(e in d)ot.style(t,e,d[e])});for(n in d)r=$(f?m[n]:0,n,h),n in m||(m[n]=r.start,f&&(r.end=r.start,r.start="width"===n||"height"===n?1:0))}}function N(t,e){var i,n,o,s,r;for(i in t)if(n=ot.camelCase(i),o=e[n],s=t[i],ot.isArray(s)&&(o=s[1],s=t[i]=s[0]),i!==n&&(t[n]=s,delete t[i]),r=ot.cssHooks[n],r&&"expand"in r){s=r.expand(s),delete t[n];for(i in s)i in t||(t[i]=s[i],e[i]=o)}else e[n]=o}function I(t,e,i){var n,o,s=0,r=_e.length,a=ot.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=pe||A(),i=Math.max(0,u.startTime+u.duration-e),n=i/u.duration||0,s=1-n,r=0,l=u.tweens.length;r<l;r++)u.tweens[r].run(s);return a.notifyWith(t,[u,s,i]),s<1&&l?i:(a.resolveWith(t,[u]),!1)},u=a.promise({elem:t,props:ot.extend({},e),opts:ot.extend(!0,{specialEasing:{}},i),originalProperties:e,originalOptions:i,startTime:pe||A(),duration:i.duration,tweens:[],createTween:function(e,i){var n=ot.Tween(t,u.opts,e,i,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(n),n},stop:function(e){var i=0,n=e?u.tweens.length:0;if(o)return this;for(o=!0;i<n;i++)u.tweens[i].run(1);return e?a.resolveWith(t,[u,e]):a.rejectWith(t,[u,e]),this}}),c=u.props;for(N(c,u.opts.specialEasing);s<r;s++)if(n=_e[s].call(u,t,c,u.opts))return n;return ot.map(c,$,u),ot.isFunction(u.opts.start)&&u.opts.start.call(t,u),ot.fx.timer(ot.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function R(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,o=0,s=e.toLowerCase().match(yt)||[];if(ot.isFunction(i))for(;n=s[o++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function B(t,e,i,n){function o(a){var l;return s[a]=!0,ot.each(t[a]||[],function(t,a){var u=a(e,i,n);return"string"!=typeof u||r||s[u]?r?!(l=u):void 0:(e.dataTypes.unshift(u),o(u),!1)}),l}var s={},r=t===Ue;return o(e.dataTypes[0])||!s["*"]&&o("*")}function H(t,e){var i,n,o=ot.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((o[n]?t:i||(i={}))[n]=e[n]);return i&&ot.extend(!0,t,i),t}function z(t,e,i){for(var n,o,s,r,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===o&&(o=t.mimeType||e.getResponseHeader("Content-Type"));if(o)for(r in a)if(a[r]&&a[r].test(o)){l.unshift(r);break}if(l[0]in i)s=l[0];else{for(r in i){if(!l[0]||t.converters[r+" "+l[0]]){s=r;break}n||(n=r)}s=s||n}if(s)return s!==l[0]&&l.unshift(s),i[s]}function U(t,e,i,n){var o,s,r,a,l,u={},c=t.dataTypes.slice();if(c[1])for(r in t.converters)u[r.toLowerCase()]=t.converters[r];for(s=c.shift();s;)if(t.responseFields[s]&&(i[t.responseFields[s]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=s,s=c.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(r=u[l+" "+s]||u["* "+s],!r)for(o in u)if(a=o.split(" "),a[1]===s&&(r=u[l+" "+a[0]]||u["* "+a[0]])){r===!0?r=u[o]:u[o]!==!0&&(s=a[0],c.unshift(a[1]));break}if(r!==!0)if(r&&t["throws"])e=r(e);else try{e=r(e)}catch(t){return{state:"parsererror",error:r?t:"No conversion from "+l+" to "+s}}}return{state:"success",data:e}}function W(t,e,i,n){var o;if(ot.isArray(e))ot.each(e,function(e,o){i||Ge.test(t)?n(t,o):W(t+"["+("object"==typeof o?e:"")+"]",o,i,n)});else if(i||"object"!==ot.type(e))n(t,e);else for(o in e)W(t+"["+o+"]",e[o],i,n)}function q(){try{return new t.XMLHttpRequest}catch(t){}}function G(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Z(t){return ot.isWindow(t)?t:9===t.nodeType&&(t.defaultView||t.parentWindow)}var V=[],Y=V.slice,X=V.concat,Q=V.push,J=V.indexOf,K={},tt=K.toString,et=K.hasOwnProperty,it={},nt="1.11.1",ot=function(t,e){return new ot.fn.init(t,e)},st=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rt=/^-ms-/,at=/-([\da-z])/gi,lt=function(t,e){return e.toUpperCase()};ot.fn=ot.prototype={jquery:nt,constructor:ot,selector:"",length:0,toArray:function(){return Y.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:Y.call(this)},pushStack:function(t){var e=ot.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return ot.each(this,t,e)},map:function(t){return this.pushStack(ot.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(Y.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(i>=0&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Q,sort:V.sort,splice:V.splice},ot.extend=ot.fn.extend=function(){var t,e,i,n,o,s,r=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"==typeof r&&(u=r,r=arguments[a]||{},a++),"object"==typeof r||ot.isFunction(r)||(r={}),a===l&&(r=this,a--);a<l;a++)if(null!=(o=arguments[a]))for(n in o)t=r[n],i=o[n],r!==i&&(u&&i&&(ot.isPlainObject(i)||(e=ot.isArray(i)))?(e?(e=!1,s=t&&ot.isArray(t)?t:[]):s=t&&ot.isPlainObject(t)?t:{},r[n]=ot.extend(u,s,i)):void 0!==i&&(r[n]=i));return r},ot.extend({expando:"jQuery"+(nt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===ot.type(t)},isArray:Array.isArray||function(t){return"array"===ot.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!ot.isArray(t)&&t-parseFloat(t)>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==ot.type(t)||t.nodeType||ot.isWindow(t))return!1;try{if(t.constructor&&!et.call(t,"constructor")&&!et.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}if(it.ownLast)for(e in t)return et.call(t,e);for(e in t);return void 0===e||et.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?K[tt.call(t)]||"object":typeof t},globalEval:function(e){e&&ot.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(rt,"ms-").replace(at,lt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var o,s=0,r=t.length,a=i(t);if(n){if(a)for(;s<r&&(o=e.apply(t[s],n),o!==!1);s++);else for(s in t)if(o=e.apply(t[s],n),o===!1)break}else if(a)for(;s<r&&(o=e.call(t[s],s,t[s]),o!==!1);s++);else for(s in t)if(o=e.call(t[s],s,t[s]),o===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(st,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?ot.merge(n,"string"==typeof t?[t]:t):Q.call(n,t)),n},inArray:function(t,e,i){var n;if(e){if(J)return J.call(e,t,i);for(n=e.length,i=i?i<0?Math.max(0,n+i):i:0;i<n;i++)if(i in e&&e[i]===t)return i}return-1},merge:function(t,e){for(var i=+e.length,n=0,o=t.length;n<i;)t[o++]=e[n++];if(i!==i)for(;void 0!==e[n];)t[o++]=e[n++];return t.length=o,t},grep:function(t,e,i){for(var n,o=[],s=0,r=t.length,a=!i;s<r;s++)n=!e(t[s],s),n!==a&&o.push(t[s]);return o},map:function(t,e,n){var o,s=0,r=t.length,a=i(t),l=[];if(a)for(;s<r;s++)o=e(t[s],s,n),null!=o&&l.push(o);else for(s in t)o=e(t[s],s,n),null!=o&&l.push(o);return X.apply([],l)},guid:1,proxy:function(t,e){var i,n,o;if("string"==typeof e&&(o=t[e],e=t,t=o),ot.isFunction(t))return i=Y.call(arguments,2),n=function(){return t.apply(e||this,i.concat(Y.call(arguments)))},n.guid=t.guid=t.guid||ot.guid++,n},now:function(){return+new Date},support:it}),ot.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){K["[object "+e+"]"]=e.toLowerCase()});var ut=function(t){function e(t,e,i,n){var o,s,r,a,l,u,h,p,f,m;if((e?e.ownerDocument||e:B)!==j&&P(e),e=e||j,i=i||[],!t||"string"!=typeof t)return i;if(1!==(a=e.nodeType)&&9!==a)return[];if(F&&!n){if(o=_t.exec(t))if(r=o[1]){if(9===a){if(s=e.getElementById(r),!s||!s.parentNode)return i;if(s.id===r)return i.push(s),i}else if(e.ownerDocument&&(s=e.ownerDocument.getElementById(r))&&I(e,s)&&s.id===r)return i.push(s),i}else{if(o[2])return K.apply(i,e.getElementsByTagName(t)),i;if((r=o[3])&&w.getElementsByClassName&&e.getElementsByClassName)return K.apply(i,e.getElementsByClassName(r)),i}if(w.qsa&&(!$||!$.test(t))){if(p=h=R,f=e,m=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(u=E(t),(h=e.getAttribute("id"))?p=h.replace(bt,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",l=u.length;l--;)u[l]=p+d(u[l]);f=yt.test(t)&&c(e.parentNode)||e,m=u.join(",")}if(m)try{return K.apply(i,f.querySelectorAll(m)),i}catch(t){}finally{h||e.removeAttribute("id")}}}return T(t.replace(lt,"$1"),e,i,n)}function i(){function t(i,n){return e.push(i+" ")>S.cacheLength&&delete t[e.shift()],t[i+" "]=n}var e=[];return t}function n(t){return t[R]=!0,t}function o(t){var e=j.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function s(t,e){for(var i=t.split("|"),n=t.length;n--;)S.attrHandle[i[n]]=e}function r(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||V)-(~t.sourceIndex||V);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function a(t){return function(e){var i=e.nodeName.toLowerCase();return"input"===i&&e.type===t}}function l(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function u(t){return n(function(e){return e=+e,n(function(i,n){for(var o,s=t([],i.length,e),r=s.length;r--;)i[o=s[r]]&&(i[o]=!(n[o]=i[o]))})})}function c(t){return t&&typeof t.getElementsByTagName!==Z&&t}function h(){}function d(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function p(t,e,i){var n=e.dir,o=i&&"parentNode"===n,s=z++;return e.first?function(e,i,s){for(;e=e[n];)if(1===e.nodeType||o)return t(e,i,s)}:function(e,i,r){var a,l,u=[H,s];if(r){for(;e=e[n];)if((1===e.nodeType||o)&&t(e,i,r))return!0}else for(;e=e[n];)if(1===e.nodeType||o){if(l=e[R]||(e[R]={}),(a=l[n])&&a[0]===H&&a[1]===s)return u[2]=a[2];if(l[n]=u,u[2]=t(e,i,r))return!0}}}function f(t){return t.length>1?function(e,i,n){for(var o=t.length;o--;)if(!t[o](e,i,n))return!1;return!0}:t[0]}function m(t,i,n){for(var o=0,s=i.length;o<s;o++)e(t,i[o],n);return n}function g(t,e,i,n,o){for(var s,r=[],a=0,l=t.length,u=null!=e;a<l;a++)(s=t[a])&&(i&&!i(s,n,o)||(r.push(s),u&&e.push(a)));return r}function v(t,e,i,o,s,r){return o&&!o[R]&&(o=v(o)),s&&!s[R]&&(s=v(s,r)),n(function(n,r,a,l){var u,c,h,d=[],p=[],f=r.length,v=n||m(e||"*",a.nodeType?[a]:a,[]),_=!t||!n&&e?v:g(v,d,t,a,l),y=i?s||(n?t:f||o)?[]:r:_;if(i&&i(_,y,a,l),o)for(u=g(y,p),o(u,[],a,l),c=u.length;c--;)(h=u[c])&&(y[p[c]]=!(_[p[c]]=h));if(n){if(s||t){if(s){for(u=[],c=y.length;c--;)(h=y[c])&&u.push(_[c]=h);s(null,y=[],u,l)}for(c=y.length;c--;)(h=y[c])&&(u=s?et.call(n,h):d[c])>-1&&(n[u]=!(r[u]=h))}}else y=g(y===r?y.splice(f,y.length):y),s?s(null,r,y,l):K.apply(r,y)})}function _(t){for(var e,i,n,o=t.length,s=S.relative[t[0].type],r=s||S.relative[" "],a=s?1:0,l=p(function(t){return t===e},r,!0),u=p(function(t){return et.call(e,t)>-1},r,!0),c=[function(t,i,n){return!s&&(n||i!==L)||((e=i).nodeType?l(t,i,n):u(t,i,n))}];a<o;a++)if(i=S.relative[t[a].type])c=[p(f(c),i)];else{if(i=S.filter[t[a].type].apply(null,t[a].matches),i[R]){for(n=++a;n<o&&!S.relative[t[n].type];n++);return v(a>1&&f(c),a>1&&d(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(lt,"$1"),i,a<n&&_(t.slice(a,n)),n<o&&_(t=t.slice(n)),n<o&&d(t))}c.push(i)}return f(c)}function y(t,i){var o=i.length>0,s=t.length>0,r=function(n,r,a,l,u){var c,h,d,p=0,f="0",m=n&&[],v=[],_=L,y=n||s&&S.find.TAG("*",u),b=H+=null==_?1:Math.random()||.1,w=y.length;for(u&&(L=r!==j&&r);f!==w&&null!=(c=y[f]);f++){if(s&&c){for(h=0;d=t[h++];)if(d(c,r,a)){l.push(c);break}u&&(H=b)}o&&((c=!d&&c)&&p--,n&&m.push(c))}if(p+=f,o&&f!==p){for(h=0;d=i[h++];)d(m,v,r,a);if(n){if(p>0)for(;f--;)m[f]||v[f]||(v[f]=Q.call(l));v=g(v)}K.apply(l,v),u&&!n&&v.length>0&&p+i.length>1&&e.uniqueSort(l)}return u&&(H=b,L=_),m};return o?n(r):r}var b,w,S,x,C,E,k,T,L,D,M,P,j,A,F,$,O,N,I,R="sizzle"+-new Date,B=t.document,H=0,z=0,U=i(),W=i(),q=i(),G=function(t,e){return t===e&&(M=!0),0},Z="undefined",V=1<<31,Y={}.hasOwnProperty,X=[],Q=X.pop,J=X.push,K=X.push,tt=X.slice,et=X.indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(this[e]===t)return e;return-1},it="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",ot="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",st=ot.replace("w","w#"),rt="\\["+nt+"*("+ot+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+st+"))|)"+nt+"*\\]",at=":("+ot+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+rt+")*)|.*)\\)|)",lt=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),ut=new RegExp("^"+nt+"*,"+nt+"*"),ct=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ht=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),dt=new RegExp(at),pt=new RegExp("^"+st+"$"),ft={ID:new RegExp("^#("+ot+")"),CLASS:new RegExp("^\\.("+ot+")"),TAG:new RegExp("^("+ot.replace("w","w*")+")"),ATTR:new RegExp("^"+rt),PSEUDO:new RegExp("^"+at),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+it+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},mt=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,vt=/^[^{]+\{\s*\[native \w/,_t=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,bt=/'|\\/g,wt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),St=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{K.apply(X=tt.call(B.childNodes),B.childNodes),X[B.childNodes.length].nodeType}catch(t){K={apply:X.length?function(t,e){J.apply(t,tt.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}w=e.support={},C=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},P=e.setDocument=function(t){var e,i=t?t.ownerDocument||t:B,n=i.defaultView;return i!==j&&9===i.nodeType&&i.documentElement?(j=i,A=i.documentElement,F=!C(i),n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",function(){P()},!1):n.attachEvent&&n.attachEvent("onunload",function(){P()})),w.attributes=o(function(t){return t.className="i",!t.getAttribute("className")}),w.getElementsByTagName=o(function(t){return t.appendChild(i.createComment("")),!t.getElementsByTagName("*").length}),w.getElementsByClassName=vt.test(i.getElementsByClassName)&&o(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),w.getById=o(function(t){return A.appendChild(t).id=R,!i.getElementsByName||!i.getElementsByName(R).length}),w.getById?(S.find.ID=function(t,e){if(typeof e.getElementById!==Z&&F){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}},S.filter.ID=function(t){var e=t.replace(wt,St);return function(t){return t.getAttribute("id")===e}}):(delete S.find.ID,S.filter.ID=function(t){var e=t.replace(wt,St);return function(t){var i=typeof t.getAttributeNode!==Z&&t.getAttributeNode("id");return i&&i.value===e}}),S.find.TAG=w.getElementsByTagName?function(t,e){if(typeof e.getElementsByTagName!==Z)return e.getElementsByTagName(t)}:function(t,e){var i,n=[],o=0,s=e.getElementsByTagName(t);if("*"===t){for(;i=s[o++];)1===i.nodeType&&n.push(i);return n}return s},S.find.CLASS=w.getElementsByClassName&&function(t,e){if(typeof e.getElementsByClassName!==Z&&F)return e.getElementsByClassName(t)},O=[],$=[],(w.qsa=vt.test(i.querySelectorAll))&&(o(function(t){t.innerHTML="<select msallowclip=''><option selected=''></option></select>",t.querySelectorAll("[msallowclip^='']").length&&$.push("[*^$]="+nt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||$.push("\\["+nt+"*(?:value|"+it+")"),t.querySelectorAll(":checked").length||$.push(":checked")}),o(function(t){var e=i.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&$.push("name"+nt+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||$.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),$.push(",.*:")})),(w.matchesSelector=vt.test(N=A.matches||A.webkitMatchesSelector||A.mozMatchesSelector||A.oMatchesSelector||A.msMatchesSelector))&&o(function(t){w.disconnectedMatch=N.call(t,"div"),N.call(t,"[s!='']:x"),O.push("!=",at)}),$=$.length&&new RegExp($.join("|")),O=O.length&&new RegExp(O.join("|")),e=vt.test(A.compareDocumentPosition),I=e||vt.test(A.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},G=e?function(t,e){if(t===e)return M=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!w.sortDetached&&e.compareDocumentPosition(t)===n?t===i||t.ownerDocument===B&&I(B,t)?-1:e===i||e.ownerDocument===B&&I(B,e)?1:D?et.call(D,t)-et.call(D,e):0:4&n?-1:1)}:function(t,e){if(t===e)return M=!0,0;var n,o=0,s=t.parentNode,a=e.parentNode,l=[t],u=[e];if(!s||!a)return t===i?-1:e===i?1:s?-1:a?1:D?et.call(D,t)-et.call(D,e):0;if(s===a)return r(t,e);for(n=t;n=n.parentNode;)l.unshift(n);for(n=e;n=n.parentNode;)u.unshift(n);for(;l[o]===u[o];)o++;return o?r(l[o],u[o]):l[o]===B?-1:u[o]===B?1:0},i):j},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==j&&P(t),i=i.replace(ht,"='$1']"),w.matchesSelector&&F&&(!O||!O.test(i))&&(!$||!$.test(i)))try{var n=N.call(t,i);if(n||w.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return e(i,j,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==j&&P(t),I(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==j&&P(t);var i=S.attrHandle[e.toLowerCase()],n=i&&Y.call(S.attrHandle,e.toLowerCase())?i(t,e,!F):void 0;return void 0!==n?n:w.attributes||!F?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],n=0,o=0;if(M=!w.detectDuplicates,D=!w.sortStable&&t.slice(0),t.sort(G),M){for(;e=t[o++];)e===t[o]&&(n=i.push(o));for(;n--;)t.splice(i[n],1)}return D=null,t},x=e.getText=function(t){var e,i="",n=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=x(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[n++];)i+=x(e);return i},S=e.selectors={cacheLength:50,createPseudo:n,match:ft,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(wt,St),t[3]=(t[3]||t[4]||t[5]||"").replace(wt,St),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return ft.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&dt.test(i)&&(e=E(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(wt,St).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=U[t+" "];return e||(e=new RegExp("(^|"+nt+")"+t+"("+nt+"|$)"))&&U(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==Z&&t.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(o){var s=e.attr(o,t);return null==s?"!="===i:!i||(s+="","="===i?s===n:"!="===i?s!==n:"^="===i?n&&0===s.indexOf(n):"*="===i?n&&s.indexOf(n)>-1:"$="===i?n&&s.slice(-n.length)===n:"~="===i?(" "+s+" ").indexOf(n)>-1:"|="===i&&(s===n||s.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,i,n,o){var s="nth"!==t.slice(0,3),r="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===o?function(t){return!!t.parentNode}:function(e,i,l){var u,c,h,d,p,f,m=s!==r?"nextSibling":"previousSibling",g=e.parentNode,v=a&&e.nodeName.toLowerCase(),_=!l&&!a;if(g){if(s){for(;m;){for(h=e;h=h[m];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[r?g.firstChild:g.lastChild],r&&_){for(c=g[R]||(g[R]={}),u=c[t]||[],p=u[0]===H&&u[1],d=u[0]===H&&u[2],h=p&&g.childNodes[p];h=++p&&h&&h[m]||(d=p=0)||f.pop();)if(1===h.nodeType&&++d&&h===e){c[t]=[H,p,d];break}}else if(_&&(u=(e[R]||(e[R]={}))[t])&&u[0]===H)d=u[1];else for(;(h=++p&&h&&h[m]||(d=p=0)||f.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++d||(_&&((h[R]||(h[R]={}))[t]=[H,d]),h!==e)););return d-=o,d===n||d%n===0&&d/n>=0}}},PSEUDO:function(t,i){var o,s=S.pseudos[t]||S.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return s[R]?s(i):s.length>1?(o=[t,t,"",i],S.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,o=s(t,i),r=o.length;r--;)n=et.call(t,o[r]),t[n]=!(e[n]=o[r])}):function(t){return s(t,0,o)}):s}},pseudos:{not:n(function(t){var e=[],i=[],o=k(t.replace(lt,"$1"));return o[R]?n(function(t,e,i,n){for(var s,r=o(t,null,n,[]),a=t.length;a--;)(s=r[a])&&(t[a]=!(e[a]=s))}):function(t,n,s){return e[0]=t,o(e,null,s,i),!i.pop()}}),has:n(function(t){return function(i){return e(t,i).length>0}}),contains:n(function(t){return function(e){return(e.textContent||e.innerText||x(e)).indexOf(t)>-1}}),lang:n(function(t){return pt.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(wt,St).toLowerCase(),function(e){var i;do if(i=F?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return i=i.toLowerCase(),i===t||0===i.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){
var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===A},focus:function(t){return t===j.activeElement&&(!j.hasFocus||j.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!S.pseudos.empty(t)},header:function(t){return gt.test(t.nodeName)},input:function(t){return mt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:u(function(){return[0]}),last:u(function(t,e){return[e-1]}),eq:u(function(t,e,i){return[i<0?i+e:i]}),even:u(function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t}),odd:u(function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t}),lt:u(function(t,e,i){for(var n=i<0?i+e:i;--n>=0;)t.push(n);return t}),gt:u(function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t})}},S.pseudos.nth=S.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})S.pseudos[b]=a(b);for(b in{submit:!0,reset:!0})S.pseudos[b]=l(b);return h.prototype=S.filters=S.pseudos,S.setFilters=new h,E=e.tokenize=function(t,i){var n,o,s,r,a,l,u,c=W[t+" "];if(c)return i?0:c.slice(0);for(a=t,l=[],u=S.preFilter;a;){n&&!(o=ut.exec(a))||(o&&(a=a.slice(o[0].length)||a),l.push(s=[])),n=!1,(o=ct.exec(a))&&(n=o.shift(),s.push({value:n,type:o[0].replace(lt," ")}),a=a.slice(n.length));for(r in S.filter)!(o=ft[r].exec(a))||u[r]&&!(o=u[r](o))||(n=o.shift(),s.push({value:n,type:r,matches:o}),a=a.slice(n.length));if(!n)break}return i?a.length:a?e.error(t):W(t,l).slice(0)},k=e.compile=function(t,e){var i,n=[],o=[],s=q[t+" "];if(!s){for(e||(e=E(t)),i=e.length;i--;)s=_(e[i]),s[R]?n.push(s):o.push(s);s=q(t,y(o,n)),s.selector=t}return s},T=e.select=function(t,e,i,n){var o,s,r,a,l,u="function"==typeof t&&t,h=!n&&E(t=u.selector||t);if(i=i||[],1===h.length){if(s=h[0]=h[0].slice(0),s.length>2&&"ID"===(r=s[0]).type&&w.getById&&9===e.nodeType&&F&&S.relative[s[1].type]){if(e=(S.find.ID(r.matches[0].replace(wt,St),e)||[])[0],!e)return i;u&&(e=e.parentNode),t=t.slice(s.shift().value.length)}for(o=ft.needsContext.test(t)?0:s.length;o--&&(r=s[o],!S.relative[a=r.type]);)if((l=S.find[a])&&(n=l(r.matches[0].replace(wt,St),yt.test(s[0].type)&&c(e.parentNode)||e))){if(s.splice(o,1),t=n.length&&d(s),!t)return K.apply(i,n),i;break}}return(u||k(t,h))(n,e,!F,i,yt.test(t)&&c(e.parentNode)||e),i},w.sortStable=R.split("").sort(G).join("")===R,w.detectDuplicates=!!M,P(),w.sortDetached=o(function(t){return 1&t.compareDocumentPosition(j.createElement("div"))}),o(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||s("type|href|height|width",function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),w.attributes&&o(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||s("value",function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),o(function(t){return null==t.getAttribute("disabled")})||s(it,function(t,e,i){var n;if(!i)return t[e]===!0?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(t);ot.find=ut,ot.expr=ut.selectors,ot.expr[":"]=ot.expr.pseudos,ot.unique=ut.uniqueSort,ot.text=ut.getText,ot.isXMLDoc=ut.isXML,ot.contains=ut.contains;var ct=ot.expr.match.needsContext,ht=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,dt=/^.[^:#\[\.,]*$/;ot.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?ot.find.matchesSelector(n,t)?[n]:[]:ot.find.matches(t,ot.grep(e,function(t){return 1===t.nodeType}))},ot.fn.extend({find:function(t){var e,i=[],n=this,o=n.length;if("string"!=typeof t)return this.pushStack(ot(t).filter(function(){for(e=0;e<o;e++)if(ot.contains(n[e],this))return!0}));for(e=0;e<o;e++)ot.find(t,n[e],i);return i=this.pushStack(o>1?ot.unique(i):i),i.selector=this.selector?this.selector+" "+t:t,i},filter:function(t){return this.pushStack(n(this,t||[],!1))},not:function(t){return this.pushStack(n(this,t||[],!0))},is:function(t){return!!n(this,"string"==typeof t&&ct.test(t)?ot(t):t||[],!1).length}});var pt,ft=t.document,mt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,gt=ot.fn.init=function(t,e){var i,n;if(!t)return this;if("string"==typeof t){if(i="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:mt.exec(t),!i||!i[1]&&e)return!e||e.jquery?(e||pt).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof ot?e[0]:e,ot.merge(this,ot.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:ft,!0)),ht.test(i[1])&&ot.isPlainObject(e))for(i in e)ot.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}if(n=ft.getElementById(i[2]),n&&n.parentNode){if(n.id!==i[2])return pt.find(t);this.length=1,this[0]=n}return this.context=ft,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):ot.isFunction(t)?"undefined"!=typeof pt.ready?pt.ready(t):t(ot):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),ot.makeArray(t,this))};gt.prototype=ot.fn,pt=ot(ft);var vt=/^(?:parents|prev(?:Until|All))/,_t={children:!0,contents:!0,next:!0,prev:!0};ot.extend({dir:function(t,e,i){for(var n=[],o=t[e];o&&9!==o.nodeType&&(void 0===i||1!==o.nodeType||!ot(o).is(i));)1===o.nodeType&&n.push(o),o=o[e];return n},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}}),ot.fn.extend({has:function(t){var e,i=ot(t,this),n=i.length;return this.filter(function(){for(e=0;e<n;e++)if(ot.contains(this,i[e]))return!0})},closest:function(t,e){for(var i,n=0,o=this.length,s=[],r=ct.test(t)||"string"!=typeof t?ot(t,e||this.context):0;n<o;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(r?r.index(i)>-1:1===i.nodeType&&ot.find.matchesSelector(i,t))){s.push(i);break}return this.pushStack(s.length>1?ot.unique(s):s)},index:function(t){return t?"string"==typeof t?ot.inArray(this[0],ot(t)):ot.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(ot.unique(ot.merge(this.get(),ot(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),ot.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return ot.dir(t,"parentNode")},parentsUntil:function(t,e,i){return ot.dir(t,"parentNode",i)},next:function(t){return o(t,"nextSibling")},prev:function(t){return o(t,"previousSibling")},nextAll:function(t){return ot.dir(t,"nextSibling")},prevAll:function(t){return ot.dir(t,"previousSibling")},nextUntil:function(t,e,i){return ot.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return ot.dir(t,"previousSibling",i)},siblings:function(t){return ot.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return ot.sibling(t.firstChild)},contents:function(t){return ot.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:ot.merge([],t.childNodes)}},function(t,e){ot.fn[t]=function(i,n){var o=ot.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(o=ot.filter(n,o)),this.length>1&&(_t[t]||(o=ot.unique(o)),vt.test(t)&&(o=o.reverse())),this.pushStack(o)}});var yt=/\S+/g,bt={};ot.Callbacks=function(t){t="string"==typeof t?bt[t]||s(t):ot.extend({},t);var e,i,n,o,r,a,l=[],u=!t.once&&[],c=function(s){for(i=t.memory&&s,n=!0,r=a||0,a=0,o=l.length,e=!0;l&&r<o;r++)if(l[r].apply(s[0],s[1])===!1&&t.stopOnFalse){i=!1;break}e=!1,l&&(u?u.length&&c(u.shift()):i?l=[]:h.disable())},h={add:function(){if(l){var n=l.length;!function e(i){ot.each(i,function(i,n){var o=ot.type(n);"function"===o?t.unique&&h.has(n)||l.push(n):n&&n.length&&"string"!==o&&e(n)})}(arguments),e?o=l.length:i&&(a=n,c(i))}return this},remove:function(){return l&&ot.each(arguments,function(t,i){for(var n;(n=ot.inArray(i,l,n))>-1;)l.splice(n,1),e&&(n<=o&&o--,n<=r&&r--)}),this},has:function(t){return t?ot.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],o=0,this},disable:function(){return l=u=i=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,i||h.disable(),this},locked:function(){return!u},fireWith:function(t,i){return!l||n&&!u||(i=i||[],i=[t,i.slice?i.slice():i],e?u.push(i):c(i)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!n}};return h},ot.extend({Deferred:function(t){var e=[["resolve","done",ot.Callbacks("once memory"),"resolved"],["reject","fail",ot.Callbacks("once memory"),"rejected"],["notify","progress",ot.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return ot.Deferred(function(i){ot.each(e,function(e,s){var r=ot.isFunction(t[e])&&t[e];o[s[1]](function(){var t=r&&r.apply(this,arguments);t&&ot.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[s[0]+"With"](this===n?i.promise():this,r?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?ot.extend(t,n):n}},o={};return n.pipe=n.then,ot.each(e,function(t,s){var r=s[2],a=s[3];n[s[1]]=r.add,a&&r.add(function(){i=a},e[1^t][2].disable,e[2][2].lock),o[s[0]]=function(){return o[s[0]+"With"](this===o?n:this,arguments),this},o[s[0]+"With"]=r.fireWith}),n.promise(o),t&&t.call(o,o),o},when:function(t){var e,i,n,o=0,s=Y.call(arguments),r=s.length,a=1!==r||t&&ot.isFunction(t.promise)?r:0,l=1===a?t:ot.Deferred(),u=function(t,i,n){return function(o){i[t]=this,n[t]=arguments.length>1?Y.call(arguments):o,n===e?l.notifyWith(i,n):--a||l.resolveWith(i,n)}};if(r>1)for(e=new Array(r),i=new Array(r),n=new Array(r);o<r;o++)s[o]&&ot.isFunction(s[o].promise)?s[o].promise().done(u(o,n,s)).fail(l.reject).progress(u(o,i,e)):--a;return a||l.resolveWith(n,s),l.promise()}});var wt;ot.fn.ready=function(t){return ot.ready.promise().done(t),this},ot.extend({isReady:!1,readyWait:1,holdReady:function(t){t?ot.readyWait++:ot.ready(!0)},ready:function(t){if(t===!0?!--ot.readyWait:!ot.isReady){if(!ft.body)return setTimeout(ot.ready);ot.isReady=!0,t!==!0&&--ot.readyWait>0||(wt.resolveWith(ft,[ot]),ot.fn.triggerHandler&&(ot(ft).triggerHandler("ready"),ot(ft).off("ready")))}}}),ot.ready.promise=function(e){if(!wt)if(wt=ot.Deferred(),"complete"===ft.readyState)setTimeout(ot.ready);else if(ft.addEventListener)ft.addEventListener("DOMContentLoaded",a,!1),t.addEventListener("load",a,!1);else{ft.attachEvent("onreadystatechange",a),t.attachEvent("onload",a);var i=!1;try{i=null==t.frameElement&&ft.documentElement}catch(t){}i&&i.doScroll&&!function t(){if(!ot.isReady){try{i.doScroll("left")}catch(e){return setTimeout(t,50)}r(),ot.ready()}}()}return wt.promise(e)};var St,xt="undefined";for(St in ot(it))break;it.ownLast="0"!==St,it.inlineBlockNeedsLayout=!1,ot(function(){var t,e,i,n;i=ft.getElementsByTagName("body")[0],i&&i.style&&(e=ft.createElement("div"),n=ft.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(e),typeof e.style.zoom!==xt&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",it.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(i.style.zoom=1)),i.removeChild(n))}),function(){var t=ft.createElement("div");if(null==it.deleteExpando){it.deleteExpando=!0;try{delete t.test}catch(t){it.deleteExpando=!1}}t=null}(),ot.acceptData=function(t){var e=ot.noData[(t.nodeName+" ").toLowerCase()],i=+t.nodeType||1;return(1===i||9===i)&&(!e||e!==!0&&t.getAttribute("classid")===e)};var Ct=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Et=/([A-Z])/g;ot.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return t=t.nodeType?ot.cache[t[ot.expando]]:t[ot.expando],!!t&&!u(t)},data:function(t,e,i){return c(t,e,i)},removeData:function(t,e){return h(t,e)},_data:function(t,e,i){return c(t,e,i,!0)},_removeData:function(t,e){return h(t,e,!0)}}),ot.fn.extend({data:function(t,e){var i,n,o,s=this[0],r=s&&s.attributes;if(void 0===t){if(this.length&&(o=ot.data(s),1===s.nodeType&&!ot._data(s,"parsedAttrs"))){for(i=r.length;i--;)r[i]&&(n=r[i].name,0===n.indexOf("data-")&&(n=ot.camelCase(n.slice(5)),l(s,n,o[n])));ot._data(s,"parsedAttrs",!0)}return o}return"object"==typeof t?this.each(function(){ot.data(this,t)}):arguments.length>1?this.each(function(){ot.data(this,t,e)}):s?l(s,t,ot.data(s,t)):void 0},removeData:function(t){return this.each(function(){ot.removeData(this,t)})}}),ot.extend({queue:function(t,e,i){var n;if(t)return e=(e||"fx")+"queue",n=ot._data(t,e),i&&(!n||ot.isArray(i)?n=ot._data(t,e,ot.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){e=e||"fx";var i=ot.queue(t,e),n=i.length,o=i.shift(),s=ot._queueHooks(t,e),r=function(){ot.dequeue(t,e)};"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===e&&i.unshift("inprogress"),delete s.stop,o.call(t,r,s)),!n&&s&&s.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return ot._data(t,i)||ot._data(t,i,{empty:ot.Callbacks("once memory").add(function(){ot._removeData(t,e+"queue"),ot._removeData(t,i)})})}}),ot.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?ot.queue(this[0],t):void 0===e?this:this.each(function(){var i=ot.queue(this,t,e);ot._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&ot.dequeue(this,t)})},dequeue:function(t){return this.each(function(){ot.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,o=ot.Deferred(),s=this,r=this.length,a=function(){--n||o.resolveWith(s,[s])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";r--;)i=ot._data(s[r],t+"queueHooks"),i&&i.empty&&(n++,i.empty.add(a));return a(),o.promise(e)}});var kt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Tt=["Top","Right","Bottom","Left"],Lt=function(t,e){return t=e||t,"none"===ot.css(t,"display")||!ot.contains(t.ownerDocument,t)},Dt=ot.access=function(t,e,i,n,o,s,r){var a=0,l=t.length,u=null==i;if("object"===ot.type(i)){o=!0;for(a in i)ot.access(t,e,a,i[a],!0,s,r)}else if(void 0!==n&&(o=!0,ot.isFunction(n)||(r=!0),u&&(r?(e.call(t,n),e=null):(u=e,e=function(t,e,i){return u.call(ot(t),i)})),e))for(;a<l;a++)e(t[a],i,r?n:n.call(t[a],a,e(t[a],i)));return o?t:u?e.call(t):l?e(t[0],i):s},Mt=/^(?:checkbox|radio)$/i;!function(){var t=ft.createElement("input"),e=ft.createElement("div"),i=ft.createDocumentFragment();if(e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",it.leadingWhitespace=3===e.firstChild.nodeType,it.tbody=!e.getElementsByTagName("tbody").length,it.htmlSerialize=!!e.getElementsByTagName("link").length,it.html5Clone="<:nav></:nav>"!==ft.createElement("nav").cloneNode(!0).outerHTML,t.type="checkbox",t.checked=!0,i.appendChild(t),it.appendChecked=t.checked,e.innerHTML="<textarea>x</textarea>",it.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,i.appendChild(e),e.innerHTML="<input type='radio' checked='checked' name='t'/>",it.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,it.noCloneEvent=!0,e.attachEvent&&(e.attachEvent("onclick",function(){it.noCloneEvent=!1}),e.cloneNode(!0).click()),null==it.deleteExpando){it.deleteExpando=!0;try{delete e.test}catch(t){it.deleteExpando=!1}}}(),function(){var e,i,n=ft.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})i="on"+e,(it[e+"Bubbles"]=i in t)||(n.setAttribute(i,"t"),it[e+"Bubbles"]=n.attributes[i].expando===!1);n=null}();var Pt=/^(?:input|select|textarea)$/i,jt=/^key/,At=/^(?:mouse|pointer|contextmenu)|click/,Ft=/^(?:focusinfocus|focusoutblur)$/,$t=/^([^.]*)(?:\.(.+)|)$/;ot.event={global:{},add:function(t,e,i,n,o){var s,r,a,l,u,c,h,d,p,f,m,g=ot._data(t);if(g){for(i.handler&&(l=i,i=l.handler,o=l.selector),i.guid||(i.guid=ot.guid++),(r=g.events)||(r=g.events={}),(c=g.handle)||(c=g.handle=function(t){return typeof ot===xt||t&&ot.event.triggered===t.type?void 0:ot.event.dispatch.apply(c.elem,arguments)},c.elem=t),e=(e||"").match(yt)||[""],a=e.length;a--;)s=$t.exec(e[a])||[],p=m=s[1],f=(s[2]||"").split(".").sort(),p&&(u=ot.event.special[p]||{},p=(o?u.delegateType:u.bindType)||p,u=ot.event.special[p]||{},h=ot.extend({type:p,origType:m,data:n,handler:i,guid:i.guid,selector:o,needsContext:o&&ot.expr.match.needsContext.test(o),namespace:f.join(".")},l),(d=r[p])||(d=r[p]=[],d.delegateCount=0,u.setup&&u.setup.call(t,n,f,c)!==!1||(t.addEventListener?t.addEventListener(p,c,!1):t.attachEvent&&t.attachEvent("on"+p,c))),u.add&&(u.add.call(t,h),h.handler.guid||(h.handler.guid=i.guid)),o?d.splice(d.delegateCount++,0,h):d.push(h),ot.event.global[p]=!0);t=null}},remove:function(t,e,i,n,o){var s,r,a,l,u,c,h,d,p,f,m,g=ot.hasData(t)&&ot._data(t);if(g&&(c=g.events)){for(e=(e||"").match(yt)||[""],u=e.length;u--;)if(a=$t.exec(e[u])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p){for(h=ot.event.special[p]||{},p=(n?h.delegateType:h.bindType)||p,d=c[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=s=d.length;s--;)r=d[s],!o&&m!==r.origType||i&&i.guid!==r.guid||a&&!a.test(r.namespace)||n&&n!==r.selector&&("**"!==n||!r.selector)||(d.splice(s,1),r.selector&&d.delegateCount--,h.remove&&h.remove.call(t,r));l&&!d.length&&(h.teardown&&h.teardown.call(t,f,g.handle)!==!1||ot.removeEvent(t,p,g.handle),delete c[p])}else for(p in c)ot.event.remove(t,p+e[u],i,n,!0);ot.isEmptyObject(c)&&(delete g.handle,ot._removeData(t,"events"))}},trigger:function(e,i,n,o){var s,r,a,l,u,c,h,d=[n||ft],p=et.call(e,"type")?e.type:e,f=et.call(e,"namespace")?e.namespace.split("."):[];if(a=c=n=n||ft,3!==n.nodeType&&8!==n.nodeType&&!Ft.test(p+ot.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),r=p.indexOf(":")<0&&"on"+p,e=e[ot.expando]?e:new ot.Event(p,"object"==typeof e&&e),e.isTrigger=o?2:3,e.namespace=f.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:ot.makeArray(i,[e]),u=ot.event.special[p]||{},o||!u.trigger||u.trigger.apply(n,i)!==!1)){if(!o&&!u.noBubble&&!ot.isWindow(n)){for(l=u.delegateType||p,Ft.test(l+p)||(a=a.parentNode);a;a=a.parentNode)d.push(a),c=a;c===(n.ownerDocument||ft)&&d.push(c.defaultView||c.parentWindow||t)}for(h=0;(a=d[h++])&&!e.isPropagationStopped();)e.type=h>1?l:u.bindType||p,s=(ot._data(a,"events")||{})[e.type]&&ot._data(a,"handle"),s&&s.apply(a,i),s=r&&a[r],s&&s.apply&&ot.acceptData(a)&&(e.result=s.apply(a,i),e.result===!1&&e.preventDefault());if(e.type=p,!o&&!e.isDefaultPrevented()&&(!u._default||u._default.apply(d.pop(),i)===!1)&&ot.acceptData(n)&&r&&n[p]&&!ot.isWindow(n)){c=n[r],c&&(n[r]=null),ot.event.triggered=p;try{n[p]()}catch(t){}ot.event.triggered=void 0,c&&(n[r]=c)}return e.result}},dispatch:function(t){t=ot.event.fix(t);var e,i,n,o,s,r=[],a=Y.call(arguments),l=(ot._data(this,"events")||{})[t.type]||[],u=ot.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,t)!==!1){for(r=ot.event.handlers.call(this,t,l),e=0;(o=r[e++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,s=0;(n=o.handlers[s++])&&!t.isImmediatePropagationStopped();)t.namespace_re&&!t.namespace_re.test(n.namespace)||(t.handleObj=n,t.data=n.data,i=((ot.event.special[n.origType]||{}).handle||n.handler).apply(o.elem,a),void 0!==i&&(t.result=i)===!1&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,o,s,r=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==t.type)){for(o=[],s=0;s<a;s++)n=e[s],i=n.selector+" ",void 0===o[i]&&(o[i]=n.needsContext?ot(i,this).index(l)>=0:ot.find(i,this,null,[l]).length),o[i]&&o.push(n);o.length&&r.push({elem:l,handlers:o})}return a<e.length&&r.push({elem:this,handlers:e.slice(a)}),r},fix:function(t){if(t[ot.expando])return t;var e,i,n,o=t.type,s=t,r=this.fixHooks[o];for(r||(this.fixHooks[o]=r=At.test(o)?this.mouseHooks:jt.test(o)?this.keyHooks:{}),n=r.props?this.props.concat(r.props):this.props,t=new ot.Event(s),e=n.length;e--;)i=n[e],t[i]=s[i];return t.target||(t.target=s.srcElement||ft),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,r.filter?r.filter(t,s):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,o,s=e.button,r=e.fromElement;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||ft,o=n.documentElement,i=n.body,t.pageX=e.clientX+(o&&o.scrollLeft||i&&i.scrollLeft||0)-(o&&o.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(o&&o.scrollTop||i&&i.scrollTop||0)-(o&&o.clientTop||i&&i.clientTop||0)),!t.relatedTarget&&r&&(t.relatedTarget=r===t.target?e.toElement:r),t.which||void 0===s||(t.which=1&s?1:2&s?3:4&s?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==f()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){if(this===f()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(ot.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(t){return ot.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i,n){var o=ot.extend(new ot.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?ot.event.trigger(o,null,e):ot.event.dispatch.call(e,o),o.isDefaultPrevented()&&i.preventDefault()}},ot.removeEvent=ft.removeEventListener?function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)}:function(t,e,i){var n="on"+e;t.detachEvent&&(typeof t[n]===xt&&(t[n]=null),t.detachEvent(n,i))},ot.Event=function(t,e){return this instanceof ot.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?d:p):this.type=t,e&&ot.extend(this,e),this.timeStamp=t&&t.timeStamp||ot.now(),void(this[ot.expando]=!0)):new ot.Event(t,e)},ot.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=d,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=d,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=d,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},ot.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){ot.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,o=t.relatedTarget,s=t.handleObj;return o&&(o===n||ot.contains(n,o))||(t.type=s.origType,i=s.handler.apply(this,arguments),t.type=e),i}}}),it.submitBubbles||(ot.event.special.submit={setup:function(){return!ot.nodeName(this,"form")&&void ot.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,i=ot.nodeName(e,"input")||ot.nodeName(e,"button")?e.form:void 0;i&&!ot._data(i,"submitBubbles")&&(ot.event.add(i,"submit._submit",function(t){t._submit_bubble=!0}),ot._data(i,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&ot.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return!ot.nodeName(this,"form")&&void ot.event.remove(this,"._submit")}}),it.changeBubbles||(ot.event.special.change={setup:function(){return Pt.test(this.nodeName)?("checkbox"!==this.type&&"radio"!==this.type||(ot.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),ot.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),ot.event.simulate("change",this,t,!0)})),!1):void ot.event.add(this,"beforeactivate._change",function(t){var e=t.target;Pt.test(e.nodeName)&&!ot._data(e,"changeBubbles")&&(ot.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||ot.event.simulate("change",this.parentNode,t,!0)}),ot._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;if(this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type)return t.handleObj.handler.apply(this,arguments)},teardown:function(){return ot.event.remove(this,"._change"),!Pt.test(this.nodeName)}}),it.focusinBubbles||ot.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){ot.event.simulate(e,t.target,ot.event.fix(t),!0)};ot.event.special[e]={setup:function(){var n=this.ownerDocument||this,o=ot._data(n,e);o||n.addEventListener(t,i,!0),ot._data(n,e,(o||0)+1)},teardown:function(){var n=this.ownerDocument||this,o=ot._data(n,e)-1;o?ot._data(n,e,o):(n.removeEventListener(t,i,!0),ot._removeData(n,e))}}}),ot.fn.extend({on:function(t,e,i,n,o){var s,r;if("object"==typeof t){"string"!=typeof e&&(i=i||e,e=void 0);for(s in t)this.on(s,e,i,t[s],o);return this}if(null==i&&null==n?(n=e,i=e=void 0):null==n&&("string"==typeof e?(n=i,i=void 0):(n=i,i=e,e=void 0)),n===!1)n=p;else if(!n)return this;return 1===o&&(r=n,n=function(t){return ot().off(t),r.apply(this,arguments)},n.guid=r.guid||(r.guid=ot.guid++)),this.each(function(){ot.event.add(this,t,n,i,e)})},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,e,i){var n,o;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,ot(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(o in t)this.off(o,e,t[o]);return this}return e!==!1&&"function"!=typeof e||(i=e,e=void 0),i===!1&&(i=p),this.each(function(){ot.event.remove(this,t,i,e)})},trigger:function(t,e){return this.each(function(){ot.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];if(i)return ot.event.trigger(t,e,i,!0)}});var Ot="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Nt=/ jQuery\d+="(?:null|\d+)"/g,It=new RegExp("<(?:"+Ot+")[\\s/>]","i"),Rt=/^\s+/,Bt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ht=/<([\w:]+)/,zt=/<tbody/i,Ut=/<|&#?\w+;/,Wt=/<(?:script|style|link)/i,qt=/checked\s*(?:[^=]|=\s*.checked.)/i,Gt=/^$|\/(?:java|ecma)script/i,Zt=/^true\/(.*)/,Vt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Yt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:it.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Xt=m(ft),Qt=Xt.appendChild(ft.createElement("div"));Yt.optgroup=Yt.option,Yt.tbody=Yt.tfoot=Yt.colgroup=Yt.caption=Yt.thead,Yt.th=Yt.td,ot.extend({clone:function(t,e,i){var n,o,s,r,a,l=ot.contains(t.ownerDocument,t);if(it.html5Clone||ot.isXMLDoc(t)||!It.test("<"+t.nodeName+">")?s=t.cloneNode(!0):(Qt.innerHTML=t.outerHTML,Qt.removeChild(s=Qt.firstChild)),!(it.noCloneEvent&&it.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||ot.isXMLDoc(t)))for(n=g(s),a=g(t),r=0;null!=(o=a[r]);++r)n[r]&&x(o,n[r]);if(e)if(i)for(a=a||g(t),n=n||g(s),r=0;null!=(o=a[r]);r++)S(o,n[r]);else S(t,s);return n=g(s,"script"),n.length>0&&w(n,!l&&g(t,"script")),n=a=o=null,s},buildFragment:function(t,e,i,n){for(var o,s,r,a,l,u,c,h=t.length,d=m(e),p=[],f=0;f<h;f++)if(s=t[f],s||0===s)if("object"===ot.type(s))ot.merge(p,s.nodeType?[s]:s);else if(Ut.test(s)){for(a=a||d.appendChild(e.createElement("div")),l=(Ht.exec(s)||["",""])[1].toLowerCase(),c=Yt[l]||Yt._default,a.innerHTML=c[1]+s.replace(Bt,"<$1></$2>")+c[2],o=c[0];o--;)a=a.lastChild;if(!it.leadingWhitespace&&Rt.test(s)&&p.push(e.createTextNode(Rt.exec(s)[0])),!it.tbody)for(s="table"!==l||zt.test(s)?"<table>"!==c[1]||zt.test(s)?0:a:a.firstChild,o=s&&s.childNodes.length;o--;)ot.nodeName(u=s.childNodes[o],"tbody")&&!u.childNodes.length&&s.removeChild(u);for(ot.merge(p,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=d.lastChild}else p.push(e.createTextNode(s));for(a&&d.removeChild(a),it.appendChecked||ot.grep(g(p,"input"),v),f=0;s=p[f++];)if((!n||ot.inArray(s,n)===-1)&&(r=ot.contains(s.ownerDocument,s),a=g(d.appendChild(s),"script"),r&&w(a),i))for(o=0;s=a[o++];)Gt.test(s.type||"")&&i.push(s);return a=null,d},cleanData:function(t,e){for(var i,n,o,s,r=0,a=ot.expando,l=ot.cache,u=it.deleteExpando,c=ot.event.special;null!=(i=t[r]);r++)if((e||ot.acceptData(i))&&(o=i[a],s=o&&l[o])){if(s.events)for(n in s.events)c[n]?ot.event.remove(i,n):ot.removeEvent(i,n,s.handle);l[o]&&(delete l[o],u?delete i[a]:typeof i.removeAttribute!==xt?i.removeAttribute(a):i[a]=null,V.push(o))}}}),ot.fn.extend({text:function(t){return Dt(this,function(t){return void 0===t?ot.text(this):this.empty().append((this[0]&&this[0].ownerDocument||ft).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=_(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=_(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var i,n=t?ot.filter(t,this):this,o=0;null!=(i=n[o]);o++)e||1!==i.nodeType||ot.cleanData(g(i)),i.parentNode&&(e&&ot.contains(i.ownerDocument,i)&&w(g(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&ot.cleanData(g(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&ot.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return ot.clone(this,t,e)})},html:function(t){return Dt(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(Nt,""):void 0;if("string"==typeof t&&!Wt.test(t)&&(it.htmlSerialize||!It.test(t))&&(it.leadingWhitespace||!Rt.test(t))&&!Yt[(Ht.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Bt,"<$1></$2>");try{for(;i<n;i++)e=this[i]||{},1===e.nodeType&&(ot.cleanData(g(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,ot.cleanData(g(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=X.apply([],t);var i,n,o,s,r,a,l=0,u=this.length,c=this,h=u-1,d=t[0],p=ot.isFunction(d);if(p||u>1&&"string"==typeof d&&!it.checkClone&&qt.test(d))return this.each(function(i){var n=c.eq(i);p&&(t[0]=d.call(this,i,n.html())),n.domManip(t,e)});if(u&&(a=ot.buildFragment(t,this[0].ownerDocument,!1,this),i=a.firstChild,1===a.childNodes.length&&(a=i),i)){for(s=ot.map(g(a,"script"),y),o=s.length;l<u;l++)n=a,l!==h&&(n=ot.clone(n,!0,!0),o&&ot.merge(s,g(n,"script"))),e.call(this[l],n,l);if(o)for(r=s[s.length-1].ownerDocument,ot.map(s,b),l=0;l<o;l++)n=s[l],Gt.test(n.type||"")&&!ot._data(n,"globalEval")&&ot.contains(r,n)&&(n.src?ot._evalUrl&&ot._evalUrl(n.src):ot.globalEval((n.text||n.textContent||n.innerHTML||"").replace(Vt,"")));a=i=null}return this}}),ot.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){ot.fn[t]=function(t){for(var i,n=0,o=[],s=ot(t),r=s.length-1;n<=r;n++)i=n===r?this:this.clone(!0),ot(s[n])[e](i),Q.apply(o,i.get());return this.pushStack(o);
}});var Jt,Kt={};!function(){var t;it.shrinkWrapBlocks=function(){if(null!=t)return t;t=!1;var e,i,n;return i=ft.getElementsByTagName("body")[0],i&&i.style?(e=ft.createElement("div"),n=ft.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(e),typeof e.style.zoom!==xt&&(e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",e.appendChild(ft.createElement("div")).style.width="5px",t=3!==e.offsetWidth),i.removeChild(n),t):void 0}}();var te,ee,ie=/^margin/,ne=new RegExp("^("+kt+")(?!px)[a-z%]+$","i"),oe=/^(top|right|bottom|left)$/;t.getComputedStyle?(te=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)},ee=function(t,e,i){var n,o,s,r,a=t.style;return i=i||te(t),r=i?i.getPropertyValue(e)||i[e]:void 0,i&&(""!==r||ot.contains(t.ownerDocument,t)||(r=ot.style(t,e)),ne.test(r)&&ie.test(e)&&(n=a.width,o=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=i.width,a.width=n,a.minWidth=o,a.maxWidth=s)),void 0===r?r:r+""}):ft.documentElement.currentStyle&&(te=function(t){return t.currentStyle},ee=function(t,e,i){var n,o,s,r,a=t.style;return i=i||te(t),r=i?i[e]:void 0,null==r&&a&&a[e]&&(r=a[e]),ne.test(r)&&!oe.test(e)&&(n=a.left,o=t.runtimeStyle,s=o&&o.left,s&&(o.left=t.currentStyle.left),a.left="fontSize"===e?"1em":r,r=a.pixelLeft+"px",a.left=n,s&&(o.left=s)),void 0===r?r:r+""||"auto"}),function(){function e(){var e,i,n,o;i=ft.getElementsByTagName("body")[0],i&&i.style&&(e=ft.createElement("div"),n=ft.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(e),e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s=r=!1,l=!0,t.getComputedStyle&&(s="1%"!==(t.getComputedStyle(e,null)||{}).top,r="4px"===(t.getComputedStyle(e,null)||{width:"4px"}).width,o=e.appendChild(ft.createElement("div")),o.style.cssText=e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",o.style.marginRight=o.style.width="0",e.style.width="1px",l=!parseFloat((t.getComputedStyle(o,null)||{}).marginRight)),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=e.getElementsByTagName("td"),o[0].style.cssText="margin:0;border:0;padding:0;display:none",a=0===o[0].offsetHeight,a&&(o[0].style.display="",o[1].style.display="none",a=0===o[0].offsetHeight),i.removeChild(n))}var i,n,o,s,r,a,l;i=ft.createElement("div"),i.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",o=i.getElementsByTagName("a")[0],n=o&&o.style,n&&(n.cssText="float:left;opacity:.5",it.opacity="0.5"===n.opacity,it.cssFloat=!!n.cssFloat,i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",it.clearCloneStyle="content-box"===i.style.backgroundClip,it.boxSizing=""===n.boxSizing||""===n.MozBoxSizing||""===n.WebkitBoxSizing,ot.extend(it,{reliableHiddenOffsets:function(){return null==a&&e(),a},boxSizingReliable:function(){return null==r&&e(),r},pixelPosition:function(){return null==s&&e(),s},reliableMarginRight:function(){return null==l&&e(),l}}))}(),ot.swap=function(t,e,i,n){var o,s,r={};for(s in e)r[s]=t.style[s],t.style[s]=e[s];o=i.apply(t,n||[]);for(s in e)t.style[s]=r[s];return o};var se=/alpha\([^)]*\)/i,re=/opacity\s*=\s*([^)]*)/,ae=/^(none|table(?!-c[ea]).+)/,le=new RegExp("^("+kt+")(.*)$","i"),ue=new RegExp("^([+-])=("+kt+")","i"),ce={position:"absolute",visibility:"hidden",display:"block"},he={letterSpacing:"0",fontWeight:"400"},de=["Webkit","O","Moz","ms"];ot.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=ee(t,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":it.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,s,r,a=ot.camelCase(e),l=t.style;if(e=ot.cssProps[a]||(ot.cssProps[a]=T(l,a)),r=ot.cssHooks[e]||ot.cssHooks[a],void 0===i)return r&&"get"in r&&void 0!==(o=r.get(t,!1,n))?o:l[e];if(s=typeof i,"string"===s&&(o=ue.exec(i))&&(i=(o[1]+1)*o[2]+parseFloat(ot.css(t,e)),s="number"),null!=i&&i===i&&("number"!==s||ot.cssNumber[a]||(i+="px"),it.clearCloneStyle||""!==i||0!==e.indexOf("background")||(l[e]="inherit"),!(r&&"set"in r&&void 0===(i=r.set(t,i,n)))))try{l[e]=i}catch(t){}}},css:function(t,e,i,n){var o,s,r,a=ot.camelCase(e);return e=ot.cssProps[a]||(ot.cssProps[a]=T(t.style,a)),r=ot.cssHooks[e]||ot.cssHooks[a],r&&"get"in r&&(s=r.get(t,!0,i)),void 0===s&&(s=ee(t,e,n)),"normal"===s&&e in he&&(s=he[e]),""===i||i?(o=parseFloat(s),i===!0||ot.isNumeric(o)?o||0:s):s}}),ot.each(["height","width"],function(t,e){ot.cssHooks[e]={get:function(t,i,n){if(i)return ae.test(ot.css(t,"display"))&&0===t.offsetWidth?ot.swap(t,ce,function(){return P(t,e,n)}):P(t,e,n)},set:function(t,i,n){var o=n&&te(t);return D(t,i,n?M(t,e,n,it.boxSizing&&"border-box"===ot.css(t,"boxSizing",!1,o),o):0)}}}),it.opacity||(ot.cssHooks.opacity={get:function(t,e){return re.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var i=t.style,n=t.currentStyle,o=ot.isNumeric(e)?"alpha(opacity="+100*e+")":"",s=n&&n.filter||i.filter||"";i.zoom=1,(e>=1||""===e)&&""===ot.trim(s.replace(se,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===e||n&&!n.filter)||(i.filter=se.test(s)?s.replace(se,o):s+" "+o)}}),ot.cssHooks.marginRight=k(it.reliableMarginRight,function(t,e){if(e)return ot.swap(t,{display:"inline-block"},ee,[t,"marginRight"])}),ot.each({margin:"",padding:"",border:"Width"},function(t,e){ot.cssHooks[t+e]={expand:function(i){for(var n=0,o={},s="string"==typeof i?i.split(" "):[i];n<4;n++)o[t+Tt[n]+e]=s[n]||s[n-2]||s[0];return o}},ie.test(t)||(ot.cssHooks[t+e].set=D)}),ot.fn.extend({css:function(t,e){return Dt(this,function(t,e,i){var n,o,s={},r=0;if(ot.isArray(e)){for(n=te(t),o=e.length;r<o;r++)s[e[r]]=ot.css(t,e[r],!1,n);return s}return void 0!==i?ot.style(t,e,i):ot.css(t,e)},t,e,arguments.length>1)},show:function(){return L(this,!0)},hide:function(){return L(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Lt(this)?ot(this).show():ot(this).hide()})}}),ot.Tween=j,j.prototype={constructor:j,init:function(t,e,i,n,o,s){this.elem=t,this.prop=i,this.easing=o||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=s||(ot.cssNumber[i]?"":"px")},cur:function(){var t=j.propHooks[this.prop];return t&&t.get?t.get(this):j.propHooks._default.get(this)},run:function(t){var e,i=j.propHooks[this.prop];return this.options.duration?this.pos=e=ot.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):j.propHooks._default.set(this),this}},j.prototype.init.prototype=j.prototype,j.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=ot.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){ot.fx.step[t.prop]?ot.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[ot.cssProps[t.prop]]||ot.cssHooks[t.prop])?ot.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},j.propHooks.scrollTop=j.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},ot.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},ot.fx=j.prototype.init,ot.fx.step={};var pe,fe,me=/^(?:toggle|show|hide)$/,ge=new RegExp("^(?:([+-])=|)("+kt+")([a-z%]*)$","i"),ve=/queueHooks$/,_e=[O],ye={"*":[function(t,e){var i=this.createTween(t,e),n=i.cur(),o=ge.exec(e),s=o&&o[3]||(ot.cssNumber[t]?"":"px"),r=(ot.cssNumber[t]||"px"!==s&&+n)&&ge.exec(ot.css(i.elem,t)),a=1,l=20;if(r&&r[3]!==s){s=s||r[3],o=o||[],r=+n||1;do a=a||".5",r/=a,ot.style(i.elem,t,r+s);while(a!==(a=i.cur()/n)&&1!==a&&--l)}return o&&(r=i.start=+r||+n||0,i.unit=s,i.end=o[1]?r+(o[1]+1)*o[2]:+o[2]),i}]};ot.Animation=ot.extend(I,{tweener:function(t,e){ot.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var i,n=0,o=t.length;n<o;n++)i=t[n],ye[i]=ye[i]||[],ye[i].unshift(e)},prefilter:function(t,e){e?_e.unshift(t):_e.push(t)}}),ot.speed=function(t,e,i){var n=t&&"object"==typeof t?ot.extend({},t):{complete:i||!i&&e||ot.isFunction(t)&&t,duration:t,easing:i&&e||e&&!ot.isFunction(e)&&e};return n.duration=ot.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in ot.fx.speeds?ot.fx.speeds[n.duration]:ot.fx.speeds._default,null!=n.queue&&n.queue!==!0||(n.queue="fx"),n.old=n.complete,n.complete=function(){ot.isFunction(n.old)&&n.old.call(this),n.queue&&ot.dequeue(this,n.queue)},n},ot.fn.extend({fadeTo:function(t,e,i,n){return this.filter(Lt).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var o=ot.isEmptyObject(t),s=ot.speed(e,i,n),r=function(){var e=I(this,ot.extend({},t),s);(o||ot._data(this,"finish"))&&e.stop(!0)};return r.finish=r,o||s.queue===!1?this.each(r):this.queue(s.queue,r)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,o=null!=t&&t+"queueHooks",s=ot.timers,r=ot._data(this);if(o)r[o]&&r[o].stop&&n(r[o]);else for(o in r)r[o]&&r[o].stop&&ve.test(o)&&n(r[o]);for(o=s.length;o--;)s[o].elem!==this||null!=t&&s[o].queue!==t||(s[o].anim.stop(i),e=!1,s.splice(o,1));!e&&i||ot.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,i=ot._data(this),n=i[t+"queue"],o=i[t+"queueHooks"],s=ot.timers,r=n?n.length:0;for(i.finish=!0,ot.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;e<r;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),ot.each(["toggle","show","hide"],function(t,e){var i=ot.fn[e];ot.fn[e]=function(t,n,o){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(F(e,!0),t,n,o)}}),ot.each({slideDown:F("show"),slideUp:F("hide"),slideToggle:F("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){ot.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),ot.timers=[],ot.fx.tick=function(){var t,e=ot.timers,i=0;for(pe=ot.now();i<e.length;i++)t=e[i],t()||e[i]!==t||e.splice(i--,1);e.length||ot.fx.stop(),pe=void 0},ot.fx.timer=function(t){ot.timers.push(t),t()?ot.fx.start():ot.timers.pop()},ot.fx.interval=13,ot.fx.start=function(){fe||(fe=setInterval(ot.fx.tick,ot.fx.interval))},ot.fx.stop=function(){clearInterval(fe),fe=null},ot.fx.speeds={slow:600,fast:200,_default:400},ot.fn.delay=function(t,e){return t=ot.fx?ot.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var n=setTimeout(e,t);i.stop=function(){clearTimeout(n)}})},function(){var t,e,i,n,o;e=ft.createElement("div"),e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=e.getElementsByTagName("a")[0],i=ft.createElement("select"),o=i.appendChild(ft.createElement("option")),t=e.getElementsByTagName("input")[0],n.style.cssText="top:1px",it.getSetAttribute="t"!==e.className,it.style=/top/.test(n.getAttribute("style")),it.hrefNormalized="/a"===n.getAttribute("href"),it.checkOn=!!t.value,it.optSelected=o.selected,it.enctype=!!ft.createElement("form").enctype,i.disabled=!0,it.optDisabled=!o.disabled,t=ft.createElement("input"),t.setAttribute("value",""),it.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),it.radioValue="t"===t.value}();var be=/\r/g;ot.fn.extend({val:function(t){var e,i,n,o=this[0];{if(arguments.length)return n=ot.isFunction(t),this.each(function(i){var o;1===this.nodeType&&(o=n?t.call(this,i,ot(this).val()):t,null==o?o="":"number"==typeof o?o+="":ot.isArray(o)&&(o=ot.map(o,function(t){return null==t?"":t+""})),e=ot.valHooks[this.type]||ot.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,o,"value")||(this.value=o))});if(o)return e=ot.valHooks[o.type]||ot.valHooks[o.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(i=e.get(o,"value"))?i:(i=o.value,"string"==typeof i?i.replace(be,""):null==i?"":i)}}}),ot.extend({valHooks:{option:{get:function(t){var e=ot.find.attr(t,"value");return null!=e?e:ot.trim(ot.text(t))}},select:{get:function(t){for(var e,i,n=t.options,o=t.selectedIndex,s="select-one"===t.type||o<0,r=s?null:[],a=s?o+1:n.length,l=o<0?a:s?o:0;l<a;l++)if(i=n[l],(i.selected||l===o)&&(it.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!ot.nodeName(i.parentNode,"optgroup"))){if(e=ot(i).val(),s)return e;r.push(e)}return r},set:function(t,e){for(var i,n,o=t.options,s=ot.makeArray(e),r=o.length;r--;)if(n=o[r],ot.inArray(ot.valHooks.option.get(n),s)>=0)try{n.selected=i=!0}catch(t){n.scrollHeight}else n.selected=!1;return i||(t.selectedIndex=-1),o}}}}),ot.each(["radio","checkbox"],function(){ot.valHooks[this]={set:function(t,e){if(ot.isArray(e))return t.checked=ot.inArray(ot(t).val(),e)>=0}},it.checkOn||(ot.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var we,Se,xe=ot.expr.attrHandle,Ce=/^(?:checked|selected)$/i,Ee=it.getSetAttribute,ke=it.input;ot.fn.extend({attr:function(t,e){return Dt(this,ot.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){ot.removeAttr(this,t)})}}),ot.extend({attr:function(t,e,i){var n,o,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return typeof t.getAttribute===xt?ot.prop(t,e,i):(1===s&&ot.isXMLDoc(t)||(e=e.toLowerCase(),n=ot.attrHooks[e]||(ot.expr.match.bool.test(e)?Se:we)),void 0===i?n&&"get"in n&&null!==(o=n.get(t,e))?o:(o=ot.find.attr(t,e),null==o?void 0:o):null!==i?n&&"set"in n&&void 0!==(o=n.set(t,i,e))?o:(t.setAttribute(e,i+""),i):void ot.removeAttr(t,e))},removeAttr:function(t,e){var i,n,o=0,s=e&&e.match(yt);if(s&&1===t.nodeType)for(;i=s[o++];)n=ot.propFix[i]||i,ot.expr.match.bool.test(i)?ke&&Ee||!Ce.test(i)?t[n]=!1:t[ot.camelCase("default-"+i)]=t[n]=!1:ot.attr(t,i,""),t.removeAttribute(Ee?i:n)},attrHooks:{type:{set:function(t,e){if(!it.radioValue&&"radio"===e&&ot.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}}}),Se={set:function(t,e,i){return e===!1?ot.removeAttr(t,i):ke&&Ee||!Ce.test(i)?t.setAttribute(!Ee&&ot.propFix[i]||i,i):t[ot.camelCase("default-"+i)]=t[i]=!0,i}},ot.each(ot.expr.match.bool.source.match(/\w+/g),function(t,e){var i=xe[e]||ot.find.attr;xe[e]=ke&&Ee||!Ce.test(e)?function(t,e,n){var o,s;return n||(s=xe[e],xe[e]=o,o=null!=i(t,e,n)?e.toLowerCase():null,xe[e]=s),o}:function(t,e,i){if(!i)return t[ot.camelCase("default-"+e)]?e.toLowerCase():null}}),ke&&Ee||(ot.attrHooks.value={set:function(t,e,i){return ot.nodeName(t,"input")?void(t.defaultValue=e):we&&we.set(t,e,i)}}),Ee||(we={set:function(t,e,i){var n=t.getAttributeNode(i);if(n||t.setAttributeNode(n=t.ownerDocument.createAttribute(i)),n.value=e+="","value"===i||e===t.getAttribute(i))return e}},xe.id=xe.name=xe.coords=function(t,e,i){var n;if(!i)return(n=t.getAttributeNode(e))&&""!==n.value?n.value:null},ot.valHooks.button={get:function(t,e){var i=t.getAttributeNode(e);if(i&&i.specified)return i.value},set:we.set},ot.attrHooks.contenteditable={set:function(t,e,i){we.set(t,""!==e&&e,i)}},ot.each(["width","height"],function(t,e){ot.attrHooks[e]={set:function(t,i){if(""===i)return t.setAttribute(e,"auto"),i}}})),it.style||(ot.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var Te=/^(?:input|select|textarea|button|object)$/i,Le=/^(?:a|area)$/i;ot.fn.extend({prop:function(t,e){return Dt(this,ot.prop,t,e,arguments.length>1)},removeProp:function(t){return t=ot.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(t){}})}}),ot.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,i){var n,o,s,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return s=1!==r||!ot.isXMLDoc(t),s&&(e=ot.propFix[e]||e,o=ot.propHooks[e]),void 0!==i?o&&"set"in o&&void 0!==(n=o.set(t,i,e))?n:t[e]=i:o&&"get"in o&&null!==(n=o.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=ot.find.attr(t,"tabindex");return e?parseInt(e,10):Te.test(t.nodeName)||Le.test(t.nodeName)&&t.href?0:-1}}}}),it.hrefNormalized||ot.each(["href","src"],function(t,e){ot.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),it.optSelected||(ot.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),ot.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ot.propFix[this.toLowerCase()]=this}),it.enctype||(ot.propFix.enctype="encoding");var De=/[\t\r\n\f]/g;ot.fn.extend({addClass:function(t){var e,i,n,o,s,r,a=0,l=this.length,u="string"==typeof t&&t;if(ot.isFunction(t))return this.each(function(e){ot(this).addClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(yt)||[];a<l;a++)if(i=this[a],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(De," "):" ")){for(s=0;o=e[s++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");r=ot.trim(n),i.className!==r&&(i.className=r)}return this},removeClass:function(t){var e,i,n,o,s,r,a=0,l=this.length,u=0===arguments.length||"string"==typeof t&&t;if(ot.isFunction(t))return this.each(function(e){ot(this).removeClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(yt)||[];a<l;a++)if(i=this[a],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(De," "):"")){for(s=0;o=e[s++];)for(;n.indexOf(" "+o+" ")>=0;)n=n.replace(" "+o+" "," ");r=t?ot.trim(n):"",i.className!==r&&(i.className=r)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):ot.isFunction(t)?this.each(function(i){ot(this).toggleClass(t.call(this,i,this.className,e),e)}):this.each(function(){if("string"===i)for(var e,n=0,o=ot(this),s=t.match(yt)||[];e=s[n++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else i!==xt&&"boolean"!==i||(this.className&&ot._data(this,"__className__",this.className),this.className=this.className||t===!1?"":ot._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;i<n;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(De," ").indexOf(e)>=0)return!0;return!1}}),ot.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){ot.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),ot.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}});var Me=ot.now(),Pe=/\?/,je=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;ot.parseJSON=function(e){if(t.JSON&&t.JSON.parse)return t.JSON.parse(e+"");var i,n=null,o=ot.trim(e+"");return o&&!ot.trim(o.replace(je,function(t,e,o,s){return i&&e&&(n=0),0===n?t:(i=o||e,n+=!s-!o,"")}))?Function("return "+o)():ot.error("Invalid JSON: "+e)},ot.parseXML=function(e){var i,n;if(!e||"string"!=typeof e)return null;try{t.DOMParser?(n=new DOMParser,i=n.parseFromString(e,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(e))}catch(t){i=void 0}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||ot.error("Invalid XML: "+e),i};var Ae,Fe,$e=/#.*$/,Oe=/([?&])_=[^&]*/,Ne=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ie=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Re=/^(?:GET|HEAD)$/,Be=/^\/\//,He=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ze={},Ue={},We="*/".concat("*");try{Fe=location.href}catch(t){Fe=ft.createElement("a"),Fe.href="",Fe=Fe.href}Ae=He.exec(Fe.toLowerCase())||[],ot.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Fe,type:"GET",isLocal:Ie.test(Ae[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":We,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ot.parseJSON,"text xml":ot.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?H(H(t,ot.ajaxSettings),e):H(ot.ajaxSettings,t)},ajaxPrefilter:R(ze),ajaxTransport:R(Ue),ajax:function(t,e){function i(t,e,i,n){var o,c,v,_,b,S=e;2!==y&&(y=2,a&&clearTimeout(a),u=void 0,r=n||"",w.readyState=t>0?4:0,o=t>=200&&t<300||304===t,i&&(_=z(h,w,i)),_=U(h,_,w,o),o?(h.ifModified&&(b=w.getResponseHeader("Last-Modified"),b&&(ot.lastModified[s]=b),b=w.getResponseHeader("etag"),b&&(ot.etag[s]=b)),204===t||"HEAD"===h.type?S="nocontent":304===t?S="notmodified":(S=_.state,c=_.data,v=_.error,o=!v)):(v=S,!t&&S||(S="error",t<0&&(t=0))),w.status=t,w.statusText=(e||S)+"",o?f.resolveWith(d,[c,S,w]):f.rejectWith(d,[w,S,v]),w.statusCode(g),g=void 0,l&&p.trigger(o?"ajaxSuccess":"ajaxError",[w,h,o?c:v]),m.fireWith(d,[w,S]),l&&(p.trigger("ajaxComplete",[w,h]),--ot.active||ot.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,o,s,r,a,l,u,c,h=ot.ajaxSetup({},e),d=h.context||h,p=h.context&&(d.nodeType||d.jquery)?ot(d):ot.event,f=ot.Deferred(),m=ot.Callbacks("once memory"),g=h.statusCode||{},v={},_={},y=0,b="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(2===y){if(!c)for(c={};e=Ne.exec(r);)c[e[1].toLowerCase()]=e[2];e=c[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===y?r:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return y||(t=_[i]=_[i]||t,v[t]=e),this},overrideMimeType:function(t){return y||(h.mimeType=t),this},statusCode:function(t){var e;if(t)if(y<2)for(e in t)g[e]=[g[e],t[e]];else w.always(t[w.status]);return this},abort:function(t){var e=t||b;return u&&u.abort(e),i(0,e),this}};if(f.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,h.url=((t||h.url||Fe)+"").replace($e,"").replace(Be,Ae[1]+"//"),h.type=e.method||e.type||h.method||h.type,h.dataTypes=ot.trim(h.dataType||"*").toLowerCase().match(yt)||[""],null==h.crossDomain&&(n=He.exec(h.url.toLowerCase()),h.crossDomain=!(!n||n[1]===Ae[1]&&n[2]===Ae[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(Ae[3]||("http:"===Ae[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=ot.param(h.data,h.traditional)),B(ze,h,e,w),2===y)return w;l=h.global,l&&0===ot.active++&&ot.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Re.test(h.type),s=h.url,h.hasContent||(h.data&&(s=h.url+=(Pe.test(s)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=Oe.test(s)?s.replace(Oe,"$1_="+Me++):s+(Pe.test(s)?"&":"?")+"_="+Me++)),h.ifModified&&(ot.lastModified[s]&&w.setRequestHeader("If-Modified-Since",ot.lastModified[s]),ot.etag[s]&&w.setRequestHeader("If-None-Match",ot.etag[s])),(h.data&&h.hasContent&&h.contentType!==!1||e.contentType)&&w.setRequestHeader("Content-Type",h.contentType),w.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+We+"; q=0.01":""):h.accepts["*"]);for(o in h.headers)w.setRequestHeader(o,h.headers[o]);if(h.beforeSend&&(h.beforeSend.call(d,w,h)===!1||2===y))return w.abort();b="abort";for(o in{success:1,error:1,complete:1})w[o](h[o]);if(u=B(Ue,h,e,w)){w.readyState=1,l&&p.trigger("ajaxSend",[w,h]),h.async&&h.timeout>0&&(a=setTimeout(function(){w.abort("timeout")},h.timeout));try{y=1,u.send(v,i)}catch(t){if(!(y<2))throw t;i(-1,t)}}else i(-1,"No Transport");return w},getJSON:function(t,e,i){return ot.get(t,e,i,"json")},getScript:function(t,e){return ot.get(t,void 0,e,"script")}}),ot.each(["get","post"],function(t,e){ot[e]=function(t,i,n,o){return ot.isFunction(i)&&(o=o||n,n=i,i=void 0),ot.ajax({url:t,type:e,dataType:o,data:i,success:n})}}),ot.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){ot.fn[e]=function(t){return this.on(e,t)}}),ot._evalUrl=function(t){return ot.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},ot.fn.extend({wrapAll:function(t){if(ot.isFunction(t))return this.each(function(e){ot(this).wrapAll(t.call(this,e))});if(this[0]){var e=ot(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return ot.isFunction(t)?this.each(function(e){ot(this).wrapInner(t.call(this,e))}):this.each(function(){var e=ot(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=ot.isFunction(t);return this.each(function(i){ot(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){ot.nodeName(this,"body")||ot(this).replaceWith(this.childNodes)}).end()}}),ot.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!it.reliableHiddenOffsets()&&"none"===(t.style&&t.style.display||ot.css(t,"display"))},ot.expr.filters.visible=function(t){return!ot.expr.filters.hidden(t)};var qe=/%20/g,Ge=/\[\]$/,Ze=/\r?\n/g,Ve=/^(?:submit|button|image|reset|file)$/i,Ye=/^(?:input|select|textarea|keygen)/i;ot.param=function(t,e){var i,n=[],o=function(t,e){e=ot.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=ot.ajaxSettings&&ot.ajaxSettings.traditional),ot.isArray(t)||t.jquery&&!ot.isPlainObject(t))ot.each(t,function(){o(this.name,this.value)});else for(i in t)W(i,t[i],e,o);return n.join("&").replace(qe,"+")},ot.fn.extend({serialize:function(){return ot.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=ot.prop(this,"elements");return t?ot.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!ot(this).is(":disabled")&&Ye.test(this.nodeName)&&!Ve.test(t)&&(this.checked||!Mt.test(t))}).map(function(t,e){var i=ot(this).val();return null==i?null:ot.isArray(i)?ot.map(i,function(t){return{name:e.name,value:t.replace(Ze,"\r\n")}}):{name:e.name,value:i.replace(Ze,"\r\n")}}).get()}}),ot.ajaxSettings.xhr=void 0!==t.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&q()||G()}:q;var Xe=0,Qe={},Je=ot.ajaxSettings.xhr();t.ActiveXObject&&ot(t).on("unload",function(){for(var t in Qe)Qe[t](void 0,!0)}),it.cors=!!Je&&"withCredentials"in Je,Je=it.ajax=!!Je,Je&&ot.ajaxTransport(function(t){if(!t.crossDomain||it.cors){var e;return{send:function(i,n){var o,s=t.xhr(),r=++Xe;if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)s[o]=t.xhrFields[o];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(o in i)void 0!==i[o]&&s.setRequestHeader(o,i[o]+"");s.send(t.hasContent&&t.data||null),e=function(i,o){var a,l,u;if(e&&(o||4===s.readyState))if(delete Qe[r],e=void 0,s.onreadystatechange=ot.noop,o)4!==s.readyState&&s.abort();else{u={},a=s.status,"string"==typeof s.responseText&&(u.text=s.responseText);try{l=s.statusText}catch(t){l=""}a||!t.isLocal||t.crossDomain?1223===a&&(a=204):a=u.text?200:404}u&&n(a,l,u,s.getAllResponseHeaders())},t.async?4===s.readyState?setTimeout(e):s.onreadystatechange=Qe[r]=e:e()},abort:function(){e&&e(void 0,!0)}}}}),ot.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return ot.globalEval(t),t}}}),ot.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),ot.ajaxTransport("script",function(t){if(t.crossDomain){var e,i=ft.head||ot("head")[0]||ft.documentElement;return{send:function(n,o){e=ft.createElement("script"),e.async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,i){(i||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,i||o(200,"success"))},i.insertBefore(e,i.firstChild)},abort:function(){e&&e.onload(void 0,!0)}}}});var Ke=[],ti=/(=)\?(?=&|$)|\?\?/;ot.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ke.pop()||ot.expando+"_"+Me++;return this[t]=!0,t}}),ot.ajaxPrefilter("json jsonp",function(e,i,n){var o,s,r,a=e.jsonp!==!1&&(ti.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&ti.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return o=e.jsonpCallback=ot.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(ti,"$1"+o):e.jsonp!==!1&&(e.url+=(Pe.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return r||ot.error(o+" was not called"),r[0]},e.dataTypes[0]="json",s=t[o],t[o]=function(){r=arguments},n.always(function(){t[o]=s,e[o]&&(e.jsonpCallback=i.jsonpCallback,Ke.push(o)),r&&ot.isFunction(s)&&s(r[0]),r=s=void 0}),"script"}),ot.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||ft;var n=ht.exec(t),o=!i&&[];return n?[e.createElement(n[1])]:(n=ot.buildFragment([t],e,o),o&&o.length&&ot(o).remove(),ot.merge([],n.childNodes))};var ei=ot.fn.load;ot.fn.load=function(t,e,i){if("string"!=typeof t&&ei)return ei.apply(this,arguments);var n,o,s,r=this,a=t.indexOf(" ");return a>=0&&(n=ot.trim(t.slice(a,t.length)),t=t.slice(0,a)),ot.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(s="POST"),r.length>0&&ot.ajax({url:t,type:s,dataType:"html",data:e}).done(function(t){o=arguments,r.html(n?ot("<div>").append(ot.parseHTML(t)).find(n):t)}).complete(i&&function(t,e){r.each(i,o||[t.responseText,e,t])}),this},ot.expr.filters.animated=function(t){return ot.grep(ot.timers,function(e){return t===e.elem}).length};var ii=t.document.documentElement;ot.offset={setOffset:function(t,e,i){var n,o,s,r,a,l,u,c=ot.css(t,"position"),h=ot(t),d={};"static"===c&&(t.style.position="relative"),a=h.offset(),s=ot.css(t,"top"),l=ot.css(t,"left"),u=("absolute"===c||"fixed"===c)&&ot.inArray("auto",[s,l])>-1,u?(n=h.position(),r=n.top,o=n.left):(r=parseFloat(s)||0,o=parseFloat(l)||0),ot.isFunction(e)&&(e=e.call(t,i,a)),null!=e.top&&(d.top=e.top-a.top+r),null!=e.left&&(d.left=e.left-a.left+o),"using"in e?e.using.call(t,d):h.css(d)}},ot.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){ot.offset.setOffset(this,t,e)});var e,i,n={top:0,left:0},o=this[0],s=o&&o.ownerDocument;if(s)return e=s.documentElement,ot.contains(e,o)?(typeof o.getBoundingClientRect!==xt&&(n=o.getBoundingClientRect()),i=Z(s),{top:n.top+(i.pageYOffset||e.scrollTop)-(e.clientTop||0),left:n.left+(i.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):n},position:function(){if(this[0]){var t,e,i={top:0,left:0},n=this[0];return"fixed"===ot.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),ot.nodeName(t[0],"html")||(i=t.offset()),i.top+=ot.css(t[0],"borderTopWidth",!0),i.left+=ot.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-ot.css(n,"marginTop",!0),left:e.left-i.left-ot.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||ii;t&&!ot.nodeName(t,"html")&&"static"===ot.css(t,"position");)t=t.offsetParent;return t||ii})}}),ot.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i=/Y/.test(e);ot.fn[t]=function(n){return Dt(this,function(t,n,o){var s=Z(t);return void 0===o?s?e in s?s[e]:s.document.documentElement[n]:t[n]:void(s?s.scrollTo(i?ot(s).scrollLeft():o,i?o:ot(s).scrollTop()):t[n]=o)},t,n,arguments.length,null)}}),ot.each(["top","left"],function(t,e){ot.cssHooks[e]=k(it.pixelPosition,function(t,i){if(i)return i=ee(t,e),ne.test(i)?ot(t).position()[e]+"px":i})}),ot.each({Height:"height",Width:"width"},function(t,e){ot.each({
padding:"inner"+t,content:e,"":"outer"+t},function(i,n){ot.fn[n]=function(n,o){var s=arguments.length&&(i||"boolean"!=typeof n),r=i||(n===!0||o===!0?"margin":"border");return Dt(this,function(e,i,n){var o;return ot.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===n?ot.css(e,i,r):ot.style(e,i,n,r)},e,s?n:void 0,s,null)}})}),ot.fn.size=function(){return this.length},ot.fn.andSelf=ot.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ot});var ni=t.jQuery,oi=t.$;return ot.noConflict=function(e){return t.$===ot&&(t.$=oi),e&&t.jQuery===ot&&(t.jQuery=ni),ot},typeof e===xt&&(t.jQuery=t.$=ot),ot}),function(t,e){t.rails!==e&&t.error("jquery-ujs has already been loaded!");var i,n=t(document);t.rails=i={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(e){var i=t('meta[name="csrf-token"]').attr("content");i&&e.setRequestHeader("X-CSRF-Token",i)},refreshCSRFTokens:function(){var e=t("meta[name=csrf-token]").attr("content"),i=t("meta[name=csrf-param]").attr("content");t('form input[name="'+i+'"]').val(e)},fire:function(e,i,n){var o=t.Event(i);return e.trigger(o,n),o.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t[0].href},handleRemote:function(n){var o,s,r,a,l,u;if(i.fire(n,"ajax:before")){if(a=n.data("with-credentials")||null,l=n.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,n.is("form")){o=n.attr("method"),s=n.attr("action"),r=n.serializeArray();var c=n.data("ujs:submit-button");c&&(r.push(c),n.data("ujs:submit-button",null))}else n.is(i.inputChangeSelector)?(o=n.data("method"),s=n.data("url"),r=n.serialize(),n.data("params")&&(r=r+"&"+n.data("params"))):n.is(i.buttonClickSelector)?(o=n.data("method")||"get",s=n.data("url"),r=n.serialize(),n.data("params")&&(r=r+"&"+n.data("params"))):(o=n.data("method"),s=i.href(n),r=n.data("params")||null);return u={type:o||"GET",data:r,dataType:l,beforeSend:function(t,o){return o.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+o.accepts.script),!!i.fire(n,"ajax:beforeSend",[t,o])&&void n.trigger("ajax:send",t)},success:function(t,e,i){n.trigger("ajax:success",[t,e,i])},complete:function(t,e){n.trigger("ajax:complete",[t,e])},error:function(t,e,i){n.trigger("ajax:error",[t,e,i])},crossDomain:i.isCrossDomain(s)},a&&(u.xhrFields={withCredentials:a}),s&&(u.url=s),i.ajax(u)}return!1},isCrossDomain:function(t){var e=document.createElement("a");e.href=location.href;var i=document.createElement("a");try{return i.href=t,i.href=i.href,!((!i.protocol||":"===i.protocol)&&!i.host||e.protocol+"//"+e.host==i.protocol+"//"+i.host)}catch(t){return!0}},handleMethod:function(n){var o=i.href(n),s=n.data("method"),r=n.attr("target"),a=t("meta[name=csrf-token]").attr("content"),l=t("meta[name=csrf-param]").attr("content"),u=t('<form method="post" action="'+o+'"></form>'),c='<input name="_method" value="'+s+'" type="hidden" />';l===e||a===e||i.isCrossDomain(o)||(c+='<input name="'+l+'" value="'+a+'" type="hidden" />'),r&&u.attr("target",r),u.hide().append(c).appendTo("body"),u.submit()},formElements:function(e,i){return e.is("form")?t(e[0].elements).filter(i):e.find(i)},disableFormElements:function(e){i.formElements(e,i.disableSelector).each(function(){i.disableFormElement(t(this))})},disableFormElement:function(t){var i,n;i=t.is("button")?"html":"val",n=t.data("disable-with"),t.data("ujs:enable-with",t[i]()),n!==e&&t[i](n),t.prop("disabled",!0)},enableFormElements:function(e){i.formElements(e,i.enableSelector).each(function(){i.enableFormElement(t(this))})},enableFormElement:function(t){var e=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[e](t.data("ujs:enable-with")),t.prop("disabled",!1)},allowAction:function(t){var e,n=t.data("confirm"),o=!1;return!n||(i.fire(t,"confirm")&&(o=i.confirm(n),e=i.fire(t,"confirm:complete",[o])),o&&e)},blankInputs:function(e,i,n){var o,s,r=t(),a=i||"input,textarea",l=e.find(a);return l.each(function(){if(o=t(this),s=o.is("input[type=checkbox],input[type=radio]")?o.is(":checked"):o.val(),!s==!n){if(o.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+o.attr("name")+'"]').length)return!0;r=r.add(o)}}),!!r.length&&r},nonBlankInputs:function(t,e){return i.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){var n=t.data("disable-with");t.data("ujs:enable-with",t.html()),n!==e&&t.html(n),t.bind("click.railsDisable",function(t){return i.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},i.fire(n,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,n){t.crossDomain||i.CSRFProtection(n)}),n.delegate(i.linkDisableSelector,"ajax:complete",function(){i.enableElement(t(this))}),n.delegate(i.buttonDisableSelector,"ajax:complete",function(){i.enableFormElement(t(this))}),n.delegate(i.linkClickSelector,"click.rails",function(n){var o=t(this),s=o.data("method"),r=o.data("params"),a=n.metaKey||n.ctrlKey;if(!i.allowAction(o))return i.stopEverything(n);if(!a&&o.is(i.linkDisableSelector)&&i.disableElement(o),o.data("remote")!==e){if(a&&(!s||"GET"===s)&&!r)return!0;var l=i.handleRemote(o);return l===!1?i.enableElement(o):l.error(function(){i.enableElement(o)}),!1}return o.data("method")?(i.handleMethod(o),!1):void 0}),n.delegate(i.buttonClickSelector,"click.rails",function(e){var n=t(this);if(!i.allowAction(n))return i.stopEverything(e);n.is(i.buttonDisableSelector)&&i.disableFormElement(n);var o=i.handleRemote(n);return o===!1?i.enableFormElement(n):o.error(function(){i.enableFormElement(n)}),!1}),n.delegate(i.inputChangeSelector,"change.rails",function(e){var n=t(this);return i.allowAction(n)?(i.handleRemote(n),!1):i.stopEverything(e)}),n.delegate(i.formSubmitSelector,"submit.rails",function(n){var o,s,r=t(this),a=r.data("remote")!==e;if(!i.allowAction(r))return i.stopEverything(n);if(r.attr("novalidate")==e&&(o=i.blankInputs(r,i.requiredInputSelector),o&&i.fire(r,"ajax:aborted:required",[o])))return i.stopEverything(n);if(a){if(s=i.nonBlankInputs(r,i.fileInputSelector)){setTimeout(function(){i.disableFormElements(r)},13);var l=i.fire(r,"ajax:aborted:file",[s]);return l||setTimeout(function(){i.enableFormElements(r)},13),l}return i.handleRemote(r),!1}setTimeout(function(){i.disableFormElements(r)},13)}),n.delegate(i.formInputClickSelector,"click.rails",function(e){var n=t(this);if(!i.allowAction(n))return i.stopEverything(e);var o=n.attr("name"),s=o?{name:o,value:n.val()}:null;n.closest("form").data("ujs:submit-button",s)}),n.delegate(i.formSubmitSelector,"ajax:send.rails",function(e){this==e.target&&i.disableFormElements(t(this))}),n.delegate(i.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&i.enableFormElements(t(this))}),t(function(){i.refreshCSRFTokens()}))}(jQuery),!function(t){"use strict";"undefined"==typeof t&&(t={}),"undefined"==typeof t.performance&&(t.performance={}),t._perfRefForUserTimingPolyfill=t.performance,t.performance.userTimingJsNow=!1,t.performance.userTimingJsNowPrefixed=!1,t.performance.userTimingJsUserTiming=!1,t.performance.userTimingJsUserTimingPrefixed=!1,t.performance.userTimingJsPerformanceTimeline=!1,t.performance.userTimingJsPerformanceTimelinePrefixed=!1;var e,i,n=[],o=[],s=null;if("function"!=typeof t.performance.now){for(t.performance.userTimingJsNow=!0,o=["webkitNow","msNow","mozNow"],e=0;e<o.length;e++)if("function"==typeof t.performance[o[e]]){t.performance.now=t.performance[o[e]],t.performance.userTimingJsNowPrefixed=!0;break}var r=+new Date;t.performance.timing&&t.performance.timing.navigationStart?r=t.performance.timing.navigationStart:"undefined"!=typeof process&&"function"==typeof process.hrtime&&(r=process.hrtime(),t.performance.now=function(){var t=process.hrtime(r);return 1e3*t[0]+1e-6*t[1]}),"function"!=typeof t.performance.now&&(Date.now?t.performance.now=function(){return Date.now()-r}:t.performance.now=function(){return+new Date-r})}var a=function(){},l=function(){},u=[],c=!1,h=!1;if("function"!=typeof t.performance.getEntries||"function"!=typeof t.performance.mark){for("function"==typeof t.performance.getEntries&&"function"!=typeof t.performance.mark&&(h=!0),t.performance.userTimingJsPerformanceTimeline=!0,n=["webkit","moz"],o=["getEntries","getEntriesByName","getEntriesByType"],e=0;e<o.length;e++)for(i=0;i<n.length;i++)s=n[i]+o[e].substr(0,1).toUpperCase()+o[e].substr(1),"function"==typeof t.performance[s]&&(t.performance[o[e]]=t.performance[s],t.performance.userTimingJsPerformanceTimelinePrefixed=!0);a=function(t){u.push(t),"measure"===t.entryType&&(c=!0)};var d=function(){c&&(u.sort(function(t,e){return t.startTime-e.startTime}),c=!1)};if(l=function(t,i){for(e=0;e<u.length;)u[e].entryType!==t||"undefined"!=typeof i&&u[e].name!==i?e++:u.splice(e,1)},"function"!=typeof t.performance.getEntries||h){var p=t.performance.getEntries;t.performance.getEntries=function(){d();var e=u.slice(0);return h&&p&&(Array.prototype.push.apply(e,p.call(t.performance)),e.sort(function(t,e){return t.startTime-e.startTime})),e}}if("function"!=typeof t.performance.getEntriesByType||h){var f=t.performance.getEntriesByType;t.performance.getEntriesByType=function(i){if("undefined"==typeof i||"mark"!==i&&"measure"!==i)return h&&f?f.call(t.performance,i):[];"measure"===i&&d();var n=[];for(e=0;e<u.length;e++)u[e].entryType===i&&n.push(u[e]);return n}}if("function"!=typeof t.performance.getEntriesByName||h){var m=t.performance.getEntriesByName;t.performance.getEntriesByName=function(i,n){if(n&&"mark"!==n&&"measure"!==n)return h&&m?m.call(t.performance,i,n):[];"undefined"!=typeof n&&"measure"===n&&d();var o=[];for(e=0;e<u.length;e++)("undefined"==typeof n||u[e].entryType===n)&&u[e].name===i&&o.push(u[e]);return h&&m&&(Array.prototype.push.apply(o,m.call(t.performance,i,n)),o.sort(function(t,e){return t.startTime-e.startTime})),o}}}if("function"!=typeof t.performance.mark){for(t.performance.userTimingJsUserTiming=!0,n=["webkit","moz","ms"],o=["mark","measure","clearMarks","clearMeasures"],e=0;e<o.length;e++)for(i=0;i<n.length;i++)s=n[i]+o[e].substr(0,1).toUpperCase()+o[e].substr(1),"function"==typeof t.performance[s]&&(t.performance[o[e]]=t.performance[s],t.performance.userTimingJsUserTimingPrefixed=!0);var g={};"function"!=typeof t.performance.mark&&(t.performance.mark=function(e){var i=t.performance.now();if("undefined"==typeof e)throw new SyntaxError("Mark name must be specified");if(t.performance.timing&&e in t.performance.timing)throw new SyntaxError("Mark name is not allowed");g[e]||(g[e]=[]),g[e].push(i),a({entryType:"mark",name:e,startTime:i,duration:0})}),"function"!=typeof t.performance.clearMarks&&(t.performance.clearMarks=function(t){t?g[t]=[]:g={},l("mark",t)}),"function"!=typeof t.performance.measure&&(t.performance.measure=function(e,i,n){var o=t.performance.now();if("undefined"==typeof e)throw new SyntaxError("Measure must be specified");if(!i)return void a({entryType:"measure",name:e,startTime:0,duration:o});var s=0;if(t.performance.timing&&i in t.performance.timing){if("navigationStart"!==i&&0===t.performance.timing[i])throw new Error(i+" has a timing of 0");s=t.performance.timing[i]-t.performance.timing.navigationStart}else{if(!(i in g))throw new Error(i+" mark not found");s=g[i][g[i].length-1]}var r=o;if(n)if(r=0,t.performance.timing&&n in t.performance.timing){if("navigationStart"!==n&&0===t.performance.timing[n])throw new Error(n+" has a timing of 0");r=t.performance.timing[n]-t.performance.timing.navigationStart}else{if(!(n in g))throw new Error(n+" mark not found");r=g[n][g[n].length-1]}var l=r-s;a({entryType:"measure",name:e,startTime:s,duration:l})}),"function"!=typeof t.performance.clearMeasures&&(t.performance.clearMeasures=function(t){l("measure",t)})}"function"==typeof define&&define.amd?define([],function(){return t.performance}):"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports=t.performance)}("undefined"!=typeof window?window:void 0),function(){var t=this,e=t._,i={},n=Array.prototype,o=Object.prototype,s=Function.prototype,r=n.push,a=n.slice,l=n.concat,u=o.toString,c=o.hasOwnProperty,h=n.forEach,d=n.map,p=n.reduce,f=n.reduceRight,m=n.filter,g=n.every,v=n.some,_=n.indexOf,y=n.lastIndexOf,b=Array.isArray,w=Object.keys,S=s.bind,x=function(t){return t instanceof x?t:this instanceof x?void(this._wrapped=t):new x(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):t._=x,x.VERSION="1.5.2";var C=x.each=x.forEach=function(t,e,n){if(null!=t)if(h&&t.forEach===h)t.forEach(e,n);else if(t.length===+t.length){for(var o=0,s=t.length;s>o;o++)if(e.call(n,t[o],o,t)===i)return}else for(var r=x.keys(t),o=0,s=r.length;s>o;o++)if(e.call(n,t[r[o]],r[o],t)===i)return};x.map=x.collect=function(t,e,i){var n=[];return null==t?n:d&&t.map===d?t.map(e,i):(C(t,function(t,o,s){n.push(e.call(i,t,o,s))}),n)};var E="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(t,e,i,n){var o=arguments.length>2;if(null==t&&(t=[]),p&&t.reduce===p)return n&&(e=x.bind(e,n)),o?t.reduce(e,i):t.reduce(e);if(C(t,function(t,s,r){o?i=e.call(n,i,t,s,r):(i=t,o=!0)}),!o)throw new TypeError(E);return i},x.reduceRight=x.foldr=function(t,e,i,n){var o=arguments.length>2;if(null==t&&(t=[]),f&&t.reduceRight===f)return n&&(e=x.bind(e,n)),o?t.reduceRight(e,i):t.reduceRight(e);var s=t.length;if(s!==+s){var r=x.keys(t);s=r.length}if(C(t,function(a,l,u){l=r?r[--s]:--s,o?i=e.call(n,i,t[l],l,u):(i=t[l],o=!0)}),!o)throw new TypeError(E);return i},x.find=x.detect=function(t,e,i){var n;return k(t,function(t,o,s){return e.call(i,t,o,s)?(n=t,!0):void 0}),n},x.filter=x.select=function(t,e,i){var n=[];return null==t?n:m&&t.filter===m?t.filter(e,i):(C(t,function(t,o,s){e.call(i,t,o,s)&&n.push(t)}),n)},x.reject=function(t,e,i){return x.filter(t,function(t,n,o){return!e.call(i,t,n,o)},i)},x.every=x.all=function(t,e,n){e||(e=x.identity);var o=!0;return null==t?o:g&&t.every===g?t.every(e,n):(C(t,function(t,s,r){return(o=o&&e.call(n,t,s,r))?void 0:i}),!!o)};var k=x.some=x.any=function(t,e,n){e||(e=x.identity);var o=!1;return null==t?o:v&&t.some===v?t.some(e,n):(C(t,function(t,s,r){return o||(o=e.call(n,t,s,r))?i:void 0}),!!o)};x.contains=x.include=function(t,e){return null!=t&&(_&&t.indexOf===_?t.indexOf(e)!=-1:k(t,function(t){return t===e}))},x.invoke=function(t,e){var i=a.call(arguments,2),n=x.isFunction(e);return x.map(t,function(t){return(n?e:t[e]).apply(t,i)})},x.pluck=function(t,e){return x.map(t,function(t){return t[e]})},x.where=function(t,e,i){return x.isEmpty(e)?i?void 0:[]:x[i?"find":"filter"](t,function(t){for(var i in e)if(e[i]!==t[i])return!1;return!0})},x.findWhere=function(t,e){return x.where(t,e,!0)},x.max=function(t,e,i){if(!e&&x.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!e&&x.isEmpty(t))return-1/0;var n={computed:-1/0,value:-1/0};return C(t,function(t,o,s){var r=e?e.call(i,t,o,s):t;r>n.computed&&(n={value:t,computed:r})}),n.value},x.min=function(t,e,i){if(!e&&x.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!e&&x.isEmpty(t))return 1/0;var n={computed:1/0,value:1/0};return C(t,function(t,o,s){var r=e?e.call(i,t,o,s):t;r<n.computed&&(n={value:t,computed:r})}),n.value},x.shuffle=function(t){var e,i=0,n=[];return C(t,function(t){e=x.random(i++),n[i-1]=n[e],n[e]=t}),n},x.sample=function(t,e,i){return arguments.length<2||i?t[x.random(t.length-1)]:x.shuffle(t).slice(0,Math.max(0,e))};var T=function(t){return x.isFunction(t)?t:function(e){return e[t]}};x.sortBy=function(t,e,i){var n=T(e);return x.pluck(x.map(t,function(t,e,o){return{value:t,index:e,criteria:n.call(i,t,e,o)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return t.index-e.index}),"value")};var L=function(t){return function(e,i,n){var o={},s=null==i?x.identity:T(i);return C(e,function(i,r){var a=s.call(n,i,r,e);t(o,a,i)}),o}};x.groupBy=L(function(t,e,i){(x.has(t,e)?t[e]:t[e]=[]).push(i)}),x.indexBy=L(function(t,e,i){t[e]=i}),x.countBy=L(function(t,e){x.has(t,e)?t[e]++:t[e]=1}),x.sortedIndex=function(t,e,i,n){i=null==i?x.identity:T(i);for(var o=i.call(n,e),s=0,r=t.length;r>s;){var a=s+r>>>1;i.call(n,t[a])<o?s=a+1:r=a}return s},x.toArray=function(t){return t?x.isArray(t)?a.call(t):t.length===+t.length?x.map(t,x.identity):x.values(t):[]},x.size=function(t){return null==t?0:t.length===+t.length?t.length:x.keys(t).length},x.first=x.head=x.take=function(t,e,i){return null==t?void 0:null==e||i?t[0]:a.call(t,0,e)},x.initial=function(t,e,i){return a.call(t,0,t.length-(null==e||i?1:e))},x.last=function(t,e,i){return null==t?void 0:null==e||i?t[t.length-1]:a.call(t,Math.max(t.length-e,0))},x.rest=x.tail=x.drop=function(t,e,i){return a.call(t,null==e||i?1:e)},x.compact=function(t){return x.filter(t,x.identity)};var D=function(t,e,i){return e&&x.every(t,x.isArray)?l.apply(i,t):(C(t,function(t){x.isArray(t)||x.isArguments(t)?e?r.apply(i,t):D(t,e,i):i.push(t)}),i)};x.flatten=function(t,e){return D(t,e,[])},x.without=function(t){return x.difference(t,a.call(arguments,1))},x.uniq=x.unique=function(t,e,i,n){x.isFunction(e)&&(n=i,i=e,e=!1);var o=i?x.map(t,i,n):t,s=[],r=[];return C(o,function(i,n){(e?n&&r[r.length-1]===i:x.contains(r,i))||(r.push(i),s.push(t[n]))}),s},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(t){var e=a.call(arguments,1);return x.filter(x.uniq(t),function(t){return x.every(e,function(e){return x.indexOf(e,t)>=0})})},x.difference=function(t){var e=l.apply(n,a.call(arguments,1));return x.filter(t,function(t){return!x.contains(e,t)})},x.zip=function(){for(var t=x.max(x.pluck(arguments,"length").concat(0)),e=new Array(t),i=0;t>i;i++)e[i]=x.pluck(arguments,""+i);return e},x.object=function(t,e){if(null==t)return{};for(var i={},n=0,o=t.length;o>n;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},x.indexOf=function(t,e,i){if(null==t)return-1;var n=0,o=t.length;if(i){if("number"!=typeof i)return n=x.sortedIndex(t,e),t[n]===e?n:-1;n=0>i?Math.max(0,o+i):i}if(_&&t.indexOf===_)return t.indexOf(e,i);for(;o>n;n++)if(t[n]===e)return n;return-1},x.lastIndexOf=function(t,e,i){if(null==t)return-1;var n=null!=i;if(y&&t.lastIndexOf===y)return n?t.lastIndexOf(e,i):t.lastIndexOf(e);for(var o=n?i:t.length;o--;)if(t[o]===e)return o;return-1},x.range=function(t,e,i){arguments.length<=1&&(e=t||0,t=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((e-t)/i),0),o=0,s=new Array(n);n>o;)s[o++]=t,t+=i;return s};var M=function(){};x.bind=function(t,e){var i,n;if(S&&t.bind===S)return S.apply(t,a.call(arguments,1));if(!x.isFunction(t))throw new TypeError;return i=a.call(arguments,2),n=function(){if(!(this instanceof n))return t.apply(e,i.concat(a.call(arguments)));M.prototype=t.prototype;var o=new M;M.prototype=null;var s=t.apply(o,i.concat(a.call(arguments)));return Object(s)===s?s:o}},x.partial=function(t){var e=a.call(arguments,1);return function(){return t.apply(this,e.concat(a.call(arguments)))}},x.bindAll=function(t){var e=a.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return C(e,function(e){t[e]=x.bind(t[e],t)}),t},x.memoize=function(t,e){var i={};return e||(e=x.identity),function(){var n=e.apply(this,arguments);return x.has(i,n)?i[n]:i[n]=t.apply(this,arguments)}},x.delay=function(t,e){var i=a.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},x.defer=function(t){return x.delay.apply(x,[t,1].concat(a.call(arguments,1)))},x.throttle=function(t,e,i){var n,o,s,r=null,a=0;i||(i={});var l=function(){a=i.leading===!1?0:new Date,r=null,s=t.apply(n,o)};return function(){var u=new Date;a||i.leading!==!1||(a=u);var c=e-(u-a);return n=this,o=arguments,0>=c?(clearTimeout(r),r=null,a=u,s=t.apply(n,o)):r||i.trailing===!1||(r=setTimeout(l,c)),s}},x.debounce=function(t,e,i){var n,o,s,r,a;return function(){s=this,o=arguments,r=new Date;var l=function(){var u=new Date-r;e>u?n=setTimeout(l,e-u):(n=null,i||(a=t.apply(s,o)))},u=i&&!n;return n||(n=setTimeout(l,e)),u&&(a=t.apply(s,o)),a}},x.once=function(t){var e,i=!1;return function(){return i?e:(i=!0,e=t.apply(this,arguments),t=null,e)}},x.wrap=function(t,e){return function(){var i=[t];return r.apply(i,arguments),e.apply(this,i)}},x.compose=function(){var t=arguments;return function(){for(var e=arguments,i=t.length-1;i>=0;i--)e=[t[i].apply(this,e)];return e[0]}},x.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},x.keys=w||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var i in t)x.has(t,i)&&e.push(i);return e},x.values=function(t){for(var e=x.keys(t),i=e.length,n=new Array(i),o=0;i>o;o++)n[o]=t[e[o]];return n},x.pairs=function(t){for(var e=x.keys(t),i=e.length,n=new Array(i),o=0;i>o;o++)n[o]=[e[o],t[e[o]]];return n},x.invert=function(t){for(var e={},i=x.keys(t),n=0,o=i.length;o>n;n++)e[t[i[n]]]=i[n];return e},x.functions=x.methods=function(t){var e=[];for(var i in t)x.isFunction(t[i])&&e.push(i);return e.sort()},x.extend=function(t){return C(a.call(arguments,1),function(e){if(e)for(var i in e)t[i]=e[i]}),t},x.pick=function(t){var e={},i=l.apply(n,a.call(arguments,1));return C(i,function(i){i in t&&(e[i]=t[i])}),e},x.omit=function(t){var e={},i=l.apply(n,a.call(arguments,1));for(var o in t)x.contains(i,o)||(e[o]=t[o]);return e},x.defaults=function(t){return C(a.call(arguments,1),function(e){if(e)for(var i in e)void 0===t[i]&&(t[i]=e[i])}),t},x.clone=function(t){return x.isObject(t)?x.isArray(t)?t.slice():x.extend({},t):t},x.tap=function(t,e){return e(t),t};var P=function(t,e,i,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof x&&(t=t._wrapped),e instanceof x&&(e=e._wrapped);var o=u.call(t);if(o!=u.call(e))return!1;switch(o){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var s=i.length;s--;)if(i[s]==t)return n[s]==e;var r=t.constructor,a=e.constructor;if(r!==a&&!(x.isFunction(r)&&r instanceof r&&x.isFunction(a)&&a instanceof a))return!1;i.push(t),n.push(e);var l=0,c=!0;if("[object Array]"==o){if(l=t.length,c=l==e.length)for(;l--&&(c=P(t[l],e[l],i,n)););}else{for(var h in t)if(x.has(t,h)&&(l++,!(c=x.has(e,h)&&P(t[h],e[h],i,n))))break;if(c){for(h in e)if(x.has(e,h)&&!l--)break;c=!l}}return i.pop(),n.pop(),c};x.isEqual=function(t,e){return P(t,e,[],[])},x.isEmpty=function(t){if(null==t)return!0;if(x.isArray(t)||x.isString(t))return 0===t.length;for(var e in t)if(x.has(t,e))return!1;return!0},x.isElement=function(t){return!(!t||1!==t.nodeType)},x.isArray=b||function(t){return"[object Array]"==u.call(t)},x.isObject=function(t){return t===Object(t)},C(["Arguments","Function","String","Number","Date","RegExp"],function(t){x["is"+t]=function(e){return u.call(e)=="[object "+t+"]"}}),x.isArguments(arguments)||(x.isArguments=function(t){return!(!t||!x.has(t,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(t){return"function"==typeof t}),x.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},x.isNaN=function(t){return x.isNumber(t)&&t!=+t},x.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==u.call(t)},x.isNull=function(t){return null===t},x.isUndefined=function(t){return void 0===t},x.has=function(t,e){return c.call(t,e)},x.noConflict=function(){return t._=e,this},x.identity=function(t){return t},x.times=function(t,e,i){for(var n=Array(Math.max(0,t)),o=0;t>o;o++)n[o]=e.call(i,o);return n},x.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var j={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};j.unescape=x.invert(j.escape);var A={escape:new RegExp("["+x.keys(j.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(j.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(t){x[t]=function(e){return null==e?"":(""+e).replace(A[t],function(e){return j[t][e]})}}),x.result=function(t,e){if(null!=t){var i=t[e];return x.isFunction(i)?i.call(t):i}},x.mixin=function(t){C(x.functions(t),function(e){var i=x[e]=t[e];x.prototype[e]=function(){var t=[this._wrapped];return r.apply(t,arguments),I.call(this,i.apply(x,t))}})};var F=0;x.uniqueId=function(t){var e=++F+"";return t?t+e:e},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var $=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n"," ":"t","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(t,e,i){var n;i=x.defaults({},i,x.templateSettings);var o=new RegExp([(i.escape||$).source,(i.interpolate||$).source,(i.evaluate||$).source].join("|")+"|$","g"),s=0,r="__p+='";t.replace(o,function(e,i,n,o,a){return r+=t.slice(s,a).replace(N,function(t){return"\\"+O[t]}),i&&(r+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),n&&(r+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),o&&(r+="';\n"+o+"\n__p+='"),s=a+e.length,e}),r+="';\n",i.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{n=new Function(i.variable||"obj","_",r)}catch(t){throw t.source=r,t}if(e)return n(e,x);var a=function(t){return n.call(this,t,x)};return a.source="function("+(i.variable||"obj")+"){\n"+r+"}",a},x.chain=function(t){return x(t).chain()};var I=function(t){return this._chain?x(t).chain():t};x.mixin(x),C(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=n[t];x.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!=t&&"splice"!=t||0!==i.length||delete i[0],I.call(this,i)}}),C(["concat","join","slice"],function(t){var e=n[t];x.prototype[t]=function(){return I.call(this,e.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(t,e,i){function n(t){return t}function o(t){return s(decodeURIComponent(t.replace(a," ")))}function s(t){return 0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")),t}function r(t){return l.json?JSON.parse(t):t}var a=/\+/g,l=t.cookie=function(s,a,u){if(a!==i){if(u=t.extend({},l.defaults,u),null===a&&(u.expires=-1),"number"==typeof u.expires){var c=u.expires,h=u.expires=new Date;h.setDate(h.getDate()+c)}return a=l.json?JSON.stringify(a):a+"",e.cookie=[encodeURIComponent(s),"=",l.raw?a:encodeURIComponent(a),u.expires?"; expires="+u.expires.toUTCString():"",u.path?"; path="+u.path:"",u.domain?"; domain="+u.domain:"",u.secure?"; secure":""].join("")}for(var d=l.raw?n:o,p=e.cookie.split("; "),f=s?null:{},m=0,g=p.length;g>m;m++){var v=p[m].split("="),_=d(v.shift()),y=d(v.join("="));if(s&&s===_){f=r(y);break}s||(f[_]=r(y))}return f};l.defaults={},t.removeCookie=function(e,i){return null!==t.cookie(e)&&(t.cookie(e,null,i),!0)}}(jQuery,document),function(t){t.extend(t.fn,{validate:function(e){if(!this.length)return void(e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var i=t.data(this[0],"validator");return i?i:(this.attr("novalidate","novalidate"),i=new t.validator(e,this[0]),t.data(this[0],"validator",i),i.settings.onsubmit&&(this.validateDelegate(":submit","click",function(e){i.settings.submitHandler&&(i.submitButton=e.target),t(e.target).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==t(e.target).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.submit(function(e){function n(){var n;return!i.settings.submitHandler||(i.submitButton&&(n=t("<input type='hidden'/>").attr("name",i.submitButton.name).val(t(i.submitButton).val()).appendTo(i.currentForm)),i.settings.submitHandler.call(i,i.currentForm,e),i.submitButton&&n.remove(),!1)}return i.settings.debug&&(console.log(i),e.preventDefault()),i.cancelSubmit?(i.cancelSubmit=!1,n()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):n():(i.focusInvalid(),!1)})),i)},valid:function(){if(t(this[0]).is("form"))return this.validate().form();var e=!0,i=t(this[0].form).validate();return this.each(function(){e=i.element(this)&&e}),e},removeAttrs:function(e){var i={},n=this;return t.each(e.split(/\s/),function(t,e){i[e]=n.attr(e),n.removeAttr(e)}),i},rules:function(e,i){var n=this[0];if(e){var o=t.data(n.form,"validator").settings,s=o.rules,r=t.validator.staticRules(n);switch(e){case"add":t.extend(r,t.validator.normalizeRule(i)),delete r.messages,s[n.name]=r,i.messages&&(o.messages[n.name]=t.extend(o.messages[n.name],i.messages));break;case"remove":if(!i)return delete s[n.name],r;var a={};return t.each(i.split(/\s/),function(e,i){a[i]=r[i],delete r[i],"required"===i&&t(n).removeAttr("aria-required")}),a}}var l=t.validator.normalizeRules(t.extend({},t.validator.classRules(n),t.validator.attributeRules(n),t.validator.dataRules(n),t.validator.staticRules(n)),n);if(l.required){var u=l.required;delete l.required,l=t.extend({required:u},l),t(n).attr("aria-required","true")}return l}}),t.extend(t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){return!!t.trim(""+t(e).val())},unchecked:function(e){return!t(e).prop("checked")}}),t.validator=function(e,i){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=i,this.init()},t.validator.format=function(e,i){return 1===arguments.length?function(){var i=t.makeArray(arguments);return i.unshift(e),t.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=t.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),t.each(i,function(t,i){e=e.replace(new RegExp("\\{"+t+"\\}","g"),function(){return i})}),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(t)).hide())},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,e){9===e.which&&""===this.elementValue(t)||(t.name in this.submitted||t===this.lastElement)&&this.element(t)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,i,n){"radio"===e.type?this.findByName(e.name).addClass(i).removeClass(n):t(e).addClass(i).removeClass(n)},unhighlight:function(e,i,n){"radio"===e.type?this.findByName(e.name).removeClass(i).addClass(n):t(e).removeClass(i).addClass(n)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",
maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var i=t.data(this[0].form,"validator"),n="on"+e.type.replace(/^validate/,"");i.settings[n]&&i.settings[n].call(i,this[0],e)}this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i=this.groups={};t.each(this.settings.groups,function(e,n){"string"==typeof n&&(n=n.split(/\s/)),t.each(n,function(t,n){i[n]=e})});var n=this.settings.rules;t.each(n,function(e,i){n[e]=t.validator.normalizeRule(i)}),t(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",e).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",e),this.settings.invalidHandler&&t(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler),t(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){e=this.validationTargetFor(this.clean(e)),this.lastElement=e,this.prepareElement(e),this.currentElements=t(e);var i=this.check(e)!==!1;return i?delete this.invalid[e.name]:this.invalid[e.name]=!0,t(e).attr("aria-invalid",!i),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(e){if(e){t.extend(this.errorMap,e),this.errorList=[];for(var i in e)this.errorList.push({message:e[i],element:this.findByName(i)[0]});this.successList=t.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e=0;for(var i in t)e++;return e},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var e=this.lastActive;return e&&1===t.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,i={};return t(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),!(this.name in i||!e.objectLength(t(this).rules()))&&(i[this.name]=!0,!0)})},clean:function(e){return t(e)[0]},errors:function(){var e=this.settings.errorClass.replace(" ",".");return t(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([]),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(e){var i=t(e).attr("type"),n=t(e).val();return"radio"===i||"checkbox"===i?t("input[name='"+t(e).attr("name")+"']:checked").val():"string"==typeof n?n.replace(/\r/g,""):n},check:function(e){e=this.validationTargetFor(this.clean(e));var i,n=t(e).rules(),o=!1,s=this.elementValue(e);for(var r in n){var a={method:r,parameters:n[r]};try{if(i=t.validator.methods[r].call(this,s,e,a.parameters),"dependency-mismatch"===i){o=!0;continue}if(o=!1,"pending"===i)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!i)return this.formatAndAdd(e,a),!1}catch(t){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+a.method+"' method.",t),t}}if(!o)return this.objectLength(n)&&this.successList.push(e),!0},customDataMessage:function(e,i){return t(e).data("msg-"+i.toLowerCase())||e.attributes&&t(e).attr("data-msg-"+i.toLowerCase())},customMessage:function(t,e){var i=this.settings.messages[t];return i&&(i.constructor===String?i:i[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},defaultMessage:function(e,i){return this.findDefined(this.customMessage(e.name,i),this.customDataMessage(e,i),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[i],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(e,i){var n=this.defaultMessage(e,i.method),o=/\$?\{(\d+)\}/g;"function"==typeof n?n=n.call(this,i.parameters,e):o.test(n)&&(n=t.validator.format(n.replace(o,"{$1}"),i.parameters)),this.errorList.push({message:n,element:e}),this.errorMap[e.name]=n,this.submitted[e.name]=n},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e;for(t=0;this.errorList[t];t++){var i=this.errorList[t];this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map(function(){return this.element})},showLabel:function(e,i){var n=this.errorsFor(e);n.length?(n.removeClass(this.settings.validClass).addClass(this.settings.errorClass),n.html(i)):(n=t("<"+this.settings.errorElement+">").attr("for",this.idOrName(e)).addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(n=n.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(n).length||(this.settings.errorPlacement?this.settings.errorPlacement(n,t(e)):n.insertAfter(e))),!i&&this.settings.success&&(n.text(""),"string"==typeof this.settings.success?n.addClass(this.settings.success):this.settings.success(n,e)),this.toShow=this.toShow.add(n)},errorsFor:function(e){var i=this.idOrName(e);return this.errors().filter(function(){return t(this).attr("for")===i})},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name).not(this.settings.ignore)[0]),t},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){return t(this.currentForm).find("[name='"+e+"']")},getLength:function(e,i){switch(i.nodeName.toLowerCase()){case"select":return t("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return e.length},depend:function(t,e){return!this.dependTypes[typeof t]||this.dependTypes[typeof t](t,e)},dependTypes:{"boolean":function(t){return t},string:function(e,i){return!!t(e,i.form).length},"function":function(t,e){return t(e)}},optional:function(e){var i=this.elementValue(e);return!t.validator.methods.required.call(this,i,e)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,this.pending[t.name]=!0)},stopRequest:function(e,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,i){e.constructor===String?this.classRuleSettings[e]=i:t.extend(this.classRuleSettings,e)},classRules:function(e){var i={},n=t(e).attr("class");return n&&t.each(n.split(" "),function(){this in t.validator.classRuleSettings&&t.extend(i,t.validator.classRuleSettings[this])}),i},attributeRules:function(e){var i={},n=t(e),o=n[0].getAttribute("type");for(var s in t.validator.methods){var r;"required"===s?(r=n.get(0).getAttribute(s),""===r&&(r=!0),r=!!r):r=n.attr(s),/min|max/.test(s)&&(null===o||/number|range|text/.test(o))&&(r=Number(r)),r?i[s]=r:o===s&&"range"!==o&&(i[s]=!0)}return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},dataRules:function(e){var i,n,o={},s=t(e);for(i in t.validator.methods)n=s.data("rule-"+i.toLowerCase()),void 0!==n&&(o[i]=n);return o},staticRules:function(e){var i={},n=t.data(e.form,"validator");return n.settings.rules&&(i=t.validator.normalizeRule(n.settings.rules[e.name])||{}),i},normalizeRules:function(e,i){return t.each(e,function(n,o){if(o===!1)return void delete e[n];if(o.param||o.depends){var s=!0;switch(typeof o.depends){case"string":s=!!t(o.depends,i.form).length;break;case"function":s=o.depends.call(i,i)}s?e[n]=void 0===o.param||o.param:delete e[n]}}),t.each(e,function(n,o){e[n]=t.isFunction(o)?o(i):o}),t.each(["minlength","maxlength"],function(){e[this]&&(e[this]=Number(e[this]))}),t.each(["rangelength","range"],function(){var i;e[this]&&(t.isArray(e[this])?e[this]=[Number(e[this][0]),Number(e[this][1])]:"string"==typeof e[this]&&(i=e[this].split(/[\s,]+/),e[this]=[Number(i[0]),Number(i[1])]))}),t.validator.autoCreateRanges&&(e.min&&e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),e.minlength&&e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e},normalizeRule:function(e){if("string"==typeof e){var i={};t.each(e.split(/\s/),function(){i[this]=!0}),e=i}return e},addMethod:function(e,i,n){t.validator.methods[e]=i,t.validator.messages[e]=void 0!==n?n:t.validator.messages[e],i.length<3&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,i,n){if(!this.depend(n,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var o=t(i).val();return o&&o.length>0}return this.checkable(i)?this.getLength(e,i)>0:t.trim(e).length>0},email:function(t,e){return this.optional(e)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(t)},url:function(t,e){return this.optional(e)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(t)},number:function(t,e){return this.optional(e)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},creditcard:function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;var i=0,n=0,o=!1;if(t=t.replace(/\D/g,""),t.length<13||t.length>19)return!1;for(var s=t.length-1;s>=0;s--){var r=t.charAt(s);n=parseInt(r,10),o&&(n*=2)>9&&(n-=9),i+=n,o=!o}return i%10===0},minlength:function(e,i,n){var o=t.isArray(e)?e.length:this.getLength(t.trim(e),i);return this.optional(i)||o>=n},maxlength:function(e,i,n){var o=t.isArray(e)?e.length:this.getLength(t.trim(e),i);return this.optional(i)||o<=n},rangelength:function(e,i,n){var o=t.isArray(e)?e.length:this.getLength(t.trim(e),i);return this.optional(i)||o>=n[0]&&o<=n[1]},min:function(t,e,i){return this.optional(e)||t>=i},max:function(t,e,i){return this.optional(e)||t<=i},range:function(t,e,i){return this.optional(e)||t>=i[0]&&t<=i[1]},equalTo:function(e,i,n){var o=t(n);return this.settings.onfocusout&&o.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){t(i).valid()}),e===o.val()},remote:function(e,i,n){if(this.optional(i))return"dependency-mismatch";var o=this.previousValue(i);if(this.settings.messages[i.name]||(this.settings.messages[i.name]={}),o.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=o.message,n="string"==typeof n&&{url:n}||n,o.old===e)return o.valid;o.old=e;var s=this;this.startRequest(i);var r={};return r[i.name]=e,t.ajax(t.extend(!0,{url:n,mode:"abort",port:"validate"+i.name,dataType:"json",data:r,success:function(n){s.settings.messages[i.name].remote=o.originalMessage;var r=n===!0||"true"===n;if(r){var a=s.formSubmitted;s.prepareElement(i),s.formSubmitted=a,s.successList.push(i),delete s.invalid[i.name],s.showErrors()}else{var l={},u=n||s.defaultMessage(i,"remote");l[i.name]=o.message=t.isFunction(u)?u(e):u,s.invalid[i.name]=!0,s.showErrors(l)}o.valid=r,s.stopRequest(i,r)}},n)),"pending"}}}),t.format=t.validator.format}(jQuery),function(t){var e={};if(t.ajaxPrefilter)t.ajaxPrefilter(function(t,i,n){var o=t.port;"abort"===t.mode&&(e[o]&&e[o].abort(),e[o]=n)});else{var i=t.ajax;t.ajax=function(n){var o=("mode"in n?n:t.ajaxSettings).mode,s=("port"in n?n:t.ajaxSettings).port;return"abort"===o?(e[s]&&e[s].abort(),e[s]=i.apply(this,arguments),e[s]):i.apply(this,arguments)}}}(jQuery),function(t){t.extend(t.fn,{validateDelegate:function(e,i,n){return this.bind(i,function(i){var o=t(i.target);if(o.is(e))return n.apply(o,arguments)})}})}(jQuery),jQuery.validator.addMethod("pattern",function(t,e,i){return!!this.optional(e)||("string"==typeof i&&(i=new RegExp(i)),i.test(t))},"Invalid format."),function(t,e,i,n){var o=t(e);t.fn.lazyload=function(s){function r(){var e=0;l.each(function(){var i=t(this);if(!u.skip_invisible||i.is(":visible"))if(t.abovethetop(this,u)||t.leftofbegin(this,u));else if(t.belowthefold(this,u)||t.rightoffold(this,u)){if(++e>u.failure_limit)return!1}else i.trigger("appear"),e=0})}var a,l=this,u={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:e,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return s&&(n!==s.failurelimit&&(s.failure_limit=s.failurelimit,delete s.failurelimit),n!==s.effectspeed&&(s.effect_speed=s.effectspeed,delete s.effectspeed),t.extend(u,s)),a=u.container===n||u.container===e?o:t(u.container),0===u.event.indexOf("scroll")&&a.bind(u.event,function(){return r()}),this.each(function(){var e=this,i=t(e);e.loaded=!1,i.attr("src")!==n&&i.attr("src")!==!1||i.is("img")&&i.attr("src",u.placeholder),i.one("appear",function(){if(!this.loaded){if(u.appear){var n=l.length;u.appear.call(e,n,u)}t("<img />").bind("load",function(){var n=i.attr("data-"+u.data_attribute);i.hide(),i.is("img")?i.attr("src",n):i.css("background-image","url('"+n+"')"),i[u.effect](u.effect_speed),e.loaded=!0;var o=t.grep(l,function(t){return!t.loaded});if(l=t(o),u.load){var s=l.length;u.load.call(e,s,u)}}).attr("src",i.attr("data-"+u.data_attribute))}}),0!==u.event.indexOf("scroll")&&i.bind(u.event,function(){e.loaded||i.trigger("appear")})}),o.bind("resize",function(){r()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&o.bind("pageshow",function(e){e.originalEvent&&e.originalEvent.persisted&&l.each(function(){t(this).trigger("appear")})}),t(i).ready(function(){r()}),this},t.belowthefold=function(i,s){var r;return r=s.container===n||s.container===e?(e.innerHeight?e.innerHeight:o.height())+o.scrollTop():t(s.container).offset().top+t(s.container).height(),r<=t(i).offset().top-s.threshold},t.rightoffold=function(i,s){var r;return r=s.container===n||s.container===e?o.width()+o.scrollLeft():t(s.container).offset().left+t(s.container).width(),r<=t(i).offset().left-s.threshold},t.abovethetop=function(i,s){var r;return r=s.container===n||s.container===e?o.scrollTop():t(s.container).offset().top,r>=t(i).offset().top+s.threshold+t(i).height()},t.leftofbegin=function(i,s){var r;return r=s.container===n||s.container===e?o.scrollLeft():t(s.container).offset().left,r>=t(i).offset().left+s.threshold+t(i).width()},t.inviewport=function(e,i){return!(t.rightoffold(e,i)||t.leftofbegin(e,i)||t.belowthefold(e,i)||t.abovethetop(e,i))},t.extend(t.expr[":"],{"below-the-fold":function(e){return t.belowthefold(e,{threshold:0})},"above-the-top":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-screen":function(e){return t.rightoffold(e,{threshold:0})},"left-of-screen":function(e){return!t.rightoffold(e,{threshold:0})},"in-viewport":function(e){return t.inviewport(e,{threshold:0})},"above-the-fold":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-fold":function(e){return t.rightoffold(e,{threshold:0})},"left-of-fold":function(e){return!t.rightoffold(e,{threshold:0})}})}(jQuery,window,document),function(t,e,i){var n=t.L,o={};o.version="0.6.1","object"==typeof module&&"object"==typeof module.exports?module.exports=o:"function"==typeof define&&define.amd&&define(o),o.noConflict=function(){return t.L=n,this},t.L=o,o.Util={extend:function(t){var e,i,n,o,s=Array.prototype.slice.call(arguments,1);for(i=0,n=s.length;i<n;i++){o=s[i]||{};for(e in o)o.hasOwnProperty(e)&&(t[e]=o[e])}return t},bind:function(t,e){var i=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return t.apply(e,i||arguments)}},stamp:function(){var t=0,e="_leaflet_id";return function(i){return i[e]=i[e]||++t,i[e]}}(),invokeEach:function(t,e,i){var n,o;if("object"==typeof t){o=Array.prototype.slice.call(arguments,3);for(n in t)e.apply(i,[n,t[n]].concat(o));return!0}return!1},limitExecByInterval:function(t,e,i){var n,o;return function s(){var r=arguments;return n?void(o=!0):(n=!0,setTimeout(function(){n=!1,o&&(s.apply(i,r),o=!1)},e),void t.apply(i,r))}},falseFn:function(){return!1},formatNum:function(t,e){var i=Math.pow(10,e||5);return Math.round(t*i)/i},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return o.Util.trim(t).split(/\s+/)},setOptions:function(t,e){return t.options=o.extend({},t.options,e),t.options},getParamString:function(t,e,i){var n=[];for(var o in t)n.push(encodeURIComponent(i?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&e.indexOf("?")!==-1?"&":"?")+n.join("&")},template:function(t,e){return t.replace(/\{ *([\w_]+) *\}/g,function(t,n){var o=e[n];if(o===i)throw new Error("No value provided for variable "+t);return"function"==typeof o&&(o=o(e)),o})},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function e(e){var i,n,o=["webkit","moz","o","ms"];for(i=0;i<o.length&&!n;i++)n=t[o[i]+e];return n}function i(e){var i=+new Date,o=Math.max(0,16-(i-n));return n=i+o,t.setTimeout(e,o)}var n=0,s=t.requestAnimationFrame||e("RequestAnimationFrame")||i,r=t.cancelAnimationFrame||e("CancelAnimationFrame")||e("CancelRequestAnimationFrame")||function(e){t.clearTimeout(e)};o.Util.requestAnimFrame=function(e,n,r,a){return e=o.bind(e,n),r&&s===i?void e():s.call(t,e,a)},o.Util.cancelAnimFrame=function(e){e&&r.call(t,e)}}(),o.extend=o.Util.extend,o.bind=o.Util.bind,o.stamp=o.Util.stamp,o.setOptions=o.Util.setOptions,o.Class=function(){},o.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},i=function(){};i.prototype=this.prototype;var n=new i;n.constructor=e,e.prototype=n;for(var s in this)this.hasOwnProperty(s)&&"prototype"!==s&&(e[s]=this[s]);t.statics&&(o.extend(e,t.statics),delete t.statics),t.includes&&(o.Util.extend.apply(null,[n].concat(t.includes)),delete t.includes),t.options&&n.options&&(t.options=o.extend({},n.options,t.options)),o.extend(n,t),n._initHooks=[];var r=this;return e.__super__=r.prototype,n.callInitHooks=function(){if(!this._initHooksCalled){r.prototype.callInitHooks&&r.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=n._initHooks.length;t<e;t++)n._initHooks[t].call(this)}},e},o.Class.include=function(t){o.extend(this.prototype,t)},o.Class.mergeOptions=function(t){o.extend(this.prototype.options,t)},o.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i)};var s="_leaflet_events";o.Mixin={},o.Mixin.Events={addEventListener:function(t,e,i){if(o.Util.invokeEach(t,this.addEventListener,this,e,i))return this;var n,r,a,l,u,c,h,d=this[s]=this[s]||{},p=i&&o.stamp(i);for(t=o.Util.splitWords(t),n=0,r=t.length;n<r;n++)a={action:e,context:i||this},l=t[n],i?(u=l+"_idx",c=u+"_len",h=d[u]=d[u]||{},h[p]||(h[p]=[],d[c]=(d[c]||0)+1),h[p].push(a)):(d[l]=d[l]||[],d[l].push(a));return this},hasEventListeners:function(t){var e=this[s];return!!e&&(t in e&&e[t].length>0||t+"_idx"in e&&e[t+"_idx_len"]>0)},removeEventListener:function(t,e,i){if(!this[s])return this;if(!t)return this.clearAllEventListeners();if(o.Util.invokeEach(t,this.removeEventListener,this,e,i))return this;var n,r,a,l,u,c,h,d,p,f=this[s],m=i&&o.stamp(i);for(t=o.Util.splitWords(t),n=0,r=t.length;n<r;n++)if(a=t[n],c=a+"_idx",h=c+"_len",d=f[c],e){if(l=i&&d?d[m]:f[a]){for(u=l.length-1;u>=0;u--)l[u].action!==e||i&&l[u].context!==i||(p=l.splice(u,1),p[0].action=o.Util.falseFn);i&&d&&0===l.length&&(delete d[m],f[h]--)}}else delete f[a],delete f[c];return this},clearAllEventListeners:function(){return delete this[s],this},fireEvent:function(t,e){if(!this.hasEventListeners(t))return this;var i,n,r,a,l,u=o.Util.extend({},e,{type:t,target:this}),c=this[s];if(c[t])for(i=c[t].slice(),n=0,r=i.length;n<r;n++)i[n].action.call(i[n].context||this,u);a=c[t+"_idx"];for(l in a)if(i=a[l].slice())for(n=0,r=i.length;n<r;n++)i[n].action.call(i[n].context||this,u);return this},addOneTimeEventListener:function(t,e,i){if(o.Util.invokeEach(t,this.addOneTimeEventListener,this,e,i))return this;var n=o.bind(function(){this.removeEventListener(t,e,i).removeEventListener(t,n,i)},this);return this.addEventListener(t,e,i).addEventListener(t,n,i)}},o.Mixin.Events.on=o.Mixin.Events.addEventListener,o.Mixin.Events.off=o.Mixin.Events.removeEventListener,o.Mixin.Events.once=o.Mixin.Events.addOneTimeEventListener,o.Mixin.Events.fire=o.Mixin.Events.fireEvent,function(){var n=!!t.ActiveXObject,s=n&&!t.XMLHttpRequest,r=n&&!e.querySelector,a=n&&!e.addEventListener,l=navigator.userAgent.toLowerCase(),u=l.indexOf("webkit")!==-1,c=l.indexOf("chrome")!==-1,h=l.indexOf("phantom")!==-1,d=l.indexOf("android")!==-1,p=l.search("android [23]")!==-1,f=typeof orientation!=i+"",m=t.navigator&&t.navigator.msPointerEnabled&&t.navigator.msMaxTouchPoints,g="devicePixelRatio"in t&&t.devicePixelRatio>1||"matchMedia"in t&&t.matchMedia("(min-resolution:144dpi)")&&t.matchMedia("(min-resolution:144dpi)").matches,v=e.documentElement,_=n&&"transition"in v.style,y="WebKitCSSMatrix"in t&&"m11"in new t.WebKitCSSMatrix,b="MozPerspective"in v.style,w="OTransition"in v.style,S=!t.L_DISABLE_3D&&(_||y||b||w)&&!h,x=!t.L_NO_TOUCH&&!h&&function(){var t="ontouchstart";if(m||t in v)return!0;var i=e.createElement("div"),n=!1;return!!i.setAttribute&&(i.setAttribute(t,"return;"),"function"==typeof i[t]&&(n=!0),i.removeAttribute(t),i=null,n)}();o.Browser={ie:n,ie6:s,ie7:r,ielt9:a,webkit:u,android:d,android23:p,chrome:c,ie3d:_,webkit3d:y,gecko3d:b,opera3d:w,any3d:S,mobile:f,mobileWebkit:f&&u,mobileWebkit3d:f&&y,mobileOpera:f&&t.opera,touch:x,msTouch:m,retina:g}}(),o.Point=function(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e},o.Point.prototype={clone:function(){return new o.Point(this.x,this.y)},add:function(t){return this.clone()._add(o.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(o.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(t){t=o.point(t);var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return t=o.point(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=o.point(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+o.Util.formatNum(this.x)+", "+o.Util.formatNum(this.y)+")"}},o.point=function(t,e,n){return t instanceof o.Point?t:o.Util.isArray(t)?new o.Point(t[0],t[1]):t===i||null===t?t:new o.Point(t,e,n)},o.Bounds=function(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;n<o;n++)this.extend(i[n])},o.Bounds.prototype={extend:function(t){return t=o.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new o.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new o.Point(this.min.x,this.max.y)},getTopRight:function(){return new o.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return t="number"==typeof t[0]||t instanceof o.Point?o.point(t):o.bounds(t),t instanceof o.Bounds?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=o.bounds(t);var e=this.min,i=this.max,n=t.min,s=t.max,r=s.x>=e.x&&n.x<=i.x,a=s.y>=e.y&&n.y<=i.y;return r&&a},isValid:function(){return!(!this.min||!this.max)}},o.bounds=function(t,e){return!t||t instanceof o.Bounds?t:new o.Bounds(t,e)},o.Transformation=function(t,e,i,n){this._a=t,this._b=e,this._c=i,this._d=n},o.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new o.Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}},o.DomUtil={get:function(t){return"string"==typeof t?e.getElementById(t):t},getStyle:function(t,i){var n=t.style[i];if(!n&&t.currentStyle&&(n=t.currentStyle[i]),(!n||"auto"===n)&&e.defaultView){var o=e.defaultView.getComputedStyle(t,null);n=o?o[i]:null}return"auto"===n?null:n},getViewportOffset:function(t){var i,n=0,s=0,r=t,a=e.body,l=e.documentElement,u=o.Browser.ie7;do{if(n+=r.offsetTop||0,s+=r.offsetLeft||0,n+=parseInt(o.DomUtil.getStyle(r,"borderTopWidth"),10)||0,s+=parseInt(o.DomUtil.getStyle(r,"borderLeftWidth"),10)||0,i=o.DomUtil.getStyle(r,"position"),r.offsetParent===a&&"absolute"===i)break;if("fixed"===i){n+=a.scrollTop||l.scrollTop||0,s+=a.scrollLeft||l.scrollLeft||0;break}if("relative"===i&&!r.offsetLeft){var c=o.DomUtil.getStyle(r,"width"),h=o.DomUtil.getStyle(r,"max-width"),d=r.getBoundingClientRect();"none"===c&&"none"===h||(s+=d.left+r.clientLeft),n+=d.top+(a.scrollTop||l.scrollTop||0);break}r=r.offsetParent}while(r);r=t;do{if(r===a)break;n-=r.scrollTop||0,s-=r.scrollLeft||0,o.DomUtil.documentIsLtr()||!o.Browser.webkit&&!u||(s+=r.scrollWidth-r.clientWidth,u&&"hidden"!==o.DomUtil.getStyle(r,"overflow-y")&&"hidden"!==o.DomUtil.getStyle(r,"overflow")&&(s+=17)),r=r.parentNode}while(r);return new o.Point(s,n)},documentIsLtr:function(){return o.DomUtil._docIsLtrCached||(o.DomUtil._docIsLtrCached=!0,o.DomUtil._docIsLtr="ltr"===o.DomUtil.getStyle(e.body,"direction")),o.DomUtil._docIsLtr},create:function(t,i,n){var o=e.createElement(t);return o.className=i,n&&n.appendChild(o),o},hasClass:function(t,e){return t.className.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)},addClass:function(t,e){o.DomUtil.hasClass(t,e)||(t.className+=(t.className?" ":"")+e)},removeClass:function(t,e){t.className=o.Util.trim((" "+t.className+" ").replace(" "+e+" "," "))},setOpacity:function(t,e){if("opacity"in t.style)t.style.opacity=e;else if("filter"in t.style){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(t){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"}},testProp:function(t){for(var i=e.documentElement.style,n=0;n<t.length;n++)if(t[n]in i)return t[n];return!1},getTranslateString:function(t){var e=o.Browser.webkit3d,i="translate"+(e?"3d":"")+"(",n=(e?",0":"")+")";return i+t.x+"px,"+t.y+"px"+n},getScaleString:function(t,e){var i=o.DomUtil.getTranslateString(e.add(e.multiplyBy(-1*t))),n=" scale("+t+") ";return i+n},setPosition:function(t,e,i){t._leaflet_pos=e,!i&&o.Browser.any3d?(t.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(e),o.Browser.mobileWebkit3d&&(t.style.WebkitBackfaceVisibility="hidden")):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos}},o.DomUtil.TRANSFORM=o.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),
o.DomUtil.TRANSITION=o.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),o.DomUtil.TRANSITION_END="webkitTransition"===o.DomUtil.TRANSITION||"OTransition"===o.DomUtil.TRANSITION?o.DomUtil.TRANSITION+"End":"transitionend",function(){var i=o.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]),n=o.DomUtil.testProp(["userDrag","WebkitUserDrag","OUserDrag","MozUserDrag","msUserDrag"]);o.extend(o.DomUtil,{disableTextSelection:function(){if(i){var n=e.documentElement.style;this._userSelect=n[i],n[i]="none"}else o.DomEvent.on(t,"selectstart",o.DomEvent.stop)},enableTextSelection:function(){i?(e.documentElement.style[i]=this._userSelect,delete this._userSelect):o.DomEvent.off(t,"selectstart",o.DomEvent.stop)},disableImageDrag:function(){if(n){var i=e.documentElement.style;this._userDrag=i[n],i[n]="none"}else o.DomEvent.on(t,"dragstart",o.DomEvent.stop)},enableImageDrag:function(){n?(e.documentElement.style[n]=this._userDrag,delete this._userDrag):o.DomEvent.off(t,"dragstart",o.DomEvent.stop)}})}(),o.LatLng=function(t,e){var i=parseFloat(t),n=parseFloat(e);if(isNaN(i)||isNaN(n))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=i,this.lng=n},o.extend(o.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),o.LatLng.prototype={equals:function(t){if(!t)return!1;t=o.latLng(t);var e=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return e<=o.LatLng.MAX_MARGIN},toString:function(t){return"LatLng("+o.Util.formatNum(this.lat,t)+", "+o.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){t=o.latLng(t);var e=6378137,i=o.LatLng.DEG_TO_RAD,n=(t.lat-this.lat)*i,s=(t.lng-this.lng)*i,r=this.lat*i,a=t.lat*i,l=Math.sin(n/2),u=Math.sin(s/2),c=l*l+u*u*Math.cos(r)*Math.cos(a);return 2*e*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))},wrap:function(t,e){var i=this.lng;return t=t||-180,e=e||180,i=(i+e)%(e-t)+(i<t||i===e?e:t),new o.LatLng(this.lat,i)}},o.latLng=function(t,e){return t instanceof o.LatLng?t:o.Util.isArray(t)?new o.LatLng(t[0],t[1]):t===i||null===t?t:"object"==typeof t&&"lat"in t?new o.LatLng(t.lat,"lng"in t?t.lng:t.lon):new o.LatLng(t,e)},o.LatLngBounds=function(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;n<o;n++)this.extend(i[n])},o.LatLngBounds.prototype={extend:function(t){return t?(t="number"==typeof t[0]||"string"==typeof t[0]||t instanceof o.LatLng?o.latLng(t):o.latLngBounds(t),t instanceof o.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(t.lat,this._southWest.lat),this._southWest.lng=Math.min(t.lng,this._southWest.lng),this._northEast.lat=Math.max(t.lat,this._northEast.lat),this._northEast.lng=Math.max(t.lng,this._northEast.lng)):(this._southWest=new o.LatLng(t.lat,t.lng),this._northEast=new o.LatLng(t.lat,t.lng)):t instanceof o.LatLngBounds&&(this.extend(t._southWest),this.extend(t._northEast)),this):this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,s=Math.abs(e.lng-i.lng)*t;return new o.LatLngBounds(new o.LatLng(e.lat-n,e.lng-s),new o.LatLng(i.lat+n,i.lng+s))},getCenter:function(){return new o.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new o.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new o.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof o.LatLng?o.latLng(t):o.latLngBounds(t);var e,i,n=this._southWest,s=this._northEast;return t instanceof o.LatLngBounds?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=n.lat&&i.lat<=s.lat&&e.lng>=n.lng&&i.lng<=s.lng},intersects:function(t){t=o.latLngBounds(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),s=t.getNorthEast(),r=s.lat>=e.lat&&n.lat<=i.lat,a=s.lng>=e.lng&&n.lng<=i.lng;return r&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){return!!t&&(t=o.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast()))},isValid:function(){return!(!this._southWest||!this._northEast)}},o.latLngBounds=function(t,e){return!t||t instanceof o.LatLngBounds?t:new o.LatLngBounds(t,e)},o.Projection={},o.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(t){var e=o.LatLng.DEG_TO_RAD,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),s=t.lng*e,r=n*e;return r=Math.log(Math.tan(Math.PI/4+r/2)),new o.Point(s,r)},unproject:function(t){var e=o.LatLng.RAD_TO_DEG,i=t.x*e,n=(2*Math.atan(Math.exp(t.y))-Math.PI/2)*e;return new o.LatLng(n,i)}},o.Projection.LonLat={project:function(t){return new o.Point(t.lng,t.lat)},unproject:function(t){return new o.LatLng(t.y,t.x)}},o.CRS={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},scale:function(t){return 256*Math.pow(2,t)}},o.CRS.Simple=o.extend({},o.CRS,{projection:o.Projection.LonLat,transformation:new o.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)}}),o.CRS.EPSG3857=o.extend({},o.CRS,{code:"EPSG:3857",projection:o.Projection.SphericalMercator,transformation:new o.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(t){var e=this.projection.project(t),i=6378137;return e.multiplyBy(i)}}),o.CRS.EPSG900913=o.extend({},o.CRS.EPSG3857,{code:"EPSG:900913"}),o.CRS.EPSG4326=o.extend({},o.CRS,{code:"EPSG:4326",projection:o.Projection.LonLat,transformation:new o.Transformation(1/360,.5,-1/360,.5)}),o.Map=o.Class.extend({includes:o.Mixin.Events,options:{crs:o.CRS.EPSG3857,fadeAnimation:o.DomUtil.TRANSITION&&!o.Browser.android23,trackResize:!0,markerZoomAnimation:o.DomUtil.TRANSITION&&o.Browser.any3d},initialize:function(t,e){e=o.setOptions(this,e),this._initContainer(t),this._initLayout(),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.center&&e.zoom!==i&&this.setView(o.latLng(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(e.layers)},setView:function(t,e){return this._resetView(o.latLng(t),this._limitZoom(e)),this},setZoom:function(t,e){return this.setView(this.getCenter(),t,{zoom:e})},zoomIn:function(t,e){return this.setZoom(this._zoom+(t||1),e)},zoomOut:function(t,e){return this.setZoom(this._zoom-(t||1),e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),s=this.getSize().divideBy(2),r=t instanceof o.Point?t:this.latLngToContainerPoint(t),a=r.subtract(s).multiplyBy(1-1/n),l=this.containerPointToLatLng(s.add(a));return this.setView(l,e,{zoom:i})},fitBounds:function(t,e){e=e||{},t=t.getBounds?t.getBounds():o.latLngBounds(t);var i=o.point(e.paddingTopLeft||e.padding||[0,0]),n=o.point(e.paddingBottomRight||e.padding||[0,0]),s=this.getBoundsZoom(t,!1,i.add(n)),r=n.subtract(i).divideBy(2),a=this.project(t.getSouthWest(),s),l=this.project(t.getNorthEast(),s),u=this.unproject(a.add(l).divideBy(2).add(r),s);return this.setView(u,s,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t){return this.fire("movestart"),this._rawPanBy(o.point(t)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(t){if(t=o.latLngBounds(t),this.options.maxBounds=t,!t)return this._boundsMinZoom=null,this.off("moveend",this._panInsideMaxBounds,this),this;var e=this.getBoundsZoom(t,!0);return this._boundsMinZoom=e,this._loaded&&(this._zoom<e?this.setView(t.getCenter(),e):this.panInsideBounds(t)),this.on("moveend",this._panInsideMaxBounds,this),this},panInsideBounds:function(t){t=o.latLngBounds(t);var e=this.getPixelBounds(),i=e.getBottomLeft(),n=e.getTopRight(),s=this.project(t.getSouthWest()),r=this.project(t.getNorthEast()),a=0,l=0;return n.y<r.y&&(l=Math.ceil(r.y-n.y)),n.x>r.x&&(a=Math.floor(r.x-n.x)),i.y>s.y&&(l=Math.floor(s.y-i.y)),i.x<s.x&&(a=Math.ceil(s.x-i.x)),a||l?this.panBy([a,l]):this},addLayer:function(t){var e=o.stamp(t);return this._layers[e]?this:(this._layers[e]=t,!t.options||isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[e]=t,this._updateZoomLevels()),this.options.zoomAnimation&&o.TileLayer&&t instanceof o.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,t.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(t),this)},removeLayer:function(t){var e=o.stamp(t);if(this._layers[e])return this._loaded&&(t.onRemove(this),this.fire("layerremove",{layer:t})),delete this._layers[e],this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels()),this.options.zoomAnimation&&o.TileLayer&&t instanceof o.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,t.off("load",this._onTileLayerLoad,this)),this},hasLayer:function(t){return!!t&&o.stamp(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},invalidateSize:function(t){t=o.extend({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();if(this._sizeChanged=!0,this.options.maxBounds&&this.setMaxBounds(this.options.maxBounds),!this._loaded)return this;var i=this.getSize(),n=e.subtract(i).divideBy(2).round();return n.x||n.y?(t.animate&&t.pan?this.panBy(n):(t.pan&&this._rawPanBy(n),this.fire("move"),clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o.bind(this.fire,this,"moveend"),200)),this.fire("resize",{oldSize:e,newSize:i})):this},addHandler:function(t,e){if(e){var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this}},remove:function(){return this._loaded&&this.fire("unload"),this._initEvents("off"),delete this._container._leaflet,this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._moved()?this.layerPointToLatLng(this._getCenterLayerPoint()):this._initialCenter},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),i=this.unproject(t.getTopRight());return new o.LatLngBounds(e,i)},getMinZoom:function(){var t=this.options.minZoom||0,e=this._layersMinZoom||0,i=this._boundsMinZoom||0;return Math.max(t,e,i)},getMaxZoom:function(){var t=this.options.maxZoom===i?1/0:this.options.maxZoom,e=this._layersMaxZoom===i?1/0:this._layersMaxZoom;return Math.min(t,e)},getBoundsZoom:function(t,e,i){t=o.latLngBounds(t);var n,s=this.getMinZoom()-(e?1:0),r=this.getMaxZoom(),a=this.getSize(),l=t.getNorthWest(),u=t.getSouthEast(),c=!0;i=o.point(i||[0,0]);do s++,n=this.project(u,s).subtract(this.project(l,s)).add(i),c=e?n.x<a.x||n.y<a.y:a.contains(n);while(c&&s<=r);return c&&e?null:e?s:s-1},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new o.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var t=this._getTopLeftPoint();return new o.Bounds(t,t.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t){var e=this.options.crs;return e.scale(t)/e.scale(this._zoom)},getScaleZoom:function(t){return this._zoom+Math.log(t)/Math.LN2},project:function(t,e){return e=e===i?this._zoom:e,this.options.crs.latLngToPoint(o.latLng(t),e)},unproject:function(t,e){return e=e===i?this._zoom:e,this.options.crs.pointToLatLng(o.point(t),e)},layerPointToLatLng:function(t){var e=o.point(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(o.latLng(t))._round();return e._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(t){return o.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return o.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(o.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(o.latLng(t)))},mouseEventToContainerPoint:function(t){return o.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=o.DomUtil.get(t);if(!e)throw new Error("Map container not found.");if(e._leaflet)throw new Error("Map container is already initialized.");e._leaflet=!0},_initLayout:function(){var t=this._container;o.DomUtil.addClass(t,"leaflet-container"+(o.Browser.touch?" leaflet-touch":"")+(o.Browser.retina?" leaflet-retina":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var e=o.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._mapPane=t.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=t.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),t.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),t.shadowPane=this._createPane("leaflet-shadow-pane"),t.overlayPane=this._createPane("leaflet-overlay-pane"),t.markerPane=this._createPane("leaflet-marker-pane"),t.popupPane=this._createPane("leaflet-popup-pane");var e=" leaflet-zoom-hide";this.options.markerZoomAnimation||(o.DomUtil.addClass(t.markerPane,e),o.DomUtil.addClass(t.shadowPane,e),o.DomUtil.addClass(t.popupPane,e))},_createPane:function(t,e){return o.DomUtil.create("div",t,e||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(t){t=t?o.Util.isArray(t)?t:[t]:[];for(var e=0,i=t.length;e<i;e++)this.addLayer(t[e])},_resetView:function(t,e,i,n){var s=this._zoom!==e;n||(this.fire("movestart"),s&&this.fire("zoomstart")),this._zoom=e,this._initialCenter=t,this._initialTopLeftPoint=this._getNewTopLeftPoint(t),i?this._initialTopLeftPoint._add(this._getMapPanePos()):o.DomUtil.setPosition(this._mapPane,new o.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var r=!this._loaded;this._loaded=!0,r&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("viewreset",{hard:!i}),this.fire("move"),(s||n)&&this.fire("zoomend"),this.fire("moveend",{hard:!i})},_rawPanBy:function(t){o.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var t,e=1/0,n=-(1/0),o=this._getZoomSpan();for(t in this._zoomBoundLayers){var s=this._zoomBoundLayers[t];isNaN(s.options.minZoom)||(e=Math.min(e,s.options.minZoom)),isNaN(s.options.maxZoom)||(n=Math.max(n,s.options.maxZoom))}t===i?this._layersMaxZoom=this._layersMinZoom=i:(this._layersMaxZoom=n,this._layersMinZoom=e),o!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){if(o.DomEvent){e=e||"on",o.DomEvent[e](this._container,"click",this._onMouseClick,this);var i,n,s=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(i=0,n=s.length;i<n;i++)o.DomEvent[e](this._container,s[i],this._fireMouseEvent,this);this.options.trackResize&&o.DomEvent[e](t,"resize",this._onResize,this)}},_onResize:function(){o.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=o.Util.requestAnimFrame(this.invalidateSize,this,!1,this._container)},_onMouseClick:function(t){!this._loaded||!t._simulated&&this.dragging&&this.dragging.moved()||t._leaflet_stop||(this.fire("preclick"),this._fireMouseEvent(t))},_fireMouseEvent:function(t){if(this._loaded&&!t._leaflet_stop){var e=t.type;if(e="mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,this.hasEventListeners(e)){"contextmenu"===e&&o.DomEvent.preventDefault(t);var i=this.mouseEventToContainerPoint(t),n=this.containerPointToLayerPoint(i),s=this.layerPointToLatLng(n);this.fire(e,{latlng:s,layerPoint:n,containerPoint:i,originalEvent:t})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,this):this.on("load",t,e),this},_layerAdd:function(t){t.onAdd(this),this.fire("layeradd",{layer:t})},_getMapPanePos:function(){return o.DomUtil.getPosition(this._mapPane)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewTopLeftPoint(i,e).add(this._getMapPanePos());return this.project(t,e)._subtract(n)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom();return Math.max(e,Math.min(i,t))}}),o.map=function(t,e){return new o.Map(t,e)},o.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(t){var e=o.LatLng.DEG_TO_RAD,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),s=this.R_MAJOR,r=this.R_MINOR,a=t.lng*e*s,l=n*e,u=r/s,c=Math.sqrt(1-u*u),h=c*Math.sin(l);h=Math.pow((1-h)/(1+h),.5*c);var d=Math.tan(.5*(.5*Math.PI-l))/h;return l=-s*Math.log(d),new o.Point(a,l)},unproject:function(t){for(var e,i=o.LatLng.RAD_TO_DEG,n=this.R_MAJOR,s=this.R_MINOR,r=t.x*i/n,a=s/n,l=Math.sqrt(1-a*a),u=Math.exp(-t.y/n),c=Math.PI/2-2*Math.atan(u),h=15,d=1e-7,p=h,f=.1;Math.abs(f)>d&&--p>0;)e=l*Math.sin(c),f=Math.PI/2-2*Math.atan(u*Math.pow((1-e)/(1+e),.5*l))-c,c+=f;return new o.LatLng(c*i,r)}},o.CRS.EPSG3395=o.extend({},o.CRS,{code:"EPSG:3395",projection:o.Projection.Mercator,transformation:function(){var t=o.Projection.Mercator,e=t.R_MAJOR,i=t.R_MINOR;return new o.Transformation(.5/(Math.PI*e),.5,-.5/(Math.PI*i),.5)}()}),o.TileLayer=o.Class.extend({includes:o.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:o.Browser.mobile,updateWhenIdle:o.Browser.mobile},initialize:function(t,e){e=o.setOptions(this,e),e.detectRetina&&o.Browser.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomOffset++,e.minZoom>0&&e.minZoom--,this.options.maxZoom--),e.bounds&&(e.bounds=o.latLngBounds(e.bounds)),this._url=t;var i=this.options.subdomains;"string"==typeof i&&(this.options.subdomains=i.split(""))},onAdd:function(t){this._map=t,this._animated=t._zoomAnimated,this._initContainer(),this._createTileProto(),t.on({viewreset:this._reset,moveend:this._update},this),this._animated&&t.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=o.Util.limitExecByInterval(this._update,150,this),t.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this._container.parentNode.removeChild(this._container),t.off({viewreset:this._reset,moveend:this._update},this),this._animated&&t.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||t.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var t=this._map._panes.tilePane;return this._container&&(t.appendChild(this._container),this._setAutoZIndex(t,Math.max)),this},bringToBack:function(){var t=this._map._panes.tilePane;return this._container&&(t.insertBefore(this._container,t.firstChild),this._setAutoZIndex(t,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==i&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t,e){var i,n,o,s=t.children,r=-e(1/0,-(1/0));for(n=0,o=s.length;n<o;n++)s[n]!==this._container&&(i=parseInt(s[n].style.zIndex,10),isNaN(i)||(r=e(r,i)));this.options.zIndex=this._container.style.zIndex=(isFinite(r)?r:0)+e(1,-1)},_updateOpacity:function(){var t,e=this._tiles;if(o.Browser.ielt9)for(t in e)o.DomUtil.setOpacity(e[t],this.options.opacity);else o.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var t=this._map._panes.tilePane;if(!this._container){if(this._container=o.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var e="leaflet-tile-container leaflet-zoom-animated";this._bgBuffer=o.DomUtil.create("div",e,this._container),this._bgBuffer.style.zIndex=1,this._tileContainer=o.DomUtil.create("div",e,this._container),this._tileContainer.style.zIndex=2}else this._tileContainer=this._container;t.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(t){for(var e in this._tiles)this.fire("tileunload",{tile:this._tiles[e]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&t&&t.hard&&this._clearBgBuffer(),this._initContainer()},_update:function(){if(this._map){var t=this._map.getPixelBounds(),e=this._map.getZoom(),i=this.options.tileSize;if(!(e>this.options.maxZoom||e<this.options.minZoom)){var n=o.bounds(t.min.divideBy(i)._floor(),t.max.divideBy(i)._floor());this._addTilesFromCenterOut(n),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(n)}}},_addTilesFromCenterOut:function(t){var i,n,s,r=[],a=t.getCenter();for(i=t.min.y;i<=t.max.y;i++)for(n=t.min.x;n<=t.max.x;n++)s=new o.Point(n,i),this._tileShouldBeLoaded(s)&&r.push(s);var l=r.length;if(0!==l){r.sort(function(t,e){return t.distanceTo(a)-e.distanceTo(a)});var u=e.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=l,n=0;n<l;n++)this._addTile(r[n],u);this._tileContainer.appendChild(u)}},_tileShouldBeLoaded:function(t){if(t.x+":"+t.y in this._tiles)return!1;var e=this.options;if(!e.continuousWorld){var i=this._getWrapTileNum();if(e.noWrap&&(t.x<0||t.x>=i)||t.y<0||t.y>=i)return!1}if(e.bounds){var n=e.tileSize,o=t.multiplyBy(n),s=o.add([n,n]),r=this._map.unproject(o),a=this._map.unproject(s);if(e.continuousWorld||e.noWrap||(r=r.wrap(),a=a.wrap()),!e.bounds.intersects([r,a]))return!1}return!0},_removeOtherTiles:function(t){var e,i,n,o;for(o in this._tiles)e=o.split(":"),i=parseInt(e[0],10),n=parseInt(e[1],10),(i<t.min.x||i>t.max.x||n<t.min.y||n>t.max.y)&&this._removeTile(o)},_removeTile:function(t){var e=this._tiles[t];this.fire("tileunload",{tile:e,url:e.src}),this.options.reuseTiles?(o.DomUtil.removeClass(e,"leaflet-tile-loaded"),this._unusedTiles.push(e)):e.parentNode===this._tileContainer&&this._tileContainer.removeChild(e),o.Browser.android||(e.onload=null,e.src=o.Util.emptyImageUrl),delete this._tiles[t]},_addTile:function(t,e){var i=this._getTilePos(t),n=this._getTile();o.DomUtil.setPosition(n,i,o.Browser.chrome||o.Browser.android23),this._tiles[t.x+":"+t.y]=n,this._loadTile(n,t),n.parentNode!==this._tileContainer&&e.appendChild(n)},_getZoomForUrl:function(){var t=this.options,e=this._map.getZoom();return t.zoomReverse&&(e=t.maxZoom-e),e+t.zoomOffset},_getTilePos:function(t){var e=this._map.getPixelOrigin(),i=this.options.tileSize;return t.multiplyBy(i).subtract(e)},getTileUrl:function(t){return o.Util.template(this._url,o.extend({s:this._getSubdomain(t),z:t.z,x:t.x,y:t.y},this.options))},_getWrapTileNum:function(){return Math.pow(2,this._getZoomForUrl())},_adjustTilePoint:function(t){var e=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(t.x=(t.x%e+e)%e),this.options.tms&&(t.y=e-t.y-1),t.z=this._getZoomForUrl()},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_createTileProto:function(){var t=this._tileImg=o.DomUtil.create("img","leaflet-tile");t.style.width=t.style.height=this.options.tileSize+"px",t.galleryimg="no"},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var t=this._unusedTiles.pop();return this._resetTile(t),t}return this._createTile()},_resetTile:function(){},_createTile:function(){var t=this._tileImg.cloneNode(!1);return t.onselectstart=t.onmousemove=o.Util.falseFn,o.Browser.ielt9&&this.options.opacity!==i&&o.DomUtil.setOpacity(t,this.options.opacity),t},_loadTile:function(t,e){t._layer=this,t.onload=this._tileOnLoad,t.onerror=this._tileOnError,this._adjustTilePoint(e),t.src=this.getTileUrl(e)},_tileLoaded:function(){this._tilesToLoad--,this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(o.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var t=this._layer;this.src!==o.Util.emptyImageUrl&&(o.DomUtil.addClass(this,"leaflet-tile-loaded"),t.fire("tileload",{tile:this,url:this.src})),t._tileLoaded()},_tileOnError:function(){var t=this._layer;t.fire("tileerror",{tile:this,url:this.src});var e=t.options.errorTileUrl;e&&(this.src=e),t._tileLoaded()}}),o.tileLayer=function(t,e){return new o.TileLayer(t,e)},o.TileLayer.WMS=o.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(t,e){this._url=t;var i=o.extend({},this.defaultWmsParams),n=e.tileSize||this.options.tileSize;e.detectRetina&&o.Browser.retina?i.width=i.height=2*n:i.width=i.height=n;for(var s in e)this.options.hasOwnProperty(s)||"crs"===s||(i[s]=e[s]);this.wmsParams=i,o.setOptions(this,e)},onAdd:function(t){this._crs=this.options.crs||t.options.crs;var e=parseFloat(this.wmsParams.version)>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,o.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t,e){var i=this._map,n=this.options.tileSize,s=t.multiplyBy(n),r=s.add([n,n]),a=this._crs.project(i.unproject(s,e)),l=this._crs.project(i.unproject(r,e)),u=[a.x,l.y,l.x,a.y].join(","),c=o.Util.template(this._url,{s:this._getSubdomain(t)});return c+o.Util.getParamString(this.wmsParams,c,!0)+"&BBOX="+u},setParams:function(t,e){return o.extend(this.wmsParams,t),e||this.redraw(),this}}),o.tileLayer.wms=function(t,e){return new o.TileLayer.WMS(t,e)},o.TileLayer.Canvas=o.TileLayer.extend({options:{async:!1},initialize:function(t){o.setOptions(this,t)},redraw:function(){for(var t in this._tiles)this._redrawTile(this._tiles[t]);return this},_redrawTile:function(t){this.drawTile(t,t._tilePoint,this._map._zoom)},_createTileProto:function(){var t=this._canvasProto=o.DomUtil.create("canvas","leaflet-tile");t.width=t.height=this.options.tileSize},_createTile:function(){var t=this._canvasProto.cloneNode(!1);return t.onselectstart=t.onmousemove=o.Util.falseFn,t},_loadTile:function(t,e){t._layer=this,t._tilePoint=e,this._redrawTile(t),this.options.async||this.tileDrawn(t)},drawTile:function(){},tileDrawn:function(t){this._tileOnLoad.call(t)}}),o.tileLayer.canvas=function(t){return new o.TileLayer.Canvas(t)},o.ImageOverlay=o.Class.extend({includes:o.Mixin.Events,options:{opacity:1},initialize:function(t,e,i){this._url=t,this._bounds=o.latLngBounds(e),o.setOptions(this,i)},onAdd:function(t){this._map=t,this._image||this._initImage(),t._panes.overlayPane.appendChild(this._image),t.on("viewreset",this._reset,this),t.options.zoomAnimation&&o.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._image),t.off("viewreset",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var t=this._map._panes.overlayPane;return this._image&&t.insertBefore(this._image,t.firstChild),this},_initImage:function(){this._image=o.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&o.Browser.any3d?o.DomUtil.addClass(this._image,"leaflet-zoom-animated"):o.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),o.extend(this._image,{galleryimg:"no",onselectstart:o.Util.falseFn,onmousemove:o.Util.falseFn,onload:o.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(t){var e=this._map,i=this._image,n=e.getZoomScale(t.zoom),s=this._bounds.getNorthWest(),r=this._bounds.getSouthEast(),a=e._latLngToNewLayerPoint(s,t.zoom,t.center),l=e._latLngToNewLayerPoint(r,t.zoom,t.center)._subtract(a),u=a._add(l._multiplyBy(.5*(1-1/n)));i.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(u)+" scale("+n+") "},_reset:function(){var t=this._image,e=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),i=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(e);o.DomUtil.setPosition(t,e),t.style.width=i.x+"px",t.style.height=i.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){o.DomUtil.setOpacity(this._image,this.options.opacity)}}),o.imageOverlay=function(t,e,i){return new o.ImageOverlay(t,e,i)},o.Icon=o.Class.extend({options:{className:""},initialize:function(t){o.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n;return n=e&&"IMG"===e.tagName?this._createImg(i,e):this._createImg(i),this._setIconStyles(n,t),n},_setIconStyles:function(t,e){var i,n=this.options,s=o.point(n[e+"Size"]);i="shadow"===e?o.point(n.shadowAnchor||n.iconAnchor):o.point(n.iconAnchor),!i&&s&&(i=s.divideBy(2,!0)),t.className="leaflet-marker-"+e+" "+n.className,i&&(t.style.marginLeft=-i.x+"px",t.style.marginTop=-i.y+"px"),s&&(t.style.width=s.x+"px",t.style.height=s.y+"px")},_createImg:function(t,i){return o.Browser.ie6?(i||(i=e.createElement("div")),i.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+t+'")'):(i||(i=e.createElement("img")),i.src=t),i},_getIconUrl:function(t){return o.Browser.retina&&this.options[t+"RetinaUrl"]?this.options[t+"RetinaUrl"]:this.options[t+"Url"]}}),o.icon=function(t){return new o.Icon(t)},o.Icon.Default=o.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(t){var e=t+"Url";if(this.options[e])return this.options[e];o.Browser.retina&&"icon"===t&&(t+="-2x");var i=o.Icon.Default.imagePath;if(!i)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return i+"/marker-"+t+".png"}}),o.Icon.Default.imagePath=function(){var t,i,n,o,s,r=e.getElementsByTagName("script"),a=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(t=0,i=r.length;t<i;t++)if(n=r[t].src,o=n.match(a))return s=n.split(a)[0],(s?s+"/":"")+"images"}(),o.Marker=o.Class.extend({includes:o.Mixin.Events,options:{icon:new o.Icon.Default,title:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(t,e){o.setOptions(this,e),this._latlng=o.latLng(t)},onAdd:function(t){this._map=t,t.on("viewreset",this.update,this),this._initIcon(),this.update(),t.options.zoomAnimation&&t.options.markerZoomAnimation&&t.on("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this.dragging&&this.dragging.disable(),
this._removeIcon(),this._removeShadow(),this.fire("remove"),t.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=o.latLng(t),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update(),this},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this},update:function(){if(this._icon){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e=this._map,i=e.options.zoomAnimation&&e.options.markerZoomAnimation,n=i?"leaflet-zoom-animated":"leaflet-zoom-hide",s=t.icon.createIcon(this._icon),r=!1;s!==this._icon&&(this._icon&&this._removeIcon(),r=!0,t.title&&(s.title=t.title)),o.DomUtil.addClass(s,n),t.keyboard&&(s.tabIndex="0"),this._icon=s,this._initInteraction(),t.riseOnHover&&o.DomEvent.on(s,"mouseover",this._bringToFront,this).on(s,"mouseout",this._resetZIndex,this);var a=t.icon.createShadow(this._shadow),l=!1;a!==this._shadow&&(this._removeShadow(),l=!0,a&&o.DomUtil.addClass(a,n)),this._shadow=a,t.opacity<1&&this._updateOpacity();var u=this._map._panes;r&&u.markerPane.appendChild(this._icon),a&&l&&u.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&o.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(t){o.DomUtil.setPosition(this._icon,t),this._shadow&&o.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPos(e)},_initInteraction:function(){if(this.options.clickable){var t=this._icon,e=["dblclick","mousedown","mouseover","mouseout","contextmenu"];o.DomUtil.addClass(t,"leaflet-clickable"),o.DomEvent.on(t,"click",this._onMouseClick,this),o.DomEvent.on(t,"keypress",this._onKeyPress,this);for(var i=0;i<e.length;i++)o.DomEvent.on(t,e[i],this._fireMouseEvent,this);o.Handler.MarkerDrag&&(this.dragging=new o.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(t){var e=this.dragging&&this.dragging.moved();(this.hasEventListeners(t.type)||e)&&o.DomEvent.stopPropagation(t),e||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(t.type,{originalEvent:t,latlng:this._latlng})},_onKeyPress:function(t){13===t.keyCode&&this.fire("click",{originalEvent:t,latlng:this._latlng})},_fireMouseEvent:function(t){this.fire(t.type,{originalEvent:t,latlng:this._latlng}),"contextmenu"===t.type&&this.hasEventListeners(t.type)&&o.DomEvent.preventDefault(t),"mousedown"!==t.type?o.DomEvent.stopPropagation(t):o.DomEvent.preventDefault(t)},setOpacity:function(t){this.options.opacity=t,this._map&&this._updateOpacity()},_updateOpacity:function(){o.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&o.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),o.marker=function(t,e){return new o.Marker(t,e)},o.DivIcon=o.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(t){var i=t&&"DIV"===t.tagName?t:e.createElement("div"),n=this.options;return n.html!==!1?i.innerHTML=n.html:i.innerHTML="",n.bgPos&&(i.style.backgroundPosition=-n.bgPos.x+"px "+-n.bgPos.y+"px"),this._setIconStyles(i,"icon"),i},createShadow:function(){return null}}),o.divIcon=function(t){return new o.DivIcon(t)},o.Map.mergeOptions({closePopupOnClick:!0}),o.Popup=o.Class.extend({includes:o.Mixin.Events,options:{minWidth:50,maxWidth:300,maxHeight:null,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(t,e){o.setOptions(this,t),this._source=e,this._animated=o.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(t){this._map=t,this._container||this._initLayout(),this._updateContent();var e=t.options.fadeAnimation;e&&o.DomUtil.setOpacity(this._container,0),t._panes.popupPane.appendChild(this._container),t.on(this._getEvents(),this),this._update(),e&&o.DomUtil.setOpacity(this._container,1),this.fire("open"),t.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(t){return t.addLayer(this),this},openOn:function(t){return t.openPopup(this),this},onRemove:function(t){t._panes.popupPane.removeChild(this._container),o.Util.falseFn(this._container.offsetWidth),t.off(this._getEvents(),this),t.options.fadeAnimation&&o.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),t.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},setLatLng:function(t){return this._latlng=o.latLng(t),this._update(),this},setContent:function(t){return this._content=t,this._update(),this},_getEvents:function(){var t={viewreset:this._updatePosition};return this._animated&&(t.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t,e="leaflet-popup",i=e+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),n=this._container=o.DomUtil.create("div",i);this.options.closeButton&&(t=this._closeButton=o.DomUtil.create("a",e+"-close-button",n),t.href="#close",t.innerHTML="&#215;",o.DomEvent.disableClickPropagation(t),o.DomEvent.on(t,"click",this._onCloseButtonClick,this));var s=this._wrapper=o.DomUtil.create("div",e+"-content-wrapper",n);o.DomEvent.disableClickPropagation(s),this._contentNode=o.DomUtil.create("div",e+"-content",s),o.DomEvent.on(this._contentNode,"mousewheel",o.DomEvent.stopPropagation),o.DomEvent.on(s,"contextmenu",o.DomEvent.stopPropagation),this._tipContainer=o.DomUtil.create("div",e+"-tip-container",n),this._tip=o.DomUtil.create("div",e+"-tip",this._tipContainer)},_update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var n=t.offsetHeight,s=this.options.maxHeight,r="leaflet-popup-scrolled";s&&n>s?(e.height=s+"px",o.DomUtil.addClass(t,r),e.width=i+20+"px"):o.DomUtil.removeClass(t,r),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=this._animated,i=o.point(this.options.offset);e&&o.DomUtil.setPosition(this._container,t),this._containerBottom=-i.y-(e?0:t.y),this._containerLeft=-Math.round(this._containerWidth/2)+i.x+(e?0:t.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);o.DomUtil.setPosition(this._container,e)},_adjustPan:function(){if(this.options.autoPan){var t=this._map,e=this._container.offsetHeight,i=this._containerWidth,n=new o.Point(this._containerLeft,-e-this._containerBottom);this._animated&&n._add(o.DomUtil.getPosition(this._container));var s=t.layerPointToContainerPoint(n),r=o.point(this.options.autoPanPadding),a=t.getSize(),l=0,u=0;s.x+i>a.x&&(l=s.x+i-a.x+r.x),s.x-l<0&&(l=s.x-r.x),s.y+e>a.y&&(u=s.y+e-a.y+r.y),s.y-u<0&&(u=s.y-r.y),(l||u)&&t.fire("autopanstart").panBy([l,u])}},_onCloseButtonClick:function(t){this._close(),o.DomEvent.stop(t)}}),o.popup=function(t,e){return new o.Popup(t,e)},o.Map.include({openPopup:function(t,e,i){if(this.closePopup(),!(t instanceof o.Popup)){var n=t;t=new o.Popup(i).setLatLng(e).setContent(n)}return t._isOpen=!0,this._popup=t,this.addLayer(t)},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&(this.removeLayer(t),t._isOpen=!1),this}}),o.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(t,e){var i=o.point(this.options.icon.options.popupAnchor||[0,0]);return i=i.add(o.Popup.prototype.options.offset),e&&e.offset&&(i=i.add(e.offset)),e=o.extend({offset:i},e),this._popup||this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),t instanceof o.Popup?(o.setOptions(t,e),this._popup=t):this._popup=new o.Popup(e,this).setContent(t),this},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup).off("remove",this.closePopup).off("move",this._movePopup)),this},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),o.LayerGroup=o.Class.extend({initialize:function(t){this._layers={};var e,i;if(t)for(e=0,i=t.length;e<i;e++)this.addLayer(t[e])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)i=this._layers[e],i[t]&&i[t].apply(i,n);return this},onAdd:function(t){this._map=t,this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t),this._map=null},addTo:function(t){return t.addLayer(this),this},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return o.stamp(t)}}),o.layerGroup=function(t){return new o.LayerGroup(t)},o.FeatureGroup=o.LayerGroup.extend({includes:o.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(t){return this.hasLayer(t)?this:(t.on(o.FeatureGroup.EVENTS,this._propagateEvent,this),o.LayerGroup.prototype.addLayer.call(this,t),this._popupContent&&t.bindPopup&&t.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return t in this._layers&&(t=this._layers[t]),t.off(o.FeatureGroup.EVENTS,this._propagateEvent,this),o.LayerGroup.prototype.removeLayer.call(this,t),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:t})},bindPopup:function(t,e){return this._popupContent=t,this._popupOptions=e,this.invoke("bindPopup",t,e)},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new o.LatLngBounds;return this.eachLayer(function(e){t.extend(e instanceof o.Marker?e.getLatLng():e.getBounds())}),t},_propagateEvent:function(t){t.layer||(t.layer=t.target),t.target=this,this.fire(t.type,t)}}),o.featureGroup=function(t){return new o.FeatureGroup(t)},o.Path=o.Class.extend({includes:[o.Mixin.Events],statics:{CLIP_PADDING:o.Browser.mobile?Math.max(0,Math.min(.5,(1280/Math.max(t.innerWidth,t.innerHeight)-1)/2)):.5},options:{stroke:!0,color:"#0033ff",dashArray:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(t){o.setOptions(this,t)},onAdd:function(t){this._map=t,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),t.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){t._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,o.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),t.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(t){return o.setOptions(this,t),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),o.Map.include({_updatePathViewport:function(){var t=o.Path.CLIP_PADDING,e=this.getSize(),i=o.DomUtil.getPosition(this._mapPane),n=i.multiplyBy(-1)._subtract(e.multiplyBy(t)._round()),s=n.add(e.multiplyBy(1+2*t)._round());this._pathViewport=new o.Bounds(n,s)}}),o.Path.SVG_NS="http://www.w3.org/2000/svg",o.Browser.svg=!(!e.createElementNS||!e.createElementNS(o.Path.SVG_NS,"svg").createSVGRect),o.Path=o.Path.extend({statics:{SVG:o.Browser.svg},bringToFront:function(){var t=this._map._pathRoot,e=this._container;return e&&t.lastChild!==e&&t.appendChild(e),this},bringToBack:function(){var t=this._map._pathRoot,e=this._container,i=t.firstChild;return e&&i!==e&&t.insertBefore(e,i),this},getPathString:function(){},_createElement:function(t){return e.createElementNS(o.Path.SVG_NS,t)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray")):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var t=this.getPathString();t||(t="M0 0"),this._path.setAttribute("d",t)},_initEvents:function(){if(this.options.clickable){!o.Browser.svg&&o.Browser.vml||this._path.setAttribute("class","leaflet-clickable"),o.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var t=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],e=0;e<t.length;e++)o.DomEvent.on(this._container,t[e],this._fireMouseEvent,this)}},_onMouseClick:function(t){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(t)},_fireMouseEvent:function(t){if(this.hasEventListeners(t.type)){var e=this._map,i=e.mouseEventToContainerPoint(t),n=e.containerPointToLayerPoint(i),s=e.layerPointToLatLng(n);this.fire(t.type,{latlng:s,layerPoint:n,containerPoint:i,originalEvent:t}),"contextmenu"===t.type&&o.DomEvent.preventDefault(t),"mousemove"!==t.type&&o.DomEvent.stopPropagation(t)}}}),o.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=o.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&o.Browser.any3d?(this._pathRoot.setAttribute("class"," leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):this._pathRoot.setAttribute("class"," leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(t){var e=this.getZoomScale(t.zoom),i=this._getCenterOffset(t.center)._multiplyBy(-e)._add(this._pathViewport.min);this._pathRoot.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(i)+" scale("+e+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,i=t.max,n=i.x-e.x,s=i.y-e.y,r=this._pathRoot,a=this._panes.overlayPane;o.Browser.mobileWebkit&&a.removeChild(r),o.DomUtil.setPosition(r,e),r.setAttribute("width",n),r.setAttribute("height",s),r.setAttribute("viewBox",[e.x,e.y,n,s].join(" ")),o.Browser.mobileWebkit&&a.appendChild(r)}}}),o.Path.include({bindPopup:function(t,e){return t instanceof o.Popup?this._popup=t:(this._popup&&!e||(this._popup=new o.Popup(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(t){return this._popup&&(t=t||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:t})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(t){this._popup.setLatLng(t.latlng),this._map.openPopup(this._popup)}}),o.Browser.vml=!o.Browser.svg&&function(){try{var t=e.createElement("div");t.innerHTML='<v:shape adj="1"/>';var i=t.firstChild;return i.style.behavior="url(#default#VML)",i&&"object"==typeof i.adj}catch(t){return!1}}(),o.Path=o.Browser.svg||!o.Browser.vml?o.Path:o.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return e.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return e.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var t=this._container=this._createElement("shape");o.DomUtil.addClass(t,"leaflet-vml-shape"),this.options.clickable&&o.DomUtil.addClass(t,"leaflet-clickable"),t.coordsize="1 1",this._path=this._createElement("path"),t.appendChild(this._path),this._map._pathRoot.appendChild(t)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var t=this._stroke,e=this._fill,i=this.options,n=this._container;n.stroked=i.stroke,n.filled=i.fill,i.stroke?(t||(t=this._stroke=this._createElement("stroke"),t.endcap="round",n.appendChild(t)),t.weight=i.weight+"px",t.color=i.color,t.opacity=i.opacity,i.dashArray?t.dashStyle=i.dashArray instanceof Array?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):t.dashStyle=""):t&&(n.removeChild(t),this._stroke=null),i.fill?(e||(e=this._fill=this._createElement("fill"),n.appendChild(e)),e.color=i.fillColor||i.color,e.opacity=i.fillOpacity):e&&(n.removeChild(e),this._fill=null)},_updatePath:function(){var t=this._container.style;t.display="none",this._path.v=this.getPathString()+" ",t.display=""}}),o.Map.include(o.Browser.svg||!o.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var t=this._pathRoot=e.createElement("div");t.className="leaflet-vml-container",this._panes.overlayPane.appendChild(t),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),o.Browser.canvas=function(){return!!e.createElement("canvas").getContext}(),o.Path=o.Path.SVG&&!t.L_PREFER_CANVAS||!o.Browser.canvas?o.Path:o.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(t){return o.setOptions(this,t),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(t){t.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this._map=null},_requestUpdate:function(){this._map&&!o.Path._updateRequest&&(o.Path._updateRequest=o.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){o.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var t=this.options;t.stroke&&(this._ctx.lineWidth=t.weight,this._ctx.strokeStyle=t.color),t.fill&&(this._ctx.fillStyle=t.fillColor||t.color)},_drawPath:function(){var t,e,i,n,s,r;for(this._ctx.beginPath(),t=0,i=this._parts.length;t<i;t++){for(e=0,n=this._parts[t].length;e<n;e++)s=this._parts[t][e],r=(0===e?"move":"line")+"To",this._ctx[r](s.x,s.y);this instanceof o.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var t=this._ctx,e=this.options;this._drawPath(),t.save(),this._updateStyle(),e.fill&&(t.globalAlpha=e.fillOpacity,t.fill()),e.stroke&&(t.globalAlpha=e.opacity,t.stroke()),t.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onClick,this))},_onClick:function(t){this._containsPoint(t.layerPoint)&&this.fire("click",t)},_onMouseMove:function(t){this._map&&!this._map._animatingZoom&&(this._containsPoint(t.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",t)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",t)))}}),o.Map.include(o.Path.SVG&&!t.L_PREFER_CANVAS||!o.Browser.canvas?{}:{_initPathRoot:function(){var t,i=this._pathRoot;i||(i=this._pathRoot=e.createElement("canvas"),i.style.position="absolute",t=this._canvasCtx=i.getContext("2d"),t.lineCap="round",t.lineJoin="round",this._panes.overlayPane.appendChild(i),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,i=t.max.subtract(e),n=this._pathRoot;o.DomUtil.setPosition(n,e),n.width=i.x,n.height=i.y,n.getContext("2d").translate(-e.x,-e.y)}}}),o.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=this._reducePoints(t,i),t=this._simplifyDP(t,i)},pointToSegmentDistance:function(t,e,i){return Math.sqrt(this._sqClosestPointOnSegment(t,e,i,!0))},closestPointOnSegment:function(t,e,i){return this._sqClosestPointOnSegment(t,e,i)},_simplifyDP:function(t,e){var n=t.length,o=typeof Uint8Array!=i+""?Uint8Array:Array,s=new o(n);s[0]=s[n-1]=1,this._simplifyDPStep(t,s,e,0,n-1);var r,a=[];for(r=0;r<n;r++)s[r]&&a.push(t[r]);return a},_simplifyDPStep:function(t,e,i,n,o){var s,r,a,l=0;for(r=n+1;r<=o-1;r++)a=this._sqClosestPointOnSegment(t[r],t[n],t[o],!0),a>l&&(s=r,l=a);l>i&&(e[s]=1,this._simplifyDPStep(t,e,i,n,s),this._simplifyDPStep(t,e,i,s,o))},_reducePoints:function(t,e){for(var i=[t[0]],n=1,o=0,s=t.length;n<s;n++)this._sqDist(t[n],t[o])>e&&(i.push(t[n]),o=n);return o<s-1&&i.push(t[s-1]),i},clipSegment:function(t,e,i,n){var o,s,r,a=n?this._lastCode:this._getBitCode(t,i),l=this._getBitCode(e,i);for(this._lastCode=l;;){if(!(a|l))return[t,e];if(a&l)return!1;o=a||l,s=this._getEdgeIntersection(t,e,o,i),r=this._getBitCode(s,i),o===a?(t=s,a=r):(e=s,l=r)}},_getEdgeIntersection:function(t,e,i,n){var s=e.x-t.x,r=e.y-t.y,a=n.min,l=n.max;return 8&i?new o.Point(t.x+s*(l.y-t.y)/r,l.y):4&i?new o.Point(t.x+s*(a.y-t.y)/r,a.y):2&i?new o.Point(l.x,t.y+r*(l.x-t.x)/s):1&i?new o.Point(a.x,t.y+r*(a.x-t.x)/s):void 0},_getBitCode:function(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i},_sqDist:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n},_sqClosestPointOnSegment:function(t,e,i,n){var s,r=e.x,a=e.y,l=i.x-r,u=i.y-a,c=l*l+u*u;return c>0&&(s=((t.x-r)*l+(t.y-a)*u)/c,s>1?(r=i.x,a=i.y):s>0&&(r+=l*s,a+=u*s)),l=t.x-r,u=t.y-a,n?l*l+u*u:new o.Point(r,a)}},o.Polyline=o.Path.extend({initialize:function(t,e){o.Path.prototype.initialize.call(this,e),this._latlngs=this._convertLatLngs(t)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var t=0,e=this._latlngs.length;t<e;t++)this._originalPoints[t]=this._map.latLngToLayerPoint(this._latlngs[t])},getPathString:function(){for(var t=0,e=this._parts.length,i="";t<e;t++)i+=this._getPathPartStr(this._parts[t]);return i},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._latlngs=this._convertLatLngs(t),this.redraw()},addLatLng:function(t){return this._latlngs.push(o.latLng(t)),this.redraw()},spliceLatLngs:function(){var t=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),t},closestLayerPoint:function(t){for(var e,i,n=1/0,s=this._parts,r=null,a=0,l=s.length;a<l;a++)for(var u=s[a],c=1,h=u.length;c<h;c++){e=u[c-1],i=u[c];var d=o.LineUtil._sqClosestPointOnSegment(t,e,i,!0);d<n&&(n=d,r=o.LineUtil._sqClosestPointOnSegment(t,e,i))}return r&&(r.distance=Math.sqrt(n)),r},getBounds:function(){return new o.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(t,e){var i,n,s=e?t:[];for(i=0,n=t.length;i<n;i++){if(o.Util.isArray(t[i])&&"number"!=typeof t[i][0])return;s[i]=o.latLng(t[i])}return s},_initEvents:function(){o.Path.prototype._initEvents.call(this)},_getPathPartStr:function(t){for(var e,i=o.Path.VML,n=0,s=t.length,r="";n<s;n++)e=t[n],i&&e._round(),r+=(n?"L":"M")+e.x+" "+e.y;return r},_clipPoints:function(){var t,e,i,n=this._originalPoints,s=n.length;if(this.options.noClip)return void(this._parts=[n]);this._parts=[];var r=this._parts,a=this._map._pathViewport,l=o.LineUtil;for(t=0,e=0;t<s-1;t++)i=l.clipSegment(n[t],n[t+1],a,t),i&&(r[e]=r[e]||[],r[e].push(i[0]),i[1]===n[t+1]&&t!==s-2||(r[e].push(i[1]),e++))},_simplifyPoints:function(){for(var t=this._parts,e=o.LineUtil,i=0,n=t.length;i<n;i++)t[i]=e.simplify(t[i],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),o.Path.prototype._updatePath.call(this))}}),o.polyline=function(t,e){return new o.Polyline(t,e)},o.PolyUtil={},o.PolyUtil.clipPolygon=function(t,e){var i,n,s,r,a,l,u,c,h,d=[1,4,2,8],p=o.LineUtil;for(n=0,u=t.length;n<u;n++)t[n]._code=p._getBitCode(t[n],e);for(r=0;r<4;r++){for(c=d[r],i=[],n=0,u=t.length,s=u-1;n<u;s=n++)a=t[n],l=t[s],a._code&c?l._code&c||(h=p._getEdgeIntersection(l,a,c,e),h._code=p._getBitCode(h,e),i.push(h)):(l._code&c&&(h=p._getEdgeIntersection(l,a,c,e),h._code=p._getBitCode(h,e),i.push(h)),i.push(a));t=i}return t},o.Polygon=o.Polyline.extend({options:{fill:!0},initialize:function(t,e){var i,n,s;if(o.Polyline.prototype.initialize.call(this,t,e),t&&o.Util.isArray(t[0])&&"number"!=typeof t[0][0])for(this._latlngs=this._convertLatLngs(t[0]),this._holes=t.slice(1),i=0,n=this._holes.length;i<n;i++)s=this._holes[i]=this._convertLatLngs(this._holes[i]),s[0].equals(s[s.length-1])&&s.pop();t=this._latlngs,t.length>=2&&t[0].equals(t[t.length-1])&&t.pop()},projectLatlngs:function(){if(o.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var t,e,i,n;for(t=0,i=this._holes.length;t<i;t++)for(this._holePoints[t]=[],e=0,n=this._holes[t].length;e<n;e++)this._holePoints[t][e]=this._map.latLngToLayerPoint(this._holes[t][e])}},_clipPoints:function(){var t=this._originalPoints,e=[];if(this._parts=[t].concat(this._holePoints),!this.options.noClip){for(var i=0,n=this._parts.length;i<n;i++){var s=o.PolyUtil.clipPolygon(this._parts[i],this._map._pathViewport);s.length&&e.push(s)}this._parts=e}},_getPathPartStr:function(t){var e=o.Polyline.prototype._getPathPartStr.call(this,t);return e+(o.Browser.svg?"z":"x")}}),o.polygon=function(t,e){return new o.Polygon(t,e)},function(){function t(t){return o.FeatureGroup.extend({initialize:function(t,e){this._layers={},this._options=e,this.setLatLngs(t)},setLatLngs:function(e){var i=0,n=e.length;for(this.eachLayer(function(t){i<n?t.setLatLngs(e[i++]):this.removeLayer(t)},this);i<n;)this.addLayer(new t(e[i++],this._options));return this}})}o.MultiPolyline=t(o.Polyline),o.MultiPolygon=t(o.Polygon),o.multiPolyline=function(t,e){return new o.MultiPolyline(t,e)},o.multiPolygon=function(t,e){return new o.MultiPolygon(t,e)}}(),o.Rectangle=o.Polygon.extend({initialize:function(t,e){o.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=o.latLngBounds(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),o.rectangle=function(t,e){return new o.Rectangle(t,e)},o.Circle=o.Path.extend({initialize:function(t,e,i){o.Path.prototype.initialize.call(this,i),this._latlng=o.latLng(t),this._mRadius=e},options:{fill:!0},setLatLng:function(t){return this._latlng=o.latLng(t),this.redraw()},setRadius:function(t){return this._mRadius=t,this.redraw()},projectLatlngs:function(){var t=this._getLngRadius(),e=this._latlng,i=this._map.latLngToLayerPoint([e.lat,e.lng-t]);this._point=this._map.latLngToLayerPoint(e),this._radius=Math.max(this._point.x-i.x,1)},getBounds:function(){var t=this._getLngRadius(),e=this._mRadius/40075017*360,i=this._latlng;return new o.LatLngBounds([i.lat-e,i.lng-t],[i.lat+e,i.lng+t])},getLatLng:function(){return this._latlng},getPathString:function(){var t=this._point,e=this._radius;return this._checkIfEmpty()?"":o.Browser.svg?"M"+t.x+","+(t.y-e)+"A"+e+","+e+",0,1,1,"+(t.x-.1)+","+(t.y-e)+" z":(t._round(),e=Math.round(e),"AL "+t.x+","+t.y+" "+e+","+e+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(o.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var t=this._map._pathViewport,e=this._radius,i=this._point;return i.x-e>t.max.x||i.y-e>t.max.y||i.x+e<t.min.x||i.y+e<t.min.y}}),o.circle=function(t,e,i){return new o.Circle(t,e,i)},o.CircleMarker=o.Circle.extend({options:{radius:10,weight:2},initialize:function(t,e){o.Circle.prototype.initialize.call(this,t,null,e),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){o.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()}}),o.circleMarker=function(t,e){return new o.CircleMarker(t,e)},o.Polyline.include(o.Path.CANVAS?{_containsPoint:function(t,e){var i,n,s,r,a,l,u,c=this.options.weight/2;for(o.Browser.touch&&(c+=10),i=0,r=this._parts.length;i<r;i++)for(u=this._parts[i],n=0,a=u.length,s=a-1;n<a;s=n++)if((e||0!==n)&&(l=o.LineUtil.pointToSegmentDistance(t,u[s],u[n]),l<=c))return!0;return!1}}:{}),o.Polygon.include(o.Path.CANVAS?{_containsPoint:function(t){var e,i,n,s,r,a,l,u,c=!1;if(o.Polyline.prototype._containsPoint.call(this,t,!0))return!0;for(s=0,l=this._parts.length;s<l;s++)for(e=this._parts[s],r=0,u=e.length,a=u-1;r<u;a=r++)i=e[r],n=e[a],i.y>t.y!=n.y>t.y&&t.x<(n.x-i.x)*(t.y-i.y)/(n.y-i.y)+i.x&&(c=!c);return c}}:{}),o.Circle.include(o.Path.CANVAS?{_drawPath:function(){var t=this._point;this._ctx.beginPath(),this._ctx.arc(t.x,t.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(t){var e=this._point,i=this.options.stroke?this.options.weight/2:0;return t.distanceTo(e)<=this._radius+i}}:{}),o.CircleMarker.include(o.Path.CANVAS?{_updateStyle:function(){o.Path.prototype._updateStyle.call(this)}}:{}),o.GeoJSON=o.FeatureGroup.extend({initialize:function(t,e){o.setOptions(this,e),this._layers={},
t&&this.addData(t)},addData:function(t){var e,i,n=o.Util.isArray(t)?t:t.features;if(n){for(e=0,i=n.length;e<i;e++)(n[e].geometries||n[e].geometry||n[e].features)&&this.addData(n[e]);return this}var s=this.options;if(!s.filter||s.filter(t)){var r=o.GeoJSON.geometryToLayer(t,s.pointToLayer,s.coordsToLatLng);return r.feature=o.GeoJSON.asFeature(t),r.defaultOptions=r.options,this.resetStyle(r),s.onEachFeature&&s.onEachFeature(t,r),this.addLayer(r)}},resetStyle:function(t){var e=this.options.style;e&&(o.Util.extend(t.options,t.defaultOptions),this._setLayerStyle(t,e))},setStyle:function(t){this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),o.extend(o.GeoJSON,{geometryToLayer:function(t,e,i){var n,s,r,a,l,u="Feature"===t.type?t.geometry:t,c=u.coordinates,h=[];switch(i=i||this.coordsToLatLng,u.type){case"Point":return n=i(c),e?e(t,n):new o.Marker(n);case"MultiPoint":for(r=0,a=c.length;r<a;r++)n=i(c[r]),l=e?e(t,n):new o.Marker(n),h.push(l);return new o.FeatureGroup(h);case"LineString":return s=this.coordsToLatLngs(c,0,i),new o.Polyline(s);case"Polygon":return s=this.coordsToLatLngs(c,1,i),new o.Polygon(s);case"MultiLineString":return s=this.coordsToLatLngs(c,1,i),new o.MultiPolyline(s);case"MultiPolygon":return s=this.coordsToLatLngs(c,2,i),new o.MultiPolygon(s);case"GeometryCollection":for(r=0,a=u.geometries.length;r<a;r++)l=this.geometryToLayer({geometry:u.geometries[r],type:"Feature",properties:t.properties},e,i),h.push(l);return new o.FeatureGroup(h);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t){return new o.LatLng(t[1],t[0])},coordsToLatLngs:function(t,e,i){var n,o,s,r=[];for(o=0,s=t.length;o<s;o++)n=e?this.coordsToLatLngs(t[o],e-1,i):(i||this.coordsToLatLng)(t[o]),r.push(n);return r},latLngToCoords:function(t){return[t.lng,t.lat]},latLngsToCoords:function(t){for(var e=[],i=0,n=t.length;i<n;i++)e.push(o.GeoJSON.latLngToCoords(t[i]));return e},getFeature:function(t,e){return t.feature?o.extend({},t.feature,{geometry:e}):o.GeoJSON.asFeature(e)},asFeature:function(t){return"Feature"===t.type?t:{type:"Feature",properties:{},geometry:t}}});var r={toGeoJSON:function(){return o.GeoJSON.getFeature(this,{type:"Point",coordinates:o.GeoJSON.latLngToCoords(this.getLatLng())})}};o.Marker.include(r),o.Circle.include(r),o.CircleMarker.include(r),o.Polyline.include({toGeoJSON:function(){return o.GeoJSON.getFeature(this,{type:"LineString",coordinates:o.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),o.Polygon.include({toGeoJSON:function(){var t,e,i,n=[o.GeoJSON.latLngsToCoords(this.getLatLngs())];if(n[0].push(n[0][0]),this._holes)for(t=0,e=this._holes.length;t<e;t++)i=o.GeoJSON.latLngsToCoords(this._holes[t]),i.push(i[0]),n.push(i);return o.GeoJSON.getFeature(this,{type:"Polygon",coordinates:n})}}),function(){function t(t,e){t.include({toGeoJSON:function(){var t=[];return this.eachLayer(function(e){t.push(e.toGeoJSON().geometry.coordinates)}),o.GeoJSON.getFeature(this,{type:e,coordinates:t})}})}t(o.MultiPolyline,"MultiLineString"),t(o.MultiPolygon,"MultiPolygon")}(),o.LayerGroup.include({toGeoJSON:function(){var t=[];return this.eachLayer(function(e){e.toGeoJSON&&t.push(o.GeoJSON.asFeature(e.toGeoJSON()))}),{type:"FeatureCollection",features:t}}}),o.geoJson=function(t,e){return new o.GeoJSON(t,e)},o.DomEvent={addListener:function(t,e,i,n){var s,r,a,l=o.stamp(i),u="_leaflet_"+e+l;return t[u]?this:(s=function(e){return i.call(n||t,e||o.DomEvent._getEvent())},o.Browser.msTouch&&0===e.indexOf("touch")?this.addMsTouchListener(t,e,s,l):(o.Browser.touch&&"dblclick"===e&&this.addDoubleTapListener&&this.addDoubleTapListener(t,s,l),"addEventListener"in t?"mousewheel"===e?(t.addEventListener("DOMMouseScroll",s,!1),t.addEventListener(e,s,!1)):"mouseenter"===e||"mouseleave"===e?(r=s,a="mouseenter"===e?"mouseover":"mouseout",s=function(e){if(o.DomEvent._checkMouse(t,e))return r(e)},t.addEventListener(a,s,!1)):"click"===e&&o.Browser.android?(r=s,s=function(t){return o.DomEvent._filterClick(t,r)},t.addEventListener(e,s,!1)):t.addEventListener(e,s,!1):"attachEvent"in t&&t.attachEvent("on"+e,s),t[u]=s,this))},removeListener:function(t,e,i){var n=o.stamp(i),s="_leaflet_"+e+n,r=t[s];return r?(o.Browser.msTouch&&0===e.indexOf("touch")?this.removeMsTouchListener(t,e,n):o.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,n):"removeEventListener"in t?"mousewheel"===e?(t.removeEventListener("DOMMouseScroll",r,!1),t.removeEventListener(e,r,!1)):"mouseenter"===e||"mouseleave"===e?t.removeEventListener("mouseenter"===e?"mouseover":"mouseout",r,!1):t.removeEventListener(e,r,!1):"detachEvent"in t&&t.detachEvent("on"+e,r),t[s]=null,this):this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,this},disableClickPropagation:function(t){for(var e=o.DomEvent.stopPropagation,i=o.Draggable.START.length-1;i>=0;i--)o.DomEvent.addListener(t,o.Draggable.START[i],e);return o.DomEvent.addListener(t,"click",o.DomEvent._fakeStop).addListener(t,"dblclick",e)},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return o.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,i){var n=e.body,s=e.documentElement,r=t.pageX?t.pageX:t.clientX+n.scrollLeft+s.scrollLeft,a=t.pageY?t.pageY:t.clientY+n.scrollTop+s.scrollTop,l=new o.Point(r,a);return i?l._subtract(o.DomUtil.getViewportOffset(i)):l},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e},_fakeStop:function(t){t._leaflet_stop=!0},_checkMouse:function(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(t){return!1}return i!==t},_getEvent:function(){var e=t.event;if(!e)for(var i=arguments.callee.caller;i&&(e=i.arguments[0],!e||t.Event!==e.constructor);)i=i.caller;return e},_filterClick:function(t,e){var i=t.timeStamp||t.originalEvent.timeStamp,n=o.DomEvent._lastClick&&i-o.DomEvent._lastClick;return n&&n>100&&n<1e3||t.target._simulatedClick&&!t._simulated?void o.DomEvent.stop(t):(o.DomEvent._lastClick=i,e(t))}},o.DomEvent.on=o.DomEvent.addListener,o.DomEvent.off=o.DomEvent.removeListener,o.Draggable=o.Class.extend({includes:o.Mixin.Events,statics:{START:o.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,e){this._element=t,this._dragStartTarget=e||t},enable:function(){if(!this._enabled){for(var t=o.Draggable.START.length-1;t>=0;t--)o.DomEvent.on(this._dragStartTarget,o.Draggable.START[t],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var t=o.Draggable.START.length-1;t>=0;t--)o.DomEvent.off(this._dragStartTarget,o.Draggable.START[t],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(t){if(!t.shiftKey&&(1===t.which||1===t.button||t.touches)&&(o.DomEvent.stopPropagation(t),!o.Draggable._disabled)){o.DomUtil.disableImageDrag();var i=t.touches?t.touches[0]:t,n=i.target;o.Browser.touch&&"a"===n.tagName.toLowerCase()&&o.DomUtil.addClass(n,"leaflet-active"),this._moved=!1,this._moving||(this._startPoint=new o.Point(i.clientX,i.clientY),this._startPos=this._newPos=o.DomUtil.getPosition(this._element),o.DomEvent.on(e,o.Draggable.MOVE[t.type],this._onMove,this).on(e,o.Draggable.END[t.type],this._onUp,this))}},_onMove:function(t){if(!(t.touches&&t.touches.length>1)){var i=t.touches&&1===t.touches.length?t.touches[0]:t,n=new o.Point(i.clientX,i.clientY),s=n.subtract(this._startPoint);(s.x||s.y)&&(o.DomEvent.preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=o.DomUtil.getPosition(this._element).subtract(s),o.Browser.touch||(o.DomUtil.disableTextSelection(),o.DomUtil.addClass(e.body,"leaflet-dragging"))),this._newPos=this._startPos.add(s),this._moving=!0,o.Util.cancelAnimFrame(this._animRequest),this._animRequest=o.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget))}},_updatePosition:function(){this.fire("predrag"),o.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){o.Browser.touch||(o.DomUtil.enableTextSelection(),o.DomUtil.removeClass(e.body,"leaflet-dragging"));for(var t in o.Draggable.MOVE)o.DomEvent.off(e,o.Draggable.MOVE[t],this._onMove).off(e,o.Draggable.END[t],this._onUp);o.DomUtil.enableImageDrag(),this._moved&&(o.Util.cancelAnimFrame(this._animRequest),this.fire("dragend")),this._moving=!1}}),o.Handler=o.Class.extend({initialize:function(t){this._map=t},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),o.Map.mergeOptions({dragging:!0,inertia:!o.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:o.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),o.Map.Drag=o.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new o.Draggable(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),t.on("viewreset",this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var t=this._map;t._panAnim&&t._panAnim.stop(),t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var t=this._lastTime=+new Date,e=this._lastPos=this._draggable._newPos;this._positions.push(e),this._times.push(t),t-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var t=this._map.getSize()._divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,o=(n-e+i)%t+e-i,s=(n+e+i)%t-e-i,r=Math.abs(o+i)<Math.abs(s+i)?o:s;this._draggable._newPos.x=r},_onDragEnd:function(){var t=this._map,e=t.options,i=+new Date-this._lastTime,n=!e.inertia||i>e.inertiaThreshold||!this._positions[0];if(t.fire("dragend"),n)t.fire("moveend");else{var s=this._lastPos.subtract(this._positions[0]),r=(this._lastTime+i-this._times[0])/1e3,a=e.easeLinearity,l=s.multiplyBy(a/r),u=l.distanceTo([0,0]),c=Math.min(e.inertiaMaxSpeed,u),h=l.multiplyBy(c/u),d=c/(e.inertiaDeceleration*a),p=h.multiplyBy(-d/2).round();p.x&&p.y?o.Util.requestAnimFrame(function(){t.panBy(p,{duration:d,easeLinearity:a,noMoveStart:!0})}):t.fire("moveend")}}}),o.Map.addInitHook("addHandler","dragging",o.Map.Drag),o.Map.mergeOptions({doubleClickZoom:!0}),o.Map.DoubleClickZoom=o.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick)},_onDoubleClick:function(t){this.setZoomAround(t.containerPoint,this._zoom+1)}}),o.Map.addInitHook("addHandler","doubleClickZoom",o.Map.DoubleClickZoom),o.Map.mergeOptions({scrollWheelZoom:!0}),o.Map.ScrollWheelZoom=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),o.DomEvent.on(this._map._container,"MozMousePixelScroll",o.DomEvent.preventDefault),this._delta=0},removeHooks:function(){o.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),o.DomEvent.off(this._map._container,"MozMousePixelScroll",o.DomEvent.preventDefault)},_onWheelScroll:function(t){var e=o.DomEvent.getWheelDelta(t);this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var i=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o.bind(this._performZoom,this),i),o.DomEvent.preventDefault(t),o.DomEvent.stopPropagation(t)},_performZoom:function(){var t=this._map,e=this._delta,i=t.getZoom();e=e>0?Math.ceil(e):Math.floor(e),e=Math.max(Math.min(e,4),-4),e=t._limitZoom(i+e)-i,this._delta=0,this._startTime=null,e&&t.setZoomAround(this._lastMousePos,i+e)}}),o.Map.addInitHook("addHandler","scrollWheelZoom",o.Map.ScrollWheelZoom),o.extend(o.DomEvent,{_touchstart:o.Browser.msTouch?"MSPointerDown":"touchstart",_touchend:o.Browser.msTouch?"MSPointerUp":"touchend",addDoubleTapListener:function(t,i,n){function s(t){var e;if(o.Browser.msTouch?(f.push(t.pointerId),e=f.length):e=t.touches.length,!(e>1)){var i=Date.now(),n=i-(a||i);l=t.touches?t.touches[0]:t,u=n>0&&n<=c,a=i}}function r(t){if(o.Browser.msTouch){var e=f.indexOf(t.pointerId);if(e===-1)return;f.splice(e,1)}if(u){if(o.Browser.msTouch){var n,s={};for(var r in l)n=l[r],"function"==typeof n?s[r]=n.bind(l):s[r]=n;l=s}l.type="dblclick",i(l),a=null}}var a,l,u=!1,c=250,h="_leaflet_",d=this._touchstart,p=this._touchend,f=[];t[h+d+n]=s,t[h+p+n]=r;var m=o.Browser.msTouch?e.documentElement:t;return t.addEventListener(d,s,!1),m.addEventListener(p,r,!1),o.Browser.msTouch&&m.addEventListener("MSPointerCancel",r,!1),this},removeDoubleTapListener:function(t,i){var n="_leaflet_";return t.removeEventListener(this._touchstart,t[n+this._touchstart+i],!1),(o.Browser.msTouch?e.documentElement:t).removeEventListener(this._touchend,t[n+this._touchend+i],!1),o.Browser.msTouch&&e.documentElement.removeEventListener("MSPointerCancel",t[n+this._touchend+i],!1),this}}),o.extend(o.DomEvent,{_msTouches:[],_msDocumentListener:!1,addMsTouchListener:function(t,e,i,n){switch(e){case"touchstart":return this.addMsTouchListenerStart(t,e,i,n);case"touchend":return this.addMsTouchListenerEnd(t,e,i,n);case"touchmove":return this.addMsTouchListenerMove(t,e,i,n);default:throw"Unknown touch event type"}},addMsTouchListenerStart:function(t,i,n,o){var s="_leaflet_",r=this._msTouches,a=function(t){for(var e=!1,i=0;i<r.length;i++)if(r[i].pointerId===t.pointerId){e=!0;break}e||r.push(t),t.touches=r.slice(),t.changedTouches=[t],n(t)};if(t[s+"touchstart"+o]=a,t.addEventListener("MSPointerDown",a,!1),!this._msDocumentListener){var l=function(t){for(var e=0;e<r.length;e++)if(r[e].pointerId===t.pointerId){r.splice(e,1);break}};e.documentElement.addEventListener("MSPointerUp",l,!1),e.documentElement.addEventListener("MSPointerCancel",l,!1),this._msDocumentListener=!0}return this},addMsTouchListenerMove:function(t,e,i,n){function o(t){if(t.pointerType!==t.MSPOINTER_TYPE_MOUSE||0!==t.buttons){for(var e=0;e<r.length;e++)if(r[e].pointerId===t.pointerId){r[e]=t;break}t.touches=r.slice(),t.changedTouches=[t],i(t)}}var s="_leaflet_",r=this._msTouches;return t[s+"touchmove"+n]=o,t.addEventListener("MSPointerMove",o,!1),this},addMsTouchListenerEnd:function(t,e,i,n){var o="_leaflet_",s=this._msTouches,r=function(t){for(var e=0;e<s.length;e++)if(s[e].pointerId===t.pointerId){s.splice(e,1);break}t.touches=s.slice(),t.changedTouches=[t],i(t)};return t[o+"touchend"+n]=r,t.addEventListener("MSPointerUp",r,!1),t.addEventListener("MSPointerCancel",r,!1),this},removeMsTouchListener:function(t,e,i){var n="_leaflet_",o=t[n+e+i];switch(e){case"touchstart":t.removeEventListener("MSPointerDown",o,!1);break;case"touchmove":t.removeEventListener("MSPointerMove",o,!1);break;case"touchend":t.removeEventListener("MSPointerUp",o,!1),t.removeEventListener("MSPointerCancel",o,!1)}return this}}),o.Map.mergeOptions({touchZoom:o.Browser.touch&&!o.Browser.android23}),o.Map.TouchZoom=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){o.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var i=this._map;if(t.touches&&2===t.touches.length&&!i._animatingZoom&&!this._zooming){var n=i.mouseEventToLayerPoint(t.touches[0]),s=i.mouseEventToLayerPoint(t.touches[1]),r=i._getCenterLayerPoint();this._startCenter=n.add(s)._divideBy(2),this._startDist=n.distanceTo(s),this._moved=!1,this._zooming=!0,this._centerOffset=r.subtract(this._startCenter),i._panAnim&&i._panAnim.stop(),o.DomEvent.on(e,"touchmove",this._onTouchMove,this).on(e,"touchend",this._onTouchEnd,this),o.DomEvent.preventDefault(t)}},_onTouchMove:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&this._zooming){var i=e.mouseEventToLayerPoint(t.touches[0]),n=e.mouseEventToLayerPoint(t.touches[1]);this._scale=i.distanceTo(n)/this._startDist,this._delta=i._add(n)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(this._moved||(o.DomUtil.addClass(e._mapPane,"leaflet-touching"),e.fire("movestart").fire("zoomstart"),this._moved=!0),o.Util.cancelAnimFrame(this._animRequest),this._animRequest=o.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),o.DomEvent.preventDefault(t))}},_updateOnMove:function(){var t=this._map,e=this._getScaleOrigin(),i=t.layerPointToLatLng(e),n=t.getScaleZoom(this._scale);t._animateZoom(i,n,this._startCenter,this._scale,this._delta)},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);var t=this._map;this._zooming=!1,o.DomUtil.removeClass(t._mapPane,"leaflet-touching"),o.Util.cancelAnimFrame(this._animRequest),o.DomEvent.off(e,"touchmove",this._onTouchMove).off(e,"touchend",this._onTouchEnd);var i=this._getScaleOrigin(),n=t.layerPointToLatLng(i),s=t.getZoom(),r=t.getScaleZoom(this._scale)-s,a=r>0?Math.ceil(r):Math.floor(r),l=t._limitZoom(s+a),u=t.getZoomScale(l)/this._scale;t._animateZoom(n,l,i,u)},_getScaleOrigin:function(){var t=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(t)}}),o.Map.addInitHook("addHandler","touchZoom",o.Map.TouchZoom),o.Map.mergeOptions({tap:!0,tapTolerance:15}),o.Map.Tap=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){o.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(o.DomEvent.preventDefault(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var i=t.touches[0],n=i.target;this._startPos=this._newPos=new o.Point(i.clientX,i.clientY),"a"===n.tagName.toLowerCase()&&o.DomUtil.addClass(n,"leaflet-active"),this._holdTimeout=setTimeout(o.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",i))},this),1e3),o.DomEvent.on(e,"touchmove",this._onMove,this).on(e,"touchend",this._onUp,this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),o.DomEvent.off(e,"touchmove",this._onMove,this).off(e,"touchend",this._onUp,this),this._fireClick&&t&&t.changedTouches){var i=t.changedTouches[0],n=i.target;"a"===n.tagName.toLowerCase()&&o.DomUtil.removeClass(n,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",i)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new o.Point(e.clientX,e.clientY)},_simulateEvent:function(i,n){var o=e.createEvent("MouseEvents");o._simulated=!0,n.target._simulatedClick=!0,o.initMouseEvent(i,!0,!0,t,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(o)}}),o.Browser.touch&&!o.Browser.msTouch&&o.Map.addInitHook("addHandler","tap",o.Map.Tap),o.Map.mergeOptions({boxZoom:!0}),o.Map.BoxZoom=o.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){o.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){o.DomEvent.off(this._container,"mousedown",this._onMouseDown)},_onMouseDown:function(t){return!(!t.shiftKey||1!==t.which&&1!==t.button)&&(o.DomUtil.disableTextSelection(),o.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(t),this._box=o.DomUtil.create("div","leaflet-zoom-box",this._pane),o.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",o.DomEvent.on(e,"mousemove",this._onMouseMove,this).on(e,"mouseup",this._onMouseUp,this).on(e,"keydown",this._onKeyDown,this),void this._map.fire("boxzoomstart"))},_onMouseMove:function(t){var e=this._startLayerPoint,i=this._box,n=this._map.mouseEventToLayerPoint(t),s=n.subtract(e),r=new o.Point(Math.min(n.x,e.x),Math.min(n.y,e.y));o.DomUtil.setPosition(i,r),i.style.width=Math.max(0,Math.abs(s.x)-4)+"px",i.style.height=Math.max(0,Math.abs(s.y)-4)+"px"},_finish:function(){this._pane.removeChild(this._box),this._container.style.cursor="",o.DomUtil.enableTextSelection(),o.DomUtil.enableImageDrag(),o.DomEvent.off(e,"mousemove",this._onMouseMove).off(e,"mouseup",this._onMouseUp).off(e,"keydown",this._onKeyDown)},_onMouseUp:function(t){this._finish();var e=this._map,i=e.mouseEventToLayerPoint(t);if(!this._startLayerPoint.equals(i)){var n=new o.LatLngBounds(e.layerPointToLatLng(this._startLayerPoint),e.layerPointToLatLng(i));e.fitBounds(n),e.fire("boxzoomend",{boxZoomBounds:n})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),o.Map.addInitHook("addHandler","boxZoom",o.Map.BoxZoom),o.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),o.Map.Keyboard=o.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61],zoomOut:[189,109,173]},initialize:function(t){this._map=t,this._setPanOffset(t.options.keyboardPanOffset),this._setZoomOffset(t.options.keyboardZoomOffset)},addHooks:function(){var t=this._map._container;t.tabIndex===-1&&(t.tabIndex="0"),o.DomEvent.on(t,"focus",this._onFocus,this).on(t,"blur",this._onBlur,this).on(t,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var t=this._map._container;o.DomEvent.off(t,"focus",this._onFocus,this).off(t,"blur",this._onBlur,this).off(t,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var i=e.body,n=e.documentElement,o=i.scrollTop||n.scrollTop,s=i.scrollTop||n.scrollLeft;this._map._container.focus(),t.scrollTo(s,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(t){var e,i,n=this._panKeys={},o=this.keyCodes;for(e=0,i=o.left.length;e<i;e++)n[o.left[e]]=[-1*t,0];for(e=0,i=o.right.length;e<i;e++)n[o.right[e]]=[t,0];for(e=0,i=o.down.length;e<i;e++)n[o.down[e]]=[0,t];for(e=0,i=o.up.length;e<i;e++)n[o.up[e]]=[0,-1*t]},_setZoomOffset:function(t){var e,i,n=this._zoomKeys={},o=this.keyCodes;for(e=0,i=o.zoomIn.length;e<i;e++)n[o.zoomIn[e]]=t;for(e=0,i=o.zoomOut.length;e<i;e++)n[o.zoomOut[e]]=-t},_addHooks:function(){o.DomEvent.on(e,"keydown",this._onKeyDown,this)},_removeHooks:function(){o.DomEvent.off(e,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){var e=t.keyCode,i=this._map;if(e in this._panKeys){if(i._panAnim&&i._panAnim._inProgress)return;i.panBy(this._panKeys[e]),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds)}else{if(!(e in this._zoomKeys))return;i.setZoom(i.getZoom()+this._zoomKeys[e])}o.DomEvent.stop(t)}}),o.Map.addInitHook("addHandler","keyboard",o.Map.Keyboard),o.Handler.MarkerDrag=o.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new o.Draggable(t,t)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable()},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var t=this._marker,e=t._shadow,i=o.DomUtil.getPosition(t._icon),n=t._map.layerPointToLatLng(i);e&&o.DomUtil.setPosition(e,i),t._latlng=n,t.fire("move",{latlng:n}).fire("drag")},_onDragEnd:function(){this._marker.fire("moveend").fire("dragend")}}),o.Control=o.Class.extend({options:{position:"topright"},initialize:function(t){o.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),n=t._controlCorners[i];return o.DomUtil.addClass(e,"leaflet-control"),i.indexOf("bottom")!==-1?n.insertBefore(e,n.firstChild):n.appendChild(e),this},removeFrom:function(t){var e=this.getPosition(),i=t._controlCorners[e];return i.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(t),this}}),o.control=function(t){return new o.Control(t)},o.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.removeFrom(this),this},_initControlPos:function(){function t(t,s){var r=i+t+" "+i+s;e[t+s]=o.DomUtil.create("div",r,n)}var e=this._controlCorners={},i="leaflet-",n=this._controlContainer=o.DomUtil.create("div",i+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),o.Control.Zoom=o.Control.extend({options:{position:"topleft"},onAdd:function(t){var e="leaflet-control-zoom",i=o.DomUtil.create("div",e+" leaflet-bar");return this._map=t,this._zoomInButton=this._createButton("+","Zoom in",e+"-in",i,this._zoomIn,this),this._zoomOutButton=this._createButton("-","Zoom out",e+"-out",i,this._zoomOut,this),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(t){this._map.zoomIn(t.shiftKey?3:1)},_zoomOut:function(t){this._map.zoomOut(t.shiftKey?3:1)},_createButton:function(t,e,i,n,s,r){var a=o.DomUtil.create("a",i,n);a.innerHTML=t,a.href="#",a.title=e;var l=o.DomEvent.stopPropagation;return o.DomEvent.on(a,"click",l).on(a,"mousedown",l).on(a,"dblclick",l).on(a,"click",o.DomEvent.preventDefault).on(a,"click",s,r),a},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";o.DomUtil.removeClass(this._zoomInButton,e),o.DomUtil.removeClass(this._zoomOutButton,e),t._zoom===t.getMinZoom()&&o.DomUtil.addClass(this._zoomOutButton,e),t._zoom===t.getMaxZoom()&&o.DomUtil.addClass(this._zoomInButton,e)}}),o.Map.mergeOptions({zoomControl:!0}),o.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new o.Control.Zoom,this.addControl(this.zoomControl))}),o.control.zoom=function(t){return new o.Control.Zoom(t)},o.Control.Attribution=o.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){o.setOptions(this,t),this._attributions={}},onAdd:function(t){return this._container=o.DomUtil.create("div","leaflet-control-attribution"),o.DomEvent.disableClickPropagation(this._container),t.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(t){t.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){if(t)return this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this},removeAttribution:function(t){if(t)return this._attributions[t]&&(this._attributions[t]--,this._update()),this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(" | ")}},_onLayerAdd:function(t){t.layer.getAttribution&&this.addAttribution(t.layer.getAttribution())},_onLayerRemove:function(t){t.layer.getAttribution&&this.removeAttribution(t.layer.getAttribution())}}),o.Map.mergeOptions({attributionControl:!0}),o.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new o.Control.Attribution).addTo(this))}),o.control.attribution=function(t){return new o.Control.Attribution(t)},o.Control.Scale=o.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(t){this._map=t;var e="leaflet-control-scale",i=o.DomUtil.create("div",e),n=this.options;return this._addScales(n,e,i),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=o.DomUtil.create("div",e+"-line",i)),t.imperial&&(this._iScale=o.DomUtil.create("div",e+"-line",i))},_update:function(){var t=this._map.getBounds(),e=t.getCenter().lat,i=6378137*Math.PI*Math.cos(e*Math.PI/180),n=i*(t.getNorthEast().lng-t.getSouthWest().lng)/180,o=this._map.getSize(),s=this.options,r=0;o.x>0&&(r=n*(s.maxWidth/o.x)),this._updateScales(s,r)},_updateScales:function(t,e){t.metric&&e&&this._updateMetric(e),t.imperial&&e&&this._updateImperial(e)},_updateMetric:function(t){var e=this._getRoundNum(t);this._mScale.style.width=this._getScaleWidth(e/t)+"px",this._mScale.innerHTML=e<1e3?e+" m":e/1e3+" km"},_updateImperial:function(t){var e,i,n,o=3.2808399*t,s=this._iScale;o>5280?(e=o/5280,i=this._getRoundNum(e),s.style.width=this._getScaleWidth(i/e)+"px",s.innerHTML=i+" mi"):(n=this._getRoundNum(o),s.style.width=this._getScaleWidth(n/o)+"px",s.innerHTML=n+" ft")},_getScaleWidth:function(t){return Math.round(this.options.maxWidth*t)-10},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,e*i}}),o.control.scale=function(t){return new o.Control.Scale(t)},o.Control.Layers=o.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(t,e,i){o.setOptions(this,i),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var n in t)this._addLayer(t[n],n);for(n in e)this._addLayer(e[n],n,!0)},onAdd:function(t){return this._initLayout(),this._update(),t.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(t){t.off("layeradd",this._onLayerChange).off("layerremove",this._onLayerChange)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._update(),this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._update(),this},removeLayer:function(t){var e=o.stamp(t);return delete this._layers[e],this._update(),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=o.DomUtil.create("div",t);e.setAttribute("aria-haspopup",!0),o.Browser.touch?o.DomEvent.on(e,"click",o.DomEvent.stopPropagation):(o.DomEvent.disableClickPropagation(e),o.DomEvent.on(e,"mousewheel",o.DomEvent.stopPropagation));var i=this._form=o.DomUtil.create("form",t+"-list");if(this.options.collapsed){o.Browser.android||o.DomEvent.on(e,"mouseover",this._expand,this).on(e,"mouseout",this._collapse,this);var n=this._layersLink=o.DomUtil.create("a",t+"-toggle",e);n.href="#",n.title="Layers",o.Browser.touch?o.DomEvent.on(n,"click",o.DomEvent.stop).on(n,"click",this._expand,this):o.DomEvent.on(n,"focus",this._expand,this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=o.DomUtil.create("div",t+"-base",i),this._separator=o.DomUtil.create("div",t+"-separator",i),this._overlaysList=o.DomUtil.create("div",t+"-overlays",i),e.appendChild(i)},_addLayer:function(t,e,i){var n=o.stamp(t);this._layers[n]={layer:t,name:e,overlay:i},this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var t,e,i=!1,n=!1;for(t in this._layers)e=this._layers[t],this._addItem(e),n=n||e.overlay,i=i||!e.overlay;this._separator.style.display=n&&i?"":"none"}},_onLayerChange:function(t){var e=this._layers[o.stamp(t.layer)];if(e){this._handlingClick||this._update();var i=e.overlay?"layeradd"===t.type?"overlayadd":"overlayremove":"layeradd"===t.type?"baselayerchange":null;i&&this._map.fire(i,e)}},_createRadioElement:function(t,i){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"';
i&&(n+=' checked="checked"'),n+="/>";var o=e.createElement("div");return o.innerHTML=n,o.firstChild},_addItem:function(t){var i,n=e.createElement("label"),s=this._map.hasLayer(t.layer);t.overlay?(i=e.createElement("input"),i.type="checkbox",i.className="leaflet-control-layers-selector",i.defaultChecked=s):i=this._createRadioElement("leaflet-base-layers",s),i.layerId=o.stamp(t.layer),o.DomEvent.on(i,"click",this._onInputClick,this);var r=e.createElement("span");r.innerHTML=" "+t.name,n.appendChild(i),n.appendChild(r);var a=t.overlay?this._overlaysList:this._baseLayersList;return a.appendChild(n),n},_onInputClick:function(){var t,e,i,n=this._form.getElementsByTagName("input"),o=n.length;for(this._handlingClick=!0,t=0;t<o;t++)e=n[t],i=this._layers[e.layerId],e.checked&&!this._map.hasLayer(i.layer)?this._map.addLayer(i.layer):!e.checked&&this._map.hasLayer(i.layer)&&this._map.removeLayer(i.layer);this._handlingClick=!1},_expand:function(){o.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),o.control.layers=function(t,e,i){return new o.Control.Layers(t,e,i)},o.PosAnimation=o.Class.extend({includes:o.Mixin.Events,run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._newPos=e,this.fire("start"),t.style[o.DomUtil.TRANSITION]="all "+(i||.25)+"s cubic-bezier(0,0,"+(n||.5)+",1)",o.DomEvent.on(t,o.DomUtil.TRANSITION_END,this._onTransitionEnd,this),o.DomUtil.setPosition(t,e),o.Util.falseFn(t.offsetWidth),this._stepTimer=setInterval(o.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(o.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),o.Util.falseFn(this._el.offsetWidth))},_onStep:function(){this._el._leaflet_pos=this._getPos(),this.fire("step")},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var e,i,n,s=this._el,r=t.getComputedStyle(s);return o.Browser.any3d?(n=r[o.DomUtil.TRANSFORM].match(this._transformRe),e=n?parseFloat(n[1]):0,i=n?parseFloat(n[2]):0):(e=parseFloat(r.left),i=parseFloat(r.top)),new o.Point(e,i,!0)},_onTransitionEnd:function(){o.DomEvent.off(this._el,o.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[o.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),o.Map.include({setView:function(t,e,n){if(e=this._limitZoom(e),t=o.latLng(t),n=n||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!n.reset&&n!==!0){n.animate!==i&&(n.zoom=o.extend({animate:n.animate},n.zoom),n.pan=o.extend({animate:n.animate},n.pan));var s=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan);if(s)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this},panBy:function(t,e){if(t=o.point(t).round(),e=e||{},!t.x&&!t.y)return this;if(this._panAnim||(this._panAnim=new o.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){o.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t);this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){o.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._floor();return!((e&&e.animate)!==!0&&!this.getSize().contains(i))&&(this.panBy(i,e),!0)}}),o.PosAnimation=o.DomUtil.TRANSITION?o.PosAnimation:o.PosAnimation.extend({run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=o.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=o.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var t=+new Date-this._startTime,e=1e3*this._duration;t<e?this._runFrame(this._easeOut(t/e)):(this._runFrame(1),this._complete())},_runFrame:function(t){var e=this._startPos.add(this._offset.multiplyBy(t));o.DomUtil.setPosition(this._el,e),this.fire("step")},_complete:function(){o.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),o.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),o.DomUtil.TRANSITION&&o.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&o.DomUtil.TRANSITION&&o.Browser.any3d&&!o.Browser.android23&&!o.Browser.mobileOpera,this._zoomAnimated&&o.DomEvent.on(this._mapPane,o.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),o.Map.include(o.DomUtil.TRANSITION?{_catchTransitionEnd:function(){this._animatingZoom&&this._onZoomTransitionEnd()},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||i.animate===!1||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/n),s=this._getCenterLayerPoint()._add(o);return!(i.animate!==!0&&!this.getSize().contains(o))&&(this.fire("movestart").fire("zoomstart"),this._animateZoom(t,e,s,n,null,!0),!0)},_animateZoom:function(t,e,i,n,s,r){this._animatingZoom=!0,o.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=t,this._animateToZoom=e,o.Draggable&&(o.Draggable._disabled=!0),this.fire("zoomanim",{center:t,zoom:e,origin:i,scale:n,delta:s,backwards:r})},_onZoomTransitionEnd:function(){this._animatingZoom=!1,o.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),o.Draggable&&(o.Draggable._disabled=!1)}}:{}),o.TileLayer.include({_animateZoom:function(t){var e=!1;this._animating||(this._animating=!0,e=!0),e&&this._prepareBgBuffer();var i=this._bgBuffer;e&&(clearTimeout(this._clearBgBufferTimer),o.Util.falseFn(i.offsetWidth));var n=o.DomUtil.TRANSFORM,s=t.delta?o.DomUtil.getTranslateString(t.delta):i.style[n],r=o.DomUtil.getScaleString(t.scale,t.origin);i.style[n]=t.backwards?r+" "+s:s+" "+r},_endZoomAnim:function(){var t=this._tileContainer,e=this._bgBuffer;t.style.visibility="",t.style.zIndex=2,e.style.zIndex=1,o.Util.falseFn(e.offsetWidth),this._animating=!1},_clearBgBuffer:function(){var t=this._map;!t||t._animatingZoom||t.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[o.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var t=this._tileContainer,e=this._bgBuffer,i=this._getLoadedTilesPercentage(e),n=this._getLoadedTilesPercentage(t);return e&&i>.5&&n<.5?(t.style.visibility="hidden",void this._stopLoadingImages(t)):(e.style.visibility="hidden",e.style[o.DomUtil.TRANSFORM]="",this._tileContainer=e,e=this._bgBuffer=t,void this._stopLoadingImages(e))},_getLoadedTilesPercentage:function(t){var e,i,n=t.getElementsByTagName("img"),o=0;for(e=0,i=n.length;e<i;e++)n[e].complete&&o++;return o/i},_stopLoadingImages:function(t){var e,i,n,s=Array.prototype.slice.call(t.getElementsByTagName("img"));for(e=0,i=s.length;e<i;e++)n=s[e],n.complete||(n.onload=o.Util.falseFn,n.onerror=o.Util.falseFn,n.src=o.Util.emptyImageUrl,n.parentNode.removeChild(n))}}),o.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(t){if(t=this._locateOptions=o.extend(this._defaultLocateOptions,t),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=o.bind(this._handleGeolocationResponse,this),i=o.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,i=t.coords.longitude,n=new o.LatLng(e,i),s=180*t.coords.accuracy/40075017,r=s/Math.cos(o.LatLng.DEG_TO_RAD*e),a=o.latLngBounds([e-s,i-r],[e+s,i+r]),l=this._locateOptions;if(l.setView){var u=Math.min(this.getBoundsZoom(a),l.maxZoom);this.setView(n,u)}var c={latlng:n,bounds:a};for(var h in t.coords)"number"==typeof t.coords[h]&&(c[h]=t.coords[h]);this.fire("locationfound",c)}})}(window,document),function(t,e){L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animateAddingMarkers:!1,spiderfyDistanceMultiplier:1,polygonOptions:{}},initialize:function(t){L.Util.setOptions(this,t),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.on(L.FeatureGroup.EVENTS,this._propagateEvent,this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.on(L.FeatureGroup.EVENTS,this._propagateEvent,this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null},addLayer:function(t){if(t instanceof L.LayerGroup){var e=[];for(var i in t._layers)e.push(t._layers[i]);return this.addLayers(e)}if(!t.getLatLng)return this._nonPointGroup.addLayer(t),this;if(!this._map)return this._needsClustering.push(t),this;if(this.hasLayer(t))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(t,this._maxZoom);var n=t,o=this._map.getZoom();if(t.__parent)for(;n.__parent._zoom>=o;)n=n.__parent;return this._currentShownBounds.contains(n.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(t,n):this._animationAddLayerNonAnimated(t,n)),this},removeLayer:function(t){return t.getLatLng?this._map?t.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(t)),this._removeLayer(t,!0),this._featureGroup.hasLayer(t)&&(this._featureGroup.removeLayer(t),t.setOpacity&&t.setOpacity(1)),this):this:(!this._arraySplice(this._needsClustering,t)&&this.hasLayer(t)&&this._needsRemoving.push(t),this):(this._nonPointGroup.removeLayer(t),this)},addLayers:function(t){var e,i,n,o=this._map,s=this._featureGroup,r=this._nonPointGroup;for(e=0,i=t.length;e<i;e++)if(n=t[e],n.getLatLng){if(!this.hasLayer(n))if(o){if(this._addLayer(n,this._maxZoom),n.__parent&&2===n.__parent.getChildCount()){var a=n.__parent.getAllChildMarkers(),l=a[0]===n?a[1]:a[0];s.removeLayer(l)}}else this._needsClustering.push(n)}else r.addLayer(n);return o&&(s.eachLayer(function(t){t instanceof L.MarkerCluster&&t._iconNeedsUpdate&&t._updateIcon()}),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)),this},removeLayers:function(t){var e,i,n,o=this._featureGroup,s=this._nonPointGroup;if(!this._map){for(e=0,i=t.length;e<i;e++)n=t[e],this._arraySplice(this._needsClustering,n),s.removeLayer(n);return this}for(e=0,i=t.length;e<i;e++)n=t[e],n.__parent?(this._removeLayer(n,!0,!0),o.hasLayer(n)&&(o.removeLayer(n),n.setOpacity&&n.setOpacity(1))):s.removeLayer(n);return this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),o.eachLayer(function(t){t instanceof L.MarkerCluster&&t._updateIcon()}),this},clearLayers:function(){return this._map||(this._needsClustering=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(t){delete t.__parent}),this._map&&this._generateInitialClusters(),this},getBounds:function(){var t=new L.LatLngBounds;if(this._topClusterLevel)t.extend(this._topClusterLevel._bounds);else for(var e=this._needsClustering.length-1;e>=0;e--)t.extend(this._needsClustering[e].getLatLng());var i=this._nonPointGroup.getBounds();return i.isValid()&&t.extend(i),t},eachLayer:function(t,e){var i,n=this._needsClustering.slice();for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(n),i=n.length-1;i>=0;i--)t.call(e,n[i]);this._nonPointGroup.eachLayer(t,e)},hasLayer:function(t){if(!t)return!1;var e,i=this._needsClustering;for(e=i.length-1;e>=0;e--)if(i[e]===t)return!0;for(i=this._needsRemoving,e=i.length-1;e>=0;e--)if(i[e]===t)return!1;return!(!t.__parent||t.__parent._group!==this)||this._nonPointGroup.hasLayer(t)},zoomToShowLayer:function(t,e){var i=function(){if((t._icon||t.__parent._icon)&&!this._inZoomAnimation)if(this._map.off("moveend",i,this),this.off("animationend",i,this),t._icon)e();else if(t.__parent._icon){var n=function(){this.off("spiderfied",n,this),e()};this.on("spiderfied",n,this),t.__parent.spiderfy()}};t._icon?e():t.__parent._zoom<this._map.getZoom()?(this._map.on("moveend",i,this),t._icon||this._map.panTo(t.getLatLng())):(this._map.on("moveend",i,this),this.on("animationend",i,this),this._map.setView(t.getLatLng(),t.__parent._zoom+1),t.__parent.zoomToBounds())},onAdd:function(t){this._map=t;var e,i,n;for(this._featureGroup.onAdd(t),this._nonPointGroup.onAdd(t),this._gridClusters||this._generateInitialClusters(),e=0,i=this._needsRemoving.length;e<i;e++)n=this._needsRemoving[e],this._removeLayer(n);for(this._needsRemoving=[],e=0,i=this._needsClustering.length;e<i;e++)n=this._needsClustering[e],n.getLatLng?n.__parent||this._addLayer(n,this._maxZoom):this._featureGroup.addLayer(n);this._needsClustering=[],this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),this._zoom=this._map.getZoom(),this._currentShownBounds=this._getExpandedVisibleBounds(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)},onRemove:function(t){t.off("zoomend",this._zoomEnd,this),t.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),this._featureGroup.onRemove(t),this._nonPointGroup.onRemove(t),this._map=null},getVisibleParent:function(t){for(var e=t;null!==e&&!e._icon;)e=e.__parent;return e},_arraySplice:function(t,e){for(var i=t.length-1;i>=0;i--)if(t[i]===e)return t.splice(i,1),!0},_removeLayer:function(t,e,i){var n=this._gridClusters,o=this._gridUnclustered,s=this._featureGroup,r=this._map;if(e)for(var a=this._maxZoom;a>=0&&o[a].removeObject(t,r.project(t.getLatLng(),a));a--);var l,u=t.__parent,c=u._markers;for(this._arraySplice(c,t);u&&(u._childCount--,!(u._zoom<0));)e&&u._childCount<=1?(l=u._markers[0]===t?u._markers[1]:u._markers[0],n[u._zoom].removeObject(u,r.project(u._cLatLng,u._zoom)),o[u._zoom].addObject(l,r.project(l.getLatLng(),u._zoom)),this._arraySplice(u.__parent._childClusters,u),u.__parent._markers.push(l),l.__parent=u.__parent,u._icon&&(s.removeLayer(u),i||s.addLayer(l))):(u._recalculateBounds(),i&&u._icon||u._updateIcon()),u=u.__parent;delete t.__parent},_propagateEvent:function(t){t.layer instanceof L.MarkerCluster&&(t.type="cluster"+t.type),this.fire(t.type,t)},_defaultIconCreateFunction:function(t){var e=t.getChildCount(),i=" marker-cluster-";return i+=e<10?"small":e<100?"medium":"large",new L.DivIcon({html:"<div><span>"+e+"</span></div>",className:"marker-cluster"+i,iconSize:new L.Point(40,40)})},_bindEvents:function(){var t=this._map,e=this.options.spiderfyOnMaxZoom,i=this.options.showCoverageOnHover,n=this.options.zoomToBoundsOnClick;(e||n)&&this.on("clusterclick",this._zoomOrSpiderfy,this),i&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),t.on("zoomend",this._hideCoverage,this),t.on("layerremove",this._hideCoverageOnRemove,this))},_zoomOrSpiderfy:function(t){var e=this._map;e.getMaxZoom()===e.getZoom()?this.options.spiderfyOnMaxZoom&&t.layer.spiderfy():this.options.zoomToBoundsOnClick&&t.layer.zoomToBounds()},_showCoverage:function(t){var e=this._map;this._inZoomAnimation||(this._shownPolygon&&e.removeLayer(this._shownPolygon),t.layer.getChildCount()>2&&t.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(t.layer.getConvexHull(),this.options.polygonOptions),e.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_hideCoverageOnRemove:function(t){t.layer===this&&this._hideCoverage()},_unbindEvents:function(){var t=this.options.spiderfyOnMaxZoom,e=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick,n=this._map;(t||i)&&this.off("clusterclick",this._zoomOrSpiderfy,this),e&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),n.off("zoomend",this._hideCoverage,this),n.off("layerremove",this._hideCoverageOnRemove,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=this._map._zoom,this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var t=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._zoom,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,t),this._currentShownBounds=t}},_generateInitialClusters:function(){var t=this._map.getMaxZoom(),e=this.options.maxClusterRadius;this.options.disableClusteringAtZoom&&(t=this.options.disableClusteringAtZoom-1),this._maxZoom=t,this._gridClusters={},this._gridUnclustered={};for(var i=t;i>=0;i--)this._gridClusters[i]=new L.DistanceGrid(e),this._gridUnclustered[i]=new L.DistanceGrid(e);this._topClusterLevel=new L.MarkerCluster(this,-1)},_addLayer:function(t,e){var i,n,o=this._gridClusters,s=this._gridUnclustered;for(this.options.singleMarkerMode&&(t.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[t]}}));e>=0;e--){i=this._map.project(t.getLatLng(),e);var r=o[e].getNearObject(i);if(r)return r._addChild(t),void(t.__parent=r);if(r=s[e].getNearObject(i)){var a=r.__parent;a&&this._removeLayer(r,!1);var l=new L.MarkerCluster(this,e,r,t);o[e].addObject(l,this._map.project(l._cLatLng,e)),r.__parent=l,t.__parent=l;var u=l;for(n=e-1;n>a._zoom;n--)u=new L.MarkerCluster(this,n,u),o[n].addObject(u,this._map.project(r.getLatLng(),n));for(a._addChild(u),n=e;n>=0&&s[n].removeObject(r,this._map.project(r.getLatLng(),n));n--);return}s[e].addObject(t,i)}this._topClusterLevel._addChild(t),t.__parent=this._topClusterLevel},_mergeSplitClusters:function(){this._zoom<this._map._zoom?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,this._map._zoom)):this._zoom>this._map._zoom?(this._animationStart(),this._animationZoomOut(this._zoom,this._map._zoom)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(!this.options.removeOutsideVisibleBounds)return this.getBounds();var t=this._map,e=t.getBounds(),i=e._southWest,n=e._northEast,o=L.Browser.mobile?0:Math.abs(i.lat-n.lat),s=L.Browser.mobile?0:Math.abs(i.lng-n.lng);return new L.LatLngBounds(new L.LatLng(i.lat-o,i.lng-s,!0),new L.LatLng(n.lat+o,n.lng+s,!0))},_animationAddLayerNonAnimated:function(t,e){if(e===t)this._featureGroup.addLayer(t);else if(2===e._childCount){e._addToMap();var i=e.getAllChildMarkers();this._featureGroup.removeLayer(i[0]),this._featureGroup.removeLayer(i[1])}else e._updateIcon()}}),L.MarkerClusterGroup.include(L.DomUtil.TRANSITION?{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_animationZoomIn:function(t,e){var i,n=this,o=this._getExpandedVisibleBounds(),s=this._featureGroup;this._topClusterLevel._recursively(o,t,0,function(n){var r,a=n._latlng,l=n._markers;for(n._isSingleParent()&&t+1===e?(s.removeLayer(n),n._recursivelyAddChildrenToMap(null,e,o)):(n.setOpacity(0),n._recursivelyAddChildrenToMap(a,e,o)),i=l.length-1;i>=0;i--)r=l[i],o.contains(r._latlng)||s.removeLayer(r)}),this._forceLayout(),n._topClusterLevel._recursivelyBecomeVisible(o,e),s.eachLayer(function(t){t instanceof L.MarkerCluster||!t._icon||t.setOpacity(1)}),n._topClusterLevel._recursively(o,t,e,function(t){t._recursivelyRestoreChildPositions(e)}),setTimeout(function(){n._topClusterLevel._recursively(o,t,0,function(t){s.removeLayer(t),t.setOpacity(1)}),n._animationEnd()},200)},_animationZoomOut:function(t,e){this._animationZoomOutSingle(this._topClusterLevel,t-1,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,t,this._getExpandedVisibleBounds())},_animationZoomOutSingle:function(t,e,i){var n=this._getExpandedVisibleBounds();t._recursivelyAnimateChildrenInAndAddSelfToMap(n,e+1,i);var o=this;this._forceLayout(),t._recursivelyBecomeVisible(n,i),setTimeout(function(){if(1===t._childCount){var s=t._markers[0];s.setLatLng(s.getLatLng()),s.setOpacity(1)}else t._recursively(n,i,0,function(t){t._recursivelyRemoveChildrenFromMap(n,e+1)});o._animationEnd()},200)},_animationAddLayer:function(t,e){var i=this,n=this._featureGroup;n.addLayer(t),e!==t&&(e._childCount>2?(e._updateIcon(),this._forceLayout(),this._animationStart(),t._setPos(this._map.latLngToLayerPoint(e.getLatLng())),t.setOpacity(0),setTimeout(function(){n.removeLayer(t),t.setOpacity(1),i._animationEnd()},200)):(this._forceLayout(),i._animationStart(),i._animationZoomOutSingle(e,this._map.getMaxZoom(),this._map.getZoom())))},_forceLayout:function(){L.Util.falseFn(e.body.offsetWidth)}}:{_animationStart:function(){},_animationZoomIn:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds())},_animationZoomOut:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds())},_animationAddLayer:function(t,e){this._animationAddLayerNonAnimated(t,e)}}),L.markerClusterGroup=function(t){return new L.MarkerClusterGroup(t)},L.MarkerCluster=L.Marker.extend({initialize:function(t,e,i,n){L.Marker.prototype.initialize.call(this,i?i._cLatLng||i.getLatLng():new L.LatLng(0,0),{icon:this}),this._group=t,this._zoom=e,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._bounds=new L.LatLngBounds,i&&this._addChild(i),n&&this._addChild(n)},getAllChildMarkers:function(t){t=t||[];for(var e=this._childClusters.length-1;e>=0;e--)this._childClusters[e].getAllChildMarkers(t);for(var i=this._markers.length-1;i>=0;i--)t.push(this._markers[i]);return t},getChildCount:function(){return this._childCount},zoomToBounds:function(){this._group._map.fitBounds(this._bounds)},getBounds:function(){var t=new L.LatLngBounds;return t.extend(this._bounds),t},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(t,e){this._iconNeedsUpdate=!0,this._expandBounds(t),t instanceof L.MarkerCluster?(e||(this._childClusters.push(t),t.__parent=this),this._childCount+=t._childCount):(e||this._markers.push(t),this._childCount++),this.__parent&&this.__parent._addChild(t,!0)},_expandBounds:function(t){var e,i=t._wLatLng||t._latlng;t instanceof L.MarkerCluster?(this._bounds.extend(t._bounds),e=t._childCount):(this._bounds.extend(i),e=1),this._cLatLng||(this._cLatLng=t._cLatLng||i);var n=this._childCount+e;this._wLatLng?(this._wLatLng.lat=(i.lat*e+this._wLatLng.lat*this._childCount)/n,this._wLatLng.lng=(i.lng*e+this._wLatLng.lng*this._childCount)/n):this._latlng=this._wLatLng=new L.LatLng(i.lat,i.lng)},_addToMap:function(t){t&&(this._backupLatlng=this._latlng,this.setLatLng(t)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(t,e,i){this._recursively(t,0,i-1,function(t){var i,n,o=t._markers;for(i=o.length-1;i>=0;i--)n=o[i],n._icon&&(n._setPos(e),n.setOpacity(0))},function(t){var i,n,o=t._childClusters;for(i=o.length-1;i>=0;i--)n=o[i],n._icon&&(n._setPos(e),n.setOpacity(0))})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(t,e,i){this._recursively(t,i,0,function(n){n._recursivelyAnimateChildrenIn(t,n._group._map.latLngToLayerPoint(n.getLatLng()).round(),e),n._isSingleParent()&&e-1===i?(n.setOpacity(1),n._recursivelyRemoveChildrenFromMap(t,e)):n.setOpacity(0),n._addToMap()})},_recursivelyBecomeVisible:function(t,e){this._recursively(t,0,e,null,function(t){t.setOpacity(1)})},_recursivelyAddChildrenToMap:function(t,e,i){this._recursively(i,-1,e,function(n){if(e!==n._zoom)for(var o=n._markers.length-1;o>=0;o--){var s=n._markers[o];i.contains(s._latlng)&&(t&&(s._backupLatlng=s.getLatLng(),s.setLatLng(t),s.setOpacity&&s.setOpacity(0)),n._group._featureGroup.addLayer(s))}},function(e){e._addToMap(t)})},_recursivelyRestoreChildPositions:function(t){for(var e=this._markers.length-1;e>=0;e--){var i=this._markers[e];i._backupLatlng&&(i.setLatLng(i._backupLatlng),delete i._backupLatlng)}if(t-1===this._zoom)for(var n=this._childClusters.length-1;n>=0;n--)this._childClusters[n]._restorePosition();else for(var o=this._childClusters.length-1;o>=0;o--)this._childClusters[o]._recursivelyRestoreChildPositions(t)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(t,e,i){var n,o;this._recursively(t,-1,e-1,function(t){for(o=t._markers.length-1;o>=0;o--)n=t._markers[o],i&&i.contains(n._latlng)||(t._group._featureGroup.removeLayer(n),n.setOpacity&&n.setOpacity(1))},function(t){for(o=t._childClusters.length-1;o>=0;o--)n=t._childClusters[o],i&&i.contains(n._latlng)||(t._group._featureGroup.removeLayer(n),n.setOpacity&&n.setOpacity(1))})},_recursively:function(t,e,i,n,o){var s,r,a=this._childClusters,l=this._zoom;if(e>l)for(s=a.length-1;s>=0;s--)r=a[s],t.intersects(r._bounds)&&r._recursively(t,e,i,n,o);else if(n&&n(this),o&&this._zoom===i&&o(this),i>l)for(s=a.length-1;s>=0;s--)r=a[s],t.intersects(r._bounds)&&r._recursively(t,e,i,n,o)},_recalculateBounds:function(){var t,e=this._markers,i=this._childClusters;for(this._bounds=new L.LatLngBounds,delete this._wLatLng,t=e.length-1;t>=0;t--)this._expandBounds(e[t]);for(t=i.length-1;t>=0;t--)this._expandBounds(i[t])},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}}),L.DistanceGrid=function(t){this._cellSize=t,this._sqCellSize=t*t,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(t,e){var i=this._getCoord(e.x),n=this._getCoord(e.y),o=this._grid,s=o[n]=o[n]||{},r=s[i]=s[i]||[],a=L.Util.stamp(t);this._objectPoint[a]=e,r.push(t)},updateObject:function(t,e){this.removeObject(t),this.addObject(t,e)},removeObject:function(t,e){var i,n,o=this._getCoord(e.x),s=this._getCoord(e.y),r=this._grid,a=r[s]=r[s]||{},l=a[o]=a[o]||[];for(delete this._objectPoint[L.Util.stamp(t)],i=0,n=l.length;i<n;i++)if(l[i]===t)return l.splice(i,1),1===n&&delete a[o],!0},eachObject:function(t,e){var i,n,o,s,r,a,l,u=this._grid;for(i in u){r=u[i];for(n in r)for(a=r[n],o=0,s=a.length;o<s;o++)l=t.call(e,a[o]),l&&(o--,s--)}},getNearObject:function(t){var e,i,n,o,s,r,a,l,u=this._getCoord(t.x),c=this._getCoord(t.y),h=this._objectPoint,d=this._sqCellSize,p=null;for(e=c-1;e<=c+1;e++)if(o=this._grid[e])for(i=u-1;i<=u+1;i++)if(s=o[i])for(n=0,r=s.length;n<r;n++)a=s[n],l=this._sqDist(h[L.Util.stamp(a)],t),l<d&&(d=l,p=a);return p},_getCoord:function(t){return Math.floor(t/this._cellSize)},_sqDist:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n}},function(){L.QuickHull={getDistant:function(t,e){var i=e[1].lat-e[0].lat,n=e[0].lng-e[1].lng;return n*(t.lat-e[0].lat)+i*(t.lng-e[0].lng)},findMostDistantPointFromBaseLine:function(t,e){var i,n,o,s=0,r=null,a=[];for(i=e.length-1;i>=0;i--)n=e[i],o=this.getDistant(n,t),o>0&&(a.push(n),o>s&&(s=o,r=n));return{maxPoint:r,newPoints:a}},buildConvexHull:function(t,e){var i=[],n=this.findMostDistantPointFromBaseLine(t,e);return n.maxPoint?(i=i.concat(this.buildConvexHull([t[0],n.maxPoint],n.newPoints)),i=i.concat(this.buildConvexHull([n.maxPoint,t[1]],n.newPoints))):[t]},getConvexHull:function(t){var e,i=!1,n=!1,o=null,s=null;for(e=t.length-1;e>=0;e--){var r=t[e];(i===!1||r.lat>i)&&(o=r,i=r.lat),(n===!1||r.lat<n)&&(s=r,n=r.lat)}var a=[].concat(this.buildConvexHull([s,o],t),this.buildConvexHull([o,s],t));return a}}}(),L.MarkerCluster.include({getConvexHull:function(){var t,e,i,n=this.getAllChildMarkers(),o=[],s=[];for(i=n.length-1;i>=0;i--)e=n[i].getLatLng(),o.push(e);for(t=L.QuickHull.getConvexHull(o),i=t.length-1;i>=0;i--)s.push(t[i][0]);return s}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:Math.PI/6,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var t,e=this.getAllChildMarkers(),i=this._group,n=i._map,o=n.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),this._group._spiderfied=this,e.length>=this._circleSpiralSwitchover?t=this._generatePointsSpiral(e.length,o):(o.y+=10,t=this._generatePointsCircle(e.length,o)),this._animationSpiderfy(e,t)}},unspiderfy:function(t){this._group._inZoomAnimation||(this._animationUnspiderfy(t),this._group._spiderfied=null)},_generatePointsCircle:function(t,e){var i,n,o=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+t),s=o/this._2PI,r=this._2PI/t,a=[];for(a.length=t,i=t-1;i>=0;i--)n=this._circleStartAngle+i*r,a[i]=new L.Point(e.x+s*Math.cos(n),e.y+s*Math.sin(n))._round();return a},_generatePointsSpiral:function(t,e){var i,n=this._group.options.spiderfyDistanceMultiplier*this._spiralLengthStart,o=this._group.options.spiderfyDistanceMultiplier*this._spiralFootSeparation,s=this._group.options.spiderfyDistanceMultiplier*this._spiralLengthFactor,r=0,a=[];for(a.length=t,i=t-1;i>=0;i--)r+=o/n+5e-4*i,a[i]=new L.Point(e.x+n*Math.cos(r),e.y+n*Math.sin(r))._round(),n+=this._2PI*s/r;return a},_noanimationUnspiderfy:function(){var t,e,i=this._group,n=i._map,o=i._featureGroup,s=this.getAllChildMarkers();for(this.setOpacity(1),e=s.length-1;e>=0;e--)t=s[e],o.removeLayer(t),t._preSpiderfyLatlng&&(t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng),t.setZIndexOffset(0),t._spiderLeg&&(n.removeLayer(t._spiderLeg),delete t._spiderLeg)}}),L.MarkerCluster.include(L.DomUtil.TRANSITION?{SVG_ANIMATION:function(){return e.createElementNS("http://www.w3.org/2000/svg","animate").toString().indexOf("SVGAnimate")>-1}(),_animationSpiderfy:function(t,i){var n,o,s,r,a=this,l=this._group,u=l._map,c=l._featureGroup,h=u.latLngToLayerPoint(this._latlng);for(n=t.length-1;n>=0;n--)o=t[n],o.setZIndexOffset(1e6),o.setOpacity(0),c.addLayer(o),o._setPos(h);l._forceLayout(),l._animationStart();var d=L.Path.SVG?0:.3,p=L.Path.SVG_NS;for(n=t.length-1;n>=0;n--)if(r=u.layerPointToLatLng(i[n]),o=t[n],o._preSpiderfyLatlng=o._latlng,o.setLatLng(r),o.setOpacity(1),s=new L.Polyline([a._latlng,r],{weight:1.5,color:"#222",opacity:d}),u.addLayer(s),o._spiderLeg=s,L.Path.SVG&&this.SVG_ANIMATION){var f=s._path.getTotalLength();s._path.setAttribute("stroke-dasharray",f+","+f);var m=e.createElementNS(p,"animate");m.setAttribute("attributeName","stroke-dashoffset"),m.setAttribute("begin","indefinite"),m.setAttribute("from",f),m.setAttribute("to",0),m.setAttribute("dur",.25),s._path.appendChild(m),m.beginElement(),m=e.createElementNS(p,"animate"),m.setAttribute("attributeName","stroke-opacity"),m.setAttribute("attributeName","stroke-opacity"),m.setAttribute("begin","indefinite"),m.setAttribute("from",0),m.setAttribute("to",.5),m.setAttribute("dur",.25),s._path.appendChild(m),
m.beginElement()}if(a.setOpacity(.3),L.Path.SVG)for(this._group._forceLayout(),n=t.length-1;n>=0;n--)o=t[n]._spiderLeg,o.options.opacity=.5,o._path.setAttribute("stroke-opacity",.5);setTimeout(function(){l._animationEnd(),l.fire("spiderfied")},200)},_animationUnspiderfy:function(t){var e,i,n,o=this._group,s=o._map,r=o._featureGroup,a=t?s._latLngToNewLayerPoint(this._latlng,t.zoom,t.center):s.latLngToLayerPoint(this._latlng),l=this.getAllChildMarkers(),u=L.Path.SVG&&this.SVG_ANIMATION;for(o._animationStart(),this.setOpacity(1),i=l.length-1;i>=0;i--)e=l[i],e._preSpiderfyLatlng&&(e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng,e._setPos(a),e.setOpacity(0),u&&(n=e._spiderLeg._path.childNodes[0],n.setAttribute("to",n.getAttribute("from")),n.setAttribute("from",0),n.beginElement(),n=e._spiderLeg._path.childNodes[1],n.setAttribute("from",.5),n.setAttribute("to",0),n.setAttribute("stroke-opacity",0),n.beginElement(),e._spiderLeg._path.setAttribute("stroke-opacity",0)));setTimeout(function(){var t=0;for(i=l.length-1;i>=0;i--)e=l[i],e._spiderLeg&&t++;for(i=l.length-1;i>=0;i--)e=l[i],e._spiderLeg&&(e.setOpacity(1),e.setZIndexOffset(0),t>1&&r.removeLayer(e),s.removeLayer(e._spiderLeg),delete e._spiderLeg);o._animationEnd()},200)}}:{_animationSpiderfy:function(t,e){var i,n,o,s,r=this._group,a=r._map,l=r._featureGroup;for(i=t.length-1;i>=0;i--)s=a.layerPointToLatLng(e[i]),n=t[i],n._preSpiderfyLatlng=n._latlng,n.setLatLng(s),n.setZIndexOffset(1e6),l.addLayer(n),o=new L.Polyline([this._latlng,s],{weight:1.5,color:"#222"}),a.addLayer(o),n._spiderLeg=o;this.setOpacity(.3),r.fire("spiderfied")},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerClusterGroup.include({_spiderfied:null,_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation?this._map.on("zoomstart",this._unspiderfyZoomStart,this):this._map.on("zoomend",this._unspiderfyWrapper,this),L.Path.SVG&&!L.Browser.touch&&this._map._initPathRoot()},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(t){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(t))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(t){this._spiderfied&&this._spiderfied.unspiderfy(t)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(t){t._spiderLeg&&(this._featureGroup.removeLayer(t),t.setOpacity(1),t.setZIndexOffset(0),this._map.removeLayer(t._spiderLeg),delete t._spiderLeg)}})}(window,document),function(window,undefined){L.Util.ajax=function(url,cb){window.XMLHttpRequest===undefined&&(window.XMLHttpRequest=function(){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){throw new Error("XMLHttpRequest is not supported")}});var response,request=new XMLHttpRequest;request.open("GET",url),request.onreadystatechange=function(){4===request.readyState&&200===request.status&&(response=window.JSON?JSON.parse(request.responseText):eval("("+request.responseText+")"),cb(response))},request.send()},L.UtfGrid=L.Class.extend({includes:L.Mixin.Events,options:{subdomains:"abc",minZoom:0,maxZoom:18,tileSize:256,resolution:4,useJsonP:!0,pointerCursor:!0},_mouseOn:null,initialize:function(t,e){L.Util.setOptions(this,e),this._url=t,this._cache={};for(var i=0;window["lu"+i];)i++;this._windowKey="lu"+i,window[this._windowKey]={};var n=this.options.subdomains;"string"==typeof this.options.subdomains&&(this.options.subdomains=n.split(""))},onAdd:function(t){this._map=t,this._container=this._map._container,this._update();var e=this._map.getZoom();e>this.options.maxZoom||e<this.options.minZoom||(t.on("click",this._click,this),t.on("mousemove",this._move,this),t.on("moveend",this._update,this))},onRemove:function(){var t=this._map;t.off("click",this._click,this),t.off("mousemove",this._move,this),t.off("moveend",this._update,this)},_click:function(t){this.fire("click",this._objectForEvent(t))},_move:function(t){var e=this._objectForEvent(t);e.data!==this._mouseOn?(this._mouseOn&&(this.fire("mouseout",{latlng:t.latlng,data:this._mouseOn}),this.options.pointerCursor&&(this._container.style.cursor="")),e.data&&(this.fire("mouseover",e),this.options.pointerCursor&&(this._container.style.cursor="pointer")),this._mouseOn=e.data):e.data&&this.fire("mousemove",e)},_objectForEvent:function(t){var e=this._map,i=e.project(t.latlng),n=this.options.tileSize,o=this.options.resolution,s=Math.floor(i.x/n),r=Math.floor(i.y/n),a=Math.floor((i.x-s*n)/o),l=Math.floor((i.y-r*n)/o),u=e.options.crs.scale(e.getZoom())/n;s=(s+u)%u,r=(r+u)%u;var c=this._cache[e.getZoom()+"_"+s+"_"+r];if(!c)return{latlng:t.latlng,data:null};var h=this._utfDecode(c.grid[l].charCodeAt(a)),d=c.keys[h],p=c.data[d];return c.data.hasOwnProperty(d)||(p=null),{latlng:t.latlng,data:p}},_update:function(){var t=this._map.getPixelBounds(),e=this._map.getZoom(),i=this.options.tileSize;if(!(e>this.options.maxZoom||e<this.options.minZoom))for(var n=new L.Point(Math.floor(t.min.x/i),Math.floor(t.min.y/i)),o=new L.Point(Math.floor(t.max.x/i),Math.floor(t.max.y/i)),s=this._map.options.crs.scale(e)/i,r=n.x;r<=o.x;r++)for(var a=n.y;a<=o.y;a++){var l=(r+s)%s,u=(a+s)%s,c=e+"_"+l+"_"+u;this._cache.hasOwnProperty(c)||(this._cache[c]=null,this.options.useJsonP?this._loadTileP(e,l,u):this._loadTile(e,l,u))}},_loadTileP:function(t,e,i){var n=document.getElementsByTagName("head")[0],o=t+"_"+e+"_"+i,s="lu_"+o,r=this._windowKey,a=this,l=L.Util.template(this._url,L.Util.extend({s:L.TileLayer.prototype._getSubdomain.call(this,{x:e,y:i}),z:t,x:e,y:i,cb:r+"."+s},this.options)),u=document.createElement("script");u.setAttribute("type","text/javascript"),u.setAttribute("src",l),window[r][s]=function(t){a._cache[o]=t,delete window[r][s],n.removeChild(u)},n.appendChild(u)},_loadTile:function(t,e,i){var n=L.Util.template(this._url,L.Util.extend({s:L.TileLayer.prototype._getSubdomain.call(this,{x:e,y:i}),z:t,x:e,y:i},this.options)),o=t+"_"+e+"_"+i,s=this;L.Util.ajax(n,function(t){s._cache[o]=t})},_utfDecode:function(t){return t>=93&&t--,t>=35&&t--,t-32}})}(this),function(t){t.fn.stupidtable=function(e){return this.each(function(){var i=$j(this);e=e||{},e=t.extend({},{"int":function(t,e){return parseInt(t,10)-parseInt(e,10)},"float":function(t,e){return parseFloat(t)-parseFloat(e)},string:function(t,e){return t<e?-1:t>e?1:0},"string-ins":function(t,e){return t="undefined"!=typeof t&&t?t.toString():"0",e="undefined"!=typeof e&&e?e.toString():"0",t=t.toLowerCase(),e=e.toLowerCase(),t<e?-1:t>e?1:0}},e);var n=function(e,i,n){var o=[],s=0;if(n)for(var r=e.length-1;r>=0;r--)o.push(r);else for(var a=e.slice(0).sort(i),r=0;r<e.length;r++){for(s=t.inArray(e[r],a);t.inArray(s,o)!=-1;)s++;o.push(s)}return o},o=function(t,e){for(var i=t.slice(0),n=0,o=0;o<e.length;o++)n=e[o],i[n]=t[o];return i};i.on("click","th",function(){var s=i.children("tbody").children("tr"),r=$j(this),a=0,l=0,u=t.fn.stupidtable.dir;i.find("th").slice(0,r.index()).each(function(){var t=$j(this).attr("colspan")||1;a+=parseInt(t,10),l+=1});var c=r.data("sort-dir")===u.ASC?u.DESC:u.ASC;if(c==u.DESC)var h=r.data("sort-desc")||r.data("sort")||null;else var h=r.data("sort")||null;null!==h&&(i.trigger("beforetablesort",{column:l,direction:c}),i.css("display"),setTimeout(function(){var t=[],u=e[h];s.each(function(e,i){var n=$j(i).children().eq(a),o=n.data("sort-value"),s="undefined"!=typeof o?o:n.text();t.push(s)});var d=!!r.data("sort-dir")&&!r.data("sort-desc"),p=n(t,u,d);i.find("th").data("sort-dir",null).removeClass("sorting-desc sorting-asc"),r.data("sort-dir",c).addClass("sorting-"+c);var f=$j(o(s,p));i.children("tbody").append(f),i.trigger("aftertablesort",{column:l,direction:c}),i.css("display")},10))})})},t.fn.stupidtable.dir={ASC:"asc",DESC:"desc"}}(jQuery),$(function(){$j(".js-lineprof-file").click(function(t){$j(this).parents(".peek-rblineprof-file").children(".data").toggle(),t.preventDefault()}),$j(".rblineprof-toggle-button").click(function(t){$j("#line-profile").toggle(),t.preventDefault()})}),Date.prototype.yyyymmdd=function(){var t=this.getFullYear().toString(),e=(this.getMonth()+1).toString(),i=this.getDate().toString();return t+"-"+(e[1]?e:"0"+e[0])+"-"+(i[1]?i:"0"+i[0])},function(t,e){"use strict";var i;if("object"==typeof exports){try{i=require("moment")}catch(t){}module.exports=e(i)}else"function"==typeof define&&define.amd?define(function(t){var n="moment";return i=t.defined&&t.defined(n)?t(n):void 0,e(i)}):t.Pikaday=e(t.moment)}(this,function(t){"use strict";var e="function"==typeof t,i=!!window.addEventListener,n=window.document,o=window.setTimeout,s=function(t,e,n,o){i?t.addEventListener(e,n,!!o):t.attachEvent("on"+e,n)},r=function(t,e,n,o){i?t.removeEventListener(e,n,!!o):t.detachEvent("on"+e,n)},a=function(t,e,i){var o;n.createEvent?(o=n.createEvent("HTMLEvents"),o.initEvent(e,!0,!1),o=_(o,i),t.dispatchEvent(o)):n.createEventObject&&(o=n.createEventObject(),o=_(o,i),t.fireEvent("on"+e,o))},l=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},u=function(t,e){return(" "+t.className+" ").indexOf(" "+e+" ")!==-1},c=function(t,e){u(t,e)||(t.className=""===t.className?e:t.className+" "+e)},h=function(t,e){t.className=l((" "+t.className+" ").replace(" "+e+" "," "))},d=function(t){return/Array/.test(Object.prototype.toString.call(t))},p=function(t){return/Date/.test(Object.prototype.toString.call(t))&&!isNaN(t.getTime())},f=function(t){return t%4===0&&t%100!==0||t%400===0},m=function(t,e){return[31,f(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},g=function(t){p(t)&&t.setHours(0,0,0,0)},v=function(t,e){return t.getTime()===e.getTime()},_=function(t,e,i){var n,o;for(n in e)o=void 0!==t[n],o&&"object"==typeof e[n]&&void 0===e[n].nodeName?p(e[n])?i&&(t[n]=new Date(e[n].getTime())):d(e[n])?i&&(t[n]=e[n].slice(0)):t[n]=_({},e[n],i):!i&&o||(t[n]=e[n]);return t},y=function(t){return t.month<0&&(t.year-=Math.ceil(Math.abs(t.month)/12),t.month+=12),t.month>11&&(t.year+=Math.floor(Math.abs(t.month)/12),t.month-=12),t},b={field:null,bound:void 0,position:"bottom left",format:"YYYY-MM-DD",defaultDate:null,setDefaultDate:!1,firstDay:0,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},onSelect:null,onOpen:null,onClose:null,onDraw:null},w=function(t,e,i){for(e+=t.firstDay;e>=7;)e-=7;return i?t.i18n.weekdaysShort[e]:t.i18n.weekdays[e]},S=function(t,e,i,n,o,s,r){if(r)return'<td class="is-empty"></td>';var a=[];return s&&a.push("is-disabled"),o&&a.push("is-today"),n&&a.push("is-selected"),'<td data-day="'+t+'" class="'+a.join(" ")+'"><button class="pika-button pika-day" type="button" data-pika-year="'+i+'" data-pika-month="'+e+'" data-pika-day="'+t+'">'+t+"</button></td>"},x=function(t,e,i){var n=new Date(i,0,1),o=Math.ceil(((new Date(i,e,t)-n)/864e5+n.getDay()+1)/7);return'<td class="pika-week">'+o+"</td>"},C=function(t,e){return"<tr>"+(e?t.reverse():t).join("")+"</tr>"},E=function(t){return"<tbody>"+t.join("")+"</tbody>"},k=function(t){var e,i=[];for(t.showWeekNumber&&i.push("<th></th>"),e=0;e<7;e++)i.push('<th scope="col"><abbr title="'+w(t,e)+'">'+w(t,e,!0)+"</abbr></th>");return"<thead>"+(t.isRTL?i.reverse():i).join("")+"</thead>"},T=function(t,e,i,n,o){var s,r,a,l,u,c=t._o,h=i===c.minYear,p=i===c.maxYear,f='<div class="pika-title">',m=!0,g=!0;for(a=[],s=0;s<12;s++)a.push('<option value="'+(i===o?s-e:12+s-e)+'"'+(s===n?" selected":"")+(h&&s<c.minMonth||p&&s>c.maxMonth?"disabled":"")+">"+c.i18n.months[s]+"</option>");for(l='<div class="pika-label">'+c.i18n.months[n]+'<select class="pika-select pika-select-month">'+a.join("")+"</select></div>",d(c.yearRange)?(s=c.yearRange[0],r=c.yearRange[1]+1):(s=i-c.yearRange,r=1+i+c.yearRange),a=[];s<r&&s<=c.maxYear;s++)s>=c.minYear&&a.push('<option value="'+s+'"'+(s===i?" selected":"")+">"+s+"</option>");return u='<div class="pika-label">'+i+c.yearSuffix+'<select class="pika-select pika-select-year">'+a.join("")+"</select></div>",f+=c.showMonthAfterYear?u+l:l+u,h&&(0===n||c.minMonth>=n)&&(m=!1),p&&(11===n||c.maxMonth<=n)&&(g=!1),0===e&&(f+='<button class="pika-prev'+(m?"":" is-disabled")+'" type="button">'+c.i18n.previousMonth+"</button>"),e===t._o.numberOfMonths-1&&(f+='<button class="pika-next'+(g?"":" is-disabled")+'" type="button">'+c.i18n.nextMonth+"</button>"),f+="</div>"},L=function(t,e){return'<table cellpadding="0" cellspacing="0" class="pika-table">'+k(t)+E(e)+"</table>"},D=function(r){var a=this,l=a.config(r);a._onMouseDown=function(t){if(a._v){t=t||window.event;var e=t.target||t.srcElement;if(e){if(!u(e,"is-disabled")){if(u(e,"pika-button")&&!u(e,"is-empty"))return a.setDate(new Date(e.getAttribute("data-pika-year"),e.getAttribute("data-pika-month"),e.getAttribute("data-pika-day"))),void(l.bound&&o(function(){a.hide(),l.field&&l.field.blur()},100));u(e,"pika-prev")?a.prevMonth():u(e,"pika-next")&&a.nextMonth()}if(u(e,"pika-select"))a._c=!0;else{if(!t.preventDefault)return t.returnValue=!1,!1;t.preventDefault()}}}},a._onChange=function(t){t=t||window.event;var e=t.target||t.srcElement;e&&(u(e,"pika-select-month")?a.gotoMonth(e.value):u(e,"pika-select-year")&&a.gotoYear(e.value))},a._onInputChange=function(i){var n;i.firedBy!==a&&(e?(n=t(l.field.value,l.format),n=n&&n.isValid()?n.toDate():null):n=new Date(Date.parse(l.field.value)),a.setDate(p(n)?n:null),a._v||a.show())},a._onInputFocus=function(){a.show()},a._onInputClick=function(){a.show()},a._onInputBlur=function(){a._c||(a._b=o(function(){a.hide()},50)),a._c=!1},a._onClick=function(t){t=t||window.event;var e=t.target||t.srcElement,n=e;if(e){!i&&u(e,"pika-select")&&(e.onchange||(e.setAttribute("onchange","return;"),s(e,"change",a._onChange)));do if(u(n,"pika-single"))return;while(n=n.parentNode);a._v&&e!==l.trigger&&a.hide()}},a.el=n.createElement("div"),a.el.className="pika-single"+(l.isRTL?" is-rtl":""),s(a.el,"mousedown",a._onMouseDown,!0),s(a.el,"change",a._onChange),l.field&&(l.container?l.container.appendChild(a.el):l.bound?n.body.appendChild(a.el):l.field.parentNode.insertBefore(a.el,l.field.nextSibling),s(l.field,"change",a._onInputChange),l.defaultDate||(e&&l.field.value?l.defaultDate=t(l.field.value,l.format).toDate():l.defaultDate=new Date(Date.parse(l.field.value)),l.setDefaultDate=!0));var c=l.defaultDate;p(c)?l.setDefaultDate?a.setDate(c,!0):a.gotoDate(c):a.gotoDate(new Date),l.bound?(this.hide(),a.el.className+=" is-bound",s(l.trigger,"click",a._onInputClick),s(l.trigger,"focus",a._onInputFocus),s(l.trigger,"blur",a._onInputBlur)):this.show()};return D.prototype={config:function(t){this._o||(this._o=_({},b,!0));var e=_(this._o,t,!0);e.isRTL=!!e.isRTL,e.field=e.field&&e.field.nodeName?e.field:null,e.bound=!!(void 0!==e.bound?e.field&&e.bound:e.field),e.trigger=e.trigger&&e.trigger.nodeName?e.trigger:e.field;var i=parseInt(e.numberOfMonths,10)||1;if(e.numberOfMonths=i>4?4:i,p(e.minDate)||(e.minDate=!1),p(e.maxDate)||(e.maxDate=!1),e.minDate&&e.maxDate&&e.maxDate<e.minDate&&(e.maxDate=e.minDate=!1),e.minDate&&(g(e.minDate),e.minYear=e.minDate.getFullYear(),e.minMonth=e.minDate.getMonth()),e.maxDate&&(g(e.maxDate),e.maxYear=e.maxDate.getFullYear(),e.maxMonth=e.maxDate.getMonth()),d(e.yearRange)){var n=(new Date).getFullYear()-10;e.yearRange[0]=parseInt(e.yearRange[0],10)||n,e.yearRange[1]=parseInt(e.yearRange[1],10)||n}else e.yearRange=Math.abs(parseInt(e.yearRange,10))||b.yearRange,e.yearRange>100&&(e.yearRange=100);return e},toString:function(i){return p(this._d)?e?t(this._d).format(i||this._o.format):this._d.yyyymmdd():""},getMoment:function(){return e?t(this._d):null},setMoment:function(i,n){e&&t.isMoment(i)&&this.setDate(i.toDate(),n)},getDate:function(){return p(this._d)?new Date(this._d.getTime()):null},setDate:function(t,e){if(!t)return this._d=null,this._o.field&&(this._o.field.value="",a(this._o.field,"change",{firedBy:this})),this.draw();if("string"==typeof t&&(t=new Date(Date.parse(t))),p(t)){var i=this._o.minDate,n=this._o.maxDate;p(i)&&t<i?t=i:p(n)&&t>n&&(t=n),this._d=new Date(t.getTime()),g(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),a(this._o.field,"change",{firedBy:this})),e||"function"!=typeof this._o.onSelect||this._o.onSelect.call(this,this.getDate())}},gotoDate:function(t){var e=!0;if(p(t)){if(this.calendars){var i=new Date(this.calendars[0].year,this.calendars[0].month,1),n=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),o=t.getTime();n.setMonth(n.getMonth()+1),n.setDate(n.getDate()-1),e=o<i.getTime()||n.getTime()<o}e&&(this.calendars=[{month:t.getMonth(),year:t.getFullYear()}],"right"===this._o.mainCalendar&&(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars()}},adjustCalendars:function(){this.calendars[0]=y(this.calendars[0]);for(var t=1;t<this._o.numberOfMonths;t++)this.calendars[t]=y({month:this.calendars[0].month+t,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(t){isNaN(t)||(this.calendars[0].month=parseInt(t,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(t){isNaN(t)||(this.calendars[0].year=parseInt(t,10),this.adjustCalendars())},setMinDate:function(t){this._o.minDate=t},setMaxDate:function(t){this._o.maxDate=t},draw:function(t){if(this._v||t){var e=this._o,i=e.minYear,n=e.maxYear,s=e.minMonth,r=e.maxMonth,a="";this._y<=i&&(this._y=i,!isNaN(s)&&this._m<s&&(this._m=s)),this._y>=n&&(this._y=n,!isNaN(r)&&this._m>r&&(this._m=r));for(var l=0;l<e.numberOfMonths;l++)a+='<div class="pika-lendar">'+T(this,l,this.calendars[l].year,this.calendars[l].month,this.calendars[0].year)+this.render(this.calendars[l].year,this.calendars[l].month)+"</div>";if(this.el.innerHTML=a,e.bound&&"hidden"!==e.field.type&&o(function(){e.trigger.focus()},1),"function"==typeof this._o.onDraw){var u=this;o(function(){u._o.onDraw.call(u)},0)}}},adjustPosition:function(){if(!this._o.container){var t,e,i,o=this._o.trigger,s=o,r=this.el.offsetWidth,a=this.el.offsetHeight,l=window.innerWidth||n.documentElement.clientWidth,u=window.innerHeight||n.documentElement.clientHeight,c=window.pageYOffset||n.body.scrollTop||n.documentElement.scrollTop;if("function"==typeof o.getBoundingClientRect)i=o.getBoundingClientRect(),t=i.left+window.pageXOffset,e=i.bottom+window.pageYOffset;else for(t=s.offsetLeft,e=s.offsetTop+s.offsetHeight;s=s.offsetParent;)t+=s.offsetLeft,e+=s.offsetTop;(t+r>l||this._o.position.indexOf("right")>-1&&t-r+o.offsetWidth>0)&&(t=t-r+o.offsetWidth),(e+a>u+c||this._o.position.indexOf("top")>-1&&e-a-o.offsetHeight>0)&&(e=e-a-o.offsetHeight),this.el.style.cssText=["position: absolute","left: "+t+"px","top: "+e+"px"].join(";")}},render:function(t,e){var i=this._o,n=new Date,o=m(t,e),s=new Date(t,e,1).getDay(),r=[],a=[];g(n),i.firstDay>0&&(s-=i.firstDay,s<0&&(s+=7));for(var l=o+s,u=l;u>7;)u-=7;l+=7-u;for(var c=0,h=0;c<l;c++){var d=new Date(t,e,1+(c-s)),f=i.minDate&&d<i.minDate||i.maxDate&&d>i.maxDate,_=!!p(this._d)&&v(d,this._d),y=v(d,n),b=c<s||c>=o+s;a.push(S(1+(c-s),e,t,_,y,f,b)),7===++h&&(i.showWeekNumber&&a.unshift(x(c-s,e,t)),r.push(C(a,i.isRTL)),a=[],h=0)}return L(i,r)},isVisible:function(){return this._v},show:function(){this._v||(h(this.el,"is-hidden"),this._v=!0,this.draw(),this._o.bound&&(s(n,"click",this._onClick),this.adjustPosition()),"function"==typeof this._o.onOpen&&this._o.onOpen.call(this))},hide:function(){var t=this._v;t!==!1&&(this._o.bound&&r(n,"click",this._onClick),this.el.style.cssText="",c(this.el,"is-hidden"),this._v=!1,void 0!==t&&"function"==typeof this._o.onClose&&this._o.onClose.call(this))},destroy:function(){this.hide(),r(this.el,"mousedown",this._onMouseDown,!0),r(this.el,"change",this._onChange),this._o.field&&(r(this._o.field,"change",this._onInputChange),this._o.bound&&(r(this._o.trigger,"click",this._onInputClick),r(this._o.trigger,"focus",this._onInputFocus),r(this._o.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},D}),function(t,e){"use strict";"object"==typeof exports?e(require("jquery"),require("../pikaday")):"function"==typeof define&&define.amd?define(["jquery","pikaday"],e):e(t.jQuery,t.Pikaday)}(this,function(t,e){"use strict";t.fn.pikaday=function(){var i=arguments;return i&&i.length||(i=[{}]),this.each(function(){var n=t(this),o=n.data("pikaday");if(o instanceof e)"string"==typeof i[0]&&"function"==typeof o[i[0]]&&o[i[0]].apply(o,Array.prototype.slice.call(i,1));else if("object"==typeof i[0]){var s=t.extend({},i[0]);s.field=n[0],n.data("pikaday",new e(s))}})}}),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.tooltip"),s="object"==typeof e&&e;!o&&/destroy|hide/.test(e)||(o||n.data("bs.tooltip",o=new i(this,s)),"string"==typeof e&&o[e]())})}var i=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.init("tooltip",t,e)};i.VERSION="3.3.4",i.TRANSITION_DURATION=150,i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,i,n){if(this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport),this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),s=o.length;s--;){var r=o[s];if("click"==r)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=r){var a="hover"==r?"mouseenter":"focusin",l="hover"==r?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,n){i[t]!=n&&(e[t]=n)}),e},i.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i&&i.$tip&&i.$tip.is(":visible")?void(i.hoverState="in"):(i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},i.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()},i.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var n=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!n)return;var o=this,s=this.tip(),r=this.getUID(this.type);this.setContent(),s.attr("id",r),this.$element.attr("aria-describedby",r),this.options.animation&&s.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,u=l.test(a);u&&(a=a.replace(l,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element);var c=this.getPosition(),h=s[0].offsetWidth,d=s[0].offsetHeight;if(u){var p=a,f=this.options.container?t(this.options.container):this.$element.parent(),m=this.getPosition(f);a="bottom"==a&&c.bottom+d>m.bottom?"top":"top"==a&&c.top-d<m.top?"bottom":"right"==a&&c.right+h>m.width?"left":"left"==a&&c.left-h<m.left?"right":a,s.removeClass(p).addClass(a)}var g=this.getCalculatedOffset(a,c,h,d);this.applyPlacement(g,a);var v=function(){var t=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==t&&o.leave(o)};t.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",v).emulateTransitionEnd(i.TRANSITION_DURATION):v()}},i.prototype.applyPlacement=function(e,i){var n=this.tip(),o=n[0].offsetWidth,s=n[0].offsetHeight,r=parseInt(n.css("margin-top"),10),a=parseInt(n.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(a)&&(a=0),e.top=e.top+r,e.left=e.left+a,t.offset.setOffset(n[0],t.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),n.addClass("in");var l=n[0].offsetWidth,u=n[0].offsetHeight;"top"==i&&u!=s&&(e.top=e.top+s-u);var c=this.getViewportAdjustedDelta(i,e,l,u);c.left?e.left+=c.left:e.top+=c.top;var h=/top|bottom/.test(i),d=h?2*c.left-o+l:2*c.top-s+u,p=h?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(d,n[0][p],h)},i.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},i.prototype.hide=function(e){function n(){"in"!=o.hoverState&&s.detach(),o.$element.removeAttr("aria-describedby").trigger("hidden.bs."+o.type),e&&e()}var o=this,s=t(this.$tip),r=t.Event("hide.bs."+this.type);if(this.$element.trigger(r),!r.isDefaultPrevented())return s.removeClass("in"),t.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n(),this.hoverState=null,this},i.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){e=e||this.$element;var i=e[0],n="BODY"==i.tagName,o=i.getBoundingClientRect();null==o.width&&(o=t.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var s=n?{top:0,left:0}:e.offset(),r={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},a=n?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},o,r,a,s)},i.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},i.prototype.getViewportAdjustedDelta=function(t,e,i,n){var o={top:0,left:0};if(!this.$viewport)return o;var s=this.options.viewport&&this.options.viewport.padding||0,r=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-s-r.scroll,l=e.top+s-r.scroll+n;a<r.top?o.top=r.top-a:l>r.top+r.height&&(o.top=r.top+r.height-l)}else{var u=e.left-s,c=e.left+s+i;u<r.left?o.left=r.left-u:c>r.width&&(o.left=r.left+r.width-c)}return o},i.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},i.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},i.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var i=this;e&&(i=t(e.currentTarget).data("bs."+this.type),i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type)})};var n=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=i,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.popover"),s="object"==typeof e&&e;!o&&/destroy|hide/.test(e)||(o||n.data("bs.popover",o=new i(this,s)),"string"==typeof e&&o[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.3.4",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var n=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one("bsTransitionEnd",function(){i=!0});var o=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(o,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}(jQuery),window.$j=jQuery.noConflict(),"undefined"==typeof String.prototype.startsWith&&(String.prototype.startsWith=function(t){return 0===this.indexOf(t)}),"undefined"==typeof String.prototype.endsWith&&(String.prototype.endsWith=function(t){return this.indexOf(t,this.length-t.length)!==-1}),function(t){t.SE={},SE.ie=void 0,SE.gridSize=36,SE.behaviors={},SE.registerBehavior=function(t,e){"undefined"==typeof SE.behaviors[t]&&(SE.behaviors[t]={},SE.behaviors[t].name=t),$j(SE.behaviors[t]).on("se:behavior",e)},SE.registerPostBehavior=function(t,e){"undefined"==typeof SE.behaviors[t]&&(SE.behaviors[t]={},SE.behaviors[t].name=t),$j(SE.behaviors[t]).on("se:postbehavior",e)},$j(SE).on("se:prepare_content",function(t,e){var i={},n=$j(e).find("[se\\:behavior]");$j(e).attr("se:behavior")&&n.push(e),n.each(function(t,e){var n=$j(e),o=n.attr("se:behavior").split(/\s+/);
$j.each(o,function(t,o){try{i[o]=!0,SE.behaviors[o]&&!n.data("se:behavior:"+o)&&($j(SE.behaviors[o]).trigger("se:behavior",n),n.data("se:behavior:"+o,!0))}catch(t){console&&console.log&&console.log("Exception when preparing behavior "+o,e,t.stack)}}),$j.each(i,function(t,e){e&&$j(SE.behaviors[t]).on("se:postbehavior")})})})}(window),$j(function(){$j(SE).trigger("se:prepare_content",document)}),SE.andaleAndaleAndale||($j(document).on("se:andale",function(t,e){e&&e(!1)}),SE.andaleAndaleAndale=!0),function(t){t(function(){t(document).on("click","[data-track]",function(){setTimeout(function(e){return function(){SE_Tracker.push(t(e).attr("data-track"))}}(this),10)}),t("[data-imp]").each(function(){SE_Tracker.push(t(this).data("imp"))})})}(jQuery),function(t){t.SEMortgage={}}(window),SEMortgage.calculateMortgage=function(t,e,i){var n=e/1200,o=12*i;return Math.round(t*(n/(1-Math.pow(1+n,-o))))},SEMortgage.calculate=function(t,e,i){if(!(i&&i.keyCode>=37&&i.keyCode<=40)){var n=SEForms.parseNumber($j(t).find("input[name=maintenance]").val()),o=SEForms.parseNumber($j(t).find("input[name=taxes]").val()),s=SEForms.parseNumber($j(t).find("input[name=price]").val()),r=SEForms.parseNumber($j(t).find("input[name=down_payment_amount]").val()),a=SEForms.parseNumber($j(t).find("input[name=rate]").val()),l=SEForms.parseNumber($j(t).find("select[name=term]").val()),u=s-r,c=100*r/s;if(s>0&&r>0&&r<s?($j(t).find(".mortgage_amount").html(SEForms.toCommaSeparated(u)),$j(t).find(".downpayment_percentage").html(c.toFixed(1)+"%"),$j(t).find("input[name=down_payment_amount]").val(SEForms.toCommaSeparated(r))):($j(t).find(".mortgage_amount").html(SEForms.toCommaSeparated(0)),$j(t).find(".downpayment_percentage").html("0%")),s>0&&$j(t).find("input[name=price]").val(SEForms.toCommaSeparated(s)),$j(t).attr("se:mortgage_calculator:min_down_payment_rate")&&(c<SEForms.parseNumber($j(t).attr("se:mortgage_calculator:min_down_payment_rate"))?$j(t).find(".min_payment").addClass("danger_text"):$j(t).find(".min_payment").removeClass("danger_text")),s>0&&l>0&&a>0&&r<s){var h=SEMortgage.calculateMortgage(u,a,l);$j(t).find(".mortgage_payment").html(SEForms.toCommaSeparated(h)),$j(t).find(".monthly_payment").html(SEForms.toCommaSeparated(h+o+n))}else $j(t).find(".mortgage_payment").html(SEForms.toCommaSeparated(0)),$j(t).find(".monthly_payment").html(SEForms.toCommaSeparated(0))}},SEMortgage.setup=function(t){$j(t).find("input[name=price]").keyup(function(e){SEMortgage.calculate(t,"price",e)}),$j(t).find("input[name=down_payment_amount]").keyup(function(e){SEMortgage.calculate(t,"down_payment_amount",e)}),$j(t).find("input[name=rate]").keyup(function(e){SEMortgage.calculate(t,"rate",e)}),$j(t).find("select[name=term]").change(function(e){SEMortgage.calculate(t,"term",e)}),SEMortgage.calculate(t)},SEMortgage.monthlyPayment=function(t){var e=JSON.parse($j(t).attr("se:monthly_payment:attributes")),i=SEForms.parseNumber(e.maintenance),n=SEForms.parseNumber(e.taxes),o=SEForms.parseNumber(e.price),s=SEForms.parseNumber(e.down_payment_amount),r=SEForms.parseNumber(e.mortgage_rate),a=SEForms.parseNumber(e.mortgage_term),l=o-s,u=SEMortgage.calculateMortgage(l,r,a);SE.setupDialogBase(),$j(t).find(".monthly_payment").html(SEForms.toCommaSeparated(u+n+i))},SE.registerBehavior("mortgage_calculator",function(t,e){SEMortgage.setup($j(e))}),SE.registerBehavior("monthly_payment",function(t,e){SEMortgage.monthlyPayment($j(e))}),function(){function t(){}function e(t){return s.retinaImageSuffix+t}function i(t,i){if(this.path=t||"","undefined"!=typeof i&&null!==i)this.at_2x_path=i,this.perform_check=!1;else{if(void 0!==document.createElement){var n=document.createElement("a");n.href=this.path,n.pathname=n.pathname.replace(r,e),this.at_2x_path=n.href}else{var o=this.path.split("?");o[0]=o[0].replace(r,e),this.at_2x_path=o.join("?")}this.perform_check=!0}}function n(t){this.el=t,this.path=new i(this.el.getAttribute("src"),this.el.getAttribute("data-at2x"));var e=this;this.path.check_2x_variant(function(t){t&&e.swap()})}var o="undefined"==typeof exports?window:exports,s={retinaImageSuffix:"@2x",check_mime_type:!0,force_original_dimensions:!0};o.Retina=t,t.configure=function(t){null===t&&(t={});for(var e in t)t.hasOwnProperty(e)&&(s[e]=t[e])},t.init=function(t){null===t&&(t=o);var e=t.onload||function(){};t.onload=function(){var t,i,o=document.getElementsByTagName("img"),s=[];for(t=0;t<o.length;t+=1)i=o[t],i.getAttributeNode("data-no-retina")||s.push(new n(i));e()}},t.isRetina=function(){var t="(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)";return o.devicePixelRatio>1||!(!o.matchMedia||!o.matchMedia(t).matches)};var r=/\.\w+$/;o.RetinaImagePath=i,i.confirmed_paths=[],i.prototype.is_external=function(){return!(!this.path.match(/^https?\:/i)||this.path.match("//"+document.domain))},i.prototype.check_2x_variant=function(t){var e,n=this;return this.is_external()?t(!1):this.perform_check||"undefined"==typeof this.at_2x_path||null===this.at_2x_path?this.at_2x_path in i.confirmed_paths?t(!0):(e=new XMLHttpRequest,e.open("HEAD",this.at_2x_path),e.onreadystatechange=function(){if(4!==e.readyState)return t(!1);if(e.status>=200&&e.status<=399){if(s.check_mime_type){var o=e.getResponseHeader("Content-Type");if(null===o||!o.match(/^image/i))return t(!1)}return i.confirmed_paths.push(n.at_2x_path),t(!0)}return t(!1)},e.send(),void 0):t(!0)},o.RetinaImage=n,n.prototype.swap=function(t){function e(){i.el.complete?(s.force_original_dimensions&&null!==i.el.offsetParent&&(i.el.setAttribute("width",i.el.offsetWidth),i.el.setAttribute("height",i.el.offsetHeight)),i.el.setAttribute("src",t)):setTimeout(e,5)}"undefined"==typeof t&&(t=this.path.at_2x_path);var i=this;e()},t.isRetina()&&t.init(o)}(),$j(document).ready(function(){$j(".featured-large").find("> div").find("div").size()>0&&($j(".home-component").show(),$j(".featured-large").show(),$j(".featured-large").parent().addClass("featured-height"))}),SE.BuildingExperts||(SE.BuildingExperts={}),SE.BuildingExperts.Modals||(SE.BuildingExperts.Modals={}),SE.BuildingExperts.Modals.Performance=function(){var t=this;this.loaderHtml="<div class='loading'><i class='icon-spinner icon-spin'></i> Loading... </div>",this.registerEvents=function(){$j(".content.performance .tabset-tab").click(function(t){t.preventDefault(),$j(".tabset-tab").removeClass("selected"),$j(this).addClass("selected")}),$j(".content.performance").on("click",".open-msg-row",function(e){e.preventDefault(),t.revealMessage(this)}),$j(".content.performance .date-select").change(function(e){e.preventDefault(),t.filterMonth(this)})},this.filterMonth=function(e){$j(".tab-content").html(t.loaderHtml),$j.get($j(e).data("url")+"?month="+$j(e).val(),function(t){$j(".modal-content").html(t)})},this.revealMessage=function(t){is_opened=$j(t).hasClass("opened"),this.hideMessage(),is_opened||($j(t).closest("tr").after("<tr class='opened-msg'><td colspan='5'><div style='max-height:45px;overflow:auto;'>"+$j(t).data("msg")+"</div></td></tr>").slideDown(),$j(t).addClass("opened"))},this.hideMessage=function(){$j("tr.opened-msg").length>0&&($j("tr.opened-msg").remove(),$j(".open-msg-row").removeClass("opened"))},this.registerEvents()},SE.Complexes=function(){var t=this;this.init=function(){$j("body.complex").on("click",".listings.pagination.via-ajax a",function(e){t.paginateListings(e)})},this.paginateListings=function(t){t.preventDefault();var e=t.target.text;$j(t.target).hasClass("icon-caret-right")&&(e="forward"),$j(t.target).hasClass("icon-caret-left")&&(e="back"),dataLayer.push({event:"complex-page-"+e,complexPagination:"click"}),trgt_elem=$j(".tabset-content-container.remote .tabset-content.selected"),remote_url=$j(trgt_elem).attr("se:url"),that_obj=t,$j(t.target).closest("div[pager-url]").length>0&&(remote_url=$j(t.target).closest("div[pager-url]").attr("pager-url"));var i=void 0===$j(t.target).attr("href")?$j(t.target).parent().attr("href"):$j(t.target).attr("href");remote_url+=remote_url.indexOf("?")>-1?"&":"?",remote_url+=i.split("?")[1],$j.get(remote_url,function(t){$j(that_obj.target).closest("div[pager-url]").length>0?$j(that_obj.target).closest("div[pager-url]").html(t):trgt_elem.html(t)})}},$j(document).ready(function(){if($j("body.complex").length>0){var t=new SE.Complexes;t.init()}}),function(t){var e=navigator.userAgent||navigator.vendor||window.opera;e.match(/iPad/i)||e.match(/iPhone/i)||e.match(/iPod/i)||e.match(/Mac OS/i)?t("#app_store_link").removeClass("hidden-xs"):e.match(/Android/i)&&t("#android_link").removeClass("hidden-xs")}(jQuery),function(t){t(document).ready(function(){t("body").on("mouseup",".external_link",function(e){1!=e.which&&2!=e.which||t.post(t(this).data("log-external"))})})}(jQuery),SE.showOverlay=function(t,e){e=e||{};var i=$j("#overlay_container");i.data("overlay:target")&&(i.data("overlay:target").hide(),i.data("overlay:target",null)),$j(SE).trigger("se:overlay_to_be_displayed",t),$j("#overlay_container").show(),t.show(),i.data("overlay:target",t),$j(SE).trigger("se:overlay_displayed",t);var n=$j._data(t.get(0),"events");"undefined"!=typeof n&&"undefined"!=typeof n["se:andale"]&&t.trigger("se:andale",t)},SE.hideOverlay=function(){var t=$j("#overlay_container");t.data("overlay:target")&&(t.data("overlay:target").hide(),t.data("overlay:target",null)),$j("#overlay_container").hide(),$j(SE).trigger("se:overlay_hidden")},SE.setupOverlayContainer=function(){$j("#overlay_container").length<=0&&($j("body").append("<div id='overlay_container' style='display:none'>  <div id='overlay_background'>&nbsp;</div></div>"),window.setTimeout(function(){$j("#overlay_background").click(function(){return SE.hideOverlay(),!1})},0))},SE.setupOverlayTrigger=function(t){SE.setupOverlayContainer(),t.on("click",function(e){var i={};return i.jtrigger=t,!(!t.attr("se:overlay:target")||(i.jtarget=$j(t.attr("se:overlay:target")),$j(t.attr("se:overlay:target")).click(function(t){t.stopPropagation()}),i.jtarget&&i.jtarget.length>0))||(e.preventDefault(),e.stopPropagation(),i.jtarget.attr("se:overlay:width")&&(i.width=parseInt(i.jtarget.attr("se:overlay:width"),10)),i.jtarget.attr("se:overlay:height")&&(i.height=parseInt(i.jtarget.attr("se:overlay:height"),10)),i.jtarget.attr("se:overlay:offset-x")&&(i.offsetX=parseInt(i.jtarget.attr("se:overlay:offset-x"),10)),i.jtarget.attr("se:overlay:offset-y")&&(i.offsetY=parseInt(i.jtarget.attr("se:overlay:offset-y"),10)),SE.showOverlay(i.jtarget,i),!1)})},SE.setupOverlayCloser=function(t){t.on("click",function(){return SE.hideOverlay(),!1})},SE.setupTooltipTrigger=function(t){if(SE.setupOverlayContainer(),$j("#tooltip_box").length<=0&&$j("body").append("<div id='tooltip_box' style='display:none'></div>"),t.addClass("tooltip"),t.attr("se:tooltip:type")){var e,i="info-sign";"help"==t.attr("se:tooltip:type")?i="question-sign":"se-help"==t.attr("se:tooltip:type")?i="se-help":"check"==t.attr("se:tooltip:type")&&(i="check-circle"),e=t.attr("se:tooltip:sign_color")?"tooltip_trigger_"+t.attr("se:tooltip:sign_color"):"tooltip_trigger",jtrigger=$j("<i class='"+e+" icon-"+i+"'></i>"),t.before(jtrigger)}else jtrigger=$j(t.attr("se:tooltip:trigger")),jtrigger.hover(function(){$j(this).css("cursor","pointer")},function(){$j(this).css("cursor","none")});jtrigger.on("click",function(e){var i={};return i.jtrigger=jtrigger,i.jtarget=t,e.preventDefault(),e.stopPropagation(),i.jtarget.attr("se:tooltip:width")&&(i.width=parseInt(i.jtarget.attr("se:tooltip:width"),10)),i.jtarget.attr("se:tooltip:height")&&(i.height=parseInt(i.jtarget.attr("se:tooltip:height"),10)),i.jtarget.attr("se:tooltip:offset-x")&&(i.offsetX=parseInt(i.jtarget.attr("se:tooltip:offset-x"),10)),i.jtarget.attr("se:tooltip:offset-y")&&(i.offsetY=parseInt(i.jtarget.attr("se:tooltip:offset-y"),10)),SE.showOverlay(i.jtarget,i),!1})},SE.registerBehavior("overlay_trigger",function(t,e){SE.setupOverlayTrigger($j(e))}),SE.registerBehavior("overlay_closer",function(t,e){SE.setupOverlayCloser($j(e))}),SE.registerBehavior("tooltip",function(t,e){SE.setupTooltipTrigger($j(e))}),+function(t,e){e.showDialog=function(i,n){n=n||{},n.width=parseInt(n.width||500,10),e.hideDialog(),"function"==typeof i.children?(e.dialogOriginalContent=i,t(i).children().each(function(e,i){t("#dialog_content").append(i)})):(e.dialogOriginalContent=null,t("#dialog_content").append(i)),window.setTimeout(function(){t(e).trigger("se:prepare_content",t("#dialog_content")),window.setTimeout(function(){t("#dialog_content").children().each(function(i,o){t(o).trigger("se:andale",[function(i){i&&(n=e.extractDialogOptionsFromElement(t(i),n)),e.sizeAndPositionDialog(n)}])}),e.sizeAndPositionDialog(n),t("body").css("overflow","hidden"),t("#dialog_container").show()},0)},0)},e.sizeAndPositionDialog=function(e){var i=t(window),n=e.maxHeight||0,o=e.height||0,s=e.maxWidth||980,r=t("#dialog_content").children().width(),a=t("#dialog_content").children().height(),l=Math.max(r||0,e.width||0);0===l&&(l=s),l=Math.min(l,s),o>0||(o=n>0?n:a);var u=parseInt(t("#dialog_box").css("padding-left"),10),c=parseInt(t("#dialog_box").css("padding-right"),10);parseInt(t("#dialog_box").css("padding-top"),10),parseInt(t("#dialog_box").css("padding-bottom"),10);t("#dialog_box").css("width",l+u+c),(o>i.height()||e.top>0)&&t("#dialog_box").css("top",e.top||100),t("#dialog_box").css("left",(i.width()-(l+u+c))/2),t("#dialog_box").removeAttr("class").attr("class",""),t("#dialog_box").css("height",""),"undefined"!=typeof e.klass&&t("#dialog_box").addClass(e.klass),t("#dialog_content").css("max-width",l+16).css("max-height",o+16)},e.extractDialogOptionsFromElement=function(t,e){return e=e||{},t.attr("se:dialog:width")&&(e.width=parseInt(t.attr("se:dialog:width"),10)),t.attr("se:dialog:height")&&(e.height=parseInt(t.attr("se:dialog:height"),10)),t.attr("se:dialog:max-height")&&(e.maxHeight=parseInt(t.attr("se:dialog:max-height"),10)),t.attr("se:dialog:max-width")&&(e.minWidth=parseInt(t.attr("se:dialog:max-width"),10)),t.attr("se:dialog:top")&&(e.top=parseInt(t.attr("se:dialog:top"),10)),t.attr("se:dialog:left")&&(e.left=parseInt(t.attr("se:dialog:left"),10)),t.attr("se:dialog:class")&&(e.klass=t.attr("se:dialog:class")),e},e.showAjaxDialog=function(t,i){i=i||{},t.indexOf("dialog=")<0&&(t=e.uriAppendParameter(t,"dialog=yes"));var n="<div se:behavior='loadable' se:url='"+t+"' />";e.showDialog(n,i)},e.hideDialog=function(){e.dialogOriginalContent&&(t("#dialog_content").children().each(function(t,i){e.dialogOriginalContent.append(i)}),e.dialogOriginalContent=null),t("body").css("overflow","visible"),t("#dialog_content").empty(),t("#dialog_container").hide()},e.setupDialogBase=function(){var i=!1;return function(){if(!i){i=!0;var n=["<div id='dialog_container' style='display:none'>","<div id='dialog_box'>","<div id='dialog_close' class='link_lookin'><i class='icon-remove icon-big'></i></div>","<div id='dialog_content' se:behavior='resize_body'></div>","<div class='closer'></div>","</div>","<div class='closer'></div>","</div>","<div class='closer'></div>"].join("");t("body").append(n),window.setTimeout(function(){t("#dialog_container").click(function(){e.hideDialog()}),t("#dialog_content").click(function(t){t.stopPropagation()}),t("#dialog_close").click(function(){e.hideDialog()}),t("body").keydown(function(t){27==t.which&&e.hideDialog()})},0)}}}(),e.setupDialog=function(i){e.setupDialogBase(),i.on("click",function(i){var n=e.extractDialogOptionsFromElement(t(this));if(t(this).attr("se:dialog:content")){i.preventDefault(),i.stopPropagation();var o=t(t(this).attr("se:dialog:content"));return n=e.extractDialogOptionsFromElement(o,n),e.showDialog(o,n),!1}return t(this).attr("se:dialog:href")?(i.preventDefault(),i.stopPropagation(),e.showAjaxDialog(t(this).attr("se:dialog:href"),n),!1):t(this).attr("href")?(i.preventDefault(),i.stopPropagation(),e.showAjaxDialog(t(this).attr("href"),n),!1):void 0})},e.setupDialogCloser=function(t){t.on("click",function(){return e.hideDialog(),!1})},e.setupDialogSubmitter=function(e){url=t("div[se\\:behavior='loadable']").attr("se:url"),url+="&submit=true",e.on("click",function(){return!0})},e.setupBodyResize=function(){},e.facebookSharerPopup=function(t){return window.open(t,"sharer","toolbar=0,status=0,width=626,height=436"),!1},e.registerBehavior("dialog",function(i,n){e.setupDialog(t(n))}),e.registerBehavior("dialog_closer",function(i,n){e.setupDialogCloser(t(n))}),e.registerBehavior("dialog_submitter",function(i,n){e.setupDialogSubmitter(t(n))}),e.registerBehavior("resize_body",function(i,n){e.setupBodyResize(t(n))})}(jQuery,SE),SE.showSecondaryDialog=function(t,e){e=e||{},e.width=parseInt(e.width||500,10),SE.hideSecondaryDialog(),"function"==typeof t.children?(SE.secondaryDialogOriginalContent=t,$j(t).children().each(function(t,e){$j("#secondary_dialog_content").append(e)})):(SE.secondaryDialogOriginalContent=null,$j("#secondary_dialog_content").append(t)),window.setTimeout(function(){$j(SE).trigger("se:prepare_content",$j("#secondary_dialog_content")),window.setTimeout(function(){$j("#secondary_dialog_content").children().each(function(t,i){console.log("andale"),$j(i).trigger("se:andale",[function(t){t&&(e=SE.extractDialogOptionsFromElement($j(t),e)),console.log("patras"),SE.secondarySizeAndPositionDialog(e)}])}),SE.secondarySizeAndPositionDialog(e),$j("body").css("overflow","hidden"),$j("#secondary_dialog_container").show()},0)},0)},SE.secondarySizeAndPositionDialog=function(t){var e=$j(window),i=t.maxHeight||e.height()-250,n=t.maxWidth||980,o=$j("#secondary_dialog_content").children().width(),s=$j("#secondary_dialog_content").children().height(),r=Math.max(o||0,t.width||0);0===r&&(r=n),r=Math.min(r,n);var a=Math.max(s||0,t.height||0);0===a&&(a=i),a=Math.min(a,i);var l=parseInt($j("#secondary_dialog_box").css("padding-left"),10),u=parseInt($j("#secondary_dialog_box").css("padding-right"),10)+16;parseInt($j("#secondary_dialog_box").css("padding-top"),10),parseInt($j("#secondary_dialog_box").css("padding-bottom"),10)+16;$j("#secondary_dialog_box").css("width",r+l+u),(a>e.height()||t.top>0)&&$j("#secondary_dialog_box").css("top",t.top||100),$j("#secondary_dialog_box").css("left",(e.width()-(r+l+u))/2),$j("#secondary_dialog_box").removeAttr("class").attr("class",""),$j("#secondary_dialog_box").css("height",""),"undefined"!=typeof t.klass&&$j("#secondary_dialog_box").addClass(t.klass),$j("#secondary_dialog_content").css("max-width",r+16).css("max-height",a+16)},SE.showSecondaryAjaxDialog=function(t,e){e=e||{},t.indexOf("dialog=")<0&&(t=SE.uriAppendParameter(t,"dialog=yes"));var i="<div se:behavior='loadable' se:url='"+t+"' />";SE.showSecondaryDialog(i,e)},SE.hideSecondaryDialog=function(){SE.secondaryDialogOriginalContent&&($j("#secondary_dialog_content").children().each(function(t,e){SE.secondaryDialogOriginalContent.append(e)}),SE.secondaryDialogOriginalContent=null),$j("body").css("overflow","visible"),$j("#secondary_dialog_content").empty(),$j("#secondary_dialog_container").hide()},SE.setupSecondaryDialog=function(t){$j("#secondary_dialog_container").length<=0&&($j("body").append("<div id='secondary_dialog_container' style='display:none'>  <div id='secondary_dialog_box'>    <div id='dialog_close' class='link_lookin'><i class='icon-remove icon-big'></i></div>    <div id='secondary_dialog_content' se:behavior='secondary_resize_body'></div>  </div></div><div class='closer'></div>"),window.setTimeout(function(){$j("#secondary_dialog_container").click(function(){SE.hideSecondaryDialog()}),$j("#secondary_dialog_content").click(function(t){t.stopPropagation()}),$j("#secondary_dialog_close").click(function(){SE.hideSecondaryDialog()}),$j("body").keydown(function(t){27==t.which&&SE.hideSecondaryDialog()})},0)),t.on("click",function(t){var e=SE.extractDialogOptionsFromElement($j(this));if($j(this).attr("se:dialog:content")){t.preventDefault(),t.stopPropagation();var i=$j($j(this).attr("se:dialog:content"));return e=SE.extractDialogOptionsFromElement(i,e),SE.showSecondaryDialog(i,e),!1}return $j(this).attr("se:dialog:href")?(t.preventDefault(),t.stopPropagation(),SE.showSecondaryAjaxDialog($j(this).attr("se:dialog:href"),e),!1):$j(this).attr("href")?(t.preventDefault(),t.stopPropagation(),SE.showSecondaryAjaxDialog($j(this).attr("href"),e),!1):void 0})},SE.setupSecondaryBodyResize=function(t){t.on("se:changed",function(){$j("#secondary_dialog_box").css("height",$j("#secondary_dialog_content").children().height()+35)})},SE.registerBehavior("secondary_dialog",function(t,e){SE.setupSecondaryDialog($j(e))}),SE.registerBehavior("secondary_resize_body",function(t,e){SE.setupSecondaryBodyResize($j(e))}),SE.setupFriendsEditorToggle=function(t){t.on("click",function(){$j(".friends_editor").toggle(),$j("#dialog_content").trigger(jQuery.Event("se:changed"))})},SE.useFriendEmailTo=function(t,e){var i=$j("#to")[0];if($j(".add_recipient_"+t).hide(),$j(".added_"+t).show(),""!==i.value){var n=i.value.split(/[,;\s]/);n.push(e),i.value=n.join(",")}else i.value=e;$j("#dialog_content").trigger(jQuery.Event("se:changed"))},SE.removeFriendEmailTo=function(t,e){var i=$j("#to")[0];if($j(".add_recipient_"+t).show(),$j(".added_"+t).hide(),""!==i.value){var n=i.value.split(/[,;\s]/);t=n.indexOf(e),t>-1&&n.splice(t,1),i.value=n.join(",")}},SE.registerBehavior("toggleFriendsEditor",function(t,e){SE.setupFriendsEditorToggle($j(e))}),SE.setupNewFolderInput=function(t){t.on("change",function(){var e=t.parents(".modal-dialog"),i=e.find("#create_new_folder_block"),n=e.find("#create_new_folder_field"),o=e.find("#create_new_folder_group_select"),s=e.find("#create_new_folder_group_field");"!"===t[0].value?(i.show(),SE.disableElem(n,!1),SE.disableElem(o,!1),SE.disableElem(s,!1)):(i.hide(),SE.disableElem(n,!0),SE.disableElem(o,!0),SE.disableElem(s,!0)),$j("#dialog_content").trigger(jQuery.Event("se:changed"))})},SE.setupNewFolderGroupInput=function(t){t.on("change",function(){var e=$j("#create_new_group_block"),i=$j("#create_new_folder_group_field");"!"===t[0].value?(e.show(),SE.disableElem(i,!1)):(e.hide(),SE.disableElem(i,!0)),$j("#dialog_content").trigger(jQuery.Event("se:changed"))})},SE.disableElem=function(t,e){e===!0?t.addClass("disabled"):t.removeClass("disabled"),t.attr("disabled",e)},SE.setupAjaxFormSubmitter=function(t){t.on("submit",function(){$j("#add_entry_dialog_submit").attr("disabled",!0),$j("#add_entry_dialog_submit").val("Saving..."),$j(".button.cancel").attr("disabled",!0);var e=t.attr("se:ajax_form_submitter:url");return $j.ajax({url:e,type:"POST",data:t.serialize(),success:function(t){var e=$j("."+t.obj_id+" .already_saved");e.html(t.saved_in),e.addClass("details_info"),SE.hideDialog(),$j(".modal").modal("hide")},fail:function(){SE.hideDialog(),$j(".modal").modal("hide")}}),!1})},SE.registerBehavior("create_new_folder",function(t,e){SE.setupNewFolderInput($j(e))}),SE.registerBehavior("create_new_folder_group",function(t,e){SE.setupNewFolderGroupInput($j(e))}),SE.registerBehavior("ajax_form_submitter",function(t,e){SE.setupAjaxFormSubmitter($j(e))}),function(t,e){t.SETabs={},t.SETabs.setupForElement=function(t){var i=!1,n=t.children(".tabset-tabs-container"),o=n.children(".tabset-tab, div"),s=t.children(".tabset-content-container"),r=s.children(".tabset-content, div");t.hasClass("hide_single_tab")&&1==o.length&&e(".tabset-tabs-container").hide()&&s.css("margin-top","-20px"),t.showNthTab=function(i){if(o.removeAttr("style"),i>=0&&i<o.length){var a=o.eq(i),l=r.eq(i);n.children(".selected").removeClass("selected"),s.children(".selected").removeClass("selected"),a.addClass("selected"),l.addClass("selected"),window.setTimeout(function(){t.trigger(e.Event("se:tab_selected",{tabIndex:i})),t.trigger(e.Event("se:changed",{value:i})),l.trigger("se:andale")},0)}},o.each(function(o,s){var s=e(s),a=r.eq(o);s.on("click",function(){t.hasClass("pseudo_select")&&n.toggleClass("opened_select"),s.hasClass("selected")||t.showNthTab(o)}),s.hasClass("selected")&&(i?(s.removeClass("selected"),a.removeClass("selected")):(i=!0,a.addClass("selected")))}),t.attr("se:tabset:cookie")&&t.on("se:tab_selected",function(i){e.cookie("tabset:"+t.attr("se:tabset:cookie"),parseInt(i.tabIndex)+1,{expires:3650,path:"/"}),i.stopPropagation()}),t.attr("se:tabset:fragment")&&SE.isHistoryAvailable()&&t.on("se:tab_selected",function(e){var i=SE.uriSetFragmentParameter(document.URL,"tab_"+t.attr("se:tabset:fragment"),parseInt(e.tabIndex)+1);window.history.replaceState(null,null,i),e.stopPropagation()}),void 0==t.attr("se:tabset:fragment")&&void 0==t.attr("se:tabset:cookie")&&t.on("se:tab_selected",function(t){t.stopPropagation()}),i||(o.eq(0).addClass("selected"),r.eq(0).addClass("selected"));var a=-1;t.attr("se:tabset:cookie")&&e.cookie("tabset:"+t.attr("se:tabset:cookie"))&&(a=parseInt(e.cookie("tabset:"+t.attr("se:tabset:cookie")),10)-1);var l="#tab_"+t.attr("se:tabset:fragment");t.attr("se:tabset:fragment")&&document.location.hash&&document.location.hash.indexOf(l)!=-1&&(a=parseInt(document.location.hash[document.location.hash.length-1],10)-1),a>=0&&t.showNthTab(a),t.on("se:coordinate",function(e){e.value>=0&&t.showNthTab(e.value)})},t.SE.registerBehavior("tabset",function(i,n){t.SETabs.setupForElement(e(n))})}(window,jQuery),function(t){t.SEDivsets={},t.SEDivsets.setupForElement=function(t){var e=!1;t.hasClass("divset")||t.addClass("divset"),t.children("div").each(function(i,n){var o=$j(n);o.hasClass("selected")&&(e?(o.removeClass("selected"),t.children("div").eq(i).removeClass("selected")):(e=!0,t.children("div").eq(i).addClass("selected"))),o.hasClass("divsetchild")||o.addClass("divsetchild")}),e||t.children("div").eq(0).addClass("selected"),t.on("se:coordinate",function(e){if(e.value<t.children("div").length){var i=t.children("div").eq(e.value);t.children(".selected").removeClass("selected"),i.addClass("selected"),i.trigger("se:andale")}})},t.SE.registerBehavior("divset",function(e,i){t.SEDivsets.setupForElement($j(i))})}(window),function(t){t.SEForms={}}(window),function($){$(function(){$("body").on("submit","form[remote=true], form[data-remote=true]",function(e){var data=$(this).serialize(),callback=$(this).data("callback"),start=$(this).data("start");return"undefined"!=typeof start&&"undefined"!=typeof window[start]&&window[start](),$.post(this.action,data,eval(callback)),dataLayer.push({event:"ajaxSubmit","gtm.element":this,element:e.target}),!1})})}(jQuery),SEForms.signupFormOptions=function(t){return"signup_form"===t?{errorClass:"field_with_errors smaller",validClass:"success",focusCleanup:!0,onkeyup:!1,rules:{"user[email]":{email:!0,required:!0},"user[login]":{pattern:/^[A-Za-z0-9_]{3,20}$/,remote:"/user/check_login",required:!0},"user[password]":{required:!0,minlength:5},"user[password_confirmation]":{required:!0,minlength:5,equalTo:"#user_password"}},messages:{"user[login]":{pattern:"Can only contain numbers, letters, and underscores, must be between 3 and 20 characters.",remote:"Login is already in use."}},errorElement:"span",errorPlacement:function(t,e){$j("[se\\:form_tip\\:id*="+e.attr("id")+"]").html(t)},onsubmit:!1,success:function(t){t.html("&nbsp;").addClass("success")}}:"form"===t?{errorClass:"field_with_errors smaller",validClass:"success",focusCleanup:!0,onkeyup:!1,rules:{commute_address:{required:!1,remote:{url:"/nyc/process/sales/geocode_address_2013",type:"get",data:{addr_street:function(){return $j("#commute_address").val()}}}}},messages:{commute_address:"We couldn't find that address."},onsubmit:!1,errorElement:"span",errorPlacement:function(t,e){$j("[se\\:form_tip\\:id*="+e.attr("id")+"]").html(t)}}:"deliver_message_form"===t?{errorClass:"field_with_errors smaller",validClass:"success",rules:{"message[email]":{email:!0,required:!0},"message[subject]":"required"},errorElement:"span",errorPlacement:function(t,e){t.appendTo($j("[se\\:form_tip\\:id*="+e.attr("id")+"]"))}}:"email_form"===t?{errorClass:"field_with_errors smaller",validClass:"success",rules:{from:{email:!0,required:!0},to:"required"},errorElement:"span",errorPlacement:function(t,e){t.appendTo($j("[se\\:form_tip\\:id*="+e.attr("id")+"]"))}}:"new_note"===t?{errorClass:"field_with_errors smaller",validClass:"success",rules:{"note[email]":{email:!0,required:!0}}}:"new_development_form"===t?{errorClass:"field_with_errors smaller",validClass:"success",rules:{email:{email:!0,required:!0}}}:"changing_email_navbar"===t?{errorClass:"field_with_errors smaller",validClass:"success",rules:{update_email:{email:!0,required:!0}}}:"advertising_inquiry"===t?{errorClass:"field_with_errors smaller",validClass:"success",rules:{"inquiry[name]":"required","inquiry[email]":{required:!0,email:!0},"inquiry[phone]":"required"},errorElement:"span"}:"be_inquiry"===t?{errorClass:"error smaller",validClass:"success",rules:{"inquiry[name]":"required","inquiry[email]":{required:!0,email:!0}},errorElement:"span"}:void 0},SEForms.setupFormValidator=function(t){t.validate(SEForms.signupFormOptions(t.attr("id")))},SEForms.inputKey=function(){return{search_by_address:'<input id="search_by_address_" name="search_by_address[]" placeholder="address" type="text">'}},SEForms.setupCustomValue=function(t){t.on("change",function(){"Custom"==t.val()?SEForms.toggleCustomField(t,"text_field"):SEForms.toggleCustomField(t,"select")})},SEForms.toggleCustomField=function(t,e){"text_field"==e?(select_id=t.attr("id"),custom_container=$j("#"+select_id+"_custom_container"),custom_input=custom_container.find("input"),"true"!=t.attr("se:bypass_field_rename")&&(custom_input.attr("name",select_id),custom_input.attr("id",select_id)),custom_container.prev().addClass("custom_toggle_on"),custom_container.show()):"select"==e&&(select_id=t.attr("id"),custom_container=$j("#"+select_id+"_custom_container"),"true"!=t.attr("se:bypass_field_rename")&&(custom_container.find("input").attr("name",t.attr("name")+"_ignore"),custom_container.find("input").attr("id",t.attr("name")+"_ignore")),custom_container.prev().removeClass("custom_toggle_on"),custom_container.hide())},SEForms.setupTriggerChangeOnPageLoad=function(t){window.setTimeout(function(){t.trigger("change")},0)},SEForms.setupFormFieldAdder=function(t){t.on("click",function(){t.trigger(jQuery.Event("se:changed"))})},SEForms.setupFormFieldAddee=function(t){t.on("se:coordinate",function(){t.append(SEForms.makeRemovableFieldDiv(t)),$j(SE).trigger("se:prepare_content",t)})},SEForms.makeRemovableFieldDiv=function(t){return"<div class='building_address'>"+SEForms.inputKey()[t.attr("se:field_key")]+SEForms.makeFieldRemover(t)+"</div>"},SEForms.makeFieldRemover=function(){return'<i class="icon-remove-circle" se:behavior="form_field_remover"></i>'},SEForms.setupFormFieldRemover=function(t){t.on("click",function(){t.prev().remove(),t.remove()})},SEForms.setupDatePickable=function(t){var e,i=t.attr("se:default_date"),n=t.attr("se:year_range");void 0===i?e=new Date:(i=new Date(i),e=new Date(i.setTime(i.getTime()+6e4*i.getTimezoneOffset())));var o={minDate:new Date(t.attr("se:min_date")),setDate:e};void 0!==n&&(o.yearRange=n.split(",")),t.pikaday(o),t.on("keyup",function(e){if(!e||!(e.keyCode>=37&&e.keyCode<=40||8==e.keyCode)){var i=SEForms.parseNumber(t.val());t.val(SEForms.toDateFormat(i))}})},SEForms.setupFormSubmitter=function(t){t.on("change",function(){current_uri=window.location.href,patt=new RegExp("sort_by=(.*)[&|]?"),value=t.data("value")||t.val(),current_uri.match(patt)?window.location.href=current_uri.replace(patt,"sort_by="+value):current_uri.match(/\?/)?window.location.href=current_uri+"&sort_by="+value:window.location.href=current_uri+"?sort_by="+value})},SEForms.setupAJAXOnchangeFormSubmitter=function(t){t.on("change",function(){$form=t.parents("form"),$j.ajax({url:$form.attr("action"),dataType:"script",data:$form.serialize()})})},SEForms.setupLinkFormSubmitter=function(t){form_id=t.attr("se:link_form_submitter:form_id"),confirmation=t.attr("se:link_form_submitter:confirmation"),"undefined"==typeof confirmation?confirmation=!1:"true"==confirmation?confirmation=!0:confirmation=!1,confirmation_message=t.attr("se:link_form_submitter:confirmation_message"),"undefined"==typeof confirmation_message&&(confirmation_message="Are you sure?"),t.on("click",function(t){t.preventDefault(),go_green=!0,confirmation&&(go_green=confirm(confirmation_message)),go_green&&$j(form_id).submit()})},SEForms.setupIgnorable=function(t){SEForms.shouldBeIgnored(t)&&t.attr("name",t.attr("name")+"_ignore"),t.on("change",function(){SEForms.shouldBeIgnored(t)?t.attr("name",t.attr("name")+"_ignore"):t.attr("name",t.attr("name").match(/(.*?)_ignore/).pop())})},SEForms.shouldBeIgnored=function(t){return""===t.val()||t.val()===t.attr("se:ignorable:value_to_ignore")},SEForms.setupFormValidatableOnCoordinate=function(t){t.on("se:coordinate",function(){t.validate(SEForms.signupFormOptions(t.attr("id")))})},SEForms.setupReelFormSubmitter=function(t){
t.on("click",function(){$j("#reel_form input").each(function(){input=$j(this),"hid_reel"===input.attr("id")&&input.val(t.attr("se:reel_form:reel")),"hid_year"===input.attr("id")&&input.val(t.attr("se:reel_form:year")),"hid_reel_page"===input.attr("id")&&input.val(t.attr("se:reel_form:page"))}),$j("#reel_form").submit()})},SEForms.setupCommaSeparated=function(t){t.on("keyup",function(e){if(!(e&&e.keyCode>=37&&e.keyCode<=40)){var i=SEForms.parseNumber(t.val());t.val(SEForms.toCommaSeparated(i))}})},SEForms.toCommaSeparated=function(t){if(isNaN(t))return"";t=Math.round(t).toString(),parsedNumber="";for(var e=0;e<t.length;e++){var i=t.charAt(t.length-e-1);parsedNumber=i+(0!==e&&e%3===0?",":"")+parsedNumber}return"$"+parsedNumber},SEForms.toDateFormat=function(t){return isNaN(t)?"":(t=Math.round(t).toString(),t.length<4?t:(parsedNumber="",parsedNumber+=t.substring(0,4),t.length>=4&&(parsedNumber+="-"),parsedNumber+=t.substring(4,6),t.length>=6&&(parsedNumber+="-"),parsedNumber+=t.substring(6,9),parsedNumber))},SEForms.setupFieldHideable=function(t){void 0!==t.attr("se:element_to_toggle_selector")?element_to_toggle=$j(t.attr("se:element_to_toggle_selector")):element_to_toggle=t,toggle_controller=$j(t.attr("se:toggle_controller_selector")),toggle_controller.on("change",function(){if(trimmed_array=$j.map(t.attr("se:hide_on_values").split(","),function(t){return t.trim()}),trimmed_array.indexOf(toggle_controller.val())>-1){switch(t.get(0).type){case"checkbox":t.prop("checked",!1)}element_to_toggle.hide()}else element_to_toggle.show()}),toggle_controller.trigger("change")},SEForms.parseNumber=function(t){var e=t.toString();return e=parseFloat(e.replace(/[^\.\d]/g,""))},SEForms.hideSubmitUntilValueEntered=function(t){var e;e=void 0!==t.attr("se:submit:selector")?$j(t.attr("se:submit:selector")):t.next("input"),e.hide(),t.on("keyup",function(){""!==t[0].value?(e.show(),t.addClass("filled_in")):(t.removeClass("filled_in"),e.hide())})},SE.registerBehavior("form_submitter",function(t,e){SEForms.setupFormSubmitter($j(e))}),SE.registerBehavior("ajax_onchange_form_submitter",function(t,e){SEForms.setupAJAXOnchangeFormSubmitter($j(e))}),SE.registerBehavior("form_validatable_on_coordinate",function(t,e){SEForms.setupFormValidatableOnCoordinate($j(e))}),SE.registerBehavior("form_validatable",function(t,e){SEForms.setupFormValidator($j(e))}),SE.registerBehavior("support_custom_value",function(t,e){SEForms.setupCustomValue($j(e))}),SE.registerBehavior("form_field_adder",function(t,e){SEForms.setupFormFieldAdder($j(e))}),SE.registerBehavior("form_field_addee",function(t,e){SEForms.setupFormFieldAddee($j(e))}),SE.registerBehavior("form_field_remover",function(t,e){SEForms.setupFormFieldRemover($j(e))}),SE.registerBehavior("date_pickable",function(t,e){SEForms.setupDatePickable($j(e))}),SE.registerBehavior("ignorable",function(t,e){SEForms.setupIgnorable($j(e))}),SE.registerBehavior("reel_form_submitter",function(t,e){SEForms.setupReelFormSubmitter($j(e))}),SE.registerBehavior("comma_separatable",function(t,e){SEForms.setupCommaSeparated($j(e))}),SE.registerBehavior("field_hideable",function(t,e){SEForms.setupFieldHideable($j(e))}),SE.registerBehavior("trigger_change_on_page_load",function(t,e){SEForms.setupTriggerChangeOnPageLoad($j(e))}),SE.registerBehavior("hidden_submit_until_value_entered",function(t,e){SEForms.hideSubmitUntilValueEntered($j(e))}),SE.registerBehavior("link_form_submitter",function(t,e){SEForms.setupLinkFormSubmitter($j(e))}),SE.linkToEmail=function(t,e){for(var i=t.split("-").reverse(),n="",o=0;o<i.length;o++)n+=String.fromCharCode(i[o]);document.write("<a href='mailto:"+n+"'>"+(e||n)+"</a>")},SE.setupAjaxLoading=function(jelem,options){jelem.on("se:andale se:load",function(event,callback){event.stopPropagation();var url=jelem.attr("se:url"),load_text=jelem.attr("se:load_text")||"Loading...";if(jelem.attr("se:url:id")&&(url=SE.uriAppendParameter(url,"id="+jelem.attr("se:url:id"))),!jelem._loading&&!jelem.attr("se:loaded")){if(jelem._loading=!0,!options.silent){var loading_class="loading";options.inline&&(loading_class="loading_compact"),jelem.html('<div class="'+loading_class+'"><i class="icon-spinner icon-spin"></i> '+load_text+"</div>")}jelem._seAjaxRequest=$j.ajax({url:url,timeout:0,dataType:"html",accepts:{html:"text/javascript, application/javascript"}}).done(function(data){if(jelem._loading=!1,"replaceHtml"===options.mode)options.with_fade?jelem.hide().html(data).fadeIn():jelem.html(data),jelem.attr("se:loaded",!0),window.setTimeout(function(){$j(SE).trigger("se:prepare_content",jelem),jelem.trigger("se:loaded"),callback&&callback(jelem.children(),!0)},0);else if("replaceElement"===options.mode){var jparent=jelem.parent(),position=jparent.children().index(jelem),nextElem=jelem.next();jelem.replaceWith(data),window.setTimeout(function(){var t=jparent.children().index(nextElem);for(t<=position&&(t=position+1);position<t;)$j(SE).trigger("se:prepare_content",$j(jparent.children()[position])),callback&&callback($j(jparent.children()[position]),!0),position+=1;jelem.trigger("se:loaded")},0)}else"fetchData"===options.mode&&window.setTimeout(function(){$j(SE).trigger("se:prepare_content",jelem),jelem.trigger("se:loaded"),callback&&callback(data,!0)},0);jelem.hasClass("selected")&&"undefined"!=typeof jelem.data("callback")&&eval(jelem.data("callback"))}).fail(function(){jelem._loading=!1,jelem.html('<div class="error"><i class="icon-warning-sign"></i> Unexpected Error</div>'),jelem.trigger("se:failed"),callback&&callback(jelem,!1),console.log("Failed loading ",jelem)}),window.setTimeout(function(){jelem.trigger("se:loading")},0)}})},SE.setupAndaleEnClick=function(t){var e=t;"undefined"!=typeof t.attr("se:target_element")&&(e=$j(t.attr("se:target_element"))),t.on("click touchstart",function(){e.trigger("se:andale")})},SE.setupAndaleOnCoordinate=function(t){t.on("se:coordinate",function(){t.trigger("se:andale")})},SE.registerBehavior("andale_coordinatable",function(t,e){SE.setupAndaleOnCoordinate($j(e))}),SE.registerBehavior("andale_on_click",function(t,e){SE.setupAndaleEnClick($j(e))}),SE.registerBehavior("loadable",function(t,e){SE.setupAjaxLoading($j(e),{mode:"replaceHtml"})}),SE.registerBehavior("replaceable",function(t,e){SE.setupAjaxLoading($j(e),{mode:"replaceElement"})}),SE.registerBehavior("replaceable:inline",function(t,e){SE.setupAjaxLoading($j(e),{mode:"replaceElement",inline:!0})}),SE.registerBehavior("fetchable",function(t,e){SE.setupAjaxLoading($j(e),{mode:"fetchData"})}),SE.registerBehavior("loadable:silent",function(t,e){SE.setupAjaxLoading($j(e),{mode:"replaceHtml",silent:!0})}),SE.registerBehavior("loadable:with_fade",function(t,e){SE.setupAjaxLoading($j(e),{mode:"replaceHtml",with_fade:!0})}),SE.registerBehavior("loadable:inline_with_fade",function(t,e){SE.setupAjaxLoading($j(e),{mode:"replaceHtml",inline:!0,with_fade:!0})}),SE.registerBehavior("trigger_andale_on",function(t,e){SE.setupTriggerAndaleOnClick($j(e))}),SE.registerBehavior("loadable:async",function(t,e){$j(e).html('<div class="loading"><i class="icon-spinner icon-spin"></i> Loading...</div>'),$j.ajax({url:$j(e).attr("se:url"),dataType:"html",accepts:{html:"text/javascript, application/javascript"}}).done(function(t){$j(document).ready(function(){$j(e).hide().html(t).fadeIn()})})}),L.Util.extend(L.Map.prototype,{getMap:function(){return this},easyFrameLayer:function(t){var e=this._easyLayers[t];if(e){var i=[];if(i=$j.map(e,function(t){return"undefined"!=typeof t._holes&&t._holes.length>0?t._holes:"undefined"!=typeof t.getLatLngs?t.getLatLngs():"undefined"!=typeof t.getLatLng?t.getLatLng():void 0}),i=_.flatten(i),i=_.compact(i),i.length>0){var n=new L.LatLngBounds(i);this.fitBounds(n)}}},easyFramePath:function(t,e){var i=[t];i=_.flatten(i),i=_.compact(i);var n=$j.map(i,function(t){return"undefined"!=typeof t._holes&&t._holes.length>0?overlay._holes:"undefined"!=typeof t.getLatLngs?t.getLatLngs():"undefined"!=typeof t.getLatLng?t.getLatLng():void 0});n=_.flatten(n),n=_.compact(n),n.length>0&&this.easyFitBounds(new L.LatLngBounds(n),e)},easyFitBounds:function(t,e){var i=this.getBoundsZoom(t);return this.setView(t.getCenter(),i,e)},easyRemoveLayer:function(t){var e=this,i=this._easyLayers[t];if(i)for(var n in i){var o=i[n];o.inEditingMode&&o.stopEditing(),o._easyMap=null,e.removeLayer(o)}e._easyLayers[t]=[]},easySetStatus:function(t){var e=document.getElementById(this._easyName+"_status");t&&t.length>0?(e.innerHTML=t,e.style.display="inline"):e.style.display="none"},easyShowTooltip:function(t,e){var i=$("map_tooltip");i.innerHTML=e;var n=t.getMap().easyGetWindowAnchor(t,i);i.style.left=n.x+"px",i.style.top=n.y+"px",Element.show(i),t._tooltipHider||(t.on("mouseout",function(){t.getMap().easyHideTooltip()}),t.on("mousedown",function(){t.getMap().easyHideTooltip()}),t._tooltipHider=!0)},easyHideTooltip:function(){Element.hide($("map_tooltip"))},easyShowInfoWindow:function(t,e){this.easyHideTooltip();var i=$("map_info_window"),n=$("map_info_window_content");$("map_info_window_close");n.innerHTML=e,i.style.opacity=0,Element.show(i);var o=t.getMap().easyGetWindowAnchor(t,n);i.style.opacity=null,i.style.left=o.x+"px",i.style.top=o.y+"px"},easyUpdateInfoWindow:function(t){$("map_info_window_content").innerHTML=t},easyHideInfoWindow:function(){Element.hide($("map_info_window"))},easyDynamicInfoWindow:function(t,e){Ajax._currentRequests=Ajax._currentRequests||{},Ajax._currentRequests.infoWindow&&Ajax._currentRequests.infoWindow.transport.abort(),t.getMap().easyShowInfoWindow(t,"<div class='map_info_window_loading'>Downloading Information...</div>"),Ajax._currentRequests.infoWindow=new Ajax.Request(e,{method:"get",onComplete:function(e){t.getMap().easyUpdateInfoWindow(e.responseText)},onFailure:function(){alert("Ajax Error")}})},easyGetWindowAnchor:function(t,e){var i=5,n=t.getMap().layerPointToContainerPoint(t.getMap().latLngToLayerPoint(t.getLatLng())),o=0,s=0,r=t._icon,a=t.getMap()._container.cumulativeOffset();t.getMap()._container.getLayout();t._easyIconAnchor&&(o=-t._easyIconAnchor.x+i,s=-t._easyIconAnchor.y+i),r&&(o+=r.width);var l=a.left+n.x+o,u=a.top+n.y+s;return l+Element.getDimensions(e).width>=$("content").cumulativeOffset().left+$("content").getDimensions().width&&(l=l-Element.getDimensions(e).width-2*o),{x:l,y:u}},easyPositionString:function(){return this.getZoom()+"/"+this.getCenter().lat.toFixed(5)+","+this.getCenter().lng.toFixed(5)}}),L.Util.extend(L.Util,{decodeGooglePolyline:function(t){for(var e=t.length,i=0,n=[],o=0,s=0;i<e;){var r,a=0,l=0;do r=t.charCodeAt(i++)-63,l|=(31&r)<<a,a+=5;while(r>=32);var u=1&l?~(l>>1):l>>1;o+=u,a=0,l=0;do r=t.charCodeAt(i++)-63,l|=(31&r)<<a,a+=5;while(r>=32);var c=1&l?~(l>>1):l>>1;s+=c,n.push(new L.LatLng(1e-5*o,1e-5*s))}return n},encodeGooglePolyline:function(t){var e=new PolylineEncoder(0);return e.dpEncode(t).encodedPointsLiteral}}),L.Util.extend(L.Marker.prototype,{getMap:function(){return this._map}}),L.Util.extend(L.Polyline.prototype,{getMap:function(){return this._map}}),L.Util.extend(L.Polygon.prototype,{getMap:function(){return this._map}}),"undefined"==typeof L.Polygon.prototype.enableEditing&&(L.Polygon.prototype.enableEditing=function(t){t||(t=!0);var e=this,i=new L.Polygon([],{color:"#000000",opacity:.4,fillColor:"#000000",fillOpacity:.2,weight:1});if(this._map.addLayer(i),e.inEditingMode=!0,t){var n=L.icon({iconUrl:"//cdn-assets-s3.streeteasy.com/assets/misc/vertex_normal-fcd695625e01528decc419e55c4f5808a4f0c3f5ca2d452b32187a00aa3c3628.png",overUrl:"//cdn-assets-s3.streeteasy.com/assets/misc/vertex_over-d35bd83de6cd8c003126fdcdc7356d6bfe3f611046a5e719c41a9775f6afac1d.png",iconSize:new L.Point(11,11),iconAnchor:new L.Point(6,6),shadowUrl:""}),o=L.icon({iconUrl:"//cdn-assets-s3.streeteasy.com/assets/misc/vertex_ghost_normal-6cbd6fa42751ae0fca3440cfc84a3d5b23ea63749470ec8e201684185ae511e5.png",overUrl:"//cdn-assets-s3.streeteasy.com/assets/misc/vertex_ghost_over-38e2c1ce625bf3f81a86a8b95119d75bd081768980ef1ddd4b838433b2c2efe0.png",iconSize:new L.Point(11,11),iconAnchor:new L.Point(6,6),shadowUrl:""}),s=L.icon({iconUrl:"//cdn-assets-s3.streeteasy.com/assets/misc/drag_ghost-86c7648122d35459a9378b83cb095429414087f1ed9a5642783d8e943045fbd5.png",overUrl:"//cdn-assets-s3.streeteasy.com/assets/misc/drag_normal-d6954e7c5dea2308a48b8c2f89bb7c8207b0c856a3702c0416e9b555a4fc9104.png",iconSize:new L.Point(33,33),iconAnchor:new L.Point(16,16),shadowUrl:""});e.stopEditing=function(){if(this.inEditingMode){for(var t=this.getLatLngs(),n=0;n<t.length;n++){var o=t[n];o.marker&&(o.marker.getMap().removeLayer(o.marker),o.marker=void 0),o.ghostMarker&&(o.ghostMarker.getMap().removeLayer(o.ghostMarker),o.ghostMarker=void 0)}this._map.removeLayer(i),this._map.removeLayer(e.centerHandle),this.ghostPath=null,this.inEditingMode=!1}};var r=function(t,i){i=i||25;var n=[];for(var o in e._map._easyOverlays){var s=e._map._easyOverlays[o];s!=e&&(n=n.concat(s.getLatLngs()))}return n=$j.map(n,function(e){return e.distanceTo(t)<=i}).sort(function(e){return e.distanceTo(t)}),n.length>0?n[0]:t},a=function(){0===i.getLatLngs().length&&(this.marker.inex<e.getLatLngs().length-1?i.setLatLngs([this.marker.getLatLng(),this.getLatLng(),e.getLatLngs()[this.marker.inex+1]]):this.marker.inex===e.getLatLngs().length-1&&i.setLatLngs([this.marker.getLatLng(),this.getLatLng(),e.getLatLngs()[0]])),i.updateLatLng(1,this.getLatLng())},l=function(t){var i,n=e.getLatLngs(),o=n[t.inex];i=0===t.inex?n[e.getLatLngs().length-1]:n[t.inex-1],"undefined"!=typeof o&&"undefined"!=typeof o.ghostMarker&&(t.inex<n.length-1?o.ghostMarker.setLatLng(new L.LatLng(o.lat+.5*(n[t.inex+1].lat-o.lat),o.lng+.5*(n[t.inex+1].lng-o.lng))):t.inex===n.length-1&&o.ghostMarker.setLatLng(new L.LatLng(o.lat+.5*(n[0].lat-o.lat),o.lng+.5*(n[0].lng-o.lng)))),"undefined"!=typeof i&&"undefined"!=typeof i.ghostMarker&&i.ghostMarker.setLatLng(new L.LatLng(i.lat+.5*(t.getLatLng().lat-i.lat),i.lng+.5*(t.getLatLng().lng-i.lng)))},u=function(){i.setLatLngs([]),this.setLatLng(r(this.getLatLng()));var t=e.insertLatLng(this.marker.inex,this.getLatLng());m(t),t.marker.inex=this.marker.inex+1,l(this.marker),g(t);for(var n=e.getLatLngs(),o=0;o<n.length;o++){var s=n[o];s.marker&&(s.marker.inex=o)}c()},c=function(){for(var t=e.getLatLngs(),i=0,n=0,o=0;o<t.length;o++){var s=t[o];i+=s.lat,n+=s.lng}i/=t.length,n/=t.length;var r=new L.LatLng(i,n);e.centerHandle.setLatLng(r),e.centerHandle.origPosition=r},h=function(){for(var t=this.getLatLng(),i=this.origPosition.lat-t.lat,n=this.origPosition.lng-t.lng,o=0;o<e.getLatLngs().length;o++){var s=e.getLatLngs()[o],r=new L.LatLng(s.lat-i,s.lng-n);s.marker&&(s.marker.setLatLng(new L.LatLng(s.marker.getLatLng().lat-i,s.marker.getLatLng().lng-n)),r.marker=s.marker),s.ghostMarker&&(s.ghostMarker.setLatLng(new L.LatLng(s.ghostMarker.getLatLng().lat-i,s.ghostMarker.getLatLng().lng-n)),r.ghostMarker=s.ghostMarker),e.updateLatLng(o,r)}this.origPosition=t},d=function(){e.updateLatLng(this.inex,this.getLatLng()),t&&l(this),c()},p=function(){this.setLatLng(r(this.getLatLng())),e.updateLatLng(this.inex,this.getLatLng()),t&&l(this),c()},f=function(){var i,n;if(t){if(i=e.getLatLngs()[this.inex],e.getLatLngs().length<=3)return!1;n=0===this.inex?e.getLatLngs()[e.getLatLngs().length-1]:e.getLatLngs()[this.inex-1],"undefined"!=typeof i.ghostMarker&&i.ghostMarker._map.removeLayer(i.ghostMarker),e.spliceLatLngs(this.inex,1);for(var o=e.getLatLngs(),s=0;s<o.length;s++){var r=o[s];r.marker&&(r.marker.inex=s)}"undefined"!=typeof n&&(this.inex<=e.getLatLngs().length?l(n.marker):(n.ghostMarker._map.removeLayer(n.ghostMarker),n.ghostMarker=void 0))}else e.spliceLatLngs(this.inex,1),e.updateLatLng(this.inex,this.getLatLng());if(this._map.removeLayer(this),1===e.getLatLngs().length){n.ghostMarker.getMap().removeLayer(n.ghostMarker);var a=e.getLatLngs().pop().marker;a.getMap().removeLayer(a)}c()},m=function(t){var i=new L.Marker(t,{icon:n,draggable:!0});return i.on("drag",d),i.on("dragend",p),i.on("click",f),t.marker=i,e._map.addLayer(i),i},g=function(t){var i=null;if(t.marker.inex<e.getLatLngs().length-1)i=e.getLatLngs()[t.marker.inex+1];else{if(t.marker.inex!==e.getLatLngs().length-1)return null;i=e.getLatLngs()[0]}var n=new L.Marker(new L.LatLng(t.lat+.5*(i.lat-t.lat),t.lng+.5*(i.lng-t.lng)),{icon:o,draggable:!0});return n.on("drag",a),n.on("dragend",u),t.ghostMarker=n,n.marker=t.marker,e._map.addLayer(n),n},v=function(){for(var t=e.getLatLngs(),i=0,n=0,o=0;o<t.length;o++){var r=t[o];i+=r.lat,n+=r.lng}i/=t.length,n/=t.length;var a=new L.LatLng(i,n),l=new L.Marker(a,{icon:s,draggable:!0});return l.origPosition=a,l.polygon=e,e.centerHandle=l,l.on("drag",h),e.getMap().addLayer(l),l}}for(var _=this.getLatLngs(),y=0;y<_.length;y++){var b=_[y];m(b).inex=y,t&&g(b)}v()}),"undefined"==typeof L.Polyline.prototype.updateLatLng&&(L.Polyline.prototype.updateLatLng=function(t,e){return"undefined"!=typeof this._latlngs[t]&&(this._latlngs[t].lat=e.lat,this._latlngs[t].lng=e.lng),this.redraw(),this.fire("lineupdated"),this._latlngs[t]},L.Polyline.prototype.insertLatLng=function(t,e){var i=new L.LatLng(e.lat,e.lng);return this._latlngs.splice(t+1,0,i),this.redraw(),this.fire("lineupdated"),i}),PolylineEncoder=function(t,e,i,n){var o;for(t||(t=18),e||(e=2),i||(i=1e-5),n||(n=!0),this.numLevels=t,this.zoomFactor=e,this.verySmall=i,this.forceEndpoints=n,this.zoomLevelBreaks=new Array(t),o=0;o<t;o++)this.zoomLevelBreaks[o]=i*Math.pow(e,t-o-1)},PolylineEncoder.prototype.dpEncode=function(t){var e,i,n,o,s,r,a,l,u=0,c=[],h=new Array(t.length);if(t.length>2)for(c.push([0,t.length-1]);c.length>0;){for(o=c.pop(),e=0,l=Math.pow(t[o[1]].lat-t[o[0]].lat,2)+Math.pow(t[o[1]].lng-t[o[0]].lng,2),s=o[0]+1;s<o[1];s++)n=this.distance(t[s],t[o[0]],t[o[1]],l),n>e&&(e=n,i=s,e>u&&(u=e));e>this.verySmall&&(h[i]=e,c.push([o[0],i]),c.push([i,o[1]]))}return r=this.createEncodings(t,h),a=this.encodeLevels(t,h,u),{encodedPoints:r,encodedLevels:a,encodedPointsLiteral:r.replace(/\\/g,"\\\\")}},PolylineEncoder.prototype.distance=function(t,e,i,n){var o,s;return e.lat===i.lat&&e.lng===i.lng?s=Math.sqrt(Math.pow(i.lat-t.lat,2)+Math.pow(i.lng-t.lng,2)):(o=((t.lat-e.lat)*(i.lat-e.lat)+(t.lng-e.lng)*(i.lng-e.lng))/n,o<=0&&(s=Math.sqrt(Math.pow(t.lat-e.lat,2)+Math.pow(t.lng-e.lng,2))),o>=1&&(s=Math.sqrt(Math.pow(t.lat-i.lat,2)+Math.pow(t.lng-i.lng,2))),0<o&&o<1&&(s=Math.sqrt(Math.pow(t.lat-e.lat-o*(i.lat-e.lat),2)+Math.pow(t.lng-e.lng-o*(i.lng-e.lng),2)))),s},PolylineEncoder.prototype.createEncodings=function(t,e){var i,n,o,s=0,r=0,a="";for(i=0;i<t.length;i++)if(void 0!==e[i]||0===i||i==t.length-1){var l=t[i],u=l.lat,c=l.lng,h=Math.floor(1e5*u),d=Math.floor(1e5*c);n=h-s,o=d-r,s=h,r=d,a+=this.encodeSignedNumber(n)+this.encodeSignedNumber(o)}return a},PolylineEncoder.prototype.computeLevel=function(t){var e;if(t>this.verySmall){for(e=0;t<this.zoomLevelBreaks[e];)e++;return e}},PolylineEncoder.prototype.encodeLevels=function(t,e,i){var n,o="";for(o+=this.forceEndpoints?this.encodeNumber(this.numLevels-1):this.encodeNumber(this.numLevels-this.computeLevel(i)-1),n=1;n<t.length-1;n++)void 0!==e[n]&&(o+=this.encodeNumber(this.numLevels-this.computeLevel(e[n])-1));return o+=this.forceEndpoints?this.encodeNumber(this.numLevels-1):this.encodeNumber(this.numLevels-this.computeLevel(i)-1)},PolylineEncoder.prototype.encodeNumber=function(t){for(var e,i,n="";t>=32;)e=(32|31&t)+63,n+=String.fromCharCode(e),t>>=5;return i=t+63,n+=String.fromCharCode(i)},PolylineEncoder.prototype.encodeSignedNumber=function(t){var e=t<<1;return t<0&&(e=~e),this.encodeNumber(e)},function(root){root.SEMaps={},root.SEMaps._maps={},root.SEMaps._isRetina=function(){return(window.matchMedia&&(window.matchMedia("only screen and (min-resolution: 192dpi), only screen and (min-resolution: 2dppx), only screen and (min-resolution: 75.6dpcm)").matches||window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min--moz-device-pixel-ratio: 2), only screen and (min-device-pixel-ratio: 2)").matches)||window.devicePixelRatio&&window.devicePixelRatio>=2)&&/(iPad|iPhone|iPod)/g.test(navigator.userAgent)};var defaultIcon=L.icon({iconUrl:"//cdn-assets-s3.streeteasy.com/assets/images/marker-icon-915e83a6fc798c599e5c9e3f759d6bc065d65151019acd0410d1f4731bcaaf72.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[-3,-41],shadowUrl:"//cdn-assets-s3.streeteasy.com/assets/images/marker-shadow-4f340d2d61746333dffe056e074ce1704ae4e47fec5a7de98322fbdbcfcb2b6d.png",shadowSize:[41,41],shadowAnchor:[12,41]});root.SEMaps.setupMap=function(jelem){var options={};if(jelem.attr("se:map:static")?(options.dragging=!1,options.touchZoom=!1,options.doubleClickZoom=!1,options.zoomControl=!1,options.scrollWheelZoom=!1,options.attributionControl=!0):(options.dragging=!0,options.touchZoom=!0,options.doubleClickZoom=!0,options.zoomControl=!0,options.scrollWheelZoom=!1,options.attributionControl=!0),document.documentElement.clientWidth<980&&(options.dragging=!1,options.touchZoom=!1,options.doubleClickZoom=!1,options.zoomControl=!1,options.scrollWheelZoom=!1,options.attributionControl=!0,L.DomEvent.preventDefault=function(){}),$j(".map_view #content #map").length>0){var calculatedTop=$j("header").height()+$j(".result-header").height()+30;jelem.css("top",calculatedTop)}var layers=[],baseLayers={},overlayLayers={};$j.each(jelem.children("[se\\:behavior*=map_layer_definition]"),function(index,layerElem){var jlayer=$j(layerElem),tile_url=jlayer.attr("se:map_layer:url");if(SEMaps._isRetina()&&(tile_url=tile_url.replace(/(\.png)/g,"@2x.png")),tile_url){var name=jlayer.attr("se:map_layer:title"),layer=new L.TileLayer(tile_url,{minZoom:parseInt(jlayer.attr("se:map_layer:min_zoom"),10)||12,maxZoom:parseInt(jlayer.attr("se:map_layer:max_zoom"),10)||19,scheme:jlayer.attr("se:map_layer:scheme")||"xyz",attribution:jlayer.attr("se:map_layer:attribution")||"<a target='_blank' href='https://www.mapbox.com/about/maps/'>&copy; Mapbox</a>&nbsp;|&nbsp;<a target='_blank' href='http://www.openstreetmap.org/about/'>&copy; OpenStreetMap</a>&nbsp;|&nbsp;<a target='_blank' href='https://www.mapbox.com/map-feedback/'>Improve this map</a>",id:"streeteasy.4f8c9dd3",accessToken:"pk.eyJ1Ijoic3RyZWV0ZWFzeSIsImEiOiJPd04zZHNVIn0.5japMi5IZovrBLq_g0yWYA"});if(jlayer.attr("se:map_layer:utf_grid")){var utfGrid=new L.UtfGrid(jlayer.attr("se:map_layer:utf_grid"));utfGrid.on("click",function(ev){if(ev.data){var popup=L.popup();popup.setLatLng(ev.latlng),popup.setContent(eval(jlayer.attr("se:map_layer:utf_popup_content_js"))),popup.openOn(ev.target._map)}}),layer=L.layerGroup([layer,utfGrid])}layer._layerName=name,jlayer.attr("se:map_layer:enabled")?layer._overlayEnabledByDefault=!0:layer._overlayEnabledByDefault=!1,"overlay"==jlayer.attr("se:map_layer:type")?(layer._layerType="overlay",overlayLayers[name]=layer):(layer._layerType="base",baseLayers[name]=layer),layers.push(layer)}}),options.zoom=parseInt(jelem.attr("se:map:zoom"),10)||12,options.minZoom=parseInt(jelem.attr("se:map:min_zoom"),10)||8,options.maxZoom=parseInt(jelem.attr("se:map:max_zoom"),10)||19,jelem.attr("se:map:center_latlon")&&(options.center=jelem.attr("se:map:center_latlon").split(/\s*\,\s*/)),$j.cookie("se:map:base_layer")&&baseLayers[$j.cookie("se:map:base_layer")]?options.layers=[baseLayers[$j.cookie("se:map:base_layer")]]:options.layers=[layers[0]];var id=jelem.attr("id"),map=new L.Map(jelem[0],options);SEMaps._maps[id]=map,jelem.data("map",map),layers.length>1&&L.control.layers(baseLayers,overlayLayers).addTo(map);var enabledOverlayLayerNames=($j.cookie("se:map:enabled_overlays")||"").split("|"),disabledOverlayLayerNames=($j.cookie("se:map:disabled_overlays")||"").split("|");if($j.each(layers,function(t,e){enabledOverlayLayerNames.indexOf(e._layerName)>=0?e.addTo(map):e._overlayEnabledByDefault&&disabledOverlayLayerNames.indexOf(e._layerName)<0&&e.addTo(map)}),map.on("layeradd",function(t){if("base"==t.layer._layerType)$j.cookie("se:map:base_layer",t.layer._layerName,{expires:3650,path:"/"});else if("overlay"==t.layer._layerType){var e,i=($j.cookie("se:map:enabled_overlays")||"").split("|"),n=($j.cookie("se:map:disabled_overlays")||"").split("|");(e=i.indexOf(t.layer._layerName))<0&&i.push(t.layer._layerName),(e=n.indexOf(t.layer._layerName))>=0&&n.splice(e,1),$j.cookie("se:map:enabled_overlays",i.join("|"),{expires:3650,path:"/"}),$j.cookie("se:map:disabled_overlays",n.join("|"),{expires:3650,path:"/"})}}),map.on("layerremove",function(t){if("base"==t.layer._layerType);else if("overlay"==t.layer._layerType){var e,i=($j.cookie("se:map:enabled_overlays")||"").split("|"),n=($j.cookie("se:map:disabled_overlays")||"").split("|");(e=n.indexOf(t.layer._layerName))<0&&n.push(t.layer._layerName),(e=i.indexOf(t.layer._layerName))>=0&&i.splice(e,1),$j.cookie("se:map:enabled_overlays",i.join("|"),{expires:3650,path:"/"}),$j.cookie("se:map:disabled_overlays",n.join("|"),{expires:3650,path:"/"})}}),map.attributionControl.setPrefix(""),map._seGroups={},jelem.attr("se:map:cluster")&&($j.each(jelem.attr("se:map:cluster").split(/\s+/),function(t,e){map._seGroups[e]=new L.MarkerClusterGroup({maxClusterRadius:40,singleMarkerMode:!0,zoomToBoundsOnClick:!1,polygonOptions:{color:"#0066CC",weight:1,opacity:.3}}),map._seGroups[e].on("click",function(t){var e=[t.layer._seJElem];map._seLoadAjaxPopup(e,t.layer.getLatLng())}),map._seGroups[e].on("clusterclick",function(t){var e=$j.map(t.layer.getAllChildMarkers(),function(t){return t._seJElem});map._seLoadAjaxPopup(e,t.layer.getLatLng())}),map.addLayer(map._seGroups[e])}),window.location.hash.match(/pos=/))){var position=window.location.hash.split("#pos=")[1].split("/"),ll=position[1].split(/\s*\,\s*/);map.setView(new L.LatLng(ll[0],ll[1]),position[0])}map._seLoadAjaxPopup=function(t,e){var i=this,n=$j.map(t,function(t){return t.attr("se:map:popup:id")}).slice(0,50).join(","),o="map_popup_"+e.toString().hashCode(),s=t[0].parents("[se\\:map\\:popup\\:url]"),r=s.attr("se:map:popup:url");r=r+(r.indexOf("?")>=0?"&":"?")+"ids="+n,r=r+"&real_count="+t.length;var a=$j("<div />",{id:o,"se:behavior":"loadable","se:url":r});$j(SE).trigger("se:prepare_content",a);var l=L.popup({offset:L.point(0,-6),closeButton:!1,maxWidth:500,maxHeight:360,autoPanPadding:[5,48]}).setLatLng(e).setContent(a[0]).openOn(i);window.setTimeout(function(){var t=$j("#"+o);t.trigger("se:andale"),t.on("se:loading se:loaded se:failed",function(){l._update()})},0)},map._seCenterAround=jelem.attr("se:map:center_around")||"all",map._seRecenterAround=null,map._seRecenter=function(t){map.whenReady(function(){window.setTimeout(function(){var e=new L.LatLngBounds,i=function(t){t&&t._holes&&t._holes.length>0?$j.each(t._holes,function(t,i){$j.each(i,function(t,i){e.extend(i)})}):t&&t.getBounds&&e.extend(t.getBounds())};if("all"==map._seCenterAround){if($j.each(map._seGroups,function(t,e){e.eachLayer(i)}),!e._northEast)return!0}else{var n=map._seGroups[map._seCenterAround];if(!n)return!0;n.eachLayer(i)}map._seRecenterAround?(map.fitBounds(e.pad(-.15)),map.setView(map._seRecenterAround,map.getZoom())):(t=t||[0,0],map.fitBounds(e,{paddingTopLeft:t}))},0)})},map._seAddToGroup=function(t,e){t._seGroup=e,e?(this._seGroups[e]||(this._seGroups[e]=new L.LayerGroup,this.addLayer(this._seGroups[e])),this._seGroups[e].addLayer(t)):this.addLayer(t)},map._seRemoveFromGroup=function(t){t._seGroup&&this._seGroups[t._seGroup]?this._seGroups[t._seGroup].removeLayer(t):this.removeLayer(t)}},root.SEMaps.setupMarker=function(t){if(t.attr("se:map:point")){var e=$j("#"+(t.attr("se:map")||"map")),i=e.data("map"),n=t.attr("se:map:group")||"markers",o=t.attr("se:map:point").split(/\s*\,\s*/);if(2==o.length&&!isNaN(o[0])&&!isNaN(o[1])){var s=new L.Marker(o,{icon:defaultIcon});s._seJElem=t,t.data("map:elem",s),t.data("map:group",n),t.attr("se:behavior")&&t.attr("se:behavior").match(/selectable/)?(t.on("se:selected",function(){t.data("map:elem")&&(i._seAddToGroup(t.data("map:elem"),n),i.panTo(t.data("map:elem").getLatLng()))}),t.on("se:unselected",function(){t.data("map:elem")&&i._seRemoveFromGroup(t.data("map:elem"))})):(i._seAddToGroup(s,n),t.attr("se:map:recenter")&&(i._seRecenterAround=s.getLatLng()),i._seRecenter())}}},root.SEMaps.setupShift=function(t){if(t.attr("se:map:shift")){var e=$j("#"+(t.attr("se:map")||"map")),i=e.data("map"),n=t.attr("se:map:shift").split(/\s*\,\s*/);if(2==n.length&&!isNaN(n[0])&&!isNaN(n[1])){var o={lat:parseFloat(n[0]),lng:parseFloat(n[1])},s=660,r=jQuery(window).outerWidth()>s;if(t.attr("se:map:point")){var a=t.attr("se:map:point").split(/\s*\,\s*/),l=function(){d.lat+=o.lat,d.lng+=o.lng},u=function(){d.lat-=o.lat,d.lng-=o.lng},c=function(){i._seRecenterAround=d,i._seRecenter()},h=function(){jQuery(window).outerWidth()>s&&r?(l(),r=!1,c()):jQuery(window).outerWidth()<s&&!r&&(u(),r=!0,c())};if(2==a.length&&!isNaN(a[0])&&!isNaN(a[1])){var d={lat:parseFloat(a[0]),lng:parseFloat(a[1])};r||l(),h(),window.setTimeout(function(){L.marker(a,{icon:defaultIcon}).addTo(i)},1),jQuery(window).on("resize",function(){h()})}}else{var h=function(){jQuery(window).outerWidth()>s&&r?(r=!1,i._seRecenter([o.lat,o.lng])):jQuery(window).outerWidth()<s&&!r&&(r=!0,i._seRecenter())};h(),jQuery(window).on("resize",function(){h()})}}}},root.SEMaps.setupPolygon=function(t){var e=$j("#"+(t.attr("se:map")||"map")),i=e.data("map"),n=t.attr("se:map:group")||"markers",o=[];$j.each(t.attr("se:map:paths").split("$"),function(t,e){o.push(L.Util.decodeGooglePolyline(e))});var s={};$j.each(["color","weight","opacity","fillColor","fillOpacity"],function(e,i){t.attr("se:map:"+i)&&(s[i]=t.attr("se:map:"+i))});var r=new L.Polygon(o,s);t.data("map:elem",r),t.data("map:group",n),i._seAddToGroup(r,n),!t.attr("se:map:shift")&&i._seRecenter()},root.SEMaps.reportPosition=function(t){SE.isHistoryAvailable()&&t.data().map.on("moveend",function(){var t=SE.uriSetFragmentParameter(window.location.href,"pos",this.easyPositionString());window.history.replaceState(null,null,t)})}}(window),SE.registerBehavior("map",function(t,e){SEMaps.setupMap($j(e))}),SE.registerBehavior("map_polygon",function(t,e){SEMaps.setupPolygon($j(e))}),SE.registerBehavior("mappable",function(t,e){SEMaps.setupMarker($j(e))}),SE.registerBehavior("shiftable",function(t,e){SEMaps.setupShift($j(e))}),SE.registerBehavior("report_position",function(t,e){SEMaps.reportPosition($j(e))});var validate=function(){$j("width").value=$F("width")>=640?$F("width"):640,$j("height").value=$F("height")>=480?$F("height"):480},showEmbed=function(){validate(),$j("embed_code").innerHTML=$j("embed_code").innerHTML.replace(/width=\d+/g,"width="+$F("width")),$j("embed_code").innerHTML=$j("embed_code").innerHTML.replace(/width=\"\d+\"/g,'width="'+$F("width")+'"'),$j("embed_code").innerHTML=$j("embed_code").innerHTML.replace(/height=\d+/g,"height="+$F("height")),$j("embed_code").innerHTML=$j("embed_code").innerHTML.replace(/height=\"\d+\"/g,'height="'+$F("height")+'"'),$j("embed_container").show()},hideEmbed=function(){validate(),$j("embed_container").hide()};SE.setupSelectable=function(t){t.on("se:selected",function(){t.addClass("selected")}),t.on("se:unselected",function(){t.removeClass("selected")})},SE.setupHoverable=function(t){t.on("mouseenter",function(){SE.ignoreHoversForABit||SE.changeSelectedTo(t)}),t.on("mouseleave",function(){})},SE.changeSelectedTo=function(t,e){if(e=e||{},SE.currentlySelectedJElem&&(SE.currentlySelectedJElem.trigger("se:unselected"),SE.currentlySelectedJElem=null),t&&(SE.currentlySelectedJElem=t,SE.currentlySelectedJElem.trigger("se:selected"),e.scroll)){var i=$j(window),n=null;i.scrollTop()+i.height()<t.offset().top+t.height()?n=t.offset().top+t.height()-i.height()+120:i.scrollTop()>t.offset().top&&(n=t.offset().top-120),n&&(SE.ignoreHoversForABit=!0,i.scrollTop(n),SE.ignoreHoversForABit=!1)}},SE.selectNext=function(){var t=$j("[se\\:behavior*=selectable]"),e=null;if(SE.currentlySelectedJElem){var i=t.index(SE.currentlySelectedJElem[0]);i<t.length-1&&(e=$j(t[i+1]))}else e=$j(t[0]);e&&SE.changeSelectedTo(e,{scroll:!0})},SE.selectPrevious=function(){var t=$j("[se\\:behavior*=selectable]"),e=null;if(SE.currentlySelectedJElem){var i=t.index(SE.currentlySelectedJElem[0]);i>0&&(e=$j(t[i-1]))}else e=$j(t[0]);e&&SE.changeSelectedTo(e,{scroll:!0})},SE.enableSelectionKeys=function(){SE.selectionKeysEnabled||($j(document).on("keypress",function(t){var e=t.which;74==e||106==e?(SE.selectNext(),t.preventDefault()):75!=e&&107!=e||(SE.selectPrevious(),t.preventDefault())}),$j(document).on("keyup",function(t){var e=t.which;40==e?(SE.selectNext(),t.preventDefault()):38==e?(SE.selectPrevious(),t.preventDefault()):13==e&&SE.currentlySelectedJElem&&SE.currentlySelectedJElem.attr("se:behavior")&&SE.currentlySelectedJElem.attr("se:behavior").match(/clickable/)&&SE.currentlySelectedJElem[0].click()}),SE.selectionKeysEnabled=!0)},SE.registerBehavior("selectable",function(t,e){
SE.setupSelectable($j(e))}),SE.registerBehavior("hoverable",function(t,e){SE.setupHoverable($j(e))}),function(t){t(document).ready(function(){t("body").append("<div class='TooltipOverlay'></div>");var e=t(".TooltipOverlay");e.bind("click",function(){o()});var i=function(e){var i=e.prev('[data-tooltip="trigger"]'),n="Tooltip--mobile";t(window).width()<600?(!e.hasClass(n)&&e.addClass(n),e.css({top:i.position().top+25,left:0}),e.children(".Tooltip-arrow").addClass("Tooltip-arrowTop").css({left:i.position().left+6})):(e.css({top:i.position().top-e.height()/2-6,left:i.position().left+30}),e.hasClass(n)&&e.removeClass(n).children(".Tooltip-arrow").removeClass("Tooltip-arrowTop").css({left:"auto"}))},n=function(t){t.prepend("<span class='Tooltip-arrow'></span><span data-tooltip='close' class='Tooltip-close icon-remove'></span>"),t.children(".Tooltip-close").bind("click",function(){o()})},o=function(){t(".Tooltip--active").removeClass("Tooltip--active"),e.hide()},s=function(t){0===t.children(".Tooltip-arrow").length&&n(t),t.addClass("Tooltip--active"),i(t),e.show()},r=function(t){return t.hasClass("Tooltip--active")};t('*[data-tooltip="trigger"]').click(function(e){var i=t(e.target).next('[data-tooltip="content"]');r(i)?o():s(i)}),t('[data-tooltip="content"]').each(function(e,i){var n=t(i).prev('[data-tooltip="trigger"]'),o=n.position().top-t(i).height()/2+4;t(window).width()<600?t(i).css({top:o,left:0}).addClass("Tooltip--mobile"):t(i).css({top:o,left:n.position().left+45})}),t(window).resize(function(){var e=t(".Tooltip--active");e.length>0&&i(e)})})}(jQuery),String.prototype.hashCode=function(){var t,e,i=0;if(0===this.length)return i;for(t=0,l=this.length;t<l;t++)e=this.charCodeAt(t),i=(i<<5)-i+e,i|=0;return i},$j.sum=function(t){var e=0;return $j.each(t,function(t,i){e+=i}),e},SE.uriAppendParameter=function(t,e){return t.indexOf("?")>=0?t+"&"+e:t+"?"+e},SE.uriSetFragmentParameter=function(t,e,i){return t.split("#")[0]+"#"+e+"="+i},SE.setupClickToHide=function(t){t.css("cursor","pointer"),t.on("click",function(){var e=t.attr("se:clickToHide:cssselector");$j(e).hide("fade")})},SE.setupTogglable=function(t){t.css("cursor","pointer"),t.on("click",function(){var e=t.attr("se:togglable:cssselector");return $j(e).toggle(),t.trigger(jQuery.Event("se:changed")),!1})},SE.setupTogglableOnLoad=function(t){t.toggle(),t.trigger(jQuery.Event("se:changed"))},SE.setupSeoTogglable=function(t){t.css("cursor","pointer"),t.on("click",function(){var e=t.attr("se:togglable:cssselector"),i=$j("."+e+".seo-toggled-off"),n=$j("."+e+".seo-toggled");i.addClass("seo-toggled").removeClass("seo-toggled-off"),n.addClass("seo-toggled-off").removeClass("seo-toggled")})},SE.registerBehavior("clickToHide",function(t,e){SE.setupClickToHide($j(e))}),SE.registerBehavior("togglable",function(t,e){SE.setupTogglable($j(e))}),SE.registerBehavior("seo_togglable",function(t,e){SE.setupSeoTogglable($j(e))}),SE.registerBehavior("toggle_on_load",function(t,e){SE.setupTogglableOnLoad($j(e))}),SE.makeElementClickable=function(t){t.css("cursor","pointer"),t.on("click",function(e){if("A"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&"INPUT"!==e.target.tagName&&"I"!==e.target.tagName){var i;return i=t.find("[se\\:clickable\\:target]"),0===i.length&&(i=t.find("A")),i.length>0&&(t.trigger("se:andale"),i[0].click()),!1}return!0})},SE.registerBehavior("clickable",function(t,e){SE.makeElementClickable($j(e))}),SE.setupScrolltoTop=function(t){t.on("click",function(){$j("body").animate({scrollTop:0},600)})},SE.registerBehavior("scroll_to_top",function(t,e){SE.setupScrolltoTop($j(e))}),SE.didScrollBlockCount=!1,SE.updateSearchBlockCount=function(t){var e=12,i=$j(window),t=t,n=t.attr("se:result_count");i.bind("scroll",function(){SE.didScrollBlockCount=!0}),setInterval(function(){if(SE.didScrollBlockCount){$j(window).scrollTop();last_block=0,blocks_above_viewport=$j(".listing_block,.closing_block,.building_block").filter(function(){var t=SE.checkVisible($j(this))&&!$j(this).hasClass("loadable");return t&&(last_block=$j(this).data("blockindex")),t}),from_count=last_block*e+1,to_count=(last_block+1)*e,to_count=to_count>n?n:to_count,$j(t).html(number_with_delimiter(from_count)+" - "+number_with_delimiter(to_count)),SE.didScrollBlockCount=!1}},250)},SE.registerBehavior("update_search_block_count",function(t,e){SE.updateSearchBlockCount($j(e))}),SE.checkVisible=function(t){var e=$j(window).height(),i=$j(window).scrollTop(),n=$j(t).offset().top;return!(n>e+i)},SE.calculateFormOffsetFromTop=function(t){return void 0!==t.attr("se:pin_along_with")?$j(t.attr("se:pin_along_with")).offset().top:t.offset().top},SE.setupScrollPinDown=function(t){var e=$j(window),i=$j("#content"),n=(t.offset(),SE.calculateFormOffsetFromTop(t)),o=t.offset().left-i.offset().left,s=e.scrollLeft(),r=!1;e.bind("scroll",function(){var a=e.scrollTop()+$j(".HeaderBlock").height()+t.height(),l=$j("[se\\:behavior='pin_to_top']");r?a<n?(r=!1,t.removeClass("pinned_to_top"),t.css("top","inherit"),t.css("left","inherit"),t.css("position","inherit"),void 0!==t.attr("se:next_element_selector")&&$j(t.attr("se:next_element_selector")).css("margin-top","auto")):s!=e.scrollLeft()&&(s=e.scrollLeft(),t.css("left",i.offset().left+o)):a>n&&(r=!0,s=e.scrollLeft(),t.addClass("pinned_to_top"),void 0!==t.attr("se:next_element_selector")&&$j(t.attr("se:next_element_selector")).css("margin-top",t.attr("se:next_element_margin")+"px"),l.size()>0&&l[0]!=t[0]?(offset_for_pinned_elements_above=$j.sum($j.grep($j.map(l,function(t){return $j(t).height()}),function(e){return e<t.height()})),t.css("top",offset_for_pinned_elements_above+"px")):t.css("top",+$j(".HeaderBlock").height()+"px"),t.css("left",i.offset().left+o+"px"),t.css("position","fixed"),t.css("width","980px"))}),e.bind("resize",function(){r&&(s=e.scrollLeft(),t.css("left",i.offset().left+o+"px"))})},SE.registerBehavior("pin_to_top",function(t,e){SE.setupScrollPinDown($j(e))}),SE.didScrollDominoes=!1,SE.setupScrollDominoes=function(t){var e=$j(window),i=t.offset().top+t.height(),n=200+e.height();e.bind("scroll",function(){SE.didScrollDominoes=!0}),setInterval(function(){var o=e.scrollTop();(SE.didScrollDominoes||o>i-n)&&(t.next().trigger("se:andale"),SE.didScrollDominoes=!1)},200),e.bind("resize",function(){var o=e.scrollTop();o>i-n&&t.next().trigger("se:andale"),n=200+e.height()})},SE.registerBehavior("scrolldominoes",function(t,e){SE.setupScrollDominoes($j(e))}),+function(t){t(function(){t(window).bind("scroll resize",function(){if(t(".right").length>0){var e=t(".right").height()-t(".sidebar").height()+t(".right").offset().top,i=t(this).scrollTop();if(i<t(".right").offset().top)t(".sidebar").css({position:"absolute",top:"0",right:"0"});else if(i>e)t(".sidebar").css({position:"absolute",bottom:"0",top:"auto",right:"0"});else{var n=t(window).width()-(t(".right").offset().left+t(".right").width());t(".sidebar").css({position:"fixed",top:0==t(".view-options").length?0:60,right:n})}}})})}(jQuery),SE.activateAntidoubleclickinator=function(t){t.data("se:tricks:antidoubleclickinated")||(t.data("se:tricks:antidoubleclickinated",!0),t.on("click",function(){if(t.data("se:tricks:already_clicked"))return!1;var e=t.attr("se:click_timeout")||10;return t.data("se:tricks:already_clicked",!0),t.addClass("already_clicked"),setTimeout(function(){t.data("se:tricks:already_clicked",!1),t.removeClass("already_clicked")},1e3*e),!0}))},SE.resetAntidoubleclickinator=function(){$j(document).find(".already_clicked").each(function(t,e){$j(e).data("se:tricks:already_clicked",!1),$j(e).removeClass("already_clicked")})},$j(SE).on("se:prepare_content",function(t,e){$j(e).find("[type=submit]").each(function(t,e){SE.activateAntidoubleclickinator($j(e))}),$j(e).find("input[type=button]").each(function(t,e){SE.activateAntidoubleclickinator($j(e))})}),$j(SE).on("se:overlay_displayed",function(){SE.resetAntidoubleclickinator()}),SE.setupCoordination=function(t){var e=t.attr("se:coordinator")||"master";if(SE.coordinated=SE.coordinated||{},SE.coordinated[e]=SE.coordinated[e]||[],t.is("A")){var i=t.attr("se:coordination:value");t.on("click",function(){SE.coordinate(e,t,i)})}else SE.coordinated[e].push(t),t.on("se:changed",function(i){SE.coordinate(e,t,i.value)})},SE.coordinate=function(t,e,i){var n=SE.coordinated[t]||[];return SE.coordinating=SE.coordinating||{},!SE.coordinating[t]&&(SE.coordinating[t]=!0,$j.each(n,function(n,o){try{o!=e&&o.trigger(jQuery.Event("se:coordinate",{coordinator:t,jtrigger:e,value:i}))}catch(i){console&&console.log&&console.log("Exception when coordinating "+t,e,o,i.stack)}}),SE.coordinating[t]=!1,void 0)},SE.registerBehavior("coordinated",function(t,e){SE.setupCoordination($j(e))}),SE.isHistoryAvailable=function(){return!(!window.history||!history.pushState)},SE.setupHistoriable=function(t){if(SE.isHistoryAvailable()&&(t.on("se:coordinate",function(e){var i=t.children("[se\\:behavior*=historiable]");if(e.value>=0&&e.value<i.length)if(window.history.state&&window.history.state.index==e.value);else{var n=$j(i[e.value]).attr("se:history_url")||$j(i[e.value]).attr("se:url");window.history.pushState({index:e.value},null,n)}}),$j(window).on("popstate",function(e){e.originalEvent.state&&e.originalEvent.state.index>=0&&(console.log("Pop State "+e.originalEvent.state.index),t.trigger(jQuery.Event("se:changed",{value:e.originalEvent.state.index})))}),!(window.history.state&&window.history.state.index>=0))){var e=t.children("[se\\:behavior*=historiable]").index(t.children(".selected")[0]);window.history.replaceState({index:e},null,document.URL)}},SE.registerBehavior("historian",function(t,e){SE.setupHistoriable($j(e))}),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one(t.support.transition.end,function(){i=!0});var o=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(o,e),this},t(function(){t.support.transition=e()})}(jQuery),SE.setupTriggerOnPageLoad=function(t){window.setTimeout(function(){t.trigger("se:andale")},0)},SE.registerBehavior("trigger_on_page_load",function(t,e){SE.setupTriggerOnPageLoad($j(e))}),SE.__tableFilterKey="se:tablefilter:table:filters",SE.setupTableFilter=function(t){t.keyup(function(e){var i=t.attr("se:tablefilter:table"),n=$j(i);e.stopPropagation(),n.data(SE.__tableFilterKey,$j.extend({text:null},n.data(SE.__tableFilterKey)||{}));var o=$j(this).val().toLowerCase(),s=n.data(SE.__tableFilterKey);s.text=""===o?null:o,n.data(SE.__tableFilterKey,s),"#past_transactions_table"===i?SE.applyTableFiltersForPastTransactions(n):SE.applyTableFilters(n)})},SE.setupPastActivityTableFilter=function(t){var e=t.attr("se:tablefilter:table"),i=$j(e);i.attr("se:url");t.change(function(t){t.stopPropagation(),i.data(SE.__tableFilterKey,$j.extend({entryType:"all"},i.data(SE.__tableFilterKey)||{}));var e=$j(this).val().toLowerCase(),n=i.data(SE.__tableFilterKey);n.entryType=e||"all",i.data(SE.__tableFilterKey,n),SE.applyTableFilters(i)})},SE.loadAllOnClick=function(jelem){var table_id=jelem.attr("se:target_element"),callback=jelem.attr("se:callback"),$table=$j(table_id),url=$table.attr("se:url");jelem.click(function(event){event.stopPropagation();var $section=$table.parent();$section.find("div.loading").empty(),$table.hide();var $see_all_link=$table.siblings("#see_all_activity_link");""===$section.find("i.icon-spinner").text()&&$see_all_link.prepend("<div class='loading'><i class='icon-spinner icon-spin'></i> Loading...</div>"),$j.when($j.ajax({url:url,dataType:"html",timeout:0,accepts:{html:"text/javascript, application/javascript"}})).then(function(response){var result;$j.parseHTML(response).some(function(t){return"TABLE"===t.nodeName&&(result=t,!0)}),$section.find("div.loading").empty();var $newRows=$j(result).find("tbody > tr");$table.find("tbody").empty(),$table.find("tbody").append($newRows),$table.show(),jelem.parent().hide(),"undefined"!=typeof callback&&eval(callback)()}).fail(function(){$table.html("<div class='error'><i class='icon-warning-sign'></i> Unexpected Error</div>"),console.log("Failed loading ",$table)})})},SE.applyTableFilters=function(t){var e=t.data(SE.__tableFilterKey)||{},i=t.find("tbody > tr");i.hide(),i=SE.findNewRows(i,e),i.show(),SE.updateZebra(t)},SE.applyTableFiltersForPastTransactions=function(t){var e=t.attr("se:url"),i=t.parent();i.find("div.loading").empty(),t.hide();var n=t.siblings("#see_all_activity_link");""===i.find("i.icon-spinner").text()&&n.append("<div class='loading'><i class='icon-spinner icon-spin'></i> Loading...</div>"),$j.when($j.ajax({url:e,dataType:"html",timeout:0,accepts:{html:"text/javascript, application/javascript"}})).then(function(e){var n;$j.parseHTML(e).some(function(t){return"TABLE"===t.nodeName&&(n=t,!0)}),i.find("div.loading").empty(),t.show();var o=$j(n).find("tbody > tr");SE.applyTableFilters(t,o);var s=t.data(SE.__tableFilterKey)||{},r=t.find("tbody > tr");o=SE.findNewRows(o,s),r.hide(),t.find("tbody").append(o),SE.updateZebra(t)}).fail(function(){t.html("<div class='error'><i class='icon-warning-sign'></i> Unexpected Error</div>"),console.log("Failed loading ",t)})},SE.findNewRows=function(t,e){for(var i in e){var n=e[i];if(n)if("text"===i)t=t.find("td").filter(function(){var t=$j(this).text().replace(/&nbsp;|\s+/g," ").toLowerCase();return t.replace(/,/g,"").indexOf(n)!=-1||t.indexOf(n)!=-1}).parent("tr");else if("entryType"===i){if("all"===n)continue;t=t.find("td.entry_type").filter(function(){return $j(this).data("entryType").indexOf(n)!==-1}).parent("tr")}}return t},SE.updateZebra=function(t){SE.hasZebraStripes(t)&&t.find("tbody tr:visible").each(function(t){$j(this).removeClass("even odd"),t%2==0?$j(this).addClass("even"):$j(this).addClass("odd")})},SE.hasZebraStripes=function(t){return t.attr("se:behavior").match(/zebra_stripe/)},SE.setupTableFilterRemote=function(){that=this,$j(document).on("keyup",".table-filter-remote",function(){trgt_elem=$j(".tabset-content-container.remote .tabset-content.selected"),url=$j(trgt_elem).attr("se:url"),this.value.length>1&&(url+=url.indexOf("?")>-1?"&":"?",url+="filter="+escape(this.value)),(url.indexOf("filter")>-1||""==this.value)&&$j.get(url,function(t){trgt_elem.html(t)})})},SE.registerBehavior("tablefilter",function(t,e){SE.setupTableFilter($j(e))}),SE.registerBehavior("tablefilterRemote",function(t,e){SE.setupTableFilterRemote($j(e))}),SE.registerBehavior("past_activity_tablefilter",function(t,e){SE.setupPastActivityTableFilter($j(e))}),SE.registerBehavior("load_all_on_click",function(t,e){SE.loadAllOnClick($j(e))}),SE.setupSorTable=function(t){table=t.stupidtable(),table.find("th[data-sort]").each(function(){0==$j(this).find("i").length&&$j(this).append('<i class="icon-sort"></i>'),$j(this).wrapInner("<span/>")}),table.on("beforetablesort",function(){}),table.on("aftertablesort",function(t,e){var i=$j(this).find("th");i.find(".icon-caret-up, .icon-caret-down, .icon-sort").remove();var n=$j.fn.stupidtable.dir;SE.updateZebra($j(this));var o=e.direction===n.ASC?"up":"down";i.eq(e.column).find("span").append('<i class="sorted icon-caret-'+o+'"></i>'),$j(this).find("th[data-sort]").each(function(t){obj=$j(this),t!=e.column&&"undefined"!=typeof obj.data("sort")&&obj.find("span").append('<i class="icon-sort"></i>')})})},SE.setupSorTableRemote=function(t){table=t,table.find("th[data-sort]").each(function(){0==$j(this).find("i").length&&$j(this).append('<i class="icon-sort"></i>'),$j(this).wrapInner("<span/>")}),active_tab=".tabset-content-container.remote .tabset-content.selected",$j(active_tab).on("click","table th[data-sort]",function(){that=this,$j(that).closest("div[pager-url]").length>0?url=$j(that).closest("div[pager-url]").attr("pager-url"):url=$j(that).closest(active_tab).attr("se:url"),url+=url.indexOf("?")>-1?"&":"?",url+="order_by="+$j(that).data("sort"),$j(that).find("i.icon-caret-down").length>0?url+="&dir=asc":url+="&dir=desc",$j.get(url,function(t){$j(that).closest("div[pager-url]").length>0?$j(that).closest("div[pager-url]").html(t):$j(that).closest(active_tab).html(t)})})},SE.registerBehavior("sor_table",function(t,e){SE.setupSorTable($j(e))}),SE.registerBehavior("sor_table_remote",function(t,e){SE.setupSorTableRemote($j(e))}),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports&&"function"==typeof require?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){var o=function(){},s=this,r={ajaxSettings:{},autoSelectFirst:!1,appendTo:document.body,serviceUrl:null,lookup:null,onSelect:null,width:"auto",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:e.formatResult,delimiter:null,zIndex:1e4,type:"GET",noCache:!1,onSearchStart:o,onSearchComplete:o,onSearchError:o,containerClass:"autocomplete-suggestions",tabDisabled:!1,dataType:"text",currentRequest:null,triggerSelectOnValidInput:!0,preventBadQueries:!0,lookupFilter:function(t,e,i){return t.value.toLowerCase().indexOf(i)!==-1},paramName:"term",transformResult:function(e){return"string"==typeof e?t.parseJSON(e):e},showNoSuggestionNotice:!1,noSuggestionNotice:"No results",orientation:"bottom",forceFixPosition:!1};s.element=i,s.el=t(i),s.suggestions=[],s.badQueries=[],s.selectedIndex=-1,s.currentValue=s.element.value,s.intervalId=0,s.cachedResponse={},s.onChangeInterval=null,s.onChange=null,s.isLocal=!1,s.suggestionsContainer=null,s.noSuggestionsContainer=null,s.options=t.extend({},r,n),s.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"},s.hint=null,s.hintValue="",s.selection=null,s.initialize(),s.setOptions(n)}var i=function(){return{escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},createNode:function(t){var e=document.createElement("div");return e.className=t,e.style.position="absolute",e.style.display="none",e}}}(),n={ESC:27,TAB:9,RETURN:13,LEFT:37,UP:38,RIGHT:39,DOWN:40};e.utils=i,t.Autocomplete=e,e.formatResult=function(t,e){var n="("+i.escapeRegExChars(e)+")";return void 0==t.label?t.value.replace(new RegExp(n,"gi"),"<strong>$1</strong>"):t.label.replace(new RegExp(n,"gi"),"<strong>$1</strong>")},e.prototype={killerFn:null,initialize:function(){var i,n=this,o="."+n.classes.suggestion,s=n.classes.selected,r=n.options;n.element.setAttribute("autocomplete","off"),n.killerFn=function(e){0===t(e.target).closest("."+n.options.containerClass).length&&(n.killSuggestions(),n.disableKillerFn())},n.noSuggestionsContainer=t('<div class="autocomplete-no-suggestion"></div>').html(this.options.noSuggestionNotice).get(0),n.suggestionsContainer=e.utils.createNode(r.containerClass),i=t(n.suggestionsContainer),i.appendTo(r.appendTo),"auto"!==r.width&&i.width(r.width),i.on("mouseover.autocomplete",o,function(){n.activate(t(this).data("index"))}),i.on("mouseout.autocomplete",function(){n.selectedIndex=-1,i.children("."+s).removeClass(s)}),i.on("click.autocomplete",o,function(){n.select(t(this).data("index"))}),n.fixPositionCapture=function(){n.visible&&n.fixPosition()},t(window).on("resize.autocomplete",n.fixPositionCapture),n.el.on("keydown.autocomplete",function(t){n.onKeyPress(t)}),n.el.on("keyup.autocomplete",function(t){n.onKeyUp(t)}),n.el.on("blur.autocomplete",function(){n.onBlur()}),n.el.on("focus.autocomplete",function(){n.onFocus()}),n.el.on("change.autocomplete",function(t){n.onKeyUp(t)})},onFocus:function(){var t=this;t.fixPosition(),t.options.minChars<=t.el.val().length&&t.onValueChange()},onBlur:function(){this.enableKillerFn()},setOptions:function(e){var i=this,n=i.options;t.extend(n,e),i.isLocal=t.isArray(n.lookup),i.isLocal&&(n.lookup=i.verifySuggestionsFormat(n.lookup)),n.orientation=i.validateOrientation(n.orientation,"bottom"),t(i.suggestionsContainer).css({"max-height":n.maxHeight+"px",width:n.width+"px","z-index":n.zIndex})},clearCache:function(){this.cachedResponse={},this.badQueries=[]},clear:function(){this.clearCache(),this.currentValue="",this.suggestions=[]},disable:function(){var t=this;t.disabled=!0,clearInterval(t.onChangeInterval),t.currentRequest&&t.currentRequest.abort()},enable:function(){this.disabled=!1},fixPosition:function(){var e=this,i=t(e.suggestionsContainer),n=i.parent().get(0);if(n===document.body||e.options.forceFixPosition){var o=e.options.orientation,s=i.outerHeight(),r=e.el.outerHeight(),a=e.el.offset(),l={top:a.top,left:a.left};if("auto"==o){var u=t(window).height(),c=t(window).scrollTop(),h=-c+a.top-s,d=c+u-(a.top+r+s);o=Math.max(h,d)===h?"top":"bottom"}if("top"===o?l.top+=-s:l.top+=r,n!==document.body){var p,f=i.css("opacity");e.visible||i.css("opacity",0).show(),p=i.offsetParent().offset(),l.top-=p.top,l.left-=p.left,e.visible||i.css("opacity",f).hide()}"auto"===e.options.width&&(l.width=e.el.outerWidth()-2+"px"),i.css(l)}},enableKillerFn:function(){var e=this;t(document).on("click.autocomplete",e.killerFn)},disableKillerFn:function(){var e=this;t(document).off("click.autocomplete",e.killerFn)},killSuggestions:function(){var t=this;t.stopKillSuggestions(),t.intervalId=window.setInterval(function(){t.hide(),t.stopKillSuggestions()},50)},stopKillSuggestions:function(){window.clearInterval(this.intervalId)},isCursorAtEnd:function(){var t,e=this,i=e.el.val().length,n=e.element.selectionStart;return"number"==typeof n?n===i:!document.selection||(t=document.selection.createRange(),t.moveStart("character",-i),i===t.text.length)},onKeyPress:function(t){var e=this;if(!e.disabled&&!e.visible&&t.which===n.DOWN&&e.currentValue)return void e.suggest();if(!e.disabled&&e.visible){switch(t.which){case n.ESC:e.el.val(e.currentValue),e.hide();break;case n.RIGHT:if(e.hint&&e.options.onHint&&e.isCursorAtEnd()){e.selectHint();break}return;case n.TAB:if(e.hint&&e.options.onHint)return void e.selectHint();case n.RETURN:if(e.selectedIndex===-1)return void e.hide();if(e.select(e.selectedIndex),t.which===n.TAB&&e.options.tabDisabled===!1)return;break;case n.UP:e.moveUp();break;case n.DOWN:e.moveDown();break;default:return}t.stopImmediatePropagation(),t.preventDefault()}},onKeyUp:function(t){var e=this;if(!e.disabled){switch(t.which){case n.UP:case n.DOWN:return}clearInterval(e.onChangeInterval),e.currentValue!==e.el.val()&&(e.findBestHint(),e.options.deferRequestBy>0?e.onChangeInterval=setInterval(function(){e.onValueChange()},e.options.deferRequestBy):e.onValueChange())}},onValueChange:function(){var e,i=this,n=i.options,o=i.el.val(),s=i.getQuery(o);return i.selection&&i.currentValue!==s&&(i.selection=null,(n.onInvalidateSelection||t.noop).call(i.element)),clearInterval(i.onChangeInterval),i.currentValue=o,i.selectedIndex=-1,n.triggerSelectOnValidInput&&(e=i.findSuggestionIndex(s),e!==-1)?void i.select(e):void(s.length<n.minChars?i.hide():i.getSuggestions(s))},findSuggestionIndex:function(e){var i=this,n=-1,o=e.toLowerCase();return t.each(i.suggestions,function(t,e){if(e.value.toLowerCase()===o)return n=t,!1}),n},getQuery:function(e){var i,n=this.options.delimiter;return n?(i=e.split(n),t.trim(i[i.length-1])):e},getSuggestionsLocal:function(e){var i,n=this,o=n.options,s=e.toLowerCase(),r=o.lookupFilter,a=parseInt(o.lookupLimit,10);return i={suggestions:t.grep(o.lookup,function(t){return r(t,e,s)})},a&&i.suggestions.length>a&&(i.suggestions=i.suggestions.slice(0,a)),i},getSuggestions:function(e){var i,n,o,s,r=this,a=r.options,l=a.serviceUrl;if(a.params[a.paramName]=e,n=a.ignoreParams?null:a.params,a.onSearchStart.call(r.element,a.params)!==!1){if(t.isFunction(r.lookup))return void r.lookup(e,function(t){r.suggestions=t.suggestions,r.suggest(),a.onSearchComplete.call(r.element,e,t.suggestions)});r.isLocal?i=r.getSuggestionsLocal(e):(t.isFunction(l)&&(l=l.call(r.element,e)),o=l+"?"+t.param(n||{}),i=r.cachedResponse[o]),i&&t.isArray(i.suggestions)?(r.suggestions=i.suggestions,r.suggest(),a.onSearchComplete.call(r.element,e,i.suggestions)):r.isBadQuery(e)?a.onSearchComplete.call(r.element,e,[]):(r.currentRequest&&r.currentRequest.abort(),s={url:l,data:n,type:a.type,dataType:a.dataType},t.extend(s,a.ajaxSettings),r.currentRequest=t.ajax(s).done(function(t){var i;r.currentRequest=null,i=a.transformResult(t),r.processResponse(i,e,o),a.onSearchComplete.call(r.element,e,i.suggestions)}).fail(function(t,i,n){a.onSearchError.call(r.element,e,t,i,n)}))}},isBadQuery:function(t){if(!this.options.preventBadQueries)return!1;for(var e=this.badQueries,i=e.length;i--;)if(0===t.indexOf(e[i]))return!0;return!1},hide:function(){var e=this;e.visible=!1,e.selectedIndex=-1,clearInterval(e.onChangeInterval),t(e.suggestionsContainer).hide(),e.signalHint(null)},suggest:function(){if(0===this.suggestions.length)return void(this.options.showNoSuggestionNotice?this.noSuggestions():this.hide());var e,i,n=this,o=n.options,s=o.groupBy,r=o.formatResult,a=n.getQuery(n.currentValue),l=n.classes.suggestion,u=n.classes.selected,c=t(n.suggestionsContainer),h=t(n.noSuggestionsContainer),d=o.beforeRender,p="",f=function(t){var i=t.data[s];return e===i?"":(e=i,'<div class="autocomplete-group"><strong>'+e+"</strong></div>")};return o.triggerSelectOnValidInput&&(i=n.findSuggestionIndex(a),i!==-1)?void n.select(i):(t.each(n.suggestions,function(t,e){s&&(p+=f(e,a,t)),p+='<div class="'+l+'" data-index="'+t+'">'+r(e,a)+"</div>"}),this.adjustContainerWidth(),h.detach(),c.html(p),t.isFunction(d)&&d.call(n.element,c),n.fixPosition(),c.show(),o.autoSelectFirst&&(n.selectedIndex=0,c.scrollTop(0),c.children().first().addClass(u)),n.visible=!0,void n.findBestHint())},noSuggestions:function(){var e=this,i=t(e.suggestionsContainer),n=t(e.noSuggestionsContainer);this.adjustContainerWidth(),n.detach(),i.empty(),i.append(n),e.fixPosition(),i.show(),e.visible=!0},adjustContainerWidth:function(){var e,i=this,n=i.options,o=t(i.suggestionsContainer);"auto"===n.width&&(e=i.el.outerWidth()-2,o.width(e>0?e:300))},findBestHint:function(){var e=this,i=e.el.val().toLowerCase(),n=null;i&&(t.each(e.suggestions,function(t,e){var o=0===e.value.toLowerCase().indexOf(i);return o&&(n=e),!o}),e.signalHint(n))},signalHint:function(e){var i="",n=this;e&&(i=n.currentValue+e.value.substr(n.currentValue.length)),n.hintValue!==i&&(n.hintValue=i,n.hint=e,(this.options.onHint||t.noop)(i))},verifySuggestionsFormat:function(e){return e.length&&"string"==typeof e[0]?t.map(e,function(t){return{value:t,data:null}}):e},validateOrientation:function(e,i){return e=t.trim(e||"").toLowerCase(),t.inArray(e,["auto","bottom","top"])===-1&&(e=i),e},processResponse:function(t,e,i){var n=this,o=n.options,s={suggestions:t};t=s,t.suggestions=n.verifySuggestionsFormat(t.suggestions),o.noCache||(n.cachedResponse[i]=t,o.preventBadQueries&&0===t.suggestions.length&&n.badQueries.push(e)),e===n.getQuery(n.currentValue)&&(n.suggestions=t.suggestions,n.suggest())},activate:function(e){var i,n=this,o=n.classes.selected,s=t(n.suggestionsContainer),r=s.find("."+n.classes.suggestion);return s.find("."+o).removeClass(o),n.selectedIndex=e,n.selectedIndex!==-1&&r.length>n.selectedIndex?(i=r.get(n.selectedIndex),t(i).addClass(o),i):null},selectHint:function(){var e=this,i=t.inArray(e.hint,e.suggestions);e.select(i)},select:function(t){var e=this;e.hide(),e.onSelect(t)},moveUp:function(){var e=this;if(e.selectedIndex!==-1)return 0===e.selectedIndex?(t(e.suggestionsContainer).children().first().removeClass(e.classes.selected),e.selectedIndex=-1,e.el.val(e.currentValue),void e.findBestHint()):void e.adjustScroll(e.selectedIndex-1)},moveDown:function(){var t=this;t.selectedIndex!==t.suggestions.length-1&&t.adjustScroll(t.selectedIndex+1)},adjustScroll:function(e){var i=this,n=i.activate(e);if(n){var o,s,r,a=t(n).outerHeight();o=n.offsetTop,s=t(i.suggestionsContainer).scrollTop(),r=s+i.options.maxHeight-a,o<s?t(i.suggestionsContainer).scrollTop(o):o>r&&t(i.suggestionsContainer).scrollTop(o-i.options.maxHeight+a),void 0==this.options.altFocusDisplay?i.el.val(i.getValue(i.suggestions[e].value)):this.options.altFocusDisplay(i.suggestions[e]),i.signalHint(null)}},onSelect:function(e){var i=this,n=i.options.onSelect,o=i.suggestions[e];i.currentValue=i.getValue(o.value),i.currentValue!==i.el.val()&&i.el.val(i.currentValue),i.signalHint(null),i.suggestions=[],i.selection=o,t.isFunction(n)&&n.call(i.element,o)},getValue:function(t){var e,i,n=this,o=n.options.delimiter;return o?(e=n.currentValue,i=e.split(o),1===i.length?t:e.substr(0,e.length-i[i.length-1].length)+t):t},dispose:function(){var e=this;e.el.off(".autocomplete").removeData("autocomplete"),e.disableKillerFn(),t(window).off("resize.autocomplete",e.fixPositionCapture),t(e.suggestionsContainer).remove()}},t.fn.autocomplete=t.fn.devbridgeAutocomplete=function(i,n){var o="autocomplete";return 0===arguments.length?this.first().data(o):this.each(function(){var s=t(this),r=s.data(o);"string"==typeof i?r&&"function"==typeof r[i]&&r[i](n):(r&&r.dispose&&r.dispose(),r=new e(this,i),s.data(o,r))})}}),SE.setupAutocompletable=function(t){var e=t.attr("se:autocompletable:url"),i=t.attr("se:autocompletable:minChars");i="undefined"!=typeof i?i:2;var n={serviceUrl:e,minChars:2},o=t.attr("se:autocompletable:spinner");"undefined"!==o&&(n.onSearchStart=function(){$j(o).show()},n.onSearchComplete=function(){$j(o).hide()}),t.devbridgeAutocomplete(n)},SE.registerBehavior("autocompletable",function(t,e){SE.setupAutocompletable($j(e))}),SE.AreaMapSelector=function(t,e){this.jelem=t,this.mapId=t.attr("se:area_map_selector:map"),this.root=new SE.AreaMapSelector.Node({id:e}),this.areaNodeMap={},this.areaNodeMap[e]=this.root,this.styles=t.data("areamapselectorStyle"),this.defaultCenter=t.data("areamapselectorDefaultcenter"),this.defaultZoom=t.data("areamapselectorDefaultzoom"),this.backingField=t.data("areamapselectorBackingfield"),this.selectedAreas=[],this.currentlyHighlightedArea=null,this.zoomBackTimeout=null,this.hoverTimeout=null;var i=[],n=this;this.jelem.find(".area_map_selector_checkbox").each(function(){var t=$j(this).data("areaNode");t.areaMapSelector=n,t.checkbox=this,t.polygons=[],t.tabId=$j(this).attr("se:area_map_selector:tabid"),$j('label[se\\:area_map_selector\\:area="'+t.id+'"]').each(function(){t.label=this}),$j('div[se\\:behavior="map_polygon"][se\\:map="'+n.mapId+'"][se\\:map\\:group="'+t.id+'"]').each(function(){var e=$j(this).data("map:elem");e&&(t.polygons.push(e),e.setStyle&&e.setStyle(t.areaMapSelector.styleFor("normal",t.level)))}),i.push(t)}),i.sort(function(t,e){return t.level-e.level});for(var o=0;o<i.length;o++){var s=new SE.AreaMapSelector.Node(i[o]),r=this.areaNodeMap[s.model.parent_id];r.addChild(s),this.areaNodeMap[s.model.id]=s}if(this.backingField){for(var n=this,a=$j(this.backingField+":checked"),l=[],o=0;o<a.length;o++)l.push(a[o].value);for(var u=0;u<l.length;u++){var c=parseInt(l[u],10);n.selectedAreas.push(c);var s=n.areaNodeMap[c];s.model.checkbox.checked=!0;for(var o=0;o<s.children.length;o++)s.children[o].walk(function(){return this.model.checkbox.checked=!0,this.model.checkbox.disabled=!0,!0});for(var h=n.styleFor("selected",s.model.level),o=0;o<s.model.polygons.length;o++)s.model.polygons[o]&&s.model.polygons[o].setStyle&&s.model.polygons[o].setStyle(h)}}var n=this;window.setTimeout(function(){n.frameSelectedAreas()},500)},SE.AreaMapSelector.prototype={styleFor:function(t,e){var i={};return $j.extend(i,this.styles.normal.base),$j.extend(i,this.styles.normal[e]),"highlighted"!==t&&"high_sel"!==t||($j.extend(i,this.styles.highlighted.base),$j.extend(i,this.styles.highlighted[e])),"selected"!==t&&"high_sel"!==t||($j.extend(i,this.styles.selected.base),$j.extend(i,this.styles.selected[e])),"high_sel"===t&&($j.extend(i,this.styles.high_sel.base),$j.extend(i,this.styles.high_sel[e])),i},frameSelectedAreas:function(){var t=this.areaNodeMap,e=$j.map(this.selectedAreas,function(e){return t[e].model.polygons});e=_.flatten(e),e=_.compact(e),e.length>0?SEMaps._maps[this.mapId].easyFramePath(e):SEMaps._maps[this.mapId].setView(new L.LatLng(this.defaultCenter[1],this.defaultCenter[0]),this.defaultZoom,!1)}},SE.AreaMapSelector.Node=function(t){if(this.model=t,this.children=[],"undefined"!=typeof this.model.checkbox){$j(this.model.checkbox).change({node:this,onCheckbox:!0},this.click),$j(this.model.label).mouseover({node:this,onCheckbox:!0},this.mouseOver),$j(this.model.label).mouseout({node:this,onCheckbox:!0},this.mouseOut);for(var e=0;e<this.model.polygons.length;e++){var i=this;this.model.polygons[e].on("click",function(){i.click({data:{node:i,onPolygon:!0}})}),this.model.polygons[e].on("mouseover",function(){i.mouseOver({data:{node:i,onPolygon:!0}})}),this.model.polygons[e].on("mouseout",function(){i.mouseOut({data:{node:i,onPolygon:!0}})})}}},SE.AreaMapSelector.Node.prototype={isRoot:function(){return void 0===this.parent},addChild:function(t){
if(!(t instanceof SE.AreaMapSelector.Node))throw new TypeError("Child must be of type SE.AreaMapSelector.Node.");return t.parent=this,this.children.push(t),t},walk:function(t){var e,i,n;for(n=t.call(this),e=0,i=this.children.length;e<i;e++){if(n===!1)return!1;n=this.walk.call(this.children[e],t)}return n},click:function(t){var e=t.data.node,i=e.model.areaMapSelector,n=e.model.checkbox,o=i.selectedAreas;if(!n||!n.disabled){var s=function(t){var e=$j("#area_map_selector_area_"+t);e.prop("checked")||e.prop("checked",!0).change()},r=o.indexOf(e.model.id);if(r>-1){o.splice(r,1),t.data.onPolygon&&(n.checked=!1);for(var a=0;a<e.children.length;a++)e.children[a].walk(function(){return this.model.checkbox.checked=!1,this.model.checkbox.disabled=!1,!0});for(var l=i.styleFor(t.data.onPolygon?"highlighted":"normal",e.model.level),a=0;a<e.model.polygons.length;a++)e.model.polygons[a]&&e.model.polygons[a].setStyle&&e.model.polygons[a].setStyle(l);if(i.backingField){var u=$j(i.backingField+"[value="+e.model.id+"]");u.prop("checked",!1).trigger("change")}}else{o.push(e.model.id),t.data.onPolygon&&(n.checked=!0);for(var a=0;a<e.children.length;a++)e.children[a].walk(function(){return this.model.checkbox.checked=!0,this.model.checkbox.disabled=!0,!0});for(var l=i.styleFor(t.data.onPolygon?"high_sel":"selected",e.model.level),a=0;a<e.model.polygons.length;a++)e.model.polygons[a]&&e.model.polygons[a].setStyle&&e.model.polygons[a].setStyle(l);if(i.backingField){var u=$j(i.backingField+"[value="+e.model.id+"]");u.prop("checked",!0).change(),!u.data("non-sale-checked-with")||$j("body.sale").length||$j("body.sales_home").length||s(u.data("non-sale-checked-with")),u.data("always-checked-with")&&s(u.data("always-checked-with"))}}}},mouseOver:function(t){var e=t.data.node,i=e.model.areaMapSelector;e.highlight(),i.zoomBackTimeout&&(window.clearTimeout(i.zoomBackTimeout),i.zoomBackTimeout=null),t.data.onPolygon&&e.model.tabId&&(i.hoverTimeout=window.setTimeout(function(){$j(e.model.tabId).trigger("click")},1e3)),t.data.onCheckbox&&e.model.polygons.length>0&&(i.hoverTimeout=window.setTimeout(function(){SEMaps._maps[i.mapId].easyFramePath(e.model.polygons,!1)},1e3))},mouseOut:function(t){var e=t.data.node,i=e.model.areaMapSelector;e.dehighlight(),i.hoverTimeout&&(window.clearTimeout(i.hoverTimeout),i.hoverTimeout=null),i.zoomBackTimeout=window.setTimeout(function(){i.frameSelectedAreas()},2500)},highlight:function(){var t=this.model.areaMapSelector;if(t.currentlyHighlightedArea!==this){if(t.currentlyHighlightedArea&&(t.currentlyHighlightedArea.dehighlight(),t.currentlyHighlightedArea=null),this.model.polygons)for(var e=t.selectedAreas.indexOf(this.model.id)>-1,i=t.styleFor(e?"high_sel":"highlighted",this.model.level),n=0;n<this.model.polygons.length;n++)this.model.polygons[n]&&this.model.polygons[n].setStyle&&this.model.polygons[n].setStyle(i);$j(this.model.label).addClass("hover"),t.currentlyHighlightedArea=this}},dehighlight:function(){var t=this.model.areaMapSelector;if(t.currentlyHighlightedArea===this&&(t.currentlyHighlightedArea=null),this.model.polygons)for(var e=t.selectedAreas.indexOf(this.model.id)>-1,i=t.styleFor(e?"selected":"normal",this.model.level),n=0;n<this.model.polygons.length;n++)this.model.polygons[n]&&this.model.polygons[n].setStyle&&this.model.polygons[n].setStyle(i);$j(this.model.label).removeClass("hover")}},SE.setupAreaMapSelector=function(t){var e=new SE.AreaMapSelector(t,parseInt(t.attr("se:area_map_selector:root_area")));t.data("se:area_map_selector:instance",e),t.on("se:changed",function(e){$j("#secondary_dialog_box").css("height",t.height()+100),e.stopPropagation()})},SE.registerBehavior("area_map_selector",function(t,e){SE.setupAreaMapSelector($j(e))}),SE.prepareBoundaryEditor=function(t){var e=$j(t.attr("se:boundary_editor:input_elem")),i=SEMaps._maps[t.attr("id")];i._boundaryEditorLoadedListener&&(i.off("load",i._boundaryEditorLoadedListener),i._boundaryEditorLoadedListener=null);var n=[],o=!1;if(e&&(encodedBoundary=e[0].value,encodedBoundary=encodedBoundary.replace(/\:\:\:\:/g,"|").replace(/^.*\-/,""),n=L.Util.decodeGooglePolyline(encodedBoundary)),""!=$j("#form_boundary_label")[0].innerHTML&&void 0!=$j("#form_boundary_label")[0].innerHTML&&($j("#boundary_editor_label")[0].preFocusValue=$j("#boundary_editor_label")[0].value,$j("#boundary_editor_label")[0].value=$j("#form_boundary_label")[0].innerHTML.replace(/\&amp;/,"&").replace(/\&gt;/,">").replace(/\&lt;/,"<")),n.length<1){o=!0;var s=i.getBounds(),r=s.getNorthEast().lat-s.getSouthWest().lat,a=s.getNorthEast().lng-s.getSouthWest().lng,l=s.getCenter(),n=[new L.LatLng(l.lat-r/5,l.lng-a/5),new L.LatLng(l.lat+r/5,l.lng-a/5),new L.LatLng(l.lat+r/5,l.lng+a/5),new L.LatLng(l.lat-r/5,l.lng+a/5)]}SE.setBoundary(n,i),editingBoundary.enableEditing()},SE.setBoundary=function(t,e){SE.removeAllBoundaries(e);var i=new L.Polygon(t,{weight:2,opacity:.7,color:"#0000AA",fillOpacity:.1});e.addLayer(i),e._seAddToGroup(i,"boundary"),e.fitBounds(i.getLatLngs()),window.editingBoundary=i,e._seRecenter()},SE.removeAllBoundaries=function(t){if(t._seGroups.hasOwnProperty("boundary")){var e=t._seGroups.boundary._layers;for(layer in e)t.removeLayer(e[layer])}},SE.setupCalculateBoundaryOnSubmit=function(t){t.on("click",function(){var e=$j(t.attr("se:boundary_on_submit:input_elem")),i=L.Util.encodeGooglePolyline(window.editingBoundary.getLatLngs());encodedBoundary=i.replace(/\|/g,"::::"),e[0].value=encodedBoundary;var n=$j("#boundary_editor_label")[0].value;""==n?n=(new Date).toDateString():e[0].value=n.replace(/\|/g,"::::")+"-"+encodedBoundary,option=new Option(n,encodedBoundary),$j("#saved_boundary")[0].add(option),$j("#saved_boundary").val(encodedBoundary),$j("#form_boundary_label")[0].innerHTML=n;var o=SEMaps._maps[t.attr("se:boundary_on_submit:form_map_elem")];SE.setBoundary(window.editingBoundary.getLatLngs(),o);var s=$j("#page_category")[0].value;SE.user||$j(document).trigger({type:"open.se.modal",options:{target:"#registerModal",modalClass:"modal-signin",modalSource:"/nyc/user/register_dialog",page_category:s,page_type:"homepage",origin:"custom_boundary",return_to:"back",boundary:encodedBoundary,label:n}});var r=t.attr("se:boundary_on_submit:url");$j.when($j.ajax({type:"POST",url:r,data:{boundary:encodedBoundary,label:n}})).then(function(){SE.hideSecondaryDialog()})})},SE.setupCustomBoundarySelector=function(t){t.on("change",function(){var e=SEMaps._maps[t.attr("se:custom_boundary_select:form_map_elem")];if(t[0].value!==t.attr("se:custom_boundary_default")){var i=t[0].value.replace(/\:\:\:\:/g,"|").replace(/^.*\-/,""),n=t[0].selectedIndex,o=t[0].options[n].text.replace(/\|/g,"::::");$j("#form_boundary_label")[0].innerHTML=o,$j(t.attr("se:custom_boundary_field"))[0].value=(o+"-"+i).replace(/\|/g,"::::"),boundary=L.Util.decodeGooglePolyline(i),SE.setBoundary(boundary,e)}else $j("#form_boundary_label")[0].innerHTML="",$j(t.attr("se:custom_boundary_field"))[0].value="",SE.removeAllBoundaries(e)})},SE.setupLoadMap=function(t){var e=$j("."+t.attr("class")+" .map");e&&SE.resetMap(e),$j("#dialog_box").on("se:andale se:load",function(e){e.stopPropagation(),window.setTimeout(function(){var e=$j("."+t.attr("class")+" .map");SE.resetMap(e)},0)})},SE.resetMap=function(t){if(t.is(":visible")){var e=SEMaps._maps[t.attr("id")];e&&e.invalidateSize()}},SE.registerBehavior("custom_boundary_select",function(t,e){SE.setupCustomBoundarySelector($j(e))}),SE.registerBehavior("boundary_editor",function(t,e){SE.prepareBoundaryEditor($j(e))}),SE.registerBehavior("boundary_on_submit",function(t,e){SE.setupCalculateBoundaryOnSubmit($j(e))}),SE.registerBehavior("load_map",function(t,e){SE.setupLoadMap($j(e))}),SE.pendingDefineRememberablePopstate=!0,SE.setupRememberable=function(t){SE.isHistoryAvailable()&&(t.on("click",function(){var e=t.data("blockindex"),i=t.attr("id");void 0!==e&&void 0!==i&&(window.history.replaceState({block_index:e,dom_id:i},null,document.location.href),console.log("block:"+e),console.log("dom_id:"+i))}),SE.pendingDefineRememberablePopstate&&(SE.pendingDefineRememberablePopstate=!1,$j(window).on("popstate",function(t){if(t.originalEvent.state&&void 0!==t.originalEvent.state.block_index&&void 0!==t.originalEvent.state.dom_id)for(var e=parseInt(t.originalEvent.state.block_index,10),i=0,n=0;n<=e;n++){var o=$j("[data-blockindex='"+n+"']");void 0!==o&&o.hasClass("loadable")&&(i++,o.trigger("se:andale",[function(){if(i--,i<=0){console.log("all blocks loaded");var e=t.originalEvent.state.dom_id;window.scrollTo(0,$j("#"+e).offset().top-100)}}]))}})))},SE.registerBehavior("rememberable",function(t,e){SE.setupRememberable($j(e))}),SE.setupRolloverPerk=function(t){t.on("mouseenter",function(){var e=t.attr("se:perk:selected_class");$j("div.feature_content").hide(),$j("div.feature_row").removeClass(e),$j("#"+t.attr("id")+"_content").show(),t.addClass(e)})},SE.registerBehavior("perk",function(t,e){SE.setupRolloverPerk($j(e))}),SE.setupComparableListingTypeToggle=function(t){t.on("change",function(){SE.toggleListingTypeInComparable(t,!0)}),SE.toggleListingTypeInComparable(t,!1)},SE.toggleListingTypeInComparable=function(t,e){selected_listing_type=t.val(),"undefined"==typeof selected_listing_type&&(selected_listing_type="Sale"),listing_type_to_show=selected_listing_type.toLowerCase(),"sale"==listing_type_to_show?listing_type_to_hide="rental":listing_type_to_hide="sale",$j("."+listing_type_to_hide+"_only").hide(),$j("."+listing_type_to_show+"_only").show(),1==e?(SE.rebuildPricesInComparable(),SE.filterPricesInComparable(listing_type_to_show),$j("."+listing_type_to_hide+"_only input, ."+listing_type_to_hide+"_only select").val("").removeAttr("selected"),$j("#price_from_custom, #price_to_custom").hide(),$j("#price_from, #price_to").val("").removeAttr("selected")):SE.filterPricesInComparable(listing_type_to_show)},SE.rebuildPricesInComparable=function(){$j("#price_from").empty().append(SE.priceOptionsInComparable()),$j("#price_to").empty().append(SE.priceOptionsInComparable())},SE.filterPricesInComparable=function(t){$j("#price_from option").each(function(){"sale"==t?parseInt($j(this).val())<=15e3&&($j("#price_from option[value="+$j(this).val()+"]").remove(),$j("#price_to option[value="+$j(this).val()+"]").remove()):parseInt($j(this).val())>15e3&&($j("#price_from option[value="+$j(this).val()+"]").remove(),$j("#price_to option[value="+$j(this).val()+"]").remove())})},SE.priceOptionsInComparable=function(){return"<option value=''>Any</option>  <option value='Custom'>&raquo; Custom</option>  <option value='500'>$500</option>  <option value='750'>$750</option>  <option value='1000'>$1,000</option>  <option value='1250'>$1,250</option>  <option value='1500'>$1,500</option>  <option value='1750'>$1,750</option>  <option value='2000'>$2,000</option>  <option value='2500'>$2,500</option>  <option value='3000'>$3,000</option>  <option value='3500'>$3,500</option>  <option value='4000'>$4,000</option>  <option value='4500'>$4,500</option>  <option value='5000'>$5,000</option>  <option value='6000'>$6,000</option>  <option value='7000'>$7,000</option>  <option value='8000'>$8,000</option>  <option value='9000'>$9,000</option>  <option value='10000'>$10,000</option>  <option value='12500'>$12,500</option>  <option value='15000'>$15,000</option>  <option value='100000'>$100,000</option>  <option value='150000'>$150,000</option>  <option value='200000'>$200,000</option>  <option value='250000'>$250,000</option>  <option value='300000'>$300,000</option>  <option value='400000'>$400,000</option>  <option value='500000'>$500,000</option>  <option value='600000'>$600,000</option>  <option value='700000'>$700,000</option>  <option value='750000'>$750,000</option>  <option value='800000'>$800,000</option>  <option value='900000'>$900,000</option>  <option value='1000000'>$1,000,000</option>  <option value='1250000'>$1,250,000</option>  <option value='1500000'>$1,500,000</option>  <option value='1750000'>$1,750,000</option>  <option value='2000000'>$2,000,000</option>  <option value='2250000'>$2,250,000</option>  <option value='2500000'>$2,500,000</option>  <option value='2750000'>$2,750,000</option>  <option value='3000000'>$3,000,000</option>  <option value='3500000'>$3,500,000</option>  <option value='4000000'>$4,000,000</option>  <option value='4500000'>$4,500,000</option>  <option value='5000000'>$5,000,000</option>  <option value='6000000'>$6,000,000</option>  <option value='7000000'>$7,000,000</option>  <option value='8000000'>$8,000,000</option>  <option value='9000000'>$9,000,000</option>  <option value='10000000'>$10,000,000</option>  <option value='12000000'>$12,000,000</option>  <option value='14000000'>$14,000,000</option>  <option value='16000000'>$16,000,000</option>  <option value='20000000'>$20,000,000</option>  <option value='25000000'>$25,000,000</option>  <option value='30000000'>$30,000,000</option>"},SE.setupCompsReportSectionToggle=function(t){t.on("change",function(){section=$j(t).attr("se:toggle_section");var e=$j("#"+section);e.toggle(),SE.markListings(e)})},SE.prepareCompsReportUrl=function(t){return params={closing_age:$j("#closing_age_select").val(),subject_listing_id:SE.compsReport.subject_listing_id,listing_type:SE.compsReport.listing_type,excluded_listings:SE.compsReport.excludedListings.join(","),excluded_closings:SE.compsReport.excludedClosings.join(","),id:SE.compsReport.comps_id,criteria:SE.compsReport.criteria,new_name:SE.compsReport.new_name,section:t,building:SE.compsReport.subject_buildings,limit:SE.compsReport.selectedListingsCount},params},SE.addSubjectListingToUrl=function(t){return t+"&subject_listing_id=<%= params[:subject_listing_id] %>"},SE.updateCompsStats=function(t){params=SE.prepareCompsReportUrl(t),$j.ajax({url:"/"+SE.compsReport.current_site+"/comparables_reports/stats_component",type:"GET",data:jQuery.param(params),success:function(){return!0}})},SE.reloadCompsReport=function(t){t.on("change",function(){params=SE.prepareCompsReportUrl(""),url="/"+SE.compsReport.current_site+"/comparables_reports/new?"+jQuery.param(params),document.location=url})},SE.setupCompsReportItemToggle=function(t){t.on("change",function(){item_type=$j(t).attr("se:item_type"),item_id=$j(t).attr("se:item_id"),removing=!!$j(t).is(":checked"),section=$j(t).attr("se:section"),count=$j(t).closest("table").find("input:checked").size(),removing?($j("#"+item_type.toLowerCase()+"_"+item_id).fadeTo("fast",1),$j("#"+item_type.toLowerCase()+"_"+item_id).removeClass("hide-print")):($j("#"+item_type.toLowerCase()+"_"+item_id).fadeTo("fast",.5),$j("#"+item_type.toLowerCase()+"_"+item_id).addClass("hide-print")),"Closing"==item_type?removing?(i=SE.compsReport.excludedClosings.indexOf(item_id),i>-1&&SE.compsReport.excludedClosings.splice(i,1)):SE.compsReport.excludedClosings.push(item_id):removing?(i=SE.compsReport.excludedListings.indexOf(item_id),i>-1&&SE.compsReport.excludedListings.splice(i,1)):SE.compsReport.excludedListings.push(item_id),SE.compsReport.selectedListingsCount=count,SE.updateCompsStats(section)})},SE.setupCompsReportData=function(t){SE.compsReport={},SE.compsReport.closing_age=$j(t).attr("se:comps_closing_age"),SE.compsReport.criteria=$j(t).attr("se:comps_criteria"),SE.compsReport.listing_type=$j(t).attr("se:comps_listing_type"),SE.compsReport.action=$j(t).attr("se:comps_action"),SE.compsReport.subject_listing_id=$j(t).attr("se:subject_listing"),SE.compsReport.comps_id=$j(t).attr("se:comps_id"),SE.compsReport.current_site=$j(t).attr("se:current_site"),SE.compsReport.new_name=$j(t).attr("se:new_name"),SE.compsReport.subject_buildings=$j(t).attr("se:comps_subject_buildings"),SE.compsReport.excludedListings=$j(t).attr("se:excluded_listings").split(","),SE.compsReport.excludedClosings=$j(t).attr("se:excluded_closings").split(",")},SE.saveCompsReport=function(t){t.on("click",function(){params=SE.prepareCompsReportUrl(""),action="new"==SE.compsReport.action?"create?":"update?",url="/"+SE.compsReport.current_site+"/comparables_reports/"+action+jQuery.param(params),document.location=url})},SE.refineCompsReport=function(t){t.on("click",function(){params=SE.prepareCompsReportUrl(""),url="/"+SE.compsReport.current_site+"/my/comparables?"+jQuery.param(params),document.location=url})},SE.refreshCompsReport=function(t){t.on("click",function(){confirm("You are about to create a new comparables report with the current report criteria, using newer listings and closings. (The current report will still be available.) Do you wish to continue?")&&(params=SE.prepareCompsReportUrl(""),params=$j.extend(params,{refresh:"1"}),url="/"+SE.compsReport.current_site+"/comparables_reports/new?"+jQuery.param(params),document.location=url)})},SE.exportCompsReport=function(t){t.on("click",function(){params=SE.prepareCompsReportUrl(""),params=$j.extend(params,{csv:"1",subject_listing:$j("#subject_listing_toggle").is(":checked"),active_listings:$j("#active_listings_toggle").is(":checked"),pending_listings:$j("#pending_listings_toggle").is(":checked"),unavailable_listings:$j("#unavailable_listings_toggle").is(":checked"),closings:$j("#closings_toggle").is(":checked")}),url="/"+SE.compsReport.current_site+"/comparables_reports/"+SE.compsReport.action+"?"+jQuery.param(params),document.location=url})},SE.removeBuilding=function(t){t.on("click",function(){confirm("No longer include this building in the comparables report?")&&(building_id=$j(t).attr("se:building_id"),SE.compsReport.subject_buildings=SE.compsReport.subject_buildings.replace(building_id,""),params=SE.prepareCompsReportUrl(""),params=$j.extend(params,{refresh:"1",remove_building:building_id}),url="/"+SE.compsReport.current_site+"/comparables_reports/new?"+jQuery.param(params),document.location=url)})},SE.changeCompsName=function(t){t.on("click",function(){$j("#comparables_report_change_name").show()})},SE.updateCompsName=function(t){t.on("change",function(){$j("#comps_report_name").html("<b>Report Name:</b> "+$j("#list_name").val()),SE.compsReport.new_name=$j("#list_name").val(),$j("#comparables_report_change_name").hide()})},SE.markListings=function(t){var e=t.find("tbody td.checkbox input");e.each(function(t,e){$j(e).trigger("click")})},SE.registerBehavior("prepareCompsReportData",function(t,e){SE.setupCompsReportData($j(e))}),SE.registerBehavior("comparableSectionToggle",function(t,e){SE.setupCompsReportSectionToggle($j(e))}),SE.registerBehavior("comparableItemToggle",function(t,e){SE.setupCompsReportItemToggle($j(e))}),SE.registerBehavior("reloadCompsReport",function(t,e){SE.reloadCompsReport($j(e))}),SE.registerBehavior("saveCompsReport",function(t,e){SE.saveCompsReport($j(e))}),SE.registerBehavior("exportCompsReport",function(t,e){SE.exportCompsReport($j(e))}),SE.registerBehavior("refineCompsReport",function(t,e){SE.refineCompsReport($j(e))}),SE.registerBehavior("refreshCompsReport",function(t,e){SE.refreshCompsReport($j(e))}),SE.registerBehavior("changeCompsName",function(t,e){SE.changeCompsName($j(e))}),SE.registerBehavior("updateCompsName",function(t,e){SE.updateCompsName($j(e))}),SE.registerBehavior("removeBuilding",function(t,e){SE.removeBuilding($j(e))}),SE.registerBehavior("comparableListingTypeToggle",function(t,e){SE.setupComparableListingTypeToggle($j(e))}),SE.setupTrackingContext=function(t){dataLayer.push(JSON.parse(t.attr("se:tracking:data")))},SE.registerBehavior("tracking_context",function(t,e){SE.setupTrackingContext($j(e))}),!function(t){"use strict";var e=function(t,e){this.init(t,e)};e.prototype={constructor:e,init:function(e,i){var n=this;this.options=i,this.$element=t(e).delegate('[data-dismiss="modal"]',"click.dismiss.modal",t.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote,function(){var e=t.Event("loaded");n.$element.trigger(e)});var o="function"==typeof this.options.manager?this.options.manager.call(this):this.options.manager;o=o.appendModal?o:t(o).modalmanager().data("modalmanager"),o.appendModal(this)},toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var e=t.Event("show");this.isShown||(this.$element.trigger(e),e.isDefaultPrevented()||(this.escape(),this.tab(),this.options.loading&&this.loading()))},hide:function(e){e&&e.preventDefault(),e=t.Event("hide"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.tab(),this.isLoading&&this.loading(),t(document).off("focusin.modal"),this.$element.removeClass("in").removeClass("animated").removeClass(this.options.attentionAnimation).removeClass("modal-overflow").attr("aria-hidden",!0),t.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},layout:function(){var e=this.options.height?"height":"max-height",i=this.options.height||this.options.maxHeight;if(this.options.width){this.$element.css("width",this.options.width);var n=this;this.$element.css("margin-left",function(){return/%/gi.test(n.options.width)?-(parseInt(n.options.width)/2)+"%":-(t(this).width()/2)+"px"})}else this.$element.css("width",""),this.$element.css("margin-left","");this.$element.find(".modal-body").css("overflow","").css(e,""),i&&this.$element.find(".modal-body").css("overflow","auto").css(e,i);var o=t(window).height()-30<this.$element.height();o||this.options.modalOverflow?this.$element.css("margin-top",0).addClass("modal-overflow"):this.$element.css("margin-top",30).removeClass("modal-overflow")},tab:function(){var e=this;this.isShown&&this.options.consumeTab?this.$element.on("keydown.tabindex.modal","[data-tabindex]",function(i){if(i.keyCode&&9==i.keyCode){var n=t(this),o=t(this);e.$element.find("[data-tabindex]:enabled:not([readonly])").each(function(e){n=e.shiftKey?n.data("tabindex")>t(this).data("tabindex")?n=t(this):o=t(this):n.data("tabindex")<t(this).data("tabindex")?n=t(this):o=t(this)}),n[0]!==t(this)[0]?n.focus():o.focus(),i.preventDefault()}}):this.isShown||this.$element.off("keydown.tabindex.modal")},escape:function(){var t=this;this.isShown&&this.options.keyboard?(this.$element.attr("tabindex")||this.$element.attr("tabindex",-1),this.$element.on("keyup.dismiss.modal",function(e){27==e.which&&t.hide()})):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var e=this,i=setTimeout(function(){e.$element.off(t.support.transition.end),e.hideModal()},500);this.$element.one(t.support.transition.end,function(){clearTimeout(i),e.hideModal()})},hideModal:function(){var t=this.options.height?"height":"max-height",e=this.options.height||this.options.maxHeight;e&&this.$element.find(".modal-body").css("overflow","").css(t,""),this.$element.hide().trigger("hidden")},removeLoading:function(){this.$loading.remove(),this.$loading=null,this.isLoading=!1},loading:function(e){e=e||function(){};var i=this.$element.hasClass("fade")?"fade":"";if(this.isLoading)if(this.isLoading&&this.$loading){this.$loading.removeClass("in");var n=this;t.support.transition&&this.$element.hasClass("fade")?this.$loading.one(t.support.transition.end,function(){n.removeLoading()}):n.removeLoading()}else e&&e(this.isLoading);else{var o=t.support.transition&&i;this.$loading=t('<div class="loading-mask '+i+'">').append(this.options.spinner).appendTo(this.$element),o&&this.$loading[0].offsetWidth,this.$loading.addClass("in"),this.isLoading=!0,o?this.$loading.one(t.support.transition.end,e):e()}},focus:function(){var t=this.$element.find(this.options.focusOn);t=t.length?t:this.$element,t.focus()},attention:function(){if(this.options.attentionAnimation){this.$element.removeClass("animated").removeClass(this.options.attentionAnimation);var t=this;setTimeout(function(){t.$element.addClass("animated").addClass(t.options.attentionAnimation)},0)}this.focus()},destroy:function(){var e=t.Event("destroy");this.$element.trigger(e),e.isDefaultPrevented()||(this.$element.off(".modal").removeData("modal").removeClass("in").attr("aria-hidden",!0),this.$parent!==this.$element.parent()?this.$element.appendTo(this.$parent):this.$parent.length||(this.$element.remove(),this.$element=null),this.$element.trigger("destroyed"))}},t.fn.modal=function(i,n){return this.each(function(){var o=t(this),s=o.data("modal"),r=t.extend({},t.fn.modal.defaults,o.data(),"object"==typeof i&&i);s||o.data("modal",s=new e(this,r)),"string"==typeof i?s[i].apply(s,[].concat(n)):r.show&&s.show()})},t.fn.modal.defaults={keyboard:!0,backdrop:!0,loading:!1,show:!0,width:null,height:null,maxHeight:null,modalOverflow:!1,consumeTab:!0,focusOn:null,replace:!1,resize:!1,attentionAnimation:"shake",manager:"body",spinner:'<div class="loading-spinner" style="width: 200px; margin-left: -100px;"><div class="progress progress-striped active"><div class="bar" style="width: 100%;"></div></div></div>',backdropTemplate:'<div class="modal-backdrop" />'},t.fn.modal.Constructor=e,t(function(){t(document).off("click.modal").on("click.modal.data-api",'[data-toggle="modal"]',function(e){var i=t(this),n=i.attr("href"),o=t(i.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),s=o.data("modal")?"toggle":t.extend({remote:!/#/.test(n)&&n},o.data(),i.data());e.preventDefault(),o.modal(s).one("hide",function(){i.focus()})})})}(window.jQuery),!function(t){"use strict";function e(t){return function(e){if(e&&this===e.target)return t.apply(this,arguments)}}var i=function(t,e){this.init(t,e)};i.prototype={constructor:i,init:function(e,i){if(this.$element=t(e),this.options=t.extend({},t.fn.modalmanager.defaults,this.$element.data(),"object"==typeof i&&i),this.stack=[],this.backdropCount=0,this.options.resize){var n,o=this;t(window).on("resize.modal",function(){n&&clearTimeout(n),n=setTimeout(function(){for(var t=0;t<o.stack.length;t++)o.stack[t].isShown&&o.stack[t].layout()},10)})}},createModal:function(e,i){t(e).modal(t.extend({manager:this},i))},appendModal:function(i){this.stack.push(i);var n=this;i.$element.on("show.modalmanager",e(function(){var e=function(){i.isShown=!0;var e=t.support.transition&&i.$element.hasClass("fade");e=!1,n.$element.toggleClass("modal-open",n.hasOpenModal()).toggleClass("page-overflow",t(window).height()<n.$element.height()),i.$parent=i.$element.parent(),i.$container=n.createContainer(i),i.$element.appendTo(i.$container),n.backdrop(i,function(){i.$element.show(),e&&i.$element[0].offsetWidth,i.layout(),i.$element.addClass("in").attr("aria-hidden",!1);var o=function(){document.documentElement.clientWidth<660?t("#site-wrapper").hide():n.setFocus(),i.$element.trigger("shown")};e?i.$element.one(t.support.transition.end,o):o()})};i.options.replace?n.replace(e):e()})),i.$element.on("hidden.modalmanager",e(function(){if(n.backdrop(i),i.$element.parent().length)if(i.$backdrop){var e=t.support.transition&&i.$element.hasClass("fade");e=!1,e&&i.$element[0].offsetWidth,e?i.$backdrop.one(t.support.transition.end,function(){i.destroy()}):i.destroy()}else i.destroy();else n.destroyModal(i);document.documentElement.clientWidth<660&&t("#site-wrapper").show()})),i.$element.on("destroyed.modalmanager",e(function(){n.destroyModal(i)}))},getOpenModals:function(){for(var t=[],e=0;e<this.stack.length;e++)this.stack[e].isShown&&t.push(this.stack[e]);return t},hasOpenModal:function(){return this.getOpenModals().length>0},setFocus:function(){for(var t,e=0;e<this.stack.length;e++)this.stack[e].isShown&&(t=this.stack[e]);t&&t.focus()},destroyModal:function(t){t.$element.off(".modalmanager"),t.$backdrop&&this.removeBackdrop(t),this.stack.splice(this.getIndexOfModal(t),1);var e=this.hasOpenModal();this.$element.toggleClass("modal-open",e),e||this.$element.removeClass("page-overflow"),this.removeContainer(t),this.setFocus()},getModalAt:function(t){return this.stack[t]},getIndexOfModal:function(t){for(var e=0;e<this.stack.length;e++)if(t===this.stack[e])return e},replace:function(i){for(var n,o=0;o<this.stack.length;o++)this.stack[o].isShown&&(n=this.stack[o]);n?(this.$backdropHandle=n.$backdrop,n.$backdrop=null,i&&n.$element.one("hidden",e(t.proxy(i,this))),n.hide()):i&&i()},removeBackdrop:function(t){t.$backdrop.remove(),t.$backdrop=null},createBackdrop:function(e,i){var n;return this.$backdropHandle?(n=this.$backdropHandle,n.off(".modalmanager"),this.$backdropHandle=null,this.isLoading&&this.removeSpinner()):n=t(i).addClass(e).appendTo(this.$element),n},removeContainer:function(t){t.$container.remove(),t.$container=null},createContainer:function(i){var o;return o=t('<div class="modal-scrollable">').css("z-index",n("modal",this.getOpenModals().length)).appendTo(this.$element),i&&"static"!=i.options.backdrop?o.on("click.modal",e(function(){i.hide()})):i&&o.on("click.modal",e(function(){i.attention()})),o},backdrop:function(e,i){var o=e.$element.hasClass("fade")?"fade":"",s=e.options.backdrop&&this.backdropCount<this.options.backdropLimit;if(e.isShown&&s){var r=t.support.transition&&o&&!this.$backdropHandle;r=!1,e.$backdrop=this.createBackdrop(o,e.options.backdropTemplate),e.$backdrop.css("z-index",n("backdrop",this.getOpenModals().length)),r&&e.$backdrop[0].offsetWidth,e.$backdrop.addClass("in"),this.backdropCount+=1,r?e.$backdrop.one(t.support.transition.end,i):i()}else if(!e.isShown&&e.$backdrop){e.$backdrop.removeClass("in"),this.backdropCount-=1;var a=this,l=t.support.transition&&e.$element.hasClass("fade");l=!1,l?e.$backdrop.one(t.support.transition.end,function(){a.removeBackdrop(e)}):a.removeBackdrop(e)}else i&&i()},removeSpinner:function(){this.$spinner&&this.$spinner.remove(),this.$spinner=null,this.isLoading=!1},removeLoading:function(){this.$backdropHandle&&this.$backdropHandle.remove(),this.$backdropHandle=null,this.removeSpinner()},loading:function(e){e=e||function(){};var i=t.support.transition;if(i=!1,this.$element.toggleClass("modal-open",!this.isLoading||this.hasOpenModal()).toggleClass("page-overflow",t(window).height()<this.$element.height()),this.isLoading)if(this.isLoading&&this.$backdropHandle){this.$backdropHandle.removeClass("in");var o=this;i?this.$backdropHandle.one(t.support.transition.end,function(){o.removeLoading()}):o.removeLoading()}else e&&e(this.isLoading);else{this.$backdropHandle=this.createBackdrop("fade",this.options.backdropTemplate),this.$backdropHandle[0].offsetWidth;var s=this.getOpenModals();this.$backdropHandle.css("z-index",n("backdrop",s.length+1)).addClass("in");var r=t(this.options.spinner).css("z-index",n("modal",s.length+1)).appendTo(this.$element).addClass("in");this.$spinner=t(this.createContainer()).append(r).on("click.modalmanager",t.proxy(this.loading,this)),this.isLoading=!0,i?this.$backdropHandle.one(t.support.transition.end,e):e()}}};var n=function(){var e,i={};return function(n,o){if("undefined"==typeof e){var s=t('<div class="modal hide" />').appendTo("body"),r=t('<div class="modal-backdrop hide" />').appendTo("body");i.modal=+s.css("z-index"),i.backdrop=+r.css("z-index"),e=i.modal-i.backdrop,s.remove(),r.remove(),r=s=null}return i[n]+e*o}}();t.fn.modalmanager=function(e,n){return this.each(function(){var o=t(this),s=o.data("modalmanager");s||o.data("modalmanager",s=new i(this,e)),"string"==typeof e&&s[e].apply(s,[].concat(n))})},t.fn.modalmanager.defaults={backdropLimit:999,resize:!0,spinner:'<div class="loading-spinner fade"><i class="icon-spinner icon-spin icon-4x"></i></div>',backdropTemplate:'<div class="modal-backdrop" />'},t.fn.modalmanager.Constructor=i,t(function(){t(document).off("show.bs.modal").off("hidden.bs.modal")})}(jQuery),+function(t,e){if(t&&e){var i=['<div class="modal fade" tabindex="-1">','<div class="modal-dialog">','<div class="modal-content">',"</div>","</div>","</div>"].join(""),n=function(){var n=function(i,n){i.one("shown",function(){!n.modalLive&&i.data("content-prepared")||(t(e).trigger("se:prepare_content",this),i.data("content-prepared",1)),window.location.href.indexOf("print_preview")>-1&&setTimeout(function(t){return function(){t.show()}}(i),100)}).one("hide",function(){this.focus()}).modal(n)};return function(e,o){if(e.length||(e=t(i).attr("id",o.target.replace(/^#/,"")).addClass(o.modalClass).appendTo(document.body)),o.modalLive||o.modalSource&&!o.modalSourceLoaded){t("body").modalmanager("loading");var s=o.modalSource,r=/=/g,a=s.match(r)?"&":"?",l=s.match("origin")?{return_to:o.return_to,boundary:o.boundary,label:o.label}:{page_category:o.page_category,page_type:o.page_type,origin:o.origin,return_to:o.return_to,boundary:o.boundary,label:o.label};e.find(".modal-content").load(s+a+t.param(l),function(){e.data("modal-source-loaded",1),n.call(this,e,o)})}else n.call(this,e,o)}}();t(function(){t(document).on("open.se.modal",function(e){e.preventDefault();var i=e.options,o=t(i.target);return i.target?void n.call(this,o,i):t.error("options.target must be defined.")}),t(document).off("click.modal.data-api").on("click.se.modal",'[data-toggle="modal"]',function(e){e.preventDefault();var i=t(this),o=i.data("target");o||(o="#modal_"+ +new Date,i.data("target",o));var s=t(o),r=s.data("modal")?"toggle":t.extend({},s.data(),i.data());
n.call(this,s,r)}),navigator.userAgent.match(/iPhone|iPod/i)&&document.documentElement.clientWidth<660&&t(document).on("blur",".modal input[type=email], .modal input[type=password], .modal input[type=text], .modal textarea",function(){setTimeout(function(){var e=t(":focus");e.is("input")||t(window).scrollTop(0)},0)})})}}(jQuery,SE),function(t){function e(){this.pendingDelete=0,this.mouse_on_container=!1,this.container=".area-selector",this.dropdown=".area-list",this.inputTextBox="#area-txt-box",this.result_highlight=null,this.search_results=t(this.container).find("ul.area-items").first()}e.prototype={set_up_html:function(){for(var e=t("input[name='area[]']:checked"),i=0;i<e.length;i++){var n=t(e[i]),o=t("label",n.parents("li")).text().trim();this.add(n.val(),o)}var s=this;this.click_test_action=function(t){return s.test_active_click(t)}},result_clear_highlight:function(){return this.result_highlight&&this.result_highlight.removeClass("highlight"),this.result_highlight=null},result_do_highlight:function(t){var e,i,n,o,s;if(t.length){if(this.result_clear_highlight(),this.result_highlight=t,this.result_highlight.addClass("highlight"),n=parseInt(this.search_results.css("maxHeight"),10),s=this.search_results.scrollTop(),o=n+s,i=this.result_highlight.position().top+this.search_results.scrollTop(),e=i+this.result_highlight.outerHeight(),e>=o)return this.search_results.scrollTop(e-n>0?e-n:0);if(i<s)return this.search_results.scrollTop(i)}},searchKeyword:function(){var e=t('<form action="/search" method="get"></form>'),i=t('<input type="text" name="search" style="display:none;"/>');i.val(t(this.inputTextBox).val()),e.append(i),t("body").append(e),e.submit()},search:function(e){var n=t("ul.area-items li.item"),o=!1;for(i=0;i<n.length;i++){var s=t(n[i]),r=t(".area-label",s).text();r.toLowerCase().indexOf(e.toLowerCase())>-1?(s.show(),o||""===e||(this.result_do_highlight(s),o=!0)):s.hide()}var a=t("li.keyword-search");""!==e?(a.html('Search for "<b></b>..."'),a.find("b").text(e),t("ul.area-items li.item:visible").length<=0&&this.result_do_highlight(a)):a.html("")},checkAreaBox:function(t){var e=$j("#area-"+t);e.prop("checked")||e.prop("checked",!0).change()},getResult:function(){var e=t(this.result_highlight);if(null!==e)if(e.hasClass("keyword-search"))this.searchKeyword();else{var i=t("input",e);i.prop("checked")||i.prop("checked",!0).trigger("change"),!i.data("non-sale-checked-with")||$j("body.sale").length||$j("body.sales_home").length||this.checkAreaBox(i.data("non-sale-checked-with")),i.data("always-checked-with")&&this.checkAreaBox(i.data("always-checked-with")),this.result_clear_highlight()}},add:function(e,i){var n=t("<li></li>"),o=t("<div class='close-icon'/>");n.addClass("area-sel-item").attr("data-area-id",e).append(i).append(o).on("mouseover",function(e){t(e.target).css("background-color","#E1F2FC")}).on("mouseout",function(e){t(e.target).css("background-color","")}).on("click",function(e){var i,n=t(e.target);if(i=n.hasClass("close-icon")?n.parent().data("area-id"):n.data("area-id"),void 0!==i){var o=t("input[name='area[]'][value="+i+"]");o.prop("checked",!1).trigger("change")}}),t("ul.area-sel-items #area-text").before(n),this.resetTextBox({placeHolder:"",style:"width: 30px"})},remove:function(e){var i;t("ul.area-sel-items").find("li[data-area-id="+e+"]").remove(),i=0===t("ul.area-sel-items li.area-sel-item").length?{placeHolder:"Neighborhood  /  Address  /  Building  /  Keyword"}:{style:"width: 30px"},this.resetTextBox(i)},removeParents:function(e){var i=t(e).data("parent-id");if(0===i);else{var n=t("input[name='area[]'][value="+i+"]");n.prop("checked")?(n.prop("checked",!1),this.remove(n.val())):this.removeParents(n)}},removeChildren:function(e){var i=t("input[data-parent-id="+t(e).val()+"]");if(i.length<=0);else for(var n=0;n<i.length;n++){var o=t(i[n]);o.prop("checked")?(o.prop("checked",!1),this.remove(o.val())):this.removeChildren(o)}},resetTextBox:function(e){e=e||{};var i=e.placeHolder||"",n=e.style||"",o=t(this.inputTextBox);""!==o.val().trim()&&this.search(""),o.val("").attr("placeholder",i).attr("style",n)},resetPendingDelete:function(){this.pendingDelete=0;var e=t("ul.area-sel-items li.area-del-item");e.removeClass("area-del-item")},showDropdown:function(){var e=t(this.dropdown),i=t(this.inputTextBox);e.is(":visible")||(e.show(),i.attr("placeholder")!==i.val()&&this.search(i.val()),this.result_do_highlight(e.find("li").filter(":visible:first")),t(document).on("click touchstart",this.click_test_action))},closeDropdown:function(){t(this.dropdown).hide(),this.mouse_on_container=!1,t(document).off("click touchstart",this.click_test_action)},test_active_click:function(e){t(e.target).parents(this.container).length>0?this.mouse_on_container=!0:this.closeDropdown()},moveNext:function(){var e=t(this.dropdown);if(e.is(":visible")){var i=e.find("li.highlight");if(i.length>0){var n=i.nextAll("li").filter(":visible:first");n&&this.result_do_highlight(n)}else this.result_do_highlight(e.find("li").filter(":visible:first"))}else this.showDropdown()},movePrevious:function(){var e=t(this.dropdown);if(e.is(":visible")){var i=e.find("li.highlight");if(i.length>0){var n=i.prevAll("li").filter(":visible:first");n&&this.result_do_highlight(n)}}}},t(function(){var i=new e;t(document).ready(function(){i.set_up_html()}),t(document).on("change","ul.area-items li input",function(e){e.stopPropagation();var n=t(e.target),o=n.prop("checked")||!1,s=n.val();if(o){var r=t("label",n.parents("li")).text().trim();i.removeParents(n),i.removeChildren(n),i.add(s,r),e.originalEvent&&n.data("non-sale-checked-with")&&!$j("body.sale").length&&!$j("body.sales_home").length&&i.checkAreaBox(n.data("non-sale-checked-with")),e.originalEvent&&n.data("always-checked-with")&&i.checkAreaBox(n.data("always-checked-with")),t(i.inputTextBox).focus()}else i.remove(s);i.resetPendingDelete(),document.documentElement.clientWidth<980&&i.closeDropdown()}),t(document).on("click",".area-sel-items",function(e){t(e.target).hasClass("area-sel-item")||t(i.inputTextBox).focus()}),t(document).on("keydown",i.inputTextBox,function(e){var n=t(e.target),o=n.val();switch(e.keyCode){case 8:if(""===o)if(i.pendingDelete>0){var s=t("input[name='area[]'][value="+i.pendingDelete+"]");s.prop("checked",!1).trigger("change")}else{var r=t("ul.area-sel-items li.area-sel-item").last();r.length>0&&(i.pendingDelete=r.data("area-id"),r.addClass("area-del-item"))}break;case 9:i.mouse_on_container=!1;break;case 13:e.preventDefault();break;case 38:i.movePrevious();break;case 40:i.moveNext()}}),t(document).on("keyup",i.inputTextBox,function(e){var n=t(e.target);switch(e.keyCode){case 13:e.preventDefault(),i.getResult(),document.documentElement.clientWidth<980&&i.closeDropdown();break;case 27:i.resetPendingDelete(),i.closeDropdown();break;case 9:i.mouse_on_container=!1;break;case 38:case 40:break;default:var o=n.val();""!==o?(i.search(o),t("ul.area-items").scrollTop(0),i.showDropdown(),8!=e.keyCode?t(this).outerWidth()<400&&t(this).attr("style","width: "+(t(this).outerWidth()+6)+"px"):t(this).outerWidth()>25&&t(this).attr("style","width: "+(t(this).outerWidth()-6)+"px")):document.documentElement.clientWidth<980&&i.closeDropdown()}}),t(document).on("focus",i.inputTextBox,function(){document.documentElement.clientWidth<660&&window.scrollY<70&&t(window).scrollTop(70),document.documentElement.clientWidth>=980&&i.showDropdown()}),t(document).on("blur",i.inputTextBox,function(){i.mouse_on_container||i.closeDropdown()}),t(document).on("mouseenter",i.dropdown,function(){i.mouse_on_container=!0}),t(document).on("mouseleave",i.dropdown,function(){i.mouse_on_container=!1}),t("ul.area-items li").on("mouseover",function(e){i.result_do_highlight(t(e.target).parents("li"))}),t("ul.area-items li").on("mouseout",function(e){i.result_clear_highlight(t(e.target).parents("li"))}),t("li.keyword-search").on("click",function(){i.searchKeyword()}),t(".submit-search").on("click",function(e){var n=t(i.inputTextBox).val().trim();t(i.inputTextBox).attr("placeholder")===n&&(n=""),t("input[name='area[]']:checked").length<=0&&""!==n&&(e.preventDefault(),i.searchKeyword())})})}(jQuery),+function(t){if(t){var e=function(){t("#navbar_block").height()-t("#navbar_menu").height()>45?t(".MenuMobileSignin").addClass("isAbsolute"):t(".MenuMobileSignin").removeClass("isAbsolute")},i=!1,n=function(n){if(n!==i){if(i===!0){var o=t("#site-content").offset().left;t("#site-menu").css("left",-o),t("#site-content").css("left","0").removeClass("isInactive"),t(".SubNavMobileOpened").css("left",-o).removeClass("SubNavMobileOpened"),t("#site-canvas").removeClass("isActive"),t("#site-shadow").hide()}else{var o=t("#site-menu").offset().left,s=Math.max(t("#site-content").outerHeight(),t(window).outerHeight()-t(".navbar").first().outerHeight());t("#site-menu").css("left","0"),t("#site-content").height(s).css("left",-o).addClass("isInactive"),t("#site-canvas").addClass("isActive"),t("#site-shadow").height(s).show(),e()}t('[data-toggle="menu"] img').toggle(),t(".navbar-right").fadeToggle(),i=n}},o=function(e){t(e.target).next().css("left","0").addClass("SubNavMobileOpened")},s=function(e){t(e).parent().css("left",-t(e).parent().outerWidth()).removeClass("SubNavMobileOpened")},r=function(t){t.preventDefault(),t.stopImmediatePropagation(),n(!1)};t(document).ready(function(){t("#site-shadow").click(r),t(".SubNavMobile-header").click(function(t){s(t.target)});var i;t(".MainNav.isHoverable").hover(function(){var e=t(this);i=setTimeout(function(){e.addClass("isActive").find(".MainNav-popup").animate({opacity:1},200)},100)},function(){t(this).removeClass("isActive").find(".MainNav-popup").css("opacity",0),clearTimeout(i)}),t(".isTrackingMenuItem").hover(function(){dataLayer.push({event:"menu-hover",event_category:"site_header",event_action:"hover",event_label:t(this).data("type"),event_value:t(this).data("trending-id")})},function(){}),t(window).on("resize",function(){e()}).on("scroll",function(){e()})}).on("click",'[data-toggle="menu"]',function(t){t.preventDefault(),n(!i)}).on("click",'[data-toggle="submenu"]',function(t){t.preventDefault(),o(t)})}}(jQuery),function(t){"use strict";var e={item:3,autoWidth:!1,slideMove:1,slideMargin:10,addClass:"",mode:"slide",useCSS:!0,cssEasing:"ease",easing:"linear",speed:400,auto:!1,loop:!1,slideEndAnimatoin:!0,pause:2e3,keyPress:!1,controls:!0,prevHtml:"",nextHtml:"",rtl:!1,adaptiveHeight:!1,vertical:!1,verticalHeight:500,vThumbWidth:100,thumbItem:10,pager:!0,gallery:!1,galleryMargin:5,thumbMargin:5,currentPagerPosition:"middle",enableTouch:!0,enableDrag:!0,freeMove:!0,swipeThreshold:40,responsive:[],onBeforeStart:function(){},onSliderLoad:function(){},onBeforeSlide:function(){},onAfterSlide:function(){},onBeforeNextSlide:function(){},onBeforePrevSlide:function(){}};t.fn.lightSlider=function(i){if(0===this.length)return this;if(this.length>1)return this.each(function(){t(this).lightSlider(i)}),this;var n={},o=t.extend(!0,{},e,i),s={},r=this;n.$el=this,"fade"===o.mode&&(o.vertical=!1);var a=r.children(),l=t(window).width(),u=null,c=null,h=0,d=0,p=!1,f=0,m="",g=0,v=o.vertical===!0?"height":"width",_=o.vertical===!0?"margin-bottom":"margin-right",y=0,b=0,w=0,S=0,x=null,C="ontouchstart"in document.documentElement,E=new Object;return E.chbreakpoint=function(){if(l=t(window).width(),o.responsive.length){if(o.autoWidth===!1)var e=o.item;if(l<o.responsive[0].breakpoint)for(var i=0;i<o.responsive.length;i++)l<o.responsive[i].breakpoint&&(u=o.responsive[i].breakpoint,c=o.responsive[i]);if("undefined"!=typeof c&&null!=c)for(i in c.settings)"undefined"!=typeof s[i]&&null!=s[i]||(s[i]=o[i]),o[i]=c.settings[i];if(!t.isEmptyObject(s)&&l>o.responsive[0].breakpoint)for(i in s)o[i]=s[i];o.autoWidth===!1&&y>0&&w>0&&e!==o.item&&(g=Math.round(y/((w+o.slideMargin)*o.slideMove)))}},E.calSW=function(){o.autoWidth===!1&&(w=(f-(o.item*o.slideMargin-o.slideMargin))/o.item)},E.calWidth=function(t){var e=t===!0?m.find(".lslide").length:a.length;if(o.autoWidth===!1)d=e*(w+o.slideMargin);else{d=0;for(var i=0;i<e;i++)d+=parseInt(a.eq(i).width())+o.slideMargin}return d%1!==0&&(d+=1),d},n={doCss:function(){var t=function(){for(var t=["transition","MozTransition","WebkitTransition","OTransition","msTransition","KhtmlTransition"],e=document.documentElement,i=0;i<t.length;i++)if(t[i]in e.style)return!0};return!(!o.useCSS||!t())},keyPress:function(){o.keyPress&&t(document).on("keyup.lightslider",function(t){t.preventDefault(),37===t.keyCode?(r.goToPrevSlide(),clearInterval(x)):39===t.keyCode&&(r.goToNextSlide(),clearInterval(x))})},controls:function(){o.controls&&(r.after('<div class="lSAction"><a class="lSPrev">'+o.prevHtml+'</a><a class="lSNext">'+o.nextHtml+"</a></div>"),o.autoWidth?E.calWidth(!1)<f&&m.find(".lSAction").hide():h<=o.item&&m.find(".lSAction").hide(),m.find(".lSAction a").on("click",function(e){return e.preventDefault(),"lSPrev"===t(this).attr("class")?r.goToPrevSlide():r.goToNextSlide(),clearInterval(x),!1}))},initialStyle:function(){var t=this;"fade"===o.mode&&(o.autoWidth=!1,o.slideEndAnimatoin=!1),o.auto&&(o.slideEndAnimatoin=!1),o.autoWidth&&(o.slideMove=1,o.item=1),o.loop&&(o.slideMove=1,o.freeMove=!1),o.onBeforeStart.call(this,r),E.chbreakpoint(),r.addClass("lightSlider").wrap("<div class='lSSlideOuter "+o.addClass+"'><div class='lSSlideWrapper'></div></div>"),m=r.parent(".lSSlideWrapper"),o.rtl===!0&&m.parent().addClass("lSrtl"),o.vertical?(m.parent().addClass("vertical"),f=o.verticalHeight,m.css("height",f+"px")):f=r.outerWidth(),a.addClass("lslide"),o.loop===!0&&"slide"===o.mode&&(E.calSW(),E.clone=function(){if(E.calWidth(!0)>f){for(var e=0,i=0,n=0;n<a.length&&(e+=parseInt(r.find(".lslide").eq(n).width())+o.slideMargin,i++,!(e>=f+o.slideMargin));n++);var s=o.autoWidth===!0?i:o.item;if(s<r.find(".clone.left").length)for(var l=0;l<r.find(".clone.left").length-s;l++)a.eq(l).remove();if(s<r.find(".clone.right").length)for(var u=a.length-1;u>a.length-1-r.find(".clone.right").length;u--)g--,a.eq(u).remove();for(var n=r.find(".clone.right").length;n<s;n++)r.find(".lslide").eq(n).clone().removeClass("lslide").addClass("clone right").appendTo(r),g++;for(var c=r.find(".lslide").length-r.find(".clone.left").length;c>r.find(".lslide").length-s;c--)r.find(".lslide").eq(c-1).clone().removeClass("lslide").addClass("clone left").prependTo(r);a=r.children()}else a.hasClass("clone")&&(r.find(".clone").remove(),t.move(r,0))},E.clone()),E.sSW=function(){h=a.length,o.rtl===!0&&o.vertical===!1&&(_="margin-left"),o.autoWidth===!1&&a.css(v,w+"px"),a.css(_,o.slideMargin+"px"),d=E.calWidth(!1),r.css(v,d+"px"),o.loop===!0&&"slide"===o.mode&&p===!1&&(g=r.find(".clone.left").length)},E.calL=function(){a=r.children(),h=a.length},this.doCss()&&m.addClass("usingCss"),E.calL(),"slide"===o.mode?(E.calSW(),E.sSW(),o.loop===!0&&(y=t.slideValue(),this.move(r,y)),o.vertical===!1&&this.setHeight(r,!1,!0)):(this.setHeight(r,!0,!0),r.addClass("lSFade"),this.doCss()||a.not(".active").css("display","none")),o.loop===!0&&"slide"===o.mode?a.eq(g).addClass("active"):a.first().addClass("active")},pager:function(){var t=this;if(E.createPager=function(){S=(f-(o.thumbItem*o.thumbMargin-o.thumbMargin))/o.thumbItem;var e=m.find(".lslide"),i=m.find(".lslide").length,n=0,s="",a=0;for(n=0;n<i;n++){"slide"===o.mode&&(o.autoWidth?a+=(parseInt(e.eq(n).width())+o.slideMargin)*o.slideMove:a=n*((w+o.slideMargin)*o.slideMove));var l=e.eq(n*o.slideMove).attr("data-thumb");if(s+=o.gallery===!0?'<li style="width:100%;'+v+":"+S+"px;"+_+":"+o.thumbMargin+'px"><a href="#"><img src="'+l+'" /></a></li>':'<li><a href="#">'+(n+1)+"</a></li>","slide"===o.mode&&a>=d-f-o.slideMargin){n+=1;var u=2;o.autoWidth&&(s+='<li><a href="#">'+(n+1)+"</a></li>",u=1),n<u?(s=null,m.parent().addClass("noPager")):m.parent().removeClass("noPager");break}}var c=m.parent();if(c.find(".lSPager").html(s),!o.vertical&&o.gallery){var h=m.parent().find(".lSGallery");setTimeout(function(){t.setHeight(h,!1,!1)})}o.gallery===!0&&(o.vertical===!0&&c.find(".lSPager").css("width",o.vThumbWidth+"px"),b=n*(o.thumbMargin+S)+.5,c.find(".lSPager").css({property:b+"px","transition-duration":o.speed+"ms"}),o.vertical===!0&&m.parent().css("padding-right",o.vThumbWidth+o.galleryMargin+"px"),c.find(".lSPager").css(v,b+"px"));var p=c.find(".lSPager").find("li");p.first().addClass("active"),p.on("click",function(){return o.loop===!0&&"slide"===o.mode?g+=p.index(this)-c.find(".lSPager").find("li.active").index():g=p.index(this),r.mode(!1),o.gallery===!0&&t.slideThumb(),clearInterval(x),!1})},o.pager){var e="lSpg";o.gallery&&(e="lSGallery"),m.after('<ul class="lSPager '+e+'"></ul>');var i=o.vertical?"margin-left":"margin-top";m.parent().find(".lSPager").css(i,o.galleryMargin+"px"),E.createPager()}setTimeout(function(){E.init()},0)},setHeight:function(t,e,i){var n=null;n=i?t.children(".lslide ").first():t.children().first();var o=function(){var i=n.height(),o=0,s=i;e&&(i=0,o=100*s/f),t.css({height:i+"px","padding-bottom":o+"%"})};o(),n.find("img").load(function(){setTimeout(function(){o()},100)})},active:function(t,e){this.doCss()&&"fade"===o.mode&&m.addClass("on");var i=0;if(g*o.slideMove<h){if(t.removeClass("active"),this.doCss()||"fade"!==o.mode||e!==!1||t.fadeOut(o.speed),i=e===!0?g:g*o.slideMove,e===!0){var n=t.length,s=n-1;i+1>=n&&(i=s)}if(o.loop===!0&&"slide"===o.mode&&(i=e===!0?g-r.find(".clone.left").length:g*o.slideMove,e===!0)){var n=t.length,s=n-1;i+1==n?i=s:i+1>n&&(i=0)}this.doCss()||"fade"!==o.mode||e!==!1||t.eq(i).fadeIn(o.speed),t.eq(i).addClass("active")}else t.removeClass("active"),t.eq(t.length-1).addClass("active"),this.doCss()||"fade"!==o.mode||e!==!1||(t.fadeOut(o.speed),t.eq(i).fadeIn(o.speed))},move:function(t,e){o.rtl===!0&&(e=-e),this.doCss()?o.vertical===!0?t.css({transform:"translate3d(0px, "+-e+"px, 0px)"}):t.css({transform:"translate3d("+-e+"px, 0px, 0px)"}):o.vertical===!0?t.css("position","relative").animate({top:-e+"px"},o.speed,o.easing):t.css("position","relative").animate({left:-e+"px"},o.speed,o.easing);var i=m.parent().find(".lSPager").find("li");this.active(i,!0)},fade:function(){this.active(a,!1);var t=m.parent().find(".lSPager").find("li");this.active(t,!0)},slide:function(){var t=this;E.calSlide=function(){d>f&&(y=t.slideValue(),t.active(a,!1),y>d-f-o.slideMargin?y=d-f-o.slideMargin:y<0&&(y=0),t.move(r,y),o.loop===!0&&"slide"===o.mode&&(g>=h-r.find(".clone.left").length/o.slideMove&&t.resetSlide(r.find(".clone.left").length),0===g&&t.resetSlide(m.find(".lslide").length)))},E.calSlide()},resetSlide:function(t){var e=this;m.find(".lSAction a").addClass("disabled"),setTimeout(function(){g=t,m.css("transition-duration","0ms"),y=e.slideValue(),e.active(a,!1),n.move(r,y),setTimeout(function(){m.css("transition-duration",o.speed+"ms"),m.find(".lSAction a").removeClass("disabled")},50)},o.speed+100)},slideValue:function(){var t=0;if(o.autoWidth===!1)t=g*((w+o.slideMargin)*o.slideMove);else{t=0;for(var e=0;e<g;e++)t+=parseInt(a.eq(e).width())+o.slideMargin}return t},slideThumb:function(){var t;switch(o.currentPagerPosition){case"left":t=0;break;case"middle":t=f/2-S/2;break;case"right":t=f-S}var e=g-r.find(".clone.left").length,i=m.parent().find(".lSPager");"slide"===o.mode&&o.loop===!0&&(e>=i.children().length?e=0:e<0&&(e=i.children().length));var n=e*(S+o.thumbMargin)-t;n+f>b&&(n=b-f-o.thumbMargin),n<0&&(n=0),this.move(i,n)},auto:function(){o.auto&&(x=setInterval(function(){r.goToNextSlide()},o.pause))},touchMove:function(t,e){if(m.css("transition-duration","0ms"),"slide"===o.mode){var i=t-e,n=y-i;if(n>=d-f-o.slideMargin)if(o.freeMove===!1)n=d-f-o.slideMargin;else{var s=d-f-o.slideMargin;n=s+(n-s)/5}else n<0&&(o.freeMove===!1?n=0:n/=5);this.move(r,n)}},touchEnd:function(t){if(m.css("transition-duration",o.speed+"ms"),clearInterval(x),"slide"===o.mode){var e=!1,i=!0;y-=t,y>d-f-o.slideMargin?(y=d-f-o.slideMargin,o.autoWidth===!1&&(e=!0)):y<0&&(y=0);var n=function(t){var i=0;if(e||t&&(i=1),o.autoWidth)for(var n=0,s=0;s<a.length&&(n+=parseInt(a.eq(s).width())+o.slideMargin,g=s+i,!(n>=y));s++);else{var r=y/((w+o.slideMargin)*o.slideMove);g=parseInt(r)+i,y>=d-f-o.slideMargin&&r%1!==0&&g++}};t>=o.swipeThreshold?(n(!1),i=!1):t<=-o.swipeThreshold&&(n(!0),i=!1),r.mode(i),this.slideThumb()}else t>=o.swipeThreshold?r.goToPrevSlide():t<=-o.swipeThreshold&&r.goToNextSlide()},enableDrag:function(){var e=this;if(!C){var i=0,n=0,s=!1;m.on("mousedown",function(e){return!(d<f&&0!==d)&&void("lSPrev"!==t(e.target).attr("class")&&"lSNext"!==t(e.target).attr("class")&&(i=o.vertical===!0?e.pageY:e.pageX,s=!0,e.preventDefault()))}),t(window).on("mousemove",function(t){s&&(n=o.vertical===!0?t.pageY:t.pageX,e.touchMove(n,i))}),t(window).on("mouseup",function(r){if(s){s=!1,n=o.vertical===!0?r.pageY:r.pageX;var a=n-i;Math.abs(a)>=o.swipeThreshold&&t(window).on("click.ls",function(e){e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),t(window).off("click.ls")}),e.touchEnd(a)}})}},enableTouch:function(){var t=this;if(C){var e={},i={};m.on("touchstart",function(t){i=t.originalEvent.targetTouches[0],e.pageX=t.originalEvent.targetTouches[0].pageX,e.pageY=t.originalEvent.targetTouches[0].pageY}),m.on("touchmove",function(n){if(d<f&&0!==d)return!1;var s=n.originalEvent;i=s.targetTouches[0];var r=Math.abs(i.pageX-e.pageX),a=Math.abs(i.pageY-e.pageY);o.vertical===!0?(3*a>r&&n.preventDefault(),t.touchMove(i.pageY,e.pageY)):(3*r>a&&n.preventDefault(),t.touchMove(i.pageX,e.pageX))}),m.on("touchend",function(){if(d<f&&0!==d)return!1;if(o.vertical===!0)var n=i.pageY-e.pageY;else var n=i.pageX-e.pageX;t.touchEnd(n)})}},build:function(){var t=this;t.initialStyle(),t.auto(),this.doCss()&&(o.enableTouch===!0&&t.enableTouch(),o.enableDrag===!0&&t.enableDrag()),t.pager(),t.controls(),t.keyPress()}},n.build(),E.init=function(){E.chbreakpoint(),o.vertical===!0?(f=o.item>1?o.verticalHeight:a.outerHeight(),m.css("height",f+"px")):f=m.outerWidth(),o.loop===!0&&"slide"===o.mode&&E.clone(),E.calL(),"slide"===o.mode&&r.removeClass("lSSlide"),"slide"===o.mode&&(E.calSW(),E.sSW()),setTimeout(function(){"slide"===o.mode&&r.addClass("lSSlide")},1e3),o.pager&&E.createPager(),o.adaptiveHeight===!0&&o.vertical===!1&&r.css("height",a.eq(g).height()),o.gallery===!0&&n.slideThumb(),"slide"===o.mode&&n.slide(),o.autoWidth===!1?a.length<=o.item?m.find(".lSAction").hide():m.find(".lSAction").show():E.calWidth(!1)<f&&0!==d?m.find(".lSAction").hide():m.find(".lSAction").show()},r.goToPrevSlide=function(){if(g>0)o.onBeforePrevSlide.call(this,r,g),g--,r.mode(!1),o.gallery===!0&&n.slideThumb();else if(o.loop===!0){if(o.onBeforePrevSlide.call(this,r,g),"fade"===o.mode){var t=h-1;g=parseInt(t/o.slideMove)}r.mode(!1),o.gallery===!0&&n.slideThumb()}else o.slideEndAnimatoin===!0&&(r.addClass("leftEnd"),setTimeout(function(){r.removeClass("leftEnd")},400))},r.goToNextSlide=function(){var t=!0;if("slide"===o.mode)var e=n.slideValue(),t=e<d-f-o.slideMargin;g*o.slideMove<h-o.slideMove&&t?(o.onBeforeNextSlide.call(this,r,g),g++,r.mode(!1),o.gallery===!0&&n.slideThumb()):o.loop===!0?(o.onBeforeNextSlide.call(this,r,g),g=0,r.mode(!1),o.gallery===!0&&n.slideThumb()):o.slideEndAnimatoin===!0&&(r.addClass("rightEnd"),setTimeout(function(){r.removeClass("rightEnd")},400))},r.mode=function(t){o.adaptiveHeight===!0&&o.vertical===!1&&r.css("height",a.eq(g).height()),p===!1&&("slide"===o.mode?n.doCss()&&(r.addClass("lSSlide"),""!==o.speed&&m.css("transition-duration",o.speed+"ms"),""!==o.cssEasing&&m.css("transition-timing-function",o.cssEasing)):n.doCss()&&(""!==o.speed&&r.css("transition-duration",o.speed+"ms"),""!==o.cssEasing&&r.css("transition-timing-function",o.cssEasing))),t||o.onBeforeSlide.call(this,r,g),"slide"===o.mode?n.slide():n.fade(),setTimeout(function(){t||o.onAfterSlide.call(this,r,g)},o.speed),p=!0},r.play=function(){clearInterval(x),r.goToNextSlide(),x=setInterval(function(){r.goToNextSlide()},o.pause)},r.pause=function(){clearInterval(x)},r.refresh=function(){E.init()},r.getCurrentSlideCount=function(){var t=g;if(o.loop){var e=m.find(".lslide").length,i=r.find(".clone.left").length;t=g<=i-1?e+(g-i):g>=e+i?g-e-i:g-i}return t+1},r.getTotalSlideCount=function(){return m.find(".lslide").length},r.goToSlide=function(t){g=o.loop?t+r.find(".clone.left").length-1:t,r.mode(!1),o.gallery===!0&&n.slideThumb()},setTimeout(function(){o.onSliderLoad.call(this,r)},10),t(window).on("resize orientationchange",function(t){setTimeout(function(){t.preventDefault(),E.init()},200)}),this}}(jQuery),function(t){"use strict";t.fn.lightGallery=function(e){var i,n,o,s,r,a,l,u,c,h,d,p,f,m,g={mode:"slide",useCSS:!0,easing:"ease",speed:1e3,closable:!0,loop:!1,auto:!1,pause:4e3,preload:1,escKey:!0,rel:!1,lang:{allPhotos:"All photos"},exThumbImage:!1,index:!1,thumbnail:!0,caption:!1,captionLink:!1,desc:!1,counter:!1,controls:!0,prevHtml:"",nextHtml:"",hideControlOnEnd:!1,mobileSrc:!1,mobileSrcMaxWidth:640,swipeThreshold:50,vimeoColor:"CCCCCC",videoAutoplay:!0,videoMaxWidth:855,dynamic:!1,dynamicEl:[],onOpen:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){},onBeforeClose:function(){},onCloseAfter:function(){}},v=t(this),_=!1,y='<div id="lightGallery-outer"><div id="lightGallery-Gallery"><div id="lightGallery-slider"></div><a id="lightGallery-close" class="close"><span class="icon icon-remove"></span></a></div></div>',b=void 0!==document.createTouch||"ontouchstart"in window||"onmsgesturechange"in window||navigator.msMaxTouchPoints,w=!1,S=!1,x=!1,C=t.extend(!0,{},g,e),E={init:function(){v.each(function(){var e=t(this);1==C.dynamic?(i=C.dynamicEl,n=0,h=n,k.init(n)):(i=t(this).children(),i.click(function(o){if(1==C.rel&&e.data("rel")){var s=e.data("rel");i=t('[data-rel="'+s+'"]').children()}else i=e.children();o.preventDefault(),o.stopPropagation(),n=i.index(this),h=n,k.init(n)}))})}},k={init:function(){this.start(),this.build()},start:function(){this.structure(),this.getWidth(),this.closeSlide()},build:function(){this.autoStart(),this.addCaption(),this.addDesc(),this.counter(),this.slideTo(),this.buildThumbnail(),this.keyPress(),C.index?this.slide(C.index):this.slide(n),this.touch(),this.enableTouch(),setTimeout(function(){o.addClass("opacity")},50)},structure:function(){t("body").append(y).addClass("lightGallery"),s=t("#lightGallery-outer"),o=t("#lightGallery-Gallery"),r=o.find("#lightGallery-slider");var e="";if(1==C.dynamic)for(var n=0;n<C.dynamicEl.length;n++)e+='<div class="lightGallery-slide"></div>';else i.each(function(){e+='<div class="lightGallery-slide"></div>'});r.append(e),a=o.find(".lightGallery-slide")},closeSlide:function(){var e=this;C.closable&&t(".lightGallery-slide").on("click",function(i){console.log(i.target),t(i.target).is(".lightGallery-slide")&&e.destroy()}),t("#lightGallery-close").bind("click touchend",function(){e.destroy()})},getWidth:function(){var e=function(){f=t(window).width()};t(window).bind("resize.lightGallery",e())},doCss:function(){var t=function(){for(var t=["transition","MozTransition","WebkitTransition","OTransition","msTransition","KhtmlTransition"],e=document.documentElement,i=0;i<t.length;i++)if(t[i]in e.style)return!0};return!(!C.useCSS||!t())},enableTouch:function(){var e=this;if(b){var i={},n={};t("body").on("touchstart.lightGallery",function(t){n=t.originalEvent.targetTouches[0],i.pageX=t.originalEvent.targetTouches[0].pageX,i.pageY=t.originalEvent.targetTouches[0].pageY}),t("body").on("touchmove.lightGallery",function(t){var e=t.originalEvent;n=e.targetTouches[0],t.preventDefault()}),t("body").on("touchend.lightGallery",function(){var t=n.pageX-i.pageX,o=C.swipeThreshold;t>=o?(e.prevSlide(),clearInterval(m)):t<=-o&&(e.nextSlide(),clearInterval(m))})}},touch:function(){var e,i,n=this;t(".lightGallery").bind("mousedown",function(t){t.stopPropagation(),t.preventDefault(),e=t.pageX}),t(".lightGallery").bind("mouseup",function(t){t.stopPropagation(),t.preventDefault(),i=t.pageX,i-e>20?n.prevSlide():e-i>20&&n.nextSlide()})},isIframe:function(e){return t(e.children()[0]).is("iframe")},isVideo:function(t){var e=t.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/)?([a-z0-9_\-]+)/i),i=t.match(/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i);if(e||i)return!0},loadVideo:function(t,e){var i=t.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/|v\/)?([a-z0-9_\-]+)/i),n=t.match(/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_\.]+)\?.*clip_id=(\d+)/i),o="",s="";return i?(s=C.videoAutoplay===!0&&_===!1?"?autoplay=1&rel=0&wmode=opaque":"?wmode=opaque",o='<iframe id="video'+e+'" width="560" height="315" src="//www.youtube.com/embed/'+i[1]+s+'" frameborder="0" allowfullscreen></iframe>'):n&&(s=C.videoAutoplay===!0&&_===!1?"autoplay=1&amp;":"",o='<iframe id="video'+e+'" width="560" height="315"  src="http://player.vimeo.com/video/'+n[2]+"?"+s+"byline=0&amp;portrait=0&amp;color="+C.vimeoColor+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'),'<div class="video_cont" style="max-width:'+C.videoMaxWidth+'px !important;"><div class="video">'+o+"</div></div>"},loadContent:function(t,e){var n,o,s=this;i.length-t;if(C.preload>i.length&&(C.preload=i.length),o=1==C.dynamic?C.dynamicEl[t]:i.eq(t),n=C.mobileSrc===!0&&f<=C.mobileSrcMaxWidth?1==C.dynamic?o.mobileSrc:o.attr("data-responsive-src"):1==C.dynamic?o.src:o.attr("data-original")||o.attr("data-src"),s.isVideo(n)){if(a.eq(t).hasClass("loaded")||(e===!1&&_===!0&&0===C.preload?setTimeout(function(){a.eq(t).prepend(s.loadVideo(n,t))},C.speed):a.eq(t).prepend(s.loadVideo(n,t)),a.eq(t).addClass("loaded"),C.auto&&C.videoAutoplay===!0&&clearInterval(m)),e===!1){var r=!1;if(a.eq(t).find("iframe")[0].complete&&(r=!0),r){for(var l=t,u=0;u<=C.preload;u++)s.loadContent(l+u,!0);for(var c=0;c<=C.preload;c++)s.loadContent(l-c,!0)}else a.eq(t).find("iframe").on("load error",function(){for(var e=t,n=0;n<=C.preload&&!(n>=i.length-t);n++)s.loadContent(e+n,!0);for(var o=0;o<=C.preload;o++)s.loadContent(e-o,!0)})}}else if(a.eq(t).hasClass("loaded")||(s.isIframe(o)?a.eq(t).prepend('<iframe width="100%" height="100%" src="'+n+'" frameborder="0"></iframe>'):a.eq(t).prepend('<img src="'+n+'" />'),a.eq(t).addClass("loaded")),e===!1&&!s.isIframe){var r=!1;if(a.eq(t).find("img")[0].complete&&(r=!0),r){for(var l=t,u=0;u<=C.preload&&!(u>=i.length-t);u++)s.loadContent(l+u,!0);for(var c=0;c<=C.preload&&!(l-c<0);c++)s.loadContent(l-c,!0)}else a.eq(t).find("img").on("load error",function(){for(var e=t,n=0;n<=C.preload&&!(n>=i.length-t);n++)s.loadContent(e+n,!0);for(var o=0;o<=C.preload&&!(e-o<0);o++)s.loadContent(e-o,!0)})}},addCaption:function(){if(C.caption===!0){var t,e=!1;for(t=0;t<i.length;t++)if(e=1==C.dynamic?C.dynamicEl[t].caption:i.eq(t).attr("data-title"),"undefined"!=typeof e&&null!=e||(e="image "+t),C.captionLink===!0){var n=i.eq(t).attr("data-link");n="undefined"!=typeof n&&""!==n?n:"#",a.eq(t).append('<div class="info group"><a href="'+n+'" class="title">'+e+"</a></div>")}else a.eq(t).append('<div class="info group"><span class="title">'+e+"</span></div>")}},addDesc:function(){if(C.desc===!0){var t,e=!1;for(t=0;t<i.length;t++)e=1==C.dynamic?C.dynamicEl[t].desc:i.eq(t).attr("data-desc"),"undefined"!=typeof e&&null!=e||(e="image "+t),C.caption===!1?a.eq(t).append('<div class="info group"><span class="desc">'+e+"</span></div>"):a.eq(t).find(".info").append('<span class="desc">'+e+"</span>")}},counter:function(){if(C.counter===!0){var e=t("#lightGallery-slider > div").length;o.append("<div id='lightGallery_counter'><span id='lightGallery_counter_current'></span> / <span id='lightGallery_counter_all'>"+e+"</span></div>")}},buildThumbnail:function(){if(C.thumbnail===!0&&i.length>1){var e=this;o.append('<div class="thumb_cont"><div class="thumb_info"><span class="close ib"><i class="bUi-iCn-rMv-16" aria-hidden="true"></i></span></div><div class="thumb_inner"></div></div>'),d=o.find(".thumb_cont"),l.after('<a class="cLthumb"></a>'),d.addClass("open"),o.find(".cLthumb").bind("click touchend",function(){d.addClass("open"),e.doCss()&&"slide"===C.mode&&(a.eq(n).prevAll().removeClass("nextSlide").addClass("prevSlide"),a.eq(n).nextAll().removeClass("prevSlide").addClass("nextSlide"))}),o.find(".close").bind("click touchend",function(){d.removeClass("open")});var s,r=o.find(".thumb_info"),u=o.find(".thumb_inner"),c="";if(1==C.dynamic)for(var h=0;h<C.dynamicEl.length;h++)s=C.dynamicEl[h].thumb,c+='<div class="thumb"><img src="'+s+'" /></div>';else i.each(function(){s=C.exThumbImage===!1||"undefined"==typeof t(this).attr(C.exThumbImage)||null==t(this).attr(C.exThumbImage)?t(this).attr("data-thumb"):t(this).attr(C.exThumbImage),c+='<div class="thumb" data-type="'+t(this).data("type")+'"><img src="'+s+'" /></div>'});u.append(c),p=u.find(".thumb"),p.bind("click touchend",function(){w=!0;var i=t(this).index();p.removeClass("active"),t(this).addClass("active"),C.onThumbClick.call(this),
e.slide(i),clearInterval(m)}),r.prepend('<span class="ib count">'+C.lang.allPhotos+" ("+p.length+")</span>")}},slideTo:function(){var t=this;C.controls===!0&&i.length>1&&(o.append('<a id="lightGallery-prev" href="#">'+C.prevHtml+'</a><a id="lightGallery-next" href="#">'+C.nextHtml+"</a>"),l=o.find("#lightGallery-prev"),u=o.find("#lightGallery-next"),c=o.find("#lightGallery-action"),l.bind("click",function(e){e.preventDefault(),e.stopPropagation(),t.prevSlide(),clearInterval(m)}),u.bind("click",function(e){e.preventDefault(),e.stopPropagation(),t.nextSlide(),clearInterval(m)}),c.bind("click",function(){t.destroy()}))},autoStart:function(){var t=this;C.auto===!0&&(m=setInterval(function(){n=n+1<i.length?n:-1,n++,t.slide(n)},C.pause))},keyPress:function(){var e=this;t(window).bind("keyup.lightGallery",function(t){t.preventDefault(),t.stopPropagation(),37===t.keyCode&&(e.prevSlide(),clearInterval(m)),38===t.keyCode&&C.thumbnail===!0?d.hasClass("open")||(e.doCss()&&"slide"===C.mode&&(a.eq(n).prevAll().removeClass("nextSlide").addClass("prevSlide"),a.eq(n).nextAll().removeClass("prevSlide").addClass("nextSlide")),d.addClass("open")):39===t.keyCode&&(e.nextSlide(),clearInterval(m)),40===t.keyCode&&C.thumbnail===!0?d.hasClass("open")&&d.removeClass("open"):C.escKey===!0&&27===t.keyCode&&(C.thumbnail===!0&&d.hasClass("open")?d.removeClass("open"):e.destroy())})},nextSlide:function(){var t=this;n=a.index(a.eq(h)),n+1<i.length?(n++,t.slide(n)):C.loop?(n=0,t.slide(n)):"fade"===C.mode&&C.thumbnail===!0&&i.length>1&&d.addClass("open"),C.onSlideNext.call(this)},prevSlide:function(){var t=this;n=a.index(a.eq(h)),n>0?(n--,t.slide(n)):C.loop?(n=i.length-1,t.slide(n)):"fade"===C.mode&&C.thumbnail===!0&&i.length>1&&d.addClass("open"),C.onSlidePrev.call(this)},slide:function(e){if(this.loadContent(e,!1),_&&(r.hasClass("on")||r.addClass("on"),this.doCss()&&""!==C.speed&&(r.hasClass("speed")||r.addClass("speed"),x===!1&&(r.css("transition-duration",C.speed+"ms"),x=!0)),this.doCss()&&""!==C.easing&&(r.hasClass("timing")||r.addClass("timing"),S===!1&&(r.css("transition-timing-function",C.easing),S=!0)),C.onSlideBefore.call(this)),"slide"===C.mode){var n=null!=navigator.userAgent.match(/iPad/i);!this.doCss()||r.hasClass("slide")||n?this.doCss()&&!r.hasClass("useLeft")&&n&&r.addClass("useLeft"):r.addClass("slide"),this.doCss()||_?!this.doCss()&&_&&r.animate({left:100*-e+"%"},C.speed,C.easing):r.css({left:100*-e+"%"})}else"fade"===C.mode&&(this.doCss()&&!r.hasClass("fadeM")?r.addClass("fadeM"):this.doCss()||r.hasClass("animate")||r.addClass("animate"),this.doCss()||_?!this.doCss()&&_&&(a.eq(h).fadeOut(C.speed,C.easing),a.eq(e).fadeIn(C.speed,C.easing)):(a.fadeOut(100),a.eq(e).fadeIn(100)));if(e+1>=i.length&&C.auto&&C.loop===!1&&clearInterval(m),a.eq(h).removeClass("current"),a.eq(e).addClass("current"),this.doCss()&&"slide"===C.mode&&(w===!1?(t(".prevSlide").removeClass("prevSlide"),t(".nextSlide").removeClass("nextSlide"),a.eq(e-1).addClass("prevSlide"),a.eq(e+1).addClass("nextSlide")):(a.eq(e).prevAll().removeClass("nextSlide").addClass("prevSlide"),a.eq(e).nextAll().removeClass("prevSlide").addClass("nextSlide"))),C.thumbnail===!0&&i.length>1&&(p.removeClass("active"),p.eq(e).addClass("active")),C.controls&&C.hideControlOnEnd&&C.loop===!1&&i.length>1){var o=i.length;o=parseInt(o)-1,0===e?(l.addClass("disabled"),u.removeClass("disabled")):e===o?(l.removeClass("disabled"),u.addClass("disabled")):l.add(u).removeClass("disabled")}h=e,_===!1?C.onOpen.call(this):C.onSlideAfter.call(this),_=!0,w=!1,C.counter&&t("#lightGallery_counter_current").text(e+1)},destroy:function(){C.onBeforeClose.call(this),_=!1,S=!1,x=!1,w=!1,clearInterval(m),t(".lightGallery").off("mousedown mouseup"),t("body").off("touchstart.lightGallery touchmove.lightGallery touchend.lightGallery"),t(window).off("resize.lightGallery keyup.lightGallery"),o.addClass("fadeM"),setTimeout(function(){s.remove(),t("body").removeClass("lightGallery")},500),C.onCloseAfter.call(this)}};return E.init(),this}}(jQuery),+function(t){t(document).ready(function(){function e(e,i){setTimeout(function(e,i){return function(){var n=t("li#image-"+i,e),o=n.find("img");if(o.length){var s=n.data("src");o.each(function(){this.src=s})}}}(e,i),1)}var i=function(t,e){return t.find(".item.active").hasClass(e)},n=function(e,i){el=t(i),e?el.hide():el.show()},o=function(){var e="#lightGallery-prev, #lightGallery-next";t("#lightGallery-slider .current iframe").length>0?t(e).hide():t(e).show()},s=function(){return t("#lightGallery-Gallery .thumb.active").data("type")},r=function(){return t(".lightSlider .item.active").data("type")},a="cycle",l=!1,u=(t(".image-gallery").lightGallery({loop:!0,mode:"fade",prevHtml:'<span class="icon icon-chevron-left"></span>',nextHtml:'<span class="icon icon-chevron-right"></span>',onOpen:function(){o(),l=!0},onBeforeClose:function(){l=!1},onSlideAfter:function(){console.log("onSlideAfter#gallery"),dataLayer.push({event:s(),direction:a,zoomed:!0}),o(),a="cycle"},onThumbClick:function(){a="thumbnail"}}),t("#image-gallery").lightSlider({gallery:!0,loop:!0,keyPress:!0,item:1,slideMargin:0,thumbItem:16,mode:"fade",speed:500,prevHtml:'<span class="icon icon-chevron-left"></span>',nextHtml:'<span class="icon icon-chevron-right"></span>',thumbWidth:30,onBeforeSlide:function(i,n){e(i,n),t("#image-gallery-control .counter").text(u.getCurrentSlideCount())},onBeforeStart:function(t){e(t,0)},onThumbClick:function(){a="thumbnail"},onAfterSlide:function(e){var e=t(e),o=t("#carousel .banner.saved-large").not(".unsaved"),s=i(e,"floored_model"),u=i(e,"linked_video");l||dataLayer.push({event:r(),direction:a,zoomed:!1}),a="cycle",n(s||u,o),n(s||u,".lSAction"),n(s,"#labels-control"),n(i(e,"floorplan"),"#labels-control .floorplan")}}));t("#responsiveSlider").lightSlider({item:4,loop:!0,slideMove:2,slideMargin:10,easing:"cubic-bezier(0.25, 0, 0.25, 1)",pager:!1,prevHtml:'<span class="icon icon-chevron-left"></span>',nextHtml:'<span class="icon icon-chevron-right"></span>',responsive:[{breakpoint:760,settings:{item:3,slideMove:1,slideMargin:10}},{breakpoint:660,settings:{item:2,slideMove:1,slideMargin:10}},{breakpoint:430,settings:{item:1,slideMove:1,slideMargin:10}}]}),t(".auto-hero-slider").lightSlider({loop:!0,auto:!0,controls:!1,pager:!1,enableTouch:!1,enableDrag:!1,autoWidth:!0,pause:3e3,mode:"fade"}),t("#image-gallery-control .prev").click(function(){return u.goToPrevSlide(),!1}),t("#image-gallery-control .next").click(function(){return u.goToNextSlide(),!1}),t("#labels-control a").click(function(){var e=t("#image-gallery li").index(t("#image-gallery li."+t(this).attr("class")).first());return u.goToSlide(e+1),!1}),t("#full-size").click(function(){return t(this).parent("li").find("iframe").trigger("click"),!1});for(var c=t(".image-gallery").children(".item"),h=0;h<c.length;h++){var d=t(c[h]),p=d.children("img");if(p.length){var f=t(p),m=t("<img src='about:blank'/>");m.attr("style","display:block; margin:auto;"),m.attr("data-no-retina","true"),f.attr("data-src")?m.attr("data-original",f.attr("data-src")):m.attr("src",f.attr("src")),m.appendTo(d)}}})}(jQuery),!function(t){"use strict";var e=t.jCarousel={};e.version="0.3.4";var i=/^([+\-]=)?(.+)$/;e.parseTarget=function(t){var e=!1,n="object"!=typeof t?i.exec(t):null;return n?(t=parseInt(n[2],10)||0,n[1]&&(e=!0,"-="===n[1]&&(t*=-1))):"object"!=typeof t&&(t=parseInt(t,10)||0),{target:t,relative:e}},e.detectCarousel=function(t){for(var e;t.length>0;){if(e=t.filter("[data-jcarousel]"),e.length>0)return e;if(e=t.find("[data-jcarousel]"),e.length>0)return e;t=t.parent()}return null},e.base=function(i){return{version:e.version,_options:{},_element:null,_carousel:null,_init:t.noop,_create:t.noop,_destroy:t.noop,_reload:t.noop,create:function(){return this._element.attr("data-"+i.toLowerCase(),!0).data(i,this),!1===this._trigger("create")?this:(this._create(),this._trigger("createend"),this)},destroy:function(){return!1===this._trigger("destroy")?this:(this._destroy(),this._trigger("destroyend"),this._element.removeData(i).removeAttr("data-"+i.toLowerCase()),this)},reload:function(t){return!1===this._trigger("reload")?this:(t&&this.options(t),this._reload(),this._trigger("reloadend"),this)},element:function(){return this._element},options:function(e,i){if(0===arguments.length)return t.extend({},this._options);if("string"==typeof e){if("undefined"==typeof i)return"undefined"==typeof this._options[e]?null:this._options[e];this._options[e]=i}else this._options=t.extend({},this._options,e);return this},carousel:function(){return this._carousel||(this._carousel=e.detectCarousel(this.options("carousel")||this._element),this._carousel||t.error('Could not detect carousel for plugin "'+i+'"')),this._carousel},_trigger:function(e,n,o){var s,r=!1;return o=[this].concat(o||[]),(n||this._element).each(function(){s=t.Event((i+":"+e).toLowerCase()),t(this).trigger(s,o),s.isDefaultPrevented()&&(r=!0)}),!r}}},e.plugin=function(i,n){var o=t[i]=function(e,i){this._element=t(e),this.options(i),this._init(),this.create()};return o.fn=o.prototype=t.extend({},e.base(i),n),t.fn[i]=function(e){var n=Array.prototype.slice.call(arguments,1),s=this;return this.each("string"==typeof e?function(){var o=t(this).data(i);if(!o)return t.error("Cannot call methods on "+i+' prior to initialization; attempted to call method "'+e+'"');if(!t.isFunction(o[e])||"_"===e.charAt(0))return t.error('No such method "'+e+'" for '+i+" instance");var r=o[e].apply(o,n);return r!==o&&"undefined"!=typeof r?(s=r,!1):void 0}:function(){var n=t(this).data(i);n instanceof o?n.reload(e):new o(this,e)}),s},o}}(jQuery),function(t,e){"use strict";var i=function(t){return parseFloat(t)||0};t.jCarousel.plugin("jcarousel",{animating:!1,tail:0,inTail:!1,resizeTimer:null,lt:null,vertical:!1,rtl:!1,circular:!1,underflow:!1,relative:!1,_options:{list:function(){return this.element().children().eq(0)},items:function(){return this.list().children()},animation:400,transitions:!1,wrap:null,vertical:null,rtl:null,center:!1},_list:null,_items:null,_target:t(),_first:t(),_last:t(),_visible:t(),_fullyvisible:t(),_init:function(){var t=this;return this.onWindowResize=function(){t.resizeTimer&&clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout(function(){t.reload()},100)},this},_create:function(){this._reload(),t(e).on("resize.jcarousel",this.onWindowResize)},_destroy:function(){t(e).off("resize.jcarousel",this.onWindowResize)},_reload:function(){this.vertical=this.options("vertical"),null==this.vertical&&(this.vertical=this.list().height()>this.list().width()),this.rtl=this.options("rtl"),null==this.rtl&&(this.rtl=function(e){if("rtl"===(""+e.attr("dir")).toLowerCase())return!0;var i=!1;return e.parents("[dir]").each(function(){return/rtl/i.test(t(this).attr("dir"))?(i=!0,!1):void 0}),i}(this._element)),this.lt=this.vertical?"top":"left",this.relative="relative"===this.list().css("position"),this._list=null,this._items=null;var e=this.index(this._target)>=0?this._target:this.closest();this.circular="circular"===this.options("wrap"),this.underflow=!1;var i={left:0,top:0};return e.length>0&&(this._prepare(e),this.list().find("[data-jcarousel-clone]").remove(),this._items=null,this.underflow=this._fullyvisible.length>=this.items().length,this.circular=this.circular&&!this.underflow,i[this.lt]=this._position(e)+"px"),this.move(i),this},list:function(){if(null===this._list){var e=this.options("list");this._list=t.isFunction(e)?e.call(this):this._element.find(e)}return this._list},items:function(){if(null===this._items){var e=this.options("items");this._items=(t.isFunction(e)?e.call(this):this.list().find(e)).not("[data-jcarousel-clone]")}return this._items},index:function(t){return this.items().index(t)},closest:function(){var e,n=this,o=this.list().position()[this.lt],s=t(),r=!1,a=this.vertical?"bottom":this.rtl&&!this.relative?"left":"right";return this.rtl&&this.relative&&!this.vertical&&(o+=this.list().width()-this.clipping()),this.items().each(function(){if(s=t(this),r)return!1;var l=n.dimension(s);if(o+=l,o>=0){if(e=l-i(s.css("margin-"+a)),!(Math.abs(o)-l+e/2<=0))return!1;r=!0}}),s},target:function(){return this._target},first:function(){return this._first},last:function(){return this._last},visible:function(){return this._visible},fullyvisible:function(){return this._fullyvisible},hasNext:function(){if(!1===this._trigger("hasnext"))return!0;var t=this.options("wrap"),e=this.items().length-1,i=this.options("center")?this._target:this._last;return!!(e>=0&&!this.underflow&&(t&&"first"!==t||this.index(i)<e||this.tail&&!this.inTail))},hasPrev:function(){if(!1===this._trigger("hasprev"))return!0;var t=this.options("wrap");return!!(this.items().length>0&&!this.underflow&&(t&&"last"!==t||this.index(this._first)>0||this.tail&&this.inTail))},clipping:function(){return this._element["inner"+(this.vertical?"Height":"Width")]()},dimension:function(t){return t["outer"+(this.vertical?"Height":"Width")](!0)},scroll:function(e,i,n){if(this.animating)return this;if(!1===this._trigger("scroll",null,[e,i]))return this;t.isFunction(i)&&(n=i,i=!0);var o=t.jCarousel.parseTarget(e);if(o.relative){var s,r,a,l,u,c,h,d,p=this.items().length-1,f=Math.abs(o.target),m=this.options("wrap");if(o.target>0){var g=this.index(this._last);if(g>=p&&this.tail)this.inTail?"both"===m||"last"===m?this._scroll(0,i,n):t.isFunction(n)&&n.call(this,!1):this._scrollTail(i,n);else if(s=this.index(this._target),this.underflow&&s===p&&("circular"===m||"both"===m||"last"===m)||!this.underflow&&g===p&&("both"===m||"last"===m))this._scroll(0,i,n);else if(a=s+f,this.circular&&a>p){for(d=p,u=this.items().get(-1);d++<a;)u=this.items().eq(0),c=this._visible.index(u)>=0,c&&u.after(u.clone(!0).attr("data-jcarousel-clone",!0)),this.list().append(u),c||(h={},h[this.lt]=this.dimension(u),this.moveBy(h)),this._items=null;this._scroll(u,i,n)}else this._scroll(Math.min(a,p),i,n)}else if(this.inTail)this._scroll(Math.max(this.index(this._first)-f+1,0),i,n);else if(r=this.index(this._first),s=this.index(this._target),l=this.underflow?s:r,a=l-f,0>=l&&(this.underflow&&"circular"===m||"both"===m||"first"===m))this._scroll(p,i,n);else if(this.circular&&0>a){for(d=a,u=this.items().get(0);d++<0;){u=this.items().eq(-1),c=this._visible.index(u)>=0,c&&u.after(u.clone(!0).attr("data-jcarousel-clone",!0)),this.list().prepend(u),this._items=null;var v=this.dimension(u);h={},h[this.lt]=-v,this.moveBy(h)}this._scroll(u,i,n)}else this._scroll(Math.max(a,0),i,n)}else this._scroll(o.target,i,n);return this._trigger("scrollend"),this},moveBy:function(t,e){var n=this.list().position(),o=1,s=0;return this.rtl&&!this.vertical&&(o=-1,this.relative&&(s=this.list().width()-this.clipping())),t.left&&(t.left=n.left+s+i(t.left)*o+"px"),t.top&&(t.top=n.top+s+i(t.top)*o+"px"),this.move(t,e)},move:function(e,i){i=i||{};var n=this.options("transitions"),o=!!n,s=!!n.transforms,r=!!n.transforms3d,a=i.duration||0,l=this.list();if(!o&&a>0)return void l.animate(e,i);var u=i.complete||t.noop,c={};if(o){var h={transitionDuration:l.css("transitionDuration"),transitionTimingFunction:l.css("transitionTimingFunction"),transitionProperty:l.css("transitionProperty")},d=u;u=function(){t(this).css(h),d.call(this)},c={transitionDuration:(a>0?a/1e3:0)+"s",transitionTimingFunction:n.easing||i.easing,transitionProperty:a>0?function(){return s||r?"all":e.left?"left":"top"}():"none",transform:"none"}}r?c.transform="translate3d("+(e.left||0)+","+(e.top||0)+",0)":s?c.transform="translate("+(e.left||0)+","+(e.top||0)+")":t.extend(c,e),o&&a>0&&l.one("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",u),l.css(c),0>=a&&l.each(function(){u.call(this)})},_scroll:function(e,i,n){if(this.animating)return t.isFunction(n)&&n.call(this,!1),this;if("object"!=typeof e?e=this.items().eq(e):"undefined"==typeof e.jquery&&(e=t(e)),0===e.length)return t.isFunction(n)&&n.call(this,!1),this;this.inTail=!1,this._prepare(e);var o=this._position(e),s=this.list().position()[this.lt];if(o===s)return t.isFunction(n)&&n.call(this,!1),this;var r={};return r[this.lt]=o+"px",this._animate(r,i,n),this},_scrollTail:function(e,i){if(this.animating||!this.tail)return t.isFunction(i)&&i.call(this,!1),this;var n=this.list().position()[this.lt];this.rtl&&this.relative&&!this.vertical&&(n+=this.list().width()-this.clipping()),this.rtl&&!this.vertical?n+=this.tail:n-=this.tail,this.inTail=!0;var o={};return o[this.lt]=n+"px",this._update({target:this._target.next(),fullyvisible:this._fullyvisible.slice(1).add(this._visible.last())}),this._animate(o,e,i),this},_animate:function(e,i,n){if(n=n||t.noop,!1===this._trigger("animate"))return n.call(this,!1),this;this.animating=!0;var o=this.options("animation"),s=t.proxy(function(){this.animating=!1;var t=this.list().find("[data-jcarousel-clone]");t.length>0&&(t.remove(),this._reload()),this._trigger("animateend"),n.call(this,!0)},this),r="object"==typeof o?t.extend({},o):{duration:o},a=r.complete||t.noop;return i===!1?r.duration=0:"undefined"!=typeof t.fx.speeds[r.duration]&&(r.duration=t.fx.speeds[r.duration]),r.complete=function(){s(),a.call(this)},this.move(e,r),this},_prepare:function(e){var n,o,s,r,a=this.index(e),l=a,u=this.dimension(e),c=this.clipping(),h=this.vertical?"bottom":this.rtl?"left":"right",d=this.options("center"),p={target:e,first:e,last:e,visible:e,fullyvisible:c>=u?e:t()};if(d&&(u/=2,c/=2),c>u)for(;;){if(n=this.items().eq(++l),0===n.length){if(!this.circular)break;if(n=this.items().eq(0),e.get(0)===n.get(0))break;if(o=this._visible.index(n)>=0,o&&n.after(n.clone(!0).attr("data-jcarousel-clone",!0)),this.list().append(n),!o){var f={};f[this.lt]=this.dimension(n),this.moveBy(f)}this._items=null}if(r=this.dimension(n),0===r)break;if(u+=r,p.last=n,p.visible=p.visible.add(n),s=i(n.css("margin-"+h)),c>=u-s&&(p.fullyvisible=p.fullyvisible.add(n)),u>=c)break}if(!this.circular&&!d&&c>u)for(l=a;!(--l<0)&&(n=this.items().eq(l),0!==n.length)&&(r=this.dimension(n),0!==r)&&(u+=r,p.first=n,p.visible=p.visible.add(n),s=i(n.css("margin-"+h)),c>=u-s&&(p.fullyvisible=p.fullyvisible.add(n)),!(u>=c)););return this._update(p),this.tail=0,d||"circular"===this.options("wrap")||"custom"===this.options("wrap")||this.index(p.last)!==this.items().length-1||(u-=i(p.last.css("margin-"+h)),u>c&&(this.tail=u-c)),this},_position:function(t){var e=this._first,i=e.position()[this.lt],n=this.options("center"),o=n?this.clipping()/2-this.dimension(e)/2:0;return this.rtl&&!this.vertical?(i-=this.relative?this.list().width()-this.dimension(e):this.clipping()-this.dimension(e),i+=o):i-=o,!n&&(this.index(t)>this.index(e)||this.inTail)&&this.tail?(i=this.rtl&&!this.vertical?i-this.tail:i+this.tail,this.inTail=!0):this.inTail=!1,-i},_update:function(e){var i,n=this,o={target:this._target,first:this._first,last:this._last,visible:this._visible,fullyvisible:this._fullyvisible},s=this.index(e.first||o.first)<this.index(o.first),r=function(i){var r=[],a=[];e[i].each(function(){o[i].index(this)<0&&r.push(this)}),o[i].each(function(){e[i].index(this)<0&&a.push(this)}),s?r=r.reverse():a=a.reverse(),n._trigger(i+"in",t(r)),n._trigger(i+"out",t(a)),n["_"+i]=e[i]};for(i in e)r(i);return this}})}(jQuery,window),function(t){"use strict";t.jcarousel.fn.scrollIntoView=function(e,i,n){var o,s=t.jCarousel.parseTarget(e),r=this.index(this._fullyvisible.first()),a=this.index(this._fullyvisible.last());if(o=s.relative?s.target<0?Math.max(0,r+s.target):a+s.target:"object"!=typeof s.target?s.target:this.index(s.target),r>o)return this.scroll(o,i,n);if(o>=r&&a>=o)return t.isFunction(n)&&n.call(this,!1),this;for(var l,u=this.items(),c=this.clipping(),h=this.vertical?"bottom":this.rtl?"left":"right",d=0;l=u.eq(o),0!==l.length;){if(d+=this.dimension(l),d>=c){var p=parseFloat(l.css("margin-"+h))||0;d-p!==c&&o++;break}if(0>=o)break;o--}return this.scroll(o,i,n)}}(jQuery),function(t){"use strict";t.jCarousel.plugin("jcarouselControl",{_options:{target:"+=1",event:"click",method:"scroll"},_active:null,_init:function(){this.onDestroy=t.proxy(function(){this._destroy(),this.carousel().one("jcarousel:createend",t.proxy(this._create,this))},this),this.onReload=t.proxy(this._reload,this),this.onEvent=t.proxy(function(e){e.preventDefault();var i=this.options("method");t.isFunction(i)?i.call(this):this.carousel().jcarousel(this.options("method"),this.options("target"))},this)},_create:function(){this.carousel().one("jcarousel:destroy",this.onDestroy).on("jcarousel:reloadend jcarousel:scrollend",this.onReload),this._element.on(this.options("event")+".jcarouselcontrol",this.onEvent),this._reload()},_destroy:function(){this._element.off(".jcarouselcontrol",this.onEvent),this.carousel().off("jcarousel:destroy",this.onDestroy).off("jcarousel:reloadend jcarousel:scrollend",this.onReload)},_reload:function(){var e,i=t.jCarousel.parseTarget(this.options("target")),n=this.carousel();if(i.relative)e=n.jcarousel(i.target>0?"hasNext":"hasPrev");else{var o="object"!=typeof i.target?n.jcarousel("items").eq(i.target):i.target;e=n.jcarousel("target").index(o)>=0}return this._active!==e&&(this._trigger(e?"active":"inactive"),this._active=e),this}})}(jQuery),function(t){"use strict";t.jCarousel.plugin("jcarouselPagination",{_options:{perPage:null,item:function(t){return'<a href="#'+t+'">'+t+"</a>"},event:"click",method:"scroll"},_carouselItems:null,_pages:{},_items:{},_currentPage:null,_init:function(){this.onDestroy=t.proxy(function(){this._destroy(),this.carousel().one("jcarousel:createend",t.proxy(this._create,this))},this),this.onReload=t.proxy(this._reload,this),this.onScroll=t.proxy(this._update,this)},_create:function(){this.carousel().one("jcarousel:destroy",this.onDestroy).on("jcarousel:reloadend",this.onReload).on("jcarousel:scrollend",this.onScroll),this._reload()},_destroy:function(){this._clear(),this.carousel().off("jcarousel:destroy",this.onDestroy).off("jcarousel:reloadend",this.onReload).off("jcarousel:scrollend",this.onScroll),this._carouselItems=null},_reload:function(){var e=this.options("perPage");if(this._pages={},this._items={},t.isFunction(e)&&(e=e.call(this)),null==e)this._pages=this._calculatePages();else for(var i,n=parseInt(e,10)||0,o=this._getCarouselItems(),s=1,r=0;i=o.eq(r++),0!==i.length;)this._pages[s]=this._pages[s]?this._pages[s].add(i):i,r%n===0&&s++;this._clear();var a=this,l=this.carousel().data("jcarousel"),u=this._element,c=this.options("item"),h=this._getCarouselItems().length;t.each(this._pages,function(e,i){var n=a._items[e]=t(c.call(a,e,i));n.on(a.options("event")+".jcarouselpagination",t.proxy(function(){var t=i.eq(0);if(l.circular){var n=l.index(l.target()),o=l.index(t);parseFloat(e)>parseFloat(a._currentPage)?n>o&&(t="+="+(h-n+o)):o>n&&(t="-="+(n+(h-o)))}l[this.options("method")](t)},a)),u.append(n)}),this._update()},_update:function(){var e,i=this.carousel().jcarousel("target");t.each(this._pages,function(t,n){return n.each(function(){return i.is(this)?(e=t,!1):void 0}),!e&&void 0}),this._currentPage!==e&&(this._trigger("inactive",this._items[this._currentPage]),this._trigger("active",this._items[e])),this._currentPage=e},items:function(){return this._items},reloadCarouselItems:function(){return this._carouselItems=null,this},_clear:function(){this._element.empty(),this._currentPage=null},_calculatePages:function(){for(var t,e,i=this.carousel().data("jcarousel"),n=this._getCarouselItems(),o=i.clipping(),s=0,r=0,a=1,l={};t=n.eq(r++),0!==t.length;)e=i.dimension(t),s+e>o&&(a++,s=0),s+=e,l[a]=l[a]?l[a].add(t):t;return l},_getCarouselItems:function(){return this._carouselItems||(this._carouselItems=this.carousel().jcarousel("items")),this._carouselItems}})}(jQuery),function(t,e){"use strict";var i,n,o={hidden:"visibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange",webkitHidden:"webkitvisibilitychange"};t.each(o,function(t,o){return"undefined"!=typeof e[t]?(i=t,n=o,!1):void 0}),t.jCarousel.plugin("jcarouselAutoscroll",{_options:{target:"+=1",interval:3e3,autostart:!0},_timer:null,_started:!1,_init:function(){this.onDestroy=t.proxy(function(){this._destroy(),this.carousel().one("jcarousel:createend",t.proxy(this._create,this))},this),this.onAnimateEnd=t.proxy(this._start,this),this.onVisibilityChange=t.proxy(function(){e[i]?this._stop():this._start()},this)},_create:function(){this.carousel().one("jcarousel:destroy",this.onDestroy),t(e).on(n,this.onVisibilityChange),this.options("autostart")&&this.start()},_destroy:function(){this._stop(),this.carousel().off("jcarousel:destroy",this.onDestroy),t(e).off(n,this.onVisibilityChange)},_start:function(){return this._stop(),this._started?(this.carousel().one("jcarousel:animateend",this.onAnimateEnd),this._timer=setTimeout(t.proxy(function(){this.carousel().jcarousel("scroll",this.options("target"))},this),this.options("interval")),this):void 0},_stop:function(){return this._timer&&(this._timer=clearTimeout(this._timer)),this.carousel().off("jcarousel:animateend",this.onAnimateEnd),this},start:function(){return this._started=!0,this._start(),this},stop:function(){return this._started=!1,this._stop(),this}})}(jQuery,document),function(t){t(function(){function e(){t(".jcarousel li").css("width",t(document).width()+20)}e(),t(window).on("resize",e),t(".jcarousel").on("jcarousel:targetin","li",function(){t(this).addClass("active")}).on("jcarousel:targetout","li",function(){t(this).removeClass("active")}).on("jcarousel:createend",function(){t(this).jcarousel("scroll",1,!1)}).on("jcarousel:scroll",function(e,i,n){if("-=1"==n){var o=t(".jcarousel ul li").not(".active").last();i.list().prepend(o),i._items=null;var s=i.dimension(o);props={},props[i.lt]=-s,i.moveBy(props)}}).jcarousel({center:!0,wrap:"circular"}).jcarousel("scroll",1,!1),t(".jcarousel-control-prev").on("jcarouselcontrol:active",function(){t(this).removeClass("inactive")}).on("jcarouselcontrol:inactive",function(){t(this).addClass("inactive")}).jcarouselControl({target:"-=1"}),t(".jcarousel-control-next").on("jcarouselcontrol:active",function(){t(this).removeClass("inactive")}).on("jcarouselcontrol:inactive",function(){t(this).addClass("inactive")}).jcarouselControl({target:"+=1"})})}(jQuery),+function(t){"use strict";function e(e){e&&3===e.which||(t(o).remove(),t(s).each(function(){var n=i(t(this)),o={relatedTarget:this};n.hasClass("open")&&(n.trigger(e=t.Event("hide.bs.dropdown",o)),e.isDefaultPrevented()||n.removeClass("open").trigger("hidden.bs.dropdown",o))}))}function i(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&t(i);return n&&n.length?n:e.parent()}function n(e){return this.each(function(){var i=t(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new r(this)),"string"==typeof e&&n[e].call(i)})}var o=".dropdown-backdrop",s='[data-toggle="dropdown"]',r=function(e){t(e).on("click.bs.dropdown",this.toggle)};r.VERSION="3.2.0",r.prototype.toggle=function(n){var o=t(this);if(!o.is(".disabled, :disabled")){var s=i(o),r=s.hasClass("open");if(e(),!r){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var a={relatedTarget:this};if(s.trigger(n=t.Event("show.bs.dropdown",a)),n.isDefaultPrevented())return;o.trigger("focus"),s.toggleClass("open").trigger("shown.bs.dropdown",a)}return!1}},r.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var n=t(this);if(e.preventDefault(),e.stopPropagation(),!n.is(".disabled, :disabled")){var o=i(n),r=o.hasClass("open");if(!r||r&&27==e.keyCode)return 27==e.which&&o.find(s).trigger("focus"),n.trigger("click");var a=" li:not(.divider):visible a",l=o.find('[role="menu"]'+a+', [role="listbox"]'+a);if(l.length){var u=l.index(l.filter(":focus"));38==e.keyCode&&u>0&&u--,40==e.keyCode&&u<l.length-1&&u++,~u||(u=0),l.eq(u).trigger("focus")}}}};var a=t.fn.dropdown;t.fn.dropdown=n,t.fn.dropdown.Constructor=r,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=a,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",s,r.prototype.toggle).on("keydown.bs.dropdown.data-api",s+', [role="menu"], [role="listbox"]',r.prototype.keydown)}(jQuery),!function(t){"use strict";function e(t){return ko.isObservable(t)&&!(void 0===t.destroyAll)}function i(t,e){var i;for(i=0;i<t.length;++i)e(t[i])}function n(e,i){this.options=this.mergeOptions(i),this.$select=t(e),this.originalOptions=this.$select.clone()[0].options,this.query="",this.searchTimeout=null,this.options.multiple="multiple"===this.$select.attr("multiple"),this.options.onChange=t.proxy(this.options.onChange,this),this.options.onDropdownShow=t.proxy(this.options.onDropdownShow,this),this.options.onDropdownHide=t.proxy(this.options.onDropdownHide,this),this.options.onDropdownShown=t.proxy(this.options.onDropdownShown,this),this.options.onDropdownHidden=t.proxy(this.options.onDropdownHidden,this),this.buildContainer(),this.buildButton(),this.buildDropdown(),this.buildSelectAll(),this.buildDropdownOptions(),this.buildFilter(),this.updateButtonText(),this.updateSelectAll(),this.options.disableIfEmpty&&this.disableIfEmpty(),this.$select.hide().after(this.$container)}"undefined"!=typeof ko&&ko.bindingHandlers&&!ko.bindingHandlers.multiselect&&(ko.bindingHandlers.multiselect={init:function(n,o,s){var r=s().selectedOptions,a=ko.utils.unwrapObservable(o());t(n).multiselect(a),e(r)&&(t(n).multiselect("select",ko.utils.unwrapObservable(r)),r.subscribe(function(e){var o=[],s=[];i(e,function(t){switch(t.status){case"added":o.push(t.value);break;case"deleted":s.push(t.value)}}),o.length>0&&t(n).multiselect("select",o),s.length>0&&t(n).multiselect("deselect",s)},null,"arrayChange"))},update:function(i,n,o){var s=o().options,r=t(i).data("multiselect"),a=ko.utils.unwrapObservable(n());e(s)&&s.subscribe(function(){t(i).multiselect("rebuild")}),r?r.updateOriginalOptions():t(i).multiselect(a)}}),n.prototype={defaults:{buttonText:function(e){if(0===e.length)return this.nonSelectedText+' <b class="caret"></b>';if(e.length>this.numberDisplayed)return e.length+" "+this.nSelectedText+' <b class="caret"></b>';var i="";return e.each(function(){var e=void 0!==t(this).attr("label")?t(this).attr("label"):t(this).html();i+=e+", "}),i.substr(0,i.length-2)+' <b class="caret"></b>'},buttonTitle:function(e){if(0===e.length)return this.nonSelectedText;var i="";return e.each(function(){i+=t(this).text()+", "}),i.substr(0,i.length-2)},label:function(e){return t(e).attr("label")||t(e).html()},onChange:function(){},onDropdownShow:function(){},onDropdownHide:function(){},onDropdownShown:function(){},onDropdownHidden:function(){},buttonClass:"btn btn-default",dropRight:!1,selectedClass:"active",buttonWidth:"auto",buttonContainer:'<div class="btn-group" />',maxHeight:!1,checkboxName:"multiselect",includeSelectAllOption:!1,includeSelectAllIfMoreThan:0,selectAllText:" Select all",selectAllValue:"multiselect-all",enableFiltering:!1,enableCaseInsensitiveFiltering:!1,filterPlaceholder:"Search",filterBehavior:"text",preventInputChangeEvent:!1,nonSelectedText:"None selected",nSelectedText:"selected",numberDisplayed:3,disableIfEmpty:!1,templates:{button:'<button type="button" class="multiselect dropdown-toggle" data-toggle="dropdown"></button>',ul:'<ul class="multiselect-container dropdown-menu"></ul>',filter:'<li class="multiselect-item filter"><div class="input-group"><span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span><input class="form-control multiselect-search" type="text"></div></li>',li:'<li><a href="javascript:void(0);"><label></label></a></li>',divider:'<li class="multiselect-item divider"></li>',liGroup:'<li class="multiselect-item group"><label class="multiselect-group"></label></li>'}},constructor:n,buildContainer:function(){this.$container=t(this.options.buttonContainer),this.$container.on("show.bs.dropdown",this.options.onDropdownShow),this.$container.on("hide.bs.dropdown",this.options.onDropdownHide),this.$container.on("shown.bs.dropdown",this.options.onDropdownShown),this.$container.on("hidden.bs.dropdown",this.options.onDropdownHidden)},buildButton:function(){this.$button=t(this.options.templates.button).addClass(this.options.buttonClass),this.$select.prop("disabled")?this.disable():this.enable(),this.options.buttonWidth&&"auto"!==this.options.buttonWidth&&(this.$button.css({width:this.options.buttonWidth}),this.$container.css({width:this.options.buttonWidth}));var e=this.$select.attr("tabindex");e&&this.$button.attr("tabindex",e),this.$container.prepend(this.$button)},buildDropdown:function(){this.$ul=t(this.options.templates.ul),this.options.dropRight&&this.$ul.addClass("pull-right"),this.options.maxHeight&&this.$ul.css({"max-height":this.options.maxHeight+"px","overflow-y":"auto","overflow-x":"hidden"
}),this.$container.append(this.$ul)},buildDropdownOptions:function(){this.$select.children().each(t.proxy(function(e,i){var n=t(i).prop("tagName").toLowerCase();t(i).prop("value")!=this.options.selectAllValue&&("optgroup"===n?this.createOptgroup(i):"option"===n&&("divider"===t(i).data("role")?this.createDivider():this.createOptionValue(i)))},this)),t("li input",this.$ul).on("change",t.proxy(function(e){var i=t(e.target),n=i.prop("checked")||!1,o=i.val()===this.options.selectAllValue;this.options.selectedClass&&(n?i.parents("li").addClass(this.options.selectedClass):i.parents("li").removeClass(this.options.selectedClass));var s=i.val(),r=this.getOptionByValue(s),a=t("option",this.$select).not(r),l=t("input",this.$container).not(i);if(o&&(n?this.selectall():this.deselectall()),o||(n?(r.prop("selected",!0),this.options.multiple?r.prop("selected",!0):(this.options.selectedClass&&t(l).parents("li").removeClass(this.options.selectedClass),t(l).prop("checked",!1),a.prop("selected",!1),this.$button.click()),"active"===this.options.selectedClass&&a.parents("a").css("outline","")):r.prop("selected",!1)),this.$select.change(),this.updateButtonText(),this.updateSelectAll(),this.options.onChange(r,n),this.options.preventInputChangeEvent)return!1},this)),t("li a",this.$ul).on("touchstart click",function(e){e.stopPropagation();var i=t(e.target);if(e.shiftKey){var n=i.prop("checked")||!1;if(n){var o=i.parents("li:last").siblings('li[class="active"]:first'),s=i.parents("li").index(),r=o.index();s>r?i.parents("li:last").prevUntil(o).each(function(){t(this).find("input:first").prop("checked",!0).trigger("change")}):i.parents("li:last").nextUntil(o).each(function(){t(this).find("input:first").prop("checked",!0).trigger("change")})}}i.blur()}),this.$container.off("keydown.multiselect").on("keydown.multiselect",t.proxy(function(e){if(!t('input[type="text"]',this.$container).is(":focus"))if(9!==e.keyCode&&27!==e.keyCode||!this.$container.hasClass("open")){var i=t(this.$container).find("li:not(.divider):not(.disabled) a").filter(":visible");if(!i.length)return;var n=i.index(i.filter(":focus"));38===e.keyCode&&n>0?n--:40===e.keyCode&&n<i.length-1?n++:~n||(n=0);var o=i.eq(n);if(o.focus(),32===e.keyCode||13===e.keyCode){var s=o.find("input");s.prop("checked",!s.prop("checked")),s.change()}e.stopPropagation(),e.preventDefault()}else this.$button.click()},this))},createOptionValue:function(e){t(e).is(":selected")&&t(e).prop("selected",!0);var i=this.options.label(e),n=t(e).val(),o=this.options.multiple?"checkbox":"radio",s=t(this.options.templates.li);t("label",s).addClass(o),t("label",s).append('<input type="'+o+'" name="'+this.options.checkboxName+'" />');var r=t(e).prop("selected")||!1,a=t("input",s);a.val(n),n===this.options.selectAllValue&&(s.addClass("multiselect-item multiselect-all"),a.parent().parent().addClass("multiselect-all")),t("label",s).append(" "+i),this.$ul.append(s),t(e).is(":disabled")&&a.attr("disabled","disabled").prop("disabled",!0).parents("a").attr("tabindex","-1").parents("li").addClass("disabled"),a.prop("checked",r),r&&this.options.selectedClass&&a.parents("li").addClass(this.options.selectedClass)},createDivider:function(){var e=t(this.options.templates.divider);this.$ul.append(e)},createOptgroup:function(e){var i=t(e).prop("label"),n=t(this.options.templates.liGroup);t("label",n).text(i),this.$ul.append(n),t(e).is(":disabled")&&n.addClass("disabled"),t("option",e).each(t.proxy(function(t,e){this.createOptionValue(e)},this))},buildSelectAll:function(){var e=this.hasSelectAll();if(!e&&this.options.includeSelectAllOption&&this.options.multiple&&t("option",this.$select).length>this.options.includeSelectAllIfMoreThan){this.options.includeSelectAllDivider&&this.$ul.prepend(t(this.options.templates.divider));var i=t(this.options.templates.li);t("label",i).addClass("checkbox"),t("label",i).append('<input type="checkbox" name="'+this.options.checkboxName+'" />');var n=t("input",i);n.val(this.options.selectAllValue),i.addClass("multiselect-item multiselect-all"),n.parent().parent().addClass("multiselect-all"),t("label",i).append(" "+this.options.selectAllText),this.$ul.prepend(i),n.prop("checked",!1)}},buildFilter:function(){if(this.options.enableFiltering||this.options.enableCaseInsensitiveFiltering){var e=Math.max(this.options.enableFiltering,this.options.enableCaseInsensitiveFiltering);this.$select.find("option").length>=e&&(this.$filter=t(this.options.templates.filter),t("input",this.$filter).attr("placeholder",this.options.filterPlaceholder),this.$ul.prepend(this.$filter),this.$filter.val(this.query).on("click",function(t){t.stopPropagation()}).on("input keydown",t.proxy(function(e){clearTimeout(this.searchTimeout),this.searchTimeout=this.asyncFunction(t.proxy(function(){this.query!==e.target.value&&(this.query=e.target.value,t.each(t("li",this.$ul),t.proxy(function(e,i){var n=t("input",i).val(),o=t("label",i).text(),s="";if("text"===this.options.filterBehavior?s=o:"value"===this.options.filterBehavior?s=n:"both"===this.options.filterBehavior&&(s=o+"\n"+n),n!==this.options.selectAllValue&&o){var r=!1;this.options.enableCaseInsensitiveFiltering&&s.toLowerCase().indexOf(this.query.toLowerCase())>-1?r=!0:s.indexOf(this.query)>-1&&(r=!0),r?t(i).show().removeClass("filter-hidden"):t(i).hide().addClass("filter-hidden")}},this))),this.updateSelectAll()},this),300,this)},this)))}},destroy:function(){this.$container.remove(),this.$select.show(),this.$select.data("multiselect",null)},refresh:function(){t("option",this.$select).each(t.proxy(function(e,i){var n=t("li input",this.$ul).filter(function(){return t(this).val()===t(i).val()});t(i).is(":selected")?(n.prop("checked",!0),this.options.selectedClass&&n.parents("li").addClass(this.options.selectedClass)):(n.prop("checked",!1),this.options.selectedClass&&n.parents("li").removeClass(this.options.selectedClass)),t(i).is(":disabled")?n.attr("disabled","disabled").prop("disabled",!0).parents("li").addClass("disabled"):n.prop("disabled",!1).parents("li").removeClass("disabled")},this)),this.updateButtonText(),this.updateSelectAll()},select:function(e,i){t.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){var o=e[n],s=this.getOptionByValue(o),r=this.getInputByValue(o);void 0!==s&&void 0!==r&&(this.options.selectedClass&&r.parents("li").addClass(this.options.selectedClass),r.prop("checked",!0),s.prop("selected",!0))}this.updateButtonText(),i&&1==e.length&&this.options.onChange(s,!0)},clearSelection:function(){this.deselectall(!1),this.updateButtonText(),this.updateSelectAll()},deselect:function(e,i){t.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){var o=e[n],s=this.getOptionByValue(o),r=this.getInputByValue(o);void 0!==s&&void 0!==r&&(this.options.selectedClass&&r.parents("li").removeClass(this.options.selectedClass),r.prop("checked",!1),s.prop("selected",!1))}this.updateButtonText(),i&&1==e.length&&this.options.onChange(s,!1)},selectall:function(){var e=t("li input[type='checkbox']:enabled",this.$ul),i=e.filter(":visible"),n=e.length,o=i.length;if(i.prop("checked",!0),t("li:not(.divider):not(.disabled)",this.$ul).filter(":visible").addClass(this.options.selectedClass),n===o)t("option:enabled",this.$select).prop("selected",!0);else{var s=i.map(function(){return t(this).val()}).get();t("option:enabled",this.$select).filter(function(){return t.inArray(t(this).val(),s)!==-1}).prop("selected",!0)}},deselectall:function(e){var i=t("li input[type='checkbox']:enabled",this.$ul),e="undefined"==typeof e||e,n=void 0;if(e){var o=void 0;n=i.filter(":visible"),n.prop("checked",!1),o=n.map(function(){return t(this).val()}).get(),t("option:enabled",this.$select).filter(function(){return t.inArray(t(this).val(),o)!==-1}).prop("selected",!1),t("li:not(.divider):not(.disabled)",this.$ul).filter(":visible").removeClass(this.options.selectedClass)}else i.prop("checked",!1),t("option:enabled",this.$select).prop("selected",!1),t("li:not(.divider):not(.disabled)",this.$ul).removeClass(this.options.selectedClass)},rebuild:function(){this.$ul.html(""),this.options.multiple="multiple"===this.$select.attr("multiple"),this.buildSelectAll(),this.buildDropdownOptions(),this.buildFilter(),this.updateButtonText(),this.updateSelectAll(),this.options.disableIfEmpty&&this.disableIfEmpty(),this.options.dropRight&&this.$ul.addClass("pull-right")},dataprovider:function(e){var n="",o=0;t.each(e,function(e,s){t.isArray(s.children)?(o++,n+='<optgroup label="'+(s.title||"Group "+o)+'">',i(s.children,function(t){n+='<option value="'+t.value+'">'+(t.label||t.value)+"</option>"}),n+="</optgroup>"):n+='<option value="'+s.value+'">'+(s.label||s.value)+"</option>"}),this.$select.html(n),this.rebuild()},enable:function(){this.$select.prop("disabled",!1),this.$button.prop("disabled",!1).removeClass("disabled")},disable:function(){this.$select.prop("disabled",!0),this.$button.prop("disabled",!0).addClass("disabled")},disableIfEmpty:function(){t("option",this.$select).length<=0?this.disable():this.enable()},setOptions:function(t){this.options=this.mergeOptions(t)},mergeOptions:function(e){return t.extend(!0,{},this.defaults,e)},hasSelectAll:function(){return t("li."+this.options.selectAllValue,this.$ul).length>0},updateSelectAll:function(){if(this.hasSelectAll()){var e=t("li:not(.multiselect-item):not(.filter-hidden) input:enabled",this.$ul),i=e.length,n=e.filter(":checked").length,o=t("li."+this.options.selectAllValue,this.$ul),s=o.find("input");n>0&&n===i?(s.prop("checked",!0),o.addClass(this.options.selectedClass)):(s.prop("checked",!1),o.removeClass(this.options.selectedClass))}},updateButtonText:function(){var e=this.getSelected();t("button.multiselect",this.$container).html(this.options.buttonText(e,this.$select)),t("button.multiselect",this.$container).attr("title",this.options.buttonTitle(e,this.$select))},getSelected:function(){return t("option",this.$select).filter(":selected")},getOptionByValue:function(e){for(var i=t("option",this.$select),n=e.toString(),o=0;o<i.length;o+=1){var s=i[o];if(s.value===n)return t(s)}},getInputByValue:function(e){for(var i=t("li input",this.$ul),n=e.toString(),o=0;o<i.length;o+=1){var s=i[o];if(s.value===n)return t(s)}},updateOriginalOptions:function(){this.originalOptions=this.$select.clone()[0].options},asyncFunction:function(t,e,i){var n=Array.prototype.slice.call(arguments,3);return setTimeout(function(){t.apply(i||window,n)},e)}},t.fn.multiselect=function(e,i,o){return this.each(function(){var s=t(this).data("multiselect"),r="object"==typeof e&&e;s||(s=new n(this,r),t(this).data("multiselect",s)),"string"==typeof e&&(s[e](i,o),"destroy"===e&&t(this).data("multiselect",!1))})},t.fn.multiselect.Constructor=n,t(function(){t("select[data-role=multiselect]").multiselect()})}(window.jQuery),!function(t){t(document).ready(function(){t(".multiselect").multiselect({buttonWidth:"100%",nonSelectedText:"Any Types",numberDisplayed:2})}),t(document).ajaxComplete(function(){t(".multiselect-container").length<=0&&t(".multiselect").multiselect({buttonWidth:"100%",nonSelectedText:"Any Types",numberDisplayed:2})})}(jQuery),SE.searchState=function(t){function e(){var e=i("shared"),n=i("sales"),r=i("rentals");e&&4==e.length&&(t.each(e[0].split(","),function(e,i){""!==i&&t("ul.area-items input[type=checkbox][value="+i+"]",o).prop("checked",!0)}),t("select#beds",o).val(e[1]).change(),t("select#baths",o).val(e[2]),t("#beds_or_more_checkbox",o).prop("checked","true"===e[3])),"sales"===s&&n&&5==n.length&&(t.each(n[0].split(","),function(e,i){""!==i&&t("input[value="+i+"]",o).click()}),t("select#price_from",o).val(n[1]).change(),t("select#price_to",o).val(n[2]).change(),t("input#price_from",o).val(n[3]),t("input#price_to",o).val(n[4])),"rentals"===s&&r&&5==r.length&&(t("#no_fee",o).prop("checked","true"===r[0]),t("select#price_from",o).val(r[1]).change(),t("select#price_to",o).val(r[2]).change(),t("input#price_from",o).val(r[3]),t("input#price_to",o).val(r[4]))}function i(e){if(state=t.cookie("se:search:"+e+":state")){var i=state.split("|");return i}return!1}function n(e,i){t.cookie(e,i,{path:"/",expires:365})}var o=null,s=window.location.pathname.replace(/\//g,"");return""===s&&(s="sales"),t(function(){o=t("div.tabset-content-container"),SE.user.agent||(e(),t(o).on("change keyup",'#no_fee,input#price_from,input#price_to,select#price_from,select#price_to,select#baths,select#beds,ul.area-items input[type=checkbox],#beds_or_more_checkbox,select[name="type[]"]',SE.searchState.save))}),{key:s,save:function(){setTimeout(function(){var e=t("ul.area-items input[type=checkbox]:checked",o).map(function(){return parseInt(this.value)}).get().join(","),i=t("select#beds",o).val(),s=t("select#baths",o).val(),r=t("#beds_or_more_checkbox",o).prop("checked"),a=(t('select[name="type[]"]',o).val()||[]).join(","),l=t("select#price_from",o).val(),u=t("select#price_to",o).val(),c=t("input#price_from",o).val(),h=t("input#price_to",o).val(),d=t("#no_fee",o).prop("checked"),p={shared:[e,i,s,r].join("|"),sales:[a,l,u,c,h].join("|"),rentals:[d,l,u,c,h].join("|"),buildings:"buildings",closings:"closings"};n("se:search:shared:state",p.shared),n("se:search:"+SE.searchState.key+":state",p[SE.searchState.key])},10)}}}(jQuery),+function(t){function e(){t("img.lazy").lazyload({effect:"fadeIn",threshold:2e3,load:function(){t(this).removeClass("lazy"),clientProfiler.setMark(t(this).data("performanceMark"))}})}t(document).ajaxComplete(e),t(e)}(jQuery),function(t){t(document).ready(function(){t(".item .item-note").length>0&&(t(document).on("click",".edit-note",function(e){e.preventDefault();var i=t(this).parent().next(".note");i.hide(),i.prev(".add-edit-note").hide(),i.slideDown(400);var n=i.children("textarea");n.focus()}),t(document).on("click",".delete-note",function(e){e.preventDefault();var n=t(this).prev("textarea").val(),o=/\S/g;o.test(n)?i(t(this).parent().parent().data("id"),n):(t(this).parent().hide(),t(this).parent().prev("add-edit-note").show())}),t(document).on("click",".save-note",function(e){e.preventDefault(),t(this).text("Saving..."),t(this).prop("disabled",!0),i(t(this).parent().parent().data("id"),t(this).prev("textarea").val())})),t(document).on("touchstart",".details .details-title > a,.details .details_info > a",function(e){e.preventDefault(),SE.changeSelectedTo(t(this)),setTimeout(function(){window.location=t(this).attr("href")}.bind(this),500)}),t(document).on("click touchstart",".lists-tools-add",function(i){i.preventDefault();var n=t(this),o=n.attr("se:list_on_submit:url");t("#unsave-listing-detached").show(),t("#saved_in_lists_info").length>0&&t(".note-wrap").show(),t(".unsaved-listing").hide(),t(".saved-listing").show(),e(n,o),SE.changeSelectedTo(t(this))}),t(document).on("click touchstart",".lists-tools-remove",function(i){i.preventDefault();var n=t(this),o=n.data("gtm-item-id"),s=jQuery("#listing-unsaved-"+o);s.css("opacity","1").slideDown(700),t("#saved_in_lists_info").length>0&&t(".note-wrap").hide(),t(".saved-listing").hide(),t(".unsaved-listing").show(),e(n,n.attr("se:list_on_delete:url")),SE.changeSelectedTo(t(this))}),t(document).on("click","#unsave-listing-detached",function(){var e=t(this).data("gtm-item-id"),i=t(this).data("gtm-item-type");t(this).hide(),a(e,i),s(t(".lists-tools-remove")),n("/lists/list_items/delete",e,i)}),t(document).on("click",".undo",function(e){e.preventDefault,t(this).parent().hide();var i=t(e.target).data("undo-id"),n=t(t("[data-id="+i+"]").parent());n.css("opacity","1").slideDown(700),n.find(".lists-tools-add").trigger("click"),o(1)}),t(document).on("click","#undo-unsave",function(e){e.preventDefault();var i=t(this).data("item-id"),s=t(this).data("item-type");n("lists/list_items/create",i,s);var l=t("[data-id="+i+"]");l.parent().css("display","block"),l.parent().css("opacity","1"),l.css("opacity","1"),l.show(),t(this).parent().css("opacity","1").slideUp(700),a(i,s),r(l.find(".lists-tools-add")),o(1)}),t(document).on("click","[data-trigger-modal]",function(){var e=t(this);t(e.data("trigger-modal")).modal("show")})});var e=function(e,i){var l=e.data("gtm-item-id"),u=e.data("gtm-item-type");e.html();if(e.hasClass("lists-tools-add"))r(e);else if(s(e),location.href.toLowerCase().indexOf("/lists")>0){var c=t(t("[data-id="+l+"]").parent());c.css("opacity","0.6").slideUp(700),o(-1)}a(l,u),n(i,l,u)},i=function(e,i){t.ajax({url:"/lists/update_item",data:{id:e,note:i},type:"POST",error:function(){alert("There is some problem saving note at this time. Please try again later.")}})},n=function(e,i,n){t.ajax({url:e,data:{item_id:i,item_type:n},type:"POST"}).done(function(e){t("#addnoteModal").find("input").val(e.id)})},o=function(e){var i=t(".result-count");if(i.length>0){var n=parseInt(t(i).first().text());n+=e,t.each(i,function(e,i){t(i).text(n)})}},s=function(t){t.html().indexOf("SAVED")>=0?t.html(t.html().replace("SAVED","SAVE")):t.html(t.html().replace("","SAVE")),t.children().toggleClass("icon-remove icon-star"),t.removeClass("lists-tools-remove").addClass("lists-tools-add")},r=function(t){t.hasClass("hide-text")?t.html(t.html().replace("SAVE","")):t.html(t.html().replace("SAVE","SAVED")),t.children().toggleClass("icon-star icon-remove"),t.removeClass("lists-tools-add").addClass("lists-tools-remove")},a=function(e,i){t("#saved_banner_"+i+"-"+e).toggleClass("unsaved")}}(jQuery),function(t){t(document).ready(function(){t("#save_search_email_preferences input").change(function(e){var i=t(e.target).parent();i.append("<span class='waiting'><i class='icon-spinner icon-spin'></i></span>"),t.ajax({url:"/my/saved_searches/change",type:"POST",data:t(this).serialize(),success:function(){i.find(".waiting").remove(),i.append("<span class='saved'><i class='icon-ok'></i><span class='hidden-xs'>Updated</span></span>"),i.find(".saved").delay(1e3).fadeOut(400,function(){t(this).remove()})},error:function(){i.find(".waiting").remove(),i.append("<span class='not_saved'><i class='icon-remove'></i><span class='hidden-xs'>Not updated</span></span>"),i.find(".not_saved").delay(1e3).fadeOut(400,function(){t(this).remove()})}})})})}(jQuery),window.clientProfiler={timingCategory:function(t){return{"search.rentals":"RentalSearch","search.sales":"SaleSearch","search.buildings":"BuildingSearch","home.rentals":"RentalsHome","home.sales":"SalesHome","home.buildings":"BuildingsHome",rental:"RentalHdp",sale:"SaleHdp",building:"BuildingHdp",property:"PropertyHdp",complex:"ComplexHdp",closing:"ClosingHdp"}[t.split(".").slice(0,-1).join(".").toLowerCase()]},timingLabel:function(t){return{listingImageVisible:"ListingThumb",locationsPopulated:"Locations",searchButtonVisible:"SearchButton",mainImageVisible:"ListingImage"}[t.split(".").pop()]},setMark:function(t,e){if("undefined"!=typeof performance&&"mark"in performance&&t){var i=e||"",n=i+t;performance.clearMarks(n),performance.mark(n),"dataLayer"!=typeof ga&&dataLayer.push({event:"timingMark",timingVar:n,timingCategory:clientProfiler.timingCategory(n),timingLabel:clientProfiler.timingLabel(n),timingValue:Math.round(performance.now())})}}},function(t){t(document).ready(function(){t(".mobile_app_popup .content .close a").click(function(){t(".mobile_app_popup").hide(),t("html, body").css("overflow","auto"),t.cookie("se:mobile_banner:closed","yes",{expires:30,path:"/"})})})}(jQuery),function(){"use strict";"undefined"==typeof SE&&(window.SE={}),SE.adminNav={adminUrl:"/nyc/admin/",query:"",userSearch:function(){(this.query=prompt("Enter user info?"))&&this.updateLocation("users/index?search=")},saleSearch:function(){(this.query=prompt("Enter sourceid?"))&&this.updateLocation("sales/search?search=true&status=all&sourceid=")},rentalSearch:function(){(this.query=prompt("Enter sourceid?"))&&this.updateLocation("rentals/search?search=true&status=all&sourceid=")},updateLocation:function(t){location.href=this.adminUrl+t+this.query}}}(jQuery),$j(function(){$j("#building-tabs div.tabset-tab").click(function(){$j("#units_activity_filter").val("").keyup()}),toggle_claim_btn()}),function(t){t(document).ready(function(){t(".similar-building a").click(function(){var e=t(this).closest(".similar-building").data("id");"undefined"!=typeof e&&dataLayer.push({event:"similar-building-click","similar-building-id":e})})})}(jQuery),function(t){t(document).ready(function(){var e=t("#result-details .item.featured").find("[data-gtm-featured-listing]:first");e.each(function(e,i){dataLayer.push({event:"featured_listing_impression",listing_id:t(i).data("gtm-listing-id"),listing_type:t(i).data("gtm-listing-type"),floorplan_3d:t(i).data("gtm-floorplan-3d")})})})}(jQuery),function(t){t(document).ready(function(){$j("[data-trigger-modal]").click(function(){$this=$j(this),$j($this.data("trigger-modal")).modal("show")}),$j(document).ready(function(){$j("#closing-id").click(function(){var t=$j("#new_title_for_item").val();$j("#new_title_for_item").val(t)})})})}(jQuery),function(t){SE.user=t.extend(SE.user,{dataElementId:"#user-data",userElement:void 0,initialize:function(){if(data=this.loadData())return this.email=data.userEmail,this.login=data.userLogin,this.name=data.userName,this.agent="true"==data.userAgent,this.masquerader=data.userMasquerader,this},loadData:function(){if(this.userElement=t(this.dataElementId)[0],this.userElement)return this.userElement.dataset}}),t(function(e){e||(SE.user=!1),t("#responsive_nav_toggle").click(function(){t("#nav_user_content").toggle()})}(SE.user.initialize()))}(jQuery),function(t){function e(t,e,i){switch(arguments.length){case 2:return null!=t?t:e;case 3:return null!=t?t:null!=e?e:i;default:throw new Error("Implement me")}}function i(t,e){return Tt.call(t,e)}function n(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function o(t){wt.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function s(t,e){var i=!0;return f(function(){return i&&(o(t),i=!1),e.apply(this,arguments)},e)}function r(t,e){_e[t]||(o(e),_e[t]=!0)}function a(t,e){return function(i){return v(t.call(this,i),e)}}function l(t,e){return function(i){return this.localeData().ordinal(t.call(this,i),e)}}function u(t,e){var i,n,o=12*(e.year()-t.year())+(e.month()-t.month()),s=t.clone().add(o,"months");return 0>e-s?(i=t.clone().add(o-1,"months"),n=(e-s)/(s-i)):(i=t.clone().add(o+1,"months"),n=(e-s)/(i-s)),-(o+n)}function c(t,e,i){var n;return null==i?e:null!=t.meridiemHour?t.meridiemHour(e,i):null!=t.isPM?(n=t.isPM(i),n&&12>e&&(e+=12),n||12!==e||(e=0),e):e}function h(){}function d(t,e){e!==!1&&A(t),m(this,t),this._d=new Date(+t._d),be===!1&&(be=!0,wt.updateOffset(this),be=!1)}function p(t){var e=k(t),i=e.year||0,n=e.quarter||0,o=e.month||0,s=e.week||0,r=e.day||0,a=e.hour||0,l=e.minute||0,u=e.second||0,c=e.millisecond||0;this._milliseconds=+c+1e3*u+6e4*l+36e5*a,this._days=+r+7*s,this._months=+o+3*n+12*i,this._data={},this._locale=wt.localeData(),this._bubble()}function f(t,e){for(var n in e)i(e,n)&&(t[n]=e[n]);return i(e,"toString")&&(t.toString=e.toString),i(e,"valueOf")&&(t.valueOf=e.valueOf),t}function m(t,e){var i,n,o;if("undefined"!=typeof e._isAMomentObject&&(t._isAMomentObject=e._isAMomentObject),"undefined"!=typeof e._i&&(t._i=e._i),"undefined"!=typeof e._f&&(t._f=e._f),"undefined"!=typeof e._l&&(t._l=e._l),"undefined"!=typeof e._strict&&(t._strict=e._strict),"undefined"!=typeof e._tzm&&(t._tzm=e._tzm),"undefined"!=typeof e._isUTC&&(t._isUTC=e._isUTC),"undefined"!=typeof e._offset&&(t._offset=e._offset),"undefined"!=typeof e._pf&&(t._pf=e._pf),"undefined"!=typeof e._locale&&(t._locale=e._locale),Ot.length>0)for(i in Ot)n=Ot[i],o=e[n],"undefined"!=typeof o&&(t[n]=o);return t}function g(t){return 0>t?Math.ceil(t):Math.floor(t)}function v(t,e,i){for(var n=""+Math.abs(t),o=t>=0;n.length<e;)n="0"+n;return(o?i?"+":"":"-")+n}function _(t,e){var i={milliseconds:0,months:0};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function y(t,e){var i;return e=I(e,t),t.isBefore(e)?i=_(t,e):(i=_(e,t),i.milliseconds=-i.milliseconds,i.months=-i.months),i}function b(t,e){return function(i,n){var o,s;return null===n||isNaN(+n)||(r(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),s=i,i=n,n=s),i="string"==typeof i?+i:i,o=wt.duration(i,n),w(this,o,t),this}}function w(t,e,i,n){var o=e._milliseconds,s=e._days,r=e._months;n=null==n||n,o&&t._d.setTime(+t._d+o*i),s&&mt(t,"Date",ft(t,"Date")+s*i),r&&pt(t,ft(t,"Month")+r*i),n&&wt.updateOffset(t,s||r)}function S(t){return"[object Array]"===Object.prototype.toString.call(t)}function x(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function C(t,e,i){var n,o=Math.min(t.length,e.length),s=Math.abs(t.length-e.length),r=0;for(n=0;o>n;n++)(i&&t[n]!==e[n]||!i&&L(t[n])!==L(e[n]))&&r++;return r+s}function E(t){if(t){var e=t.toLowerCase().replace(/(.)s$/,"$1");t=he[t]||de[e]||e}return t}function k(t){var e,n,o={};for(n in t)i(t,n)&&(e=E(n),e&&(o[e]=t[n]));return o}function T(e){var i,n;if(0===e.indexOf("week"))i=7,n="day";else{if(0!==e.indexOf("month"))return;i=12,n="month"}wt[e]=function(o,s){var r,a,l=wt._locale[e],u=[];if("number"==typeof o&&(s=o,o=t),a=function(t){var e=wt().utc().set(n,t);return l.call(wt._locale,e,o||"")},null!=s)return a(s);for(r=0;i>r;r++)u.push(a(r));return u}}function L(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=e>=0?Math.floor(e):Math.ceil(e)),i}function D(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function M(t,e,i){return ut(wt([t,11,31+e-i]),e,i).week}function P(t){return j(t)?366:365}function j(t){return t%4===0&&t%100!==0||t%400===0}function A(t){var e;t._a&&-2===t._pf.overflow&&(e=t._a[Dt]<0||t._a[Dt]>11?Dt:t._a[Mt]<1||t._a[Mt]>D(t._a[Lt],t._a[Dt])?Mt:t._a[Pt]<0||t._a[Pt]>24||24===t._a[Pt]&&(0!==t._a[jt]||0!==t._a[At]||0!==t._a[Ft])?Pt:t._a[jt]<0||t._a[jt]>59?jt:t._a[At]<0||t._a[At]>59?At:t._a[Ft]<0||t._a[Ft]>999?Ft:-1,t._pf._overflowDayOfYear&&(Lt>e||e>Mt)&&(e=Mt),t._pf.overflow=e)}function F(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length&&e._pf.bigHour===t)),e._isValid}function $(t){return t?t.toLowerCase().replace("_","-"):t}function O(t){for(var e,i,n,o,s=0;s<t.length;){for(o=$(t[s]).split("-"),e=o.length,i=$(t[s+1]),i=i?i.split("-"):null;e>0;){if(n=N(o.slice(0,e).join("-")))return n;if(i&&i.length>=e&&C(o,i,!0)>=e-1)break;e--}s++}return null}function N(t){var e=null;if(!$t[t]&&Nt)try{e=wt.locale(),require("./locale/"+t),wt.locale(e)}catch(t){}return $t[t]}function I(t,e){var i,n;return e._isUTC?(i=e.clone(),n=(wt.isMoment(t)||x(t)?+t:+wt(t))-+i,i._d.setTime(+i._d+n),wt.updateOffset(i,!1),i):wt(t).local()}function R(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function B(t){var e,i,n=t.match(Ht);for(e=0,i=n.length;i>e;e++)n[e]=ve[n[e]]?ve[n[e]]:R(n[e]);return function(o){var s="";for(e=0;i>e;e++)s+=n[e]instanceof Function?n[e].call(o,t):n[e];return s}}function H(t,e){return t.isValid()?(e=z(e,t.localeData()),pe[e]||(pe[e]=B(e)),pe[e](t)):t.localeData().invalidDate()}function z(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(zt.lastIndex=0;n>=0&&zt.test(t);)t=t.replace(zt,i),zt.lastIndex=0,n-=1;return t}function U(t,e){var i,n=e._strict;switch(t){case"Q":return Kt;case"DDDD":return ee;case"YYYY":case"GGGG":case"gggg":return n?ie:qt;case"Y":case"G":case"g":return oe;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return n?ne:Gt;case"S":if(n)return Kt;case"SS":if(n)return te;case"SSS":if(n)return ee;case"DDD":return Wt;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Vt;case"a":case"A":return e._locale._meridiemParse;case"x":return Qt;case"X":return Jt;case"Z":case"ZZ":return Yt;case"T":return Xt;case"SSSS":return Zt;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return n?te:Ut;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Ut;case"Do":return n?e._locale._ordinalParse:e._locale._ordinalParseLenient;default:return i=new RegExp(J(Q(t.replace("\\","")),"i"))}}function W(t){t=t||"";var e=t.match(Yt)||[],i=e[e.length-1]||[],n=(i+"").match(ue)||["-",0,0],o=+(60*n[1])+L(n[2]);return"+"===n[0]?o:-o}function q(t,e,i){var n,o=i._a;switch(t){case"Q":null!=e&&(o[Dt]=3*(L(e)-1));break;case"M":case"MM":null!=e&&(o[Dt]=L(e)-1);break;case"MMM":case"MMMM":n=i._locale.monthsParse(e,t,i._strict),null!=n?o[Dt]=n:i._pf.invalidMonth=e;break;case"D":case"DD":null!=e&&(o[Mt]=L(e));break;case"Do":null!=e&&(o[Mt]=L(parseInt(e.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=e&&(i._dayOfYear=L(e));break;case"YY":o[Lt]=wt.parseTwoDigitYear(e);break;case"YYYY":case"YYYYY":case"YYYYYY":o[Lt]=L(e);break;case"a":case"A":i._meridiem=e;break;case"h":case"hh":i._pf.bigHour=!0;case"H":case"HH":o[Pt]=L(e);break;case"m":case"mm":o[jt]=L(e);break;case"s":case"ss":o[At]=L(e);break;case"S":case"SS":case"SSS":case"SSSS":o[Ft]=L(1e3*("0."+e));break;case"x":i._d=new Date(L(e));break;case"X":i._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":i._useUTC=!0,i._tzm=W(e);break;case"dd":case"ddd":case"dddd":n=i._locale.weekdaysParse(e),null!=n?(i._w=i._w||{},i._w.d=n):i._pf.invalidWeekday=e;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":t=t.substr(0,1);case"gggg":case"GGGG":case"GGGGG":t=t.substr(0,2),e&&(i._w=i._w||{},i._w[t]=L(e));break;case"gg":case"GG":i._w=i._w||{},i._w[t]=wt.parseTwoDigitYear(e)}}function G(t){var i,n,o,s,r,a,l;i=t._w,null!=i.GG||null!=i.W||null!=i.E?(r=1,a=4,n=e(i.GG,t._a[Lt],ut(wt(),1,4).year),o=e(i.W,1),s=e(i.E,1)):(r=t._locale._week.dow,a=t._locale._week.doy,n=e(i.gg,t._a[Lt],ut(wt(),r,a).year),o=e(i.w,1),null!=i.d?(s=i.d,r>s&&++o):s=null!=i.e?i.e+r:r),l=ct(n,o,s,a,r),t._a[Lt]=l.year,t._dayOfYear=l.dayOfYear}function Z(t){var i,n,o,s,r=[];if(!t._d){for(o=Y(t),t._w&&null==t._a[Mt]&&null==t._a[Dt]&&G(t),t._dayOfYear&&(s=e(t._a[Lt],o[Lt]),t._dayOfYear>P(s)&&(t._pf._overflowDayOfYear=!0),n=st(s,0,t._dayOfYear),t._a[Dt]=n.getUTCMonth(),t._a[Mt]=n.getUTCDate()),i=0;3>i&&null==t._a[i];++i)t._a[i]=r[i]=o[i];for(;7>i;i++)t._a[i]=r[i]=null==t._a[i]?2===i?1:0:t._a[i];24===t._a[Pt]&&0===t._a[jt]&&0===t._a[At]&&0===t._a[Ft]&&(t._nextDay=!0,t._a[Pt]=0),t._d=(t._useUTC?st:ot).apply(null,r),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Pt]=24)}}function V(t){var e;t._d||(e=k(t._i),t._a=[e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],Z(t))}function Y(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function X(e){if(e._f===wt.ISO_8601)return void tt(e);e._a=[],e._pf.empty=!0;var i,n,o,s,r,a=""+e._i,l=a.length,u=0;for(o=z(e._f,e._locale).match(Ht)||[],i=0;i<o.length;i++)s=o[i],n=(a.match(U(s,e))||[])[0],n&&(r=a.substr(0,a.indexOf(n)),r.length>0&&e._pf.unusedInput.push(r),a=a.slice(a.indexOf(n)+n.length),u+=n.length),ve[s]?(n?e._pf.empty=!1:e._pf.unusedTokens.push(s),q(s,n,e)):e._strict&&!n&&e._pf.unusedTokens.push(s);e._pf.charsLeftOver=l-u,a.length>0&&e._pf.unusedInput.push(a),e._pf.bigHour===!0&&e._a[Pt]<=12&&(e._pf.bigHour=t),e._a[Pt]=c(e._locale,e._a[Pt],e._meridiem),Z(e),A(e)}function Q(t){return t.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,o){return e||i||n||o})}function J(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function K(t){var e,i,o,s,r;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(NaN));for(s=0;s<t._f.length;s++)r=0,e=m({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._pf=n(),e._f=t._f[s],X(e),F(e)&&(r+=e._pf.charsLeftOver,r+=10*e._pf.unusedTokens.length,e._pf.score=r,(null==o||o>r)&&(o=r,i=e));f(t,i||e)}function tt(t){var e,i,n=t._i,o=se.exec(n);if(o){for(t._pf.iso=!0,e=0,i=ae.length;i>e;e++)if(ae[e][1].exec(n)){t._f=ae[e][0]+(o[6]||" ");break}for(e=0,i=le.length;i>e;e++)if(le[e][1].exec(n)){t._f+=le[e][0];break}n.match(Yt)&&(t._f+="Z"),X(t)}else t._isValid=!1}function et(t){tt(t),t._isValid===!1&&(delete t._isValid,wt.createFromInputFallback(t))}function it(t,e){var i,n=[];for(i=0;i<t.length;++i)n.push(e(t[i],i));return n}function nt(e){var i,n=e._i;n===t?e._d=new Date:x(n)?e._d=new Date(+n):null!==(i=It.exec(n))?e._d=new Date(+i[1]):"string"==typeof n?et(e):S(n)?(e._a=it(n.slice(0),function(t){return parseInt(t,10)}),Z(e)):"object"==typeof n?V(e):"number"==typeof n?e._d=new Date(n):wt.createFromInputFallback(e)}function ot(t,e,i,n,o,s,r){var a=new Date(t,e,i,n,o,s,r);return 1970>t&&a.setFullYear(t),a}function st(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),
e}function rt(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function at(t,e,i,n,o){return o.relativeTime(e||1,!!i,t,n)}function lt(t,e,i){var n=wt.duration(t).abs(),o=kt(n.as("s")),s=kt(n.as("m")),r=kt(n.as("h")),a=kt(n.as("d")),l=kt(n.as("M")),u=kt(n.as("y")),c=o<fe.s&&["s",o]||1===s&&["m"]||s<fe.m&&["mm",s]||1===r&&["h"]||r<fe.h&&["hh",r]||1===a&&["d"]||a<fe.d&&["dd",a]||1===l&&["M"]||l<fe.M&&["MM",l]||1===u&&["y"]||["yy",u];return c[2]=e,c[3]=+t>0,c[4]=i,at.apply({},c)}function ut(t,e,i){var n,o=i-e,s=i-t.day();return s>o&&(s-=7),o-7>s&&(s+=7),n=wt(t).add(s,"d"),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function ct(t,e,i,n,o){var s,r,a=st(t,0,1).getUTCDay();return a=0===a?7:a,i=null!=i?i:o,s=o-a+(a>n?7:0)-(o>a?7:0),r=7*(e-1)+(i-o)+s+1,{year:r>0?t:t-1,dayOfYear:r>0?r:P(t-1)+r}}function ht(e){var i,n=e._i,o=e._f;return e._locale=e._locale||wt.localeData(e._l),null===n||o===t&&""===n?wt.invalid({nullInput:!0}):("string"==typeof n&&(e._i=n=e._locale.preparse(n)),wt.isMoment(n)?new d(n,!0):(o?S(o)?K(e):X(e):nt(e),i=new d(e),i._nextDay&&(i.add(1,"d"),i._nextDay=t),i))}function dt(t,e){var i,n;if(1===e.length&&S(e[0])&&(e=e[0]),!e.length)return wt();for(i=e[0],n=1;n<e.length;++n)e[n][t](i)&&(i=e[n]);return i}function pt(t,e){var i;return"string"==typeof e&&(e=t.localeData().monthsParse(e),"number"!=typeof e)?t:(i=Math.min(t.date(),D(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t)}function ft(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function mt(t,e,i){return"Month"===e?pt(t,i):t._d["set"+(t._isUTC?"UTC":"")+e](i)}function gt(t,e){return function(i){return null!=i?(mt(this,t,i),wt.updateOffset(this,e),this):ft(this,t)}}function vt(t){return 400*t/146097}function _t(t){return 146097*t/400}function yt(t){wt.duration.fn[t]=function(){return this._data[t]}}function bt(t){"undefined"==typeof ender&&(St=Et.moment,Et.moment=t?s("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",wt):wt)}for(var wt,St,xt,Ct="2.9.0",Et="undefined"==typeof global||"undefined"!=typeof window&&window!==global.window?this:global,kt=Math.round,Tt=Object.prototype.hasOwnProperty,Lt=0,Dt=1,Mt=2,Pt=3,jt=4,At=5,Ft=6,$t={},Ot=[],Nt="undefined"!=typeof module&&module&&module.exports,It=/^\/?Date\((\-?\d+)/i,Rt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Bt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Ht=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,zt=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ut=/\d\d?/,Wt=/\d{1,3}/,qt=/\d{1,4}/,Gt=/[+\-]?\d{1,6}/,Zt=/\d+/,Vt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Yt=/Z|[\+\-]\d\d:?\d\d/gi,Xt=/T/i,Qt=/[\+\-]?\d+/,Jt=/[\+\-]?\d+(\.\d{1,3})?/,Kt=/\d/,te=/\d\d/,ee=/\d{3}/,ie=/\d{4}/,ne=/[+-]?\d{6}/,oe=/[+-]?\d+/,se=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,re="YYYY-MM-DDTHH:mm:ssZ",ae=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],le=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ue=/([\+\-]|\d\d)/gi,ce=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),he={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},de={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},pe={},fe={s:45,m:45,h:22,d:26,M:11},me="DDD w W M D d".split(" "),ge="M D H h m s w W".split(" "),ve={M:function(){return this.month()+1},MMM:function(t){return this.localeData().monthsShort(this,t)},MMMM:function(t){return this.localeData().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.localeData().weekdaysMin(this,t)},ddd:function(t){return this.localeData().weekdaysShort(this,t)},dddd:function(t){return this.localeData().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return v(this.year()%100,2)},YYYY:function(){return v(this.year(),4)},YYYYY:function(){return v(this.year(),5)},YYYYYY:function(){var t=this.year(),e=t>=0?"+":"-";return e+v(Math.abs(t),6)},gg:function(){return v(this.weekYear()%100,2)},gggg:function(){return v(this.weekYear(),4)},ggggg:function(){return v(this.weekYear(),5)},GG:function(){return v(this.isoWeekYear()%100,2)},GGGG:function(){return v(this.isoWeekYear(),4)},GGGGG:function(){return v(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return L(this.milliseconds()/100)},SS:function(){return v(L(this.milliseconds()/10),2)},SSS:function(){return v(this.milliseconds(),3)},SSSS:function(){return v(this.milliseconds(),3)},Z:function(){var t=this.utcOffset(),e="+";return 0>t&&(t=-t,e="-"),e+v(L(t/60),2)+":"+v(L(t)%60,2)},ZZ:function(){var t=this.utcOffset(),e="+";return 0>t&&(t=-t,e="-"),e+v(L(t/60),2)+v(L(t)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},_e={},ye=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"],be=!1;me.length;)xt=me.pop(),ve[xt+"o"]=l(ve[xt],xt);for(;ge.length;)xt=ge.pop(),ve[xt+xt]=a(ve[xt],2);ve.DDDD=a(ve.DDD,3),f(h.prototype,{set:function(t){var e,i;for(i in t)e=t[i],"function"==typeof e?this[i]=e:this["_"+i]=e;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t,e,i){var n,o,s;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;12>n;n++){if(o=wt.utc([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(s="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[n]=new RegExp(s.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[n].test(t))return n;if(i&&"MMM"===e&&this._shortMonthsParse[n].test(t))return n;if(!i&&this._monthsParse[n].test(t))return n}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,i,n;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(i=wt([2e3,1]).day(e),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[e]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e,i){var n=this._calendar[t];return"function"==typeof n?n.apply(e,[i]):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,i,n){var o=this._relativeTime[i];return"function"==typeof o?o(t,e,i,n):o.replace(/%d/i,t)},pastFuture:function(t,e){var i=this._relativeTime[t>0?"future":"past"];return"function"==typeof i?i(e):i.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(t){return t},postformat:function(t){return t},week:function(t){return ut(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},firstDayOfWeek:function(){return this._week.dow},firstDayOfYear:function(){return this._week.doy},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),wt=function(e,i,o,s){var r;return"boolean"==typeof o&&(s=o,o=t),r={},r._isAMomentObject=!0,r._i=e,r._f=i,r._l=o,r._strict=s,r._isUTC=!1,r._pf=n(),ht(r)},wt.suppressDeprecationWarnings=!1,wt.createFromInputFallback=s("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),wt.min=function(){var t=[].slice.call(arguments,0);return dt("isBefore",t)},wt.max=function(){var t=[].slice.call(arguments,0);return dt("isAfter",t)},wt.utc=function(e,i,o,s){var r;return"boolean"==typeof o&&(s=o,o=t),r={},r._isAMomentObject=!0,r._useUTC=!0,r._isUTC=!0,r._l=o,r._i=e,r._f=i,r._strict=s,r._pf=n(),ht(r).utc()},wt.unix=function(t){return wt(1e3*t)},wt.duration=function(t,e){var n,o,s,r,a=t,l=null;return wt.isDuration(t)?a={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(a={},e?a[e]=t:a.milliseconds=t):(l=Rt.exec(t))?(n="-"===l[1]?-1:1,a={y:0,d:L(l[Mt])*n,h:L(l[Pt])*n,m:L(l[jt])*n,s:L(l[At])*n,ms:L(l[Ft])*n}):(l=Bt.exec(t))?(n="-"===l[1]?-1:1,s=function(t){var e=t&&parseFloat(t.replace(",","."));return(isNaN(e)?0:e)*n},a={y:s(l[2]),M:s(l[3]),d:s(l[4]),h:s(l[5]),m:s(l[6]),s:s(l[7]),w:s(l[8])}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(r=y(wt(a.from),wt(a.to)),a={},a.ms=r.milliseconds,a.M=r.months),o=new p(a),wt.isDuration(t)&&i(t,"_locale")&&(o._locale=t._locale),o},wt.version=Ct,wt.defaultFormat=re,wt.ISO_8601=function(){},wt.momentProperties=Ot,wt.updateOffset=function(){},wt.relativeTimeThreshold=function(e,i){return fe[e]!==t&&(i===t?fe[e]:(fe[e]=i,!0))},wt.lang=s("moment.lang is deprecated. Use moment.locale instead.",function(t,e){return wt.locale(t,e)}),wt.locale=function(t,e){var i;return t&&(i="undefined"!=typeof e?wt.defineLocale(t,e):wt.localeData(t),i&&(wt.duration._locale=wt._locale=i)),wt._locale._abbr},wt.defineLocale=function(t,e){return null!==e?(e.abbr=t,$t[t]||($t[t]=new h),$t[t].set(e),wt.locale(t),$t[t]):(delete $t[t],null)},wt.langData=s("moment.langData is deprecated. Use moment.localeData instead.",function(t){return wt.localeData(t)}),wt.localeData=function(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return wt._locale;if(!S(t)){if(e=N(t))return e;t=[t]}return O(t)},wt.isMoment=function(t){return t instanceof d||null!=t&&i(t,"_isAMomentObject")},wt.isDuration=function(t){return t instanceof p};for(xt=ye.length-1;xt>=0;--xt)T(ye[xt]);wt.normalizeUnits=function(t){return E(t)},wt.invalid=function(t){var e=wt.utc(NaN);return null!=t?f(e._pf,t):e._pf.userInvalidated=!0,e},wt.parseZone=function(){return wt.apply(null,arguments).parseZone()},wt.parseTwoDigitYear=function(t){return L(t)+(L(t)>68?1900:2e3)},wt.isDate=x,f(wt.fn=d.prototype,{clone:function(){return wt(this)},valueOf:function(){return+this._d-6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var t=wt(this).utc();return 0<t.year()&&t.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():H(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):H(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return F(this)},isDSTShifted:function(){return!!this._a&&(this.isValid()&&C(this._a,(this._isUTC?wt.utc(this._a):wt(this._a)).toArray())>0)},parsingFlags:function(){return f({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(t){return this.utcOffset(0,t)},local:function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(this._dateUtcOffset(),"m")),this},format:function(t){var e=H(this,t||wt.defaultFormat);return this.localeData().postformat(e)},add:b(1,"add"),subtract:b(-1,"subtract"),diff:function(t,e,i){var n,o,s=I(t,this),r=6e4*(s.utcOffset()-this.utcOffset());return e=E(e),"year"===e||"month"===e||"quarter"===e?(o=u(this,s),"quarter"===e?o/=3:"year"===e&&(o/=12)):(n=this-s,o="second"===e?n/1e3:"minute"===e?n/6e4:"hour"===e?n/36e5:"day"===e?(n-r)/864e5:"week"===e?(n-r)/6048e5:n),i?o:g(o)},from:function(t,e){return wt.duration({to:this,from:t}).locale(this.locale()).humanize(!e)},fromNow:function(t){return this.from(wt(),t)},calendar:function(t){var e=t||wt(),i=I(e,this).startOf("day"),n=this.diff(i,"days",!0),o=-6>n?"sameElse":-1>n?"lastWeek":0>n?"lastDay":1>n?"sameDay":2>n?"nextDay":7>n?"nextWeek":"sameElse";return this.format(this.localeData().calendar(o,this,wt(e)))},isLeapYear:function(){return j(this.year())},isDST:function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=rt(t,this.localeData()),this.add(t-e,"d")):e},month:gt("Month",!0),startOf:function(t){switch(t=E(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t?this.weekday(0):"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(e){return e=E(e),e===t||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")},isAfter:function(t,e){var i;return e=E("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=wt.isMoment(t)?t:wt(t),+this>+t):(i=wt.isMoment(t)?+t:+wt(t),i<+this.clone().startOf(e))},isBefore:function(t,e){var i;return e=E("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=wt.isMoment(t)?t:wt(t),+t>+this):(i=wt.isMoment(t)?+t:+wt(t),+this.clone().endOf(e)<i)},isBetween:function(t,e,i){return this.isAfter(t,i)&&this.isBefore(e,i)},isSame:function(t,e){var i;return e=E(e||"millisecond"),"millisecond"===e?(t=wt.isMoment(t)?t:wt(t),+this===+t):(i=+wt(t),+this.clone().startOf(e)<=i&&i<=+this.clone().endOf(e))},min:s("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(t){return t=wt.apply(null,arguments),this>t?this:t}),max:s("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(t){return t=wt.apply(null,arguments),t>this?this:t}),zone:s("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}),utcOffset:function(t,e){var i,n=this._offset||0;return null!=t?("string"==typeof t&&(t=W(t)),Math.abs(t)<16&&(t=60*t),!this._isUTC&&e&&(i=this._dateUtcOffset()),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),n!==t&&(!e||this._changeInProgress?w(this,wt.duration(t-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,wt.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?n:this._dateUtcOffset()},isLocal:function(){return!this._isUTC},isUtcOffset:function(){return this._isUTC},isUtc:function(){return this._isUTC&&0===this._offset},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(W(this._i)),this},hasAlignedHourOffset:function(t){return t=t?wt(t).utcOffset():0,(this.utcOffset()-t)%60===0},daysInMonth:function(){return D(this.year(),this.month())},dayOfYear:function(t){var e=kt((wt(this).startOf("day")-wt(this).startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},quarter:function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},weekYear:function(t){var e=ut(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==t?e:this.add(t-e,"y")},isoWeekYear:function(t){var e=ut(this,1,4).year;return null==t?e:this.add(t-e,"y")},week:function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},isoWeek:function(t){var e=ut(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},weekday:function(t){var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},isoWeeksInYear:function(){return M(this.year(),1,4)},weeksInYear:function(){var t=this.localeData()._week;return M(this.year(),t.dow,t.doy)},get:function(t){return t=E(t),this[t]()},set:function(t,e){var i;if("object"==typeof t)for(i in t)this.set(i,t[i]);else t=E(t),"function"==typeof this[t]&&this[t](e);return this},locale:function(e){var i;return e===t?this._locale._abbr:(i=wt.localeData(e),null!=i&&(this._locale=i),this)},lang:s("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===t?this.localeData():this.locale(e)}),localeData:function(){return this._locale},_dateUtcOffset:function(){return 15*-Math.round(this._d.getTimezoneOffset()/15)}}),wt.fn.millisecond=wt.fn.milliseconds=gt("Milliseconds",!1),wt.fn.second=wt.fn.seconds=gt("Seconds",!1),wt.fn.minute=wt.fn.minutes=gt("Minutes",!1),wt.fn.hour=wt.fn.hours=gt("Hours",!0),wt.fn.date=gt("Date",!0),wt.fn.dates=s("dates accessor is deprecated. Use date instead.",gt("Date",!0)),wt.fn.year=gt("FullYear",!0),wt.fn.years=s("years accessor is deprecated. Use year instead.",gt("FullYear",!0)),wt.fn.days=wt.fn.day,wt.fn.months=wt.fn.month,wt.fn.weeks=wt.fn.week,wt.fn.isoWeeks=wt.fn.isoWeek,wt.fn.quarters=wt.fn.quarter,wt.fn.toJSON=wt.fn.toISOString,wt.fn.isUTC=wt.fn.isUtc,f(wt.duration.fn=p.prototype,{_bubble:function(){var t,e,i,n=this._milliseconds,o=this._days,s=this._months,r=this._data,a=0;r.milliseconds=n%1e3,t=g(n/1e3),r.seconds=t%60,e=g(t/60),r.minutes=e%60,i=g(e/60),r.hours=i%24,o+=g(i/24),a=g(vt(o)),o-=g(_t(a)),s+=g(o/30),o%=30,a+=g(s/12),s%=12,r.days=o,r.months=s,r.years=a},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return g(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*L(this._months/12)},humanize:function(t){var e=lt(this,!t,this.localeData());return t&&(e=this.localeData().pastFuture(+this,e)),this.localeData().postformat(e)},add:function(t,e){var i=wt.duration(t,e);return this._milliseconds+=i._milliseconds,this._days+=i._days,this._months+=i._months,this._bubble(),this},subtract:function(t,e){var i=wt.duration(t,e);return this._milliseconds-=i._milliseconds,this._days-=i._days,this._months-=i._months,this._bubble(),this},get:function(t){return t=E(t),this[t.toLowerCase()+"s"]()},as:function(t){var e,i;if(t=E(t),"month"===t||"year"===t)return e=this._days+this._milliseconds/864e5,i=this._months+12*vt(e),"month"===t?i:i/12;switch(e=this._days+Math.round(_t(this._months/12)),t){case"week":return e/7+this._milliseconds/6048e5;case"day":return e+this._milliseconds/864e5;case"hour":return 24*e+this._milliseconds/36e5;case"minute":return 24*e*60+this._milliseconds/6e4;case"second":return 24*e*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*e*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+t)}},lang:wt.fn.lang,locale:wt.fn.locale,toIsoString:s("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var t=Math.abs(this.years()),e=Math.abs(this.months()),i=Math.abs(this.days()),n=Math.abs(this.hours()),o=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(i?i+"D":"")+(n||o||s?"T":"")+(n?n+"H":"")+(o?o+"M":"")+(s?s+"S":""):"P0D"},localeData:function(){return this._locale},toJSON:function(){return this.toISOString()}}),wt.duration.fn.toString=wt.duration.fn.toISOString;for(xt in ce)i(ce,xt)&&yt(xt.toLowerCase());wt.duration.fn.asMilliseconds=function(){return this.as("ms")},wt.duration.fn.asSeconds=function(){return this.as("s")},wt.duration.fn.asMinutes=function(){return this.as("m")},wt.duration.fn.asHours=function(){return this.as("h")},wt.duration.fn.asDays=function(){return this.as("d")},wt.duration.fn.asWeeks=function(){return this.as("weeks")},wt.duration.fn.asMonths=function(){return this.as("M")},wt.duration.fn.asYears=function(){return this.as("y")},wt.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,i=1===L(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+i}}),Nt?module.exports=wt:"function"==typeof define&&define.amd?(define(function(t,e,i){return i.config&&i.config()&&i.config().noGlobal===!0&&(Et.moment=St),wt}),bt(!0)):bt()}.call(this),function(t){"function"==typeof define&&define.amd?define(["jquery","moment"],t):"object"==typeof exports?module.exports=t(require("jquery"),require("moment")):t(jQuery,moment)}(function(t,e){function i(t){return z(t,Bt)}function n(e){var i,n={views:e.views||{}};return t.each(e,function(e,o){"views"!=e&&(t.isPlainObject(o)&&!/(time|duration|interval)$/i.test(e)&&t.inArray(e,Bt)==-1?(i=null,t.each(o,function(t,o){/^(month|week|day|default|basic(Week|Day)?|agenda(Week|Day)?)$/.test(t)?(n.views[t]||(n.views[t]={}),n.views[t][e]=o):(i||(i={}),i[t]=o)}),i&&(n[e]=i)):n[e]=o)}),n}function o(t,e){e.left&&t.css({"border-left-width":1,"margin-left":e.left-1}),e.right&&t.css({"border-right-width":1,"margin-right":e.right-1})}function s(t){t.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function r(){t("body").addClass("fc-not-allowed")}function a(){t("body").removeClass("fc-not-allowed")}function l(e,i,n){var o=Math.floor(i/e.length),s=Math.floor(i-o*(e.length-1)),r=[],a=[],l=[],c=0;u(e),e.each(function(i,n){var u=i===e.length-1?s:o,h=t(n).outerHeight(!0);h<u?(r.push(n),a.push(h),l.push(t(n).height())):c+=h}),n&&(i-=c,o=Math.floor(i/r.length),s=Math.floor(i-o*(r.length-1))),t(r).each(function(e,i){var n=e===r.length-1?s:o,u=a[e],c=l[e],h=n-(u-c);u<n&&t(i).height(h)})}function u(t){t.height("")}function c(e){var i=0;return e.find("> *").each(function(e,n){var o=t(n).outerWidth();o>i&&(i=o)}),i++,e.width(i),i}function h(t,e){return t.height(e).addClass("fc-scroller"),t[0].scrollHeight-1>t[0].clientHeight||(d(t),!1)}function d(t){t.height("").removeClass("fc-scroller")}function p(e){var i=e.css("position"),n=e.parents().filter(function(){var e=t(this);return/(auto|scroll)/.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==i&&n.length?n:t(e[0].ownerDocument||document)}function f(t){var e=t.offset();return{left:e.left,right:e.left+t.outerWidth(),top:e.top,bottom:e.top+t.outerHeight()}}function m(t){var e=t.offset(),i=v(t),n=e.left+b(t,"border-left-width")+i.left,o=e.top+b(t,"border-top-width")+i.top;return{left:n,right:n+t[0].clientWidth,top:o,bottom:o+t[0].clientHeight}}function g(t){var e=t.offset(),i=e.left+b(t,"border-left-width")+b(t,"padding-left"),n=e.top+b(t,"border-top-width")+b(t,"padding-top");return{left:i,right:i+t.width(),top:n,bottom:n+t.height()}}function v(t){var e=t.innerWidth()-t[0].clientWidth,i={left:0,right:0,top:0,bottom:t.innerHeight()-t[0].clientHeight};return _()&&"rtl"==t.css("direction")?i.left=e:i.right=e,i}function _(){return null===Ht&&(Ht=y()),Ht}function y(){var e=t("<div><div/></div>").css({position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}).appendTo("body"),i=e.children(),n=i.offset().left>e.offset().left;return e.remove(),n}function b(t,e){return parseFloat(t.css(e))||0}function w(t){return 1==t.which&&!t.ctrlKey}function S(t,e){var i={left:Math.max(t.left,e.left),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom)};return i.left<i.right&&i.top<i.bottom&&i}function x(t,e){return{left:Math.min(Math.max(t.left,e.left),e.right),top:Math.min(Math.max(t.top,e.top),e.bottom)}}function C(t){return{left:(t.left+t.right)/2,top:(t.top+t.bottom)/2}}function E(t,e){return{left:t.left-e.left,top:t.top-e.top}}function k(e){var i,n,o=[],s=[];for("string"==typeof e?s=e.split(/\s*,\s*/):"function"==typeof e?s=[e]:t.isArray(e)&&(s=e),i=0;i<s.length;i++)n=s[i],"string"==typeof n?o.push("-"==n.charAt(0)?{field:n.substring(1),order:-1}:{field:n,order:1}):"function"==typeof n&&o.push({func:n});return o}function T(t,e,i){var n,o;for(n=0;n<i.length;n++)if(o=L(t,e,i[n]))return o;return 0}function L(t,e,i){return i.func?i.func(t,e):D(t[i.field],e[i.field])*(i.order||1)}function D(e,i){return e||i?null==i?-1:null==e?1:"string"===t.type(e)||"string"===t.type(i)?String(e).localeCompare(String(i)):e-i:0}function M(t,e){var i,n,o,s,r=t.start,a=t.end,l=e.start,u=e.end;if(a>l&&r<u)return r>=l?(i=r.clone(),o=!0):(i=l.clone(),o=!1),a<=u?(n=a.clone(),s=!0):(n=u.clone(),s=!1),{start:i,end:n,isStart:o,isEnd:s}}function P(t,i){return e.duration({days:t.clone().stripTime().diff(i.clone().stripTime(),"days"),ms:t.time()-i.time()})}function j(t,i){return e.duration({days:t.clone().stripTime().diff(i.clone().stripTime(),"days")})}function A(t,i,n){return e.duration(Math.round(t.diff(i,n,!0)),n)}function F(t,e){var i,n,o;for(i=0;i<Ut.length&&(n=Ut[i],o=$(n,t,e),!(o>=1&&et(o)));i++);return n}function $(t,i,n){return null!=n?n.diff(i,t,!0):e.isDuration(i)?i.as(t):i.end.diff(i.start,t,!0)}function O(t,e,i){var n;return R(i)?(e-t)/i:(n=i.asMonths(),Math.abs(n)>=1&&et(n)?e.diff(t,"months",!0)/n:e.diff(t,"days",!0)/i.asDays())}function N(t,e){var i,n;return R(t)||R(e)?t/e:(i=t.asMonths(),n=e.asMonths(),Math.abs(i)>=1&&et(i)&&Math.abs(n)>=1&&et(n)?i/n:t.asDays()/e.asDays())}function I(t,i){var n;return R(t)?e.duration(t*i):(n=t.asMonths(),Math.abs(n)>=1&&et(n)?e.duration({months:n*i}):e.duration({days:t.asDays()*i}))}function R(t){return Boolean(t.hours()||t.minutes()||t.seconds()||t.milliseconds())}function B(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function H(t){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(t)}function z(t,e){var i,n,o,s,r,a,l={};if(e)for(i=0;i<e.length;i++){for(n=e[i],o=[],s=t.length-1;s>=0;s--)if(r=t[s][n],"object"==typeof r)o.unshift(r);else if(void 0!==r){l[n]=r;break}o.length&&(l[n]=z(o))}for(i=t.length-1;i>=0;i--){a=t[i];for(n in a)n in l||(l[n]=a[n])}return l}function U(t){var e=function(){};return e.prototype=t,new e}function W(t,e){for(var i in t)G(t,i)&&(e[i]=t[i])}function q(t,e){var i,n,o=["constructor","toString","valueOf"];for(i=0;i<o.length;i++)n=o[i],t[n]!==Object.prototype[n]&&(e[n]=t[n])}function G(t,e){return Zt.call(t,e)}function Z(e){return/undefined|null|boolean|number|string/.test(t.type(e))}function V(e,i,n){if(t.isFunction(e)&&(e=[e]),e){var o,s;for(o=0;o<e.length;o++)s=e[o].apply(i,n)||s;return s}}function Y(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]}function X(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function Q(t){return t.replace(/&.*?;/g,"")}function J(e){var i=[];return t.each(e,function(t,e){null!=e&&i.push(t+":"+e)}),i.join(";")}function K(t){return t.charAt(0).toUpperCase()+t.slice(1)}function tt(t,e){return t-e}function et(t){return t%1===0}function it(t,e){var i=t[e];return function(){return i.apply(t,arguments)}}function nt(t,e){var i,n,o,s,r=function(){var a=+new Date-s;a<e&&a>0?i=setTimeout(r,e-a):(i=null,t.apply(o,n),i||(o=n=null))};return function(){o=this,n=arguments,s=+new Date,i||(i=setTimeout(r,e))}}function ot(i,n,o){var s,r,a,l,u=i[0],c=1==i.length&&"string"==typeof u;return e.isMoment(u)?(l=e.apply(null,i),rt(u,l)):B(u)||void 0===u?l=e.apply(null,i):(s=!1,r=!1,c?Vt.test(u)?(u+="-01",i=[u],s=!0,r=!0):(a=Yt.exec(u))&&(s=!a[5],r=!0):t.isArray(u)&&(r=!0),l=n||s?e.utc.apply(e,i):e.apply(null,i),s?(l._ambigTime=!0,l._ambigZone=!0):o&&(r?l._ambigZone=!0:c&&(l.utcOffset?l.utcOffset(u):l.zone(u)))),l._fullCalendar=!0,l}function st(t,i){var n,o,s=!1,r=!1,a=t.length,l=[];for(n=0;n<a;n++)o=t[n],e.isMoment(o)||(o=It.moment.parseZone(o)),s=s||o._ambigTime,r=r||o._ambigZone,l.push(o);for(n=0;n<a;n++)o=l[n],i||!s||o._ambigTime?r&&!o._ambigZone&&(l[n]=o.clone().stripZone()):l[n]=o.clone().stripTime();return l}function rt(t,e){t._ambigTime?e._ambigTime=!0:e._ambigTime&&(e._ambigTime=!1),t._ambigZone?e._ambigZone=!0:e._ambigZone&&(e._ambigZone=!1)}function at(t,e){t.year(e[0]||0).month(e[1]||0).date(e[2]||0).hours(e[3]||0).minutes(e[4]||0).seconds(e[5]||0).milliseconds(e[6]||0)}function lt(t,e){return Qt.format.call(t,e)}function ut(t,e){return ct(t,mt(e))}function ct(t,e){var i,n="";for(i=0;i<e.length;i++)n+=ht(t,e[i]);return n}function ht(t,e){var i,n;return"string"==typeof e?e:(i=e.token)?Jt[i]?Jt[i](t):lt(t,i):e.maybe&&(n=ct(t,e.maybe),n.match(/[1-9]/))?n:""}function dt(t,e,i,n,o){var s;return t=It.moment.parseZone(t),e=It.moment.parseZone(e),s=(t.localeData||t.lang).call(t),i=s.longDateFormat(i)||i,n=n||" - ",pt(t,e,mt(i),n,o)}function pt(t,e,i,n,o){var s,r,a,l,u="",c="",h="",d="",p="";for(r=0;r<i.length&&(s=ft(t,e,i[r]),s!==!1);r++)u+=s;for(a=i.length-1;a>r&&(s=ft(t,e,i[a]),s!==!1);a--)c=s+c;for(l=r;l<=a;l++)h+=ht(t,i[l]),d+=ht(e,i[l]);return(h||d)&&(p=o?d+n+h:h+n+d),u+p+c}function ft(t,e,i){var n,o;return"string"==typeof i?i:!!((n=i.token)&&(o=Kt[n.charAt(0)],o&&t.isSame(e,o)))&&lt(t,n)}function mt(t){return t in te?te[t]:te[t]=gt(t)}function gt(t){for(var e,i=[],n=/\[([^\]]*)\]|\(([^\)]*)\)|(LTS|LT|(\w)\4*o?)|([^\w\[\(]+)/g;e=n.exec(t);)e[1]?i.push(e[1]):e[2]?i.push({maybe:gt(e[2])}):e[3]?i.push({token:e[3]}):e[5]&&i.push(e[5]);return i}function vt(){}function _t(t,e){return!t&&!e||!(!t||!e)&&(t.grid===e.grid&&t.row===e.row&&t.col===e.col)}function yt(t){var e=wt(t);return"background"===e||"inverse-background"===e}function bt(t){return"inverse-background"===wt(t)}function wt(t){return Y((t.source||{}).rendering,t.rendering)}function St(t){var e,i,n={};for(e=0;e<t.length;e++)i=t[e],(n[i._id]||(n[i._id]=[])).push(i);return n}function xt(t,e){return t.eventStartMS-e.eventStartMS}function Ct(i){var n,o,s,r,a=It.dataAttrPrefix;return a&&(a+="-"),n=i.data(a+"event")||null,n&&(n="object"==typeof n?t.extend({},n):{},o=n.start,null==o&&(o=n.time),s=n.duration,r=n.stick,delete n.start,delete n.time,delete n.duration,delete n.stick),null==o&&(o=i.data(a+"start")),null==o&&(o=i.data(a+"time")),null==s&&(s=i.data(a+"duration")),
null==r&&(r=i.data(a+"stick")),o=null!=o?e.duration(o):null,s=null!=s?e.duration(s):null,r=Boolean(r),{eventProps:n,startTime:o,duration:s,stick:r}}function Et(t,e){var i,n;for(i=0;i<e.length;i++)if(n=e[i],n.leftCol<=t.rightCol&&n.rightCol>=t.leftCol)return!0;return!1}function kt(t,e){return t.leftCol-e.leftCol}function Tt(t){var e,i,n,o=[];for(e=0;e<t.length;e++){for(i=t[e],n=0;n<o.length&&Mt(i,o[n]).length;n++);i.level=n,(o[n]||(o[n]=[])).push(i)}return o}function Lt(t){var e,i,n,o,s;for(e=0;e<t.length;e++)for(i=t[e],n=0;n<i.length;n++)for(o=i[n],o.forwardSegs=[],s=e+1;s<t.length;s++)Mt(o,t[s],o.forwardSegs)}function Dt(t){var e,i,n=t.forwardSegs,o=0;if(void 0===t.forwardPressure){for(e=0;e<n.length;e++)i=n[e],Dt(i),o=Math.max(o,1+i.forwardPressure);t.forwardPressure=o}}function Mt(t,e,i){i=i||[];for(var n=0;n<e.length;n++)Pt(t,e[n])&&i.push(e[n]);return i}function Pt(t,e){return t.bottom>e.top&&t.top<e.bottom}function jt(i,n){function o(){G?a()&&(c(),l()):s()}function s(){Z=B.theme?"ui":"fc",i.addClass("fc"),B.isRTL?i.addClass("fc-rtl"):i.addClass("fc-ltr"),B.theme?i.addClass("ui-widget"):i.addClass("fc-unthemed"),G=t("<div class='fc-view-container'/>").prependTo(i),W=R.header=new $t(R,B),q=W.render(),q&&i.prepend(q),l(B.defaultView),B.handleWindowResize&&(X=nt(d,B.windowResizeDelay),t(window).resize(X))}function r(){V&&V.removeElement(),W.removeElement(),G.remove(),i.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget"),X&&t(window).unbind("resize",X)}function a(){return i.is(":visible")}function l(e){it++,V&&e&&V.type!==e&&(W.deactivateButton(V.type),A(),V.removeElement(),V=R.view=null),!V&&e&&(V=R.view=et[e]||(et[e]=R.instantiateView(e)),V.setElement(t("<div class='fc-view fc-"+e+"-view' />").appendTo(G)),W.activateButton(e)),V&&(Q=V.massageCurrentDate(Q),V.displaying&&Q.isWithin(V.intervalStart,V.intervalEnd)||a()&&(A(),V.display(Q),F(),b(),w(),g())),F(),it--}function u(t){if(a())return t&&h(),it++,V.updateSize(!0),it--,!0}function c(){a()&&h()}function h(){Y="number"==typeof B.contentHeight?B.contentHeight:"number"==typeof B.height?B.height-(q?q.outerHeight(!0):0):Math.round(G.width()/Math.max(B.aspectRatio,.5))}function d(t){!it&&t.target===window&&V.start&&u(!0)&&V.trigger("windowResize",tt)}function p(){m(),v()}function f(){a()&&(A(),V.displayEvents(ot),F())}function m(){A(),V.clearEvents(),F()}function g(){!B.lazyFetching||J(V.start,V.end)?v():f()}function v(){K(V.start,V.end)}function _(t){ot=t,f()}function y(){f()}function b(){W.updateTitle(V.title)}function w(){var t=R.getNow();t.isWithin(V.intervalStart,V.intervalEnd)?W.disableButton("today"):W.enableButton("today")}function S(){V.select(R.buildSelectRange.apply(R,arguments))}function x(){V&&V.unselect()}function C(){Q=V.computePrevDate(Q),l()}function E(){Q=V.computeNextDate(Q),l()}function k(){Q.add(-1,"years"),l()}function T(){Q.add(1,"years"),l()}function L(){Q=R.getNow(),l()}function D(t){Q=R.moment(t),l()}function M(t){Q.add(e.duration(t)),l()}function P(t,e){var i;e=e||"day",i=R.getViewSpec(e)||R.getUnitViewSpec(e),Q=t,l(i?i.type:null)}function j(){return Q.clone()}function A(){G.css({width:"100%",height:G.height(),overflow:"hidden"})}function F(){G.css({width:"",height:"",overflow:""})}function $(){return R}function O(){return V}function N(t,e){return void 0===e?B[t]:void("height"!=t&&"contentHeight"!=t&&"aspectRatio"!=t||(B[t]=e,u(!0)))}function I(t,e){var i=Array.prototype.slice.call(arguments,2);if(e=e||tt,this.triggerWith(t,e,i),B[t])return B[t].apply(e,i)}var R=this;R.initOptions(n||{});var B=this.options;R.render=o,R.destroy=r,R.refetchEvents=p,R.reportEvents=_,R.reportEventChange=y,R.rerenderEvents=f,R.changeView=l,R.select=S,R.unselect=x,R.prev=C,R.next=E,R.prevYear=k,R.nextYear=T,R.today=L,R.gotoDate=D,R.incrementDate=M,R.zoomTo=P,R.getDate=j,R.getCalendar=$,R.getView=O,R.option=N,R.trigger=I;var H=U(Ft(B.lang));if(B.monthNames&&(H._months=B.monthNames),B.monthNamesShort&&(H._monthsShort=B.monthNamesShort),B.dayNames&&(H._weekdays=B.dayNames),B.dayNamesShort&&(H._weekdaysShort=B.dayNamesShort),null!=B.firstDay){var z=U(H._week);z.dow=B.firstDay,H._week=z}H._fullCalendar_weekCalc=function(t){return"function"==typeof t?t:"local"===t?t:"iso"===t||"ISO"===t?"ISO":void 0}(B.weekNumberCalculation),R.defaultAllDayEventDuration=e.duration(B.defaultAllDayEventDuration),R.defaultTimedEventDuration=e.duration(B.defaultTimedEventDuration),R.moment=function(){var t;return"local"===B.timezone?(t=It.moment.apply(null,arguments),t.hasTime()&&t.local()):t="UTC"===B.timezone?It.moment.utc.apply(null,arguments):It.moment.parseZone.apply(null,arguments),"_locale"in t?t._locale=H:t._lang=H,t},R.getIsAmbigTimezone=function(){return"local"!==B.timezone&&"UTC"!==B.timezone},R.rezoneDate=function(t){return R.moment(t.toArray())},R.getNow=function(){var t=B.now;return"function"==typeof t&&(t=t()),R.moment(t)},R.getEventEnd=function(t){return t.end?t.end.clone():R.getDefaultEventEnd(t.allDay,t.start)},R.getDefaultEventEnd=function(t,e){var i=e.clone();return t?i.stripTime().add(R.defaultAllDayEventDuration):i.add(R.defaultTimedEventDuration),R.getIsAmbigTimezone()&&i.stripZone(),i},R.humanizeDuration=function(t){return(t.locale||t.lang).call(t,B.lang).humanize()},Ot.call(R,B);var W,q,G,Z,V,Y,X,Q,J=R.isFetchNeeded,K=R.fetchEvents,tt=i[0],et={},it=0,ot=[];Q=null!=B.defaultDate?R.moment(B.defaultDate):R.getNow(),R.getSuggestedViewHeight=function(){return void 0===Y&&c(),Y},R.isHeightAuto=function(){return"auto"===B.contentHeight||"auto"===B.height},R.initialize()}function At(e){t.each(ve,function(t,i){null==e[t]&&(e[t]=i(e))})}function Ft(t){var i=e.localeData||e.langData;return i.call(e,t)||i.call(e,"en")}function $t(e,i){function n(){var e=i.header;if(p=i.theme?"ui":"fc",e)return f=t("<div class='fc-toolbar'/>").append(s("left")).append(s("right")).append(s("center")).append('<div class="fc-clear"/>')}function o(){f.remove(),f=t()}function s(n){var o=t('<div class="fc-'+n+'"/>'),s=i.header[n];return s&&t.each(s.split(" "),function(){var n,s=t(),r=!0;t.each(this.split(","),function(n,o){var a,l,u,c,h,d,f,g,v,_;"title"==o?(s=s.add(t("<h2>&nbsp;</h2>")),r=!1):((a=(e.options.customButtons||{})[o])?(u=function(t){a.click&&a.click.call(_[0],t)},c="",h=a.text):(l=e.getViewSpec(o))?(u=function(){e.changeView(o)},m.push(o),c=l.buttonTextOverride,h=l.buttonTextDefault):e[o]&&(u=function(){e[o]()},c=(e.overrides.buttonText||{})[o],h=i.buttonText[o]),u&&(d=a?a.themeIcon:i.themeButtonIcons[o],f=a?a.icon:i.buttonIcons[o],g=c?X(c):d&&i.theme?"<span class='ui-icon ui-icon-"+d+"'></span>":f&&!i.theme?"<span class='fc-icon fc-icon-"+f+"'></span>":X(h),v=["fc-"+o+"-button",p+"-button",p+"-state-default"],_=t('<button type="button" class="'+v.join(" ")+'">'+g+"</button>").click(function(t){_.hasClass(p+"-state-disabled")||(u(t),(_.hasClass(p+"-state-active")||_.hasClass(p+"-state-disabled"))&&_.removeClass(p+"-state-hover"))}).mousedown(function(){_.not("."+p+"-state-active").not("."+p+"-state-disabled").addClass(p+"-state-down")}).mouseup(function(){_.removeClass(p+"-state-down")}).hover(function(){_.not("."+p+"-state-active").not("."+p+"-state-disabled").addClass(p+"-state-hover")},function(){_.removeClass(p+"-state-hover").removeClass(p+"-state-down")}),s=s.add(_)))}),r&&s.first().addClass(p+"-corner-left").end().last().addClass(p+"-corner-right").end(),s.length>1?(n=t("<div/>"),r&&n.addClass("fc-button-group"),n.append(s),o.append(n)):o.append(s)}),o}function r(t){f.find("h2").text(t)}function a(t){f.find(".fc-"+t+"-button").addClass(p+"-state-active")}function l(t){f.find(".fc-"+t+"-button").removeClass(p+"-state-active")}function u(t){f.find(".fc-"+t+"-button").attr("disabled","disabled").addClass(p+"-state-disabled")}function c(t){f.find(".fc-"+t+"-button").removeAttr("disabled").removeClass(p+"-state-disabled")}function h(){return m}var d=this;d.render=n,d.removeElement=o,d.updateTitle=r,d.activateButton=a,d.deactivateButton=l,d.disableButton=u,d.enableButton=c,d.getViewsWithButtons=h;var p,f=t(),m=[]}function Ot(i){function n(t,e){return!I||t.clone().stripZone()<I.clone().stripZone()||e.clone().stripZone()>R.clone().stripZone()}function o(t,e){I=t,R=e,G=[];var i=++W,n=U.length;q=n;for(var o=0;o<n;o++)s(U[o],i)}function s(e,i){r(e,function(n){var o,s,r,a=t.isArray(e.events);if(i==W){if(n)for(o=0;o<n.length;o++)s=n[o],r=a?s:_(s,e),r&&G.push.apply(G,x(r));q--,q||B(G)}})}function r(e,n){var o,s,a=It.sourceFetchers;for(o=0;o<a.length;o++){if(s=a[o].call(N,e,I.clone(),R.clone(),i.timezone,n),s===!0)return;if("object"==typeof s)return void r(s,n)}var l=e.events;if(l)t.isFunction(l)?(N.pushLoading(),l.call(N,I.clone(),R.clone(),i.timezone,function(t){n(t),N.popLoading()})):t.isArray(l)?n(l):n();else{var u=e.url;if(u){var c,h=e.success,d=e.error,p=e.complete;c=t.isFunction(e.data)?e.data():e.data;var f=t.extend({},c||{}),m=Y(e.startParam,i.startParam),g=Y(e.endParam,i.endParam),v=Y(e.timezoneParam,i.timezoneParam);m&&(f[m]=I.format()),g&&(f[g]=R.format()),i.timezone&&"local"!=i.timezone&&(f[v]=i.timezone),N.pushLoading(),t.ajax(t.extend({},_e,e,{data:f,success:function(e){e=e||[];var i=V(h,this,arguments);t.isArray(i)&&(e=i),n(e)},error:function(){V(d,this,arguments),n()},complete:function(){V(p,this,arguments),N.popLoading()}}))}else n()}}function a(t){var e=l(t);e&&(U.push(e),q++,s(e,W))}function l(e){var i,n,o=It.sourceNormalizers;if(t.isFunction(e)||t.isArray(e)?i={events:e}:"string"==typeof e?i={url:e}:"object"==typeof e&&(i=t.extend({},e)),i){for(i.className?"string"==typeof i.className&&(i.className=i.className.split(/\s+/)):i.className=[],t.isArray(i.events)&&(i.origArray=i.events,i.events=t.map(i.events,function(t){return _(t,i)})),n=0;n<o.length;n++)o[n].call(N,i);return i}}function u(e){U=t.grep(U,function(t){return!c(t,e)}),G=t.grep(G,function(t){return!c(t.source,e)}),B(G)}function c(t,e){return t&&e&&h(t)==h(e)}function h(t){return("object"==typeof t?t.origArray||t.googleCalendarId||t.url||t.events:null)||t}function d(t){t.start=N.moment(t.start),t.end?t.end=N.moment(t.end):t.end=null,C(t,p(t)),B(G)}function p(e){var i={};return t.each(e,function(t,e){f(t)&&void 0!==e&&Z(e)&&(i[t]=e)}),i}function f(t){return!/^_|^(id|allDay|start|end)$/.test(t)}function m(t,e){var i,n,o,s=_(t);if(s){for(i=x(s),n=0;n<i.length;n++)o=i[n],o.source||(e&&(z.events.push(o),o.source=z),G.push(o));return B(G),i}return[]}function g(e){var i,n;for(null==e?e=function(){return!0}:t.isFunction(e)||(i=e+"",e=function(t){return t._id==i}),G=t.grep(G,e,!0),n=0;n<U.length;n++)t.isArray(U[n].events)&&(U[n].events=t.grep(U[n].events,e,!0));B(G)}function v(e){return t.isFunction(e)?t.grep(G,e):null!=e?(e+="",t.grep(G,function(t){return t._id==e})):G}function _(n,o){var s,r,a,l={};if(i.eventDataTransform&&(n=i.eventDataTransform(n)),o&&o.eventDataTransform&&(n=o.eventDataTransform(n)),t.extend(l,n),o&&(l.source=o),l._id=n._id||(void 0===n.id?"_fc"+ye++:n.id+""),n.className?"string"==typeof n.className?l.className=n.className.split(/\s+/):l.className=n.className:l.className=[],s=n.start||n.date,r=n.end,H(s)&&(s=e.duration(s)),H(r)&&(r=e.duration(r)),n.dow||e.isDuration(s)||e.isDuration(r))l.start=s?e.duration(s):null,l.end=r?e.duration(r):null,l._recurring=!0;else{if(s&&(s=N.moment(s),!s.isValid()))return!1;r&&(r=N.moment(r),r.isValid()||(r=null)),a=n.allDay,void 0===a&&(a=Y(o?o.allDayDefault:void 0,i.allDayDefault)),y(s,r,a,l)}return l}function y(t,e,i,n){n.start=t,n.end=e,n.allDay=i,b(n),Nt(n)}function b(t){w(t),t.end&&!t.end.isAfter(t.start)&&(t.end=null),t.end||(i.forceEventDuration?t.end=N.getDefaultEventEnd(t.allDay,t.start):t.end=null)}function w(t){null==t.allDay&&(t.allDay=!(t.start.hasTime()||t.end&&t.end.hasTime())),t.allDay?(t.start.stripTime(),t.end&&t.end.stripTime()):(t.start.hasTime()||(t.start=N.rezoneDate(t.start)),t.end&&!t.end.hasTime()&&(t.end=N.rezoneDate(t.end)))}function S(e){var i;return e.end||(i=e.allDay,null==i&&(i=!e.start.hasTime()),e=t.extend({},e),e.end=N.getDefaultEventEnd(i,e.start)),e}function x(e,i,n){var o,s,r,a,l,u,c,h,d,p=[];if(i=i||I,n=n||R,e)if(e._recurring){if(s=e.dow)for(o={},r=0;r<s.length;r++)o[s[r]]=!0;for(a=i.clone().stripTime();a.isBefore(n);)o&&!o[a.day()]||(l=e.start,u=e.end,c=a.clone(),h=null,l&&(c=c.time(l)),u&&(h=a.clone().time(u)),d=t.extend({},e),y(c,h,!l&&!u,d),p.push(d)),a.add(1,"days")}else p.push(e);return p}function C(e,i,n){function o(t,e){return n?A(t,e,n):i.allDay?j(t,e):P(t,e)}var s,r,a,l,u,c,h={};return i=i||{},i.start||(i.start=e.start.clone()),void 0===i.end&&(i.end=e.end?e.end.clone():null),null==i.allDay&&(i.allDay=e.allDay),b(i),s={start:e._start.clone(),end:e._end?e._end.clone():N.getDefaultEventEnd(e._allDay,e._start),allDay:i.allDay},b(s),r=null!==e._end&&null===i.end,a=o(i.start,s.start),i.end?(l=o(i.end,s.end),u=l.subtract(a)):u=null,t.each(i,function(t,e){f(t)&&void 0!==e&&(h[t]=e)}),c=E(v(e._id),r,i.allDay,a,u,h),{dateDelta:a,durationDelta:u,undo:c}}function E(e,i,n,o,s,r){var a=N.getIsAmbigTimezone(),l=[];return o&&!o.valueOf()&&(o=null),s&&!s.valueOf()&&(s=null),t.each(e,function(e,u){var c,h;c={start:u.start.clone(),end:u.end?u.end.clone():null,allDay:u.allDay},t.each(r,function(t){c[t]=u[t]}),h={start:u._start,end:u._end,allDay:n},b(h),i?h.end=null:s&&!h.end&&(h.end=N.getDefaultEventEnd(h.allDay,h.start)),o&&(h.start.add(o),h.end&&h.end.add(o)),s&&h.end.add(s),a&&!h.allDay&&(o||s)&&(h.start.stripZone(),h.end&&h.end.stripZone()),t.extend(u,r,h),Nt(u),l.push(function(){t.extend(u,c),Nt(u)})}),function(){for(var t=0;t<l.length;t++)l[t]()}}function k(e){var n,o=i.businessHours,s={className:"fc-nonbusiness",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"},r=N.getView();return o&&(n=t.extend({},s,"object"==typeof o?o:{})),n?(e&&(n.start=null,n.end=null),x(_(n),r.start,r.end)):[]}function T(t,e){var n=e.source||{},o=Y(e.constraint,n.constraint,i.eventConstraint),s=Y(e.overlap,n.overlap,i.eventOverlap);return t=S(t),M(t,o,s,e)}function L(t){return M(t,i.selectConstraint,i.selectOverlap)}function D(e,i){var n,o;return i&&(n=t.extend({},i,e),o=x(_(n))[0]),o?T(e,o):(e=S(e),L(e))}function M(e,i,n,o){var s,r,a,l,u,c;if(e=t.extend({},e),e.start=e.start.clone().stripZone(),e.end=e.end.clone().stripZone(),null!=i){for(s=F(i),r=!1,l=0;l<s.length;l++)if($(s[l],e)){r=!0;break}if(!r)return!1}for(a=N.getPeerEvents(o,e),l=0;l<a.length;l++)if(u=a[l],O(u,e)){if(n===!1)return!1;if("function"==typeof n&&!n(u,o))return!1;if(o){if(c=Y(u.overlap,(u.source||{}).overlap),c===!1)return!1;if("function"==typeof c&&!c(o,u))return!1}}return!0}function F(t){return"businessHours"===t?k():"object"==typeof t?x(_(t)):v(t)}function $(t,e){var i=t.start.clone().stripZone(),n=N.getEventEnd(t).stripZone();return e.start>=i&&e.end<=n}function O(t,e){var i=t.start.clone().stripZone(),n=N.getEventEnd(t).stripZone();return e.start<n&&e.end>i}var N=this;N.isFetchNeeded=n,N.fetchEvents=o,N.addEventSource=a,N.removeEventSource=u,N.updateEvent=d,N.renderEvent=m,N.removeEvents=g,N.clientEvents=v,N.mutateEvent=C,N.normalizeEventRange=b,N.normalizeEventRangeTimes=w,N.ensureVisibleEventRange=S;var I,R,B=N.reportEvents,z={events:[]},U=[z],W=0,q=0,G=[];t.each((i.events?[i.events]:[]).concat(i.eventSources||[]),function(t,e){var i=l(e);i&&U.push(i)}),N.getBusinessHoursEvents=k,N.isEventRangeAllowed=T,N.isSelectionRangeAllowed=L,N.isExternalDropRangeAllowed=D,N.getEventCache=function(){return G}}function Nt(t){t._allDay=t.allDay,t._start=t.start.clone(),t._end=t.end?t.end.clone():null}var It=t.fullCalendar={version:"2.4.0"},Rt=It.views={};t.fn.fullCalendar=function(e){var i=Array.prototype.slice.call(arguments,1),n=this;return this.each(function(o,s){var r,a=t(s),l=a.data("fullCalendar");"string"==typeof e?l&&t.isFunction(l[e])&&(r=l[e].apply(l,i),o||(n=r),"destroy"===e&&a.removeData("fullCalendar")):l||(l=new pe(a,e),a.data("fullCalendar",l),l.render())}),n};var Bt=["header","buttonText","buttonIcons","themeButtonIcons"];It.intersectionToSeg=M,It.applyAll=V,It.debounce=nt,It.isInt=et,It.htmlEscape=X,It.cssToStr=J,It.proxy=it,It.capitaliseFirstLetter=K,It.getClientRect=m,It.getContentRect=g,It.getScrollbarWidths=v;var Ht=null;It.intersectRects=S,It.parseFieldSpecs=k,It.compareByFieldSpecs=T,It.compareByFieldSpec=L,It.flexibleCompare=D,It.computeIntervalUnit=F,It.divideRangeByDuration=O,It.divideDurationByDuration=N,It.multiplyDuration=I,It.durationHasTime=R;var zt=["sun","mon","tue","wed","thu","fri","sat"],Ut=["year","month","week","day","hour","minute","second","millisecond"];It.log=function(){var t=window.console;if(t&&t.log)return t.log.apply(t,arguments)},It.warn=function(){var t=window.console;return t&&t.warn?t.warn.apply(t,arguments):It.log.apply(It,arguments)};var Wt,qt,Gt,Zt={}.hasOwnProperty,Vt=/^\s*\d{4}-\d\d$/,Yt=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/,Xt=e.fn,Qt=t.extend({},Xt);It.moment=function(){return ot(arguments)},It.moment.utc=function(){var t=ot(arguments,!0);return t.hasTime()&&t.utc(),t},It.moment.parseZone=function(){return ot(arguments,!0,!0)},Xt.clone=function(){var t=Qt.clone.apply(this,arguments);return rt(this,t),this._fullCalendar&&(t._fullCalendar=!0),t},Xt.week=Xt.weeks=function(t){var e=(this._locale||this._lang)._fullCalendar_weekCalc;return null==t&&"function"==typeof e?e(this):"ISO"===e?Qt.isoWeek.apply(this,arguments):Qt.week.apply(this,arguments)},Xt.time=function(t){if(!this._fullCalendar)return Qt.time.apply(this,arguments);if(null==t)return e.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});this._ambigTime=!1,e.isDuration(t)||e.isMoment(t)||(t=e.duration(t));var i=0;return e.isDuration(t)&&(i=24*Math.floor(t.asDays())),this.hours(i+t.hours()).minutes(t.minutes()).seconds(t.seconds()).milliseconds(t.milliseconds())},Xt.stripTime=function(){var t;return this._ambigTime||(t=this.toArray(),this.utc(),qt(this,t.slice(0,3)),this._ambigTime=!0,this._ambigZone=!0),this},Xt.hasTime=function(){return!this._ambigTime},Xt.stripZone=function(){var t,e;return this._ambigZone||(t=this.toArray(),e=this._ambigTime,this.utc(),qt(this,t),this._ambigTime=e||!1,this._ambigZone=!0),this},Xt.hasZone=function(){return!this._ambigZone},Xt.local=function(){var t=this.toArray(),e=this._ambigZone;return Qt.local.apply(this,arguments),this._ambigTime=!1,this._ambigZone=!1,e&&Gt(this,t),this},Xt.utc=function(){return Qt.utc.apply(this,arguments),this._ambigTime=!1,this._ambigZone=!1,this},t.each(["zone","utcOffset"],function(t,e){Qt[e]&&(Xt[e]=function(t){return null!=t&&(this._ambigTime=!1,this._ambigZone=!1),Qt[e].apply(this,arguments)})}),Xt.format=function(){return this._fullCalendar&&arguments[0]?ut(this,arguments[0]):this._ambigTime?lt(this,"YYYY-MM-DD"):this._ambigZone?lt(this,"YYYY-MM-DD[T]HH:mm:ss"):Qt.format.apply(this,arguments)},Xt.toISOString=function(){return this._ambigTime?lt(this,"YYYY-MM-DD"):this._ambigZone?lt(this,"YYYY-MM-DD[T]HH:mm:ss"):Qt.toISOString.apply(this,arguments)},Xt.isWithin=function(t,e){var i=st([this,t,e]);return i[0]>=i[1]&&i[0]<i[2]},Xt.isSame=function(t,e){var i;return this._fullCalendar?e?(i=st([this,t],!0),Qt.isSame.call(i[0],i[1],e)):(t=It.moment.parseZone(t),Qt.isSame.call(this,t)&&Boolean(this._ambigTime)===Boolean(t._ambigTime)&&Boolean(this._ambigZone)===Boolean(t._ambigZone)):Qt.isSame.apply(this,arguments)},t.each(["isBefore","isAfter"],function(t,e){Xt[e]=function(t,i){var n;return this._fullCalendar?(n=st([this,t]),Qt[e].call(n[0],n[1],i)):Qt[e].apply(this,arguments)}}),Wt="_d"in e()&&"updateOffset"in e,qt=Wt?function(t,i){t._d.setTime(Date.UTC.apply(Date,i)),e.updateOffset(t,!1)}:at,Gt=Wt?function(t,i){t._d.setTime(+new Date(i[0]||0,i[1]||0,i[2]||0,i[3]||0,i[4]||0,i[5]||0,i[6]||0)),e.updateOffset(t,!1)}:at;var Jt={t:function(t){return lt(t,"a").charAt(0)},T:function(t){return lt(t,"A").charAt(0)}};It.formatRange=dt;var Kt={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"},te={};It.Class=vt,vt.extend=function(t){var e,i=this;return t=t||{},G(t,"constructor")&&(e=t.constructor),"function"!=typeof e&&(e=t.constructor=function(){i.apply(this,arguments)}),e.prototype=U(i.prototype),W(t,e.prototype),q(t,e.prototype),W(i,e),e},vt.mixin=function(t){W(t.prototype||t,this.prototype)};var ee=It.Emitter=vt.extend({callbackHash:null,on:function(t,e){return this.getCallbacks(t).add(e),this},off:function(t,e){return this.getCallbacks(t).remove(e),this},trigger:function(t){var e=Array.prototype.slice.call(arguments,1);return this.triggerWith(t,this,e),this},triggerWith:function(t,e,i){var n=this.getCallbacks(t);return n.fireWith(e,i),this},getCallbacks:function(e){var i;return this.callbackHash||(this.callbackHash={}),i=this.callbackHash[e],i||(i=this.callbackHash[e]=t.Callbacks()),i}}),ie=vt.extend({isHidden:!0,options:null,el:null,documentMousedownProxy:null,margin:10,constructor:function(t){this.options=t||{}},show:function(){this.isHidden&&(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},hide:function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},render:function(){var e=this,i=this.options;this.el=t('<div class="fc-popover"/>').addClass(i.className||"").css({top:0,left:0}).append(i.content).appendTo(i.parentEl),this.el.on("click",".fc-close",function(){e.hide()}),i.autoHide&&t(document).on("mousedown",this.documentMousedownProxy=it(this,"documentMousedown"))},documentMousedown:function(e){this.el&&!t(e.target).closest(this.el).length&&this.hide()},removeElement:function(){this.hide(),this.el&&(this.el.remove(),this.el=null),t(document).off("mousedown",this.documentMousedownProxy)},position:function(){var e,i,n,o,s,r=this.options,a=this.el.offsetParent().offset(),l=this.el.outerWidth(),u=this.el.outerHeight(),c=t(window),h=p(this.el);o=r.top||0,s=void 0!==r.left?r.left:void 0!==r.right?r.right-l:0,h.is(window)||h.is(document)?(h=c,e=0,i=0):(n=h.offset(),e=n.top,i=n.left),e+=c.scrollTop(),i+=c.scrollLeft(),r.viewportConstrain!==!1&&(o=Math.min(o,e+h.outerHeight()-u-this.margin),o=Math.max(o,e+this.margin),s=Math.min(s,i+h.outerWidth()-l-this.margin),s=Math.max(s,i+this.margin)),this.el.css({top:o-a.top,left:s-a.left})},trigger:function(t){this.options[t]&&this.options[t].apply(this,Array.prototype.slice.call(arguments,1))}}),ne=vt.extend({grid:null,rowCoords:null,colCoords:null,containerEl:null,bounds:null,constructor:function(t){this.grid=t},build:function(){this.grid.build(),this.rowCoords=this.grid.computeRowCoords(),this.colCoords=this.grid.computeColCoords(),this.computeBounds()},clear:function(){this.grid.clear(),this.rowCoords=null,this.colCoords=null},getCell:function(e,i){var n,o,s,r=this.rowCoords,a=r.length,l=this.colCoords,u=l.length,c=null,h=null;if(this.inBounds(e,i)){for(n=0;n<a;n++)if(o=r[n],i>=o.top&&i<o.bottom){c=n;break}for(n=0;n<u;n++)if(o=l[n],e>=o.left&&e<o.right){h=n;break}if(null!==c&&null!==h)return s=this.grid.getCell(c,h),s.grid=this.grid,t.extend(s,r[c],l[h]),s}return null},computeBounds:function(){this.bounds=this.containerEl?m(this.containerEl):null},inBounds:function(t,e){var i=this.bounds;return!i||t>=i.left&&t<i.right&&e>=i.top&&e<i.bottom}}),oe=vt.extend({coordMaps:null,constructor:function(t){this.coordMaps=t},build:function(){var t,e=this.coordMaps;for(t=0;t<e.length;t++)e[t].build()},getCell:function(t,e){var i,n=this.coordMaps,o=null;for(i=0;i<n.length&&!o;i++)o=n[i].getCell(t,e);return o},clear:function(){var t,e=this.coordMaps;for(t=0;t<e.length;t++)e[t].clear()}}),se=It.DragListener=vt.extend({options:null,isListening:!1,isDragging:!1,originX:null,originY:null,mousemoveProxy:null,mouseupProxy:null,subjectEl:null,subjectHref:null,scrollEl:null,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollHandlerProxy:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,constructor:function(t){t=t||{},this.options=t,this.subjectEl=t.subjectEl},mousedown:function(t){w(t)&&(t.preventDefault(),this.startListening(t),this.options.distance||this.startDrag(t))},startListening:function(e){var i;this.isListening||(e&&this.options.scroll&&(i=p(t(e.target)),i.is(window)||i.is(document)||(this.scrollEl=i,this.scrollHandlerProxy=nt(it(this,"scrollHandler"),100),this.scrollEl.on("scroll",this.scrollHandlerProxy))),t(document).on("mousemove",this.mousemoveProxy=it(this,"mousemove")).on("mouseup",this.mouseupProxy=it(this,"mouseup")).on("selectstart",this.preventDefault),e?(this.originX=e.pageX,this.originY=e.pageY):(this.originX=0,this.originY=0),this.isListening=!0,this.listenStart(e))},listenStart:function(t){this.trigger("listenStart",t)},mousemove:function(t){var e,i,n=t.pageX-this.originX,o=t.pageY-this.originY;this.isDragging||(e=this.options.distance||1,i=n*n+o*o,i>=e*e&&this.startDrag(t)),this.isDragging&&this.drag(n,o,t)},startDrag:function(t){this.isListening||this.startListening(),this.isDragging||(this.isDragging=!0,this.dragStart(t))},dragStart:function(t){var e=this.subjectEl;this.trigger("dragStart",t),(this.subjectHref=e?e.attr("href"):null)&&e.removeAttr("href")},drag:function(t,e,i){this.trigger("drag",t,e,i),this.updateScroll(i)},mouseup:function(t){this.stopListening(t)},stopDrag:function(t){this.isDragging&&(this.stopScrolling(),this.dragStop(t),this.isDragging=!1)},dragStop:function(t){var e=this;this.trigger("dragStop",t),setTimeout(function(){e.subjectHref&&e.subjectEl.attr("href",e.subjectHref)},0)},stopListening:function(e){this.stopDrag(e),this.isListening&&(this.scrollEl&&(this.scrollEl.off("scroll",this.scrollHandlerProxy),this.scrollHandlerProxy=null),t(document).off("mousemove",this.mousemoveProxy).off("mouseup",this.mouseupProxy).off("selectstart",this.preventDefault),this.mousemoveProxy=null,this.mouseupProxy=null,this.isListening=!1,this.listenStop(e))},listenStop:function(t){this.trigger("listenStop",t)},trigger:function(t){this.options[t]&&this.options[t].apply(this,Array.prototype.slice.call(arguments,1))},preventDefault:function(t){t.preventDefault()},computeScrollBounds:function(){var t=this.scrollEl;this.scrollBounds=t?f(t):null},updateScroll:function(t){var e,i,n,o,s=this.scrollSensitivity,r=this.scrollBounds,a=0,l=0;r&&(e=(s-(t.pageY-r.top))/s,i=(s-(r.bottom-t.pageY))/s,n=(s-(t.pageX-r.left))/s,o=(s-(r.right-t.pageX))/s,e>=0&&e<=1?a=e*this.scrollSpeed*-1:i>=0&&i<=1&&(a=i*this.scrollSpeed),n>=0&&n<=1?l=n*this.scrollSpeed*-1:o>=0&&o<=1&&(l=o*this.scrollSpeed)),this.setScrollVel(a,l)},setScrollVel:function(t,e){this.scrollTopVel=t,this.scrollLeftVel=e,this.constrainScrollVel(),!this.scrollTopVel&&!this.scrollLeftVel||this.scrollIntervalId||(this.scrollIntervalId=setInterval(it(this,"scrollIntervalFunc"),this.scrollIntervalMs))},constrainScrollVel:function(){var t=this.scrollEl;this.scrollTopVel<0?t.scrollTop()<=0&&(this.scrollTopVel=0):this.scrollTopVel>0&&t.scrollTop()+t[0].clientHeight>=t[0].scrollHeight&&(this.scrollTopVel=0),this.scrollLeftVel<0?t.scrollLeft()<=0&&(this.scrollLeftVel=0):this.scrollLeftVel>0&&t.scrollLeft()+t[0].clientWidth>=t[0].scrollWidth&&(this.scrollLeftVel=0)},scrollIntervalFunc:function(){var t=this.scrollEl,e=this.scrollIntervalMs/1e3;this.scrollTopVel&&t.scrollTop(t.scrollTop()+this.scrollTopVel*e),this.scrollLeftVel&&t.scrollLeft(t.scrollLeft()+this.scrollLeftVel*e),this.constrainScrollVel(),this.scrollTopVel||this.scrollLeftVel||this.stopScrolling()},stopScrolling:function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.scrollStop())},scrollHandler:function(){this.scrollIntervalId||this.scrollStop()},scrollStop:function(){}}),re=se.extend({coordMap:null,origCell:null,cell:null,coordAdjust:null,constructor:function(t,e){se.prototype.constructor.call(this,e),this.coordMap=t},listenStart:function(t){var e,i,n,o=this.subjectEl;se.prototype.listenStart.apply(this,arguments),this.computeCoords(),t?(i={left:t.pageX,top:t.pageY},n=i,o&&(e=f(o),n=x(n,e)),this.origCell=this.getCell(n.left,n.top),o&&this.options.subjectCenter&&(this.origCell&&(e=S(this.origCell,e)||e),n=C(e)),this.coordAdjust=E(n,i)):(this.origCell=null,this.coordAdjust=null)},computeCoords:function(){this.coordMap.build(),this.computeScrollBounds()},dragStart:function(t){var e;se.prototype.dragStart.apply(this,arguments),e=this.getCell(t.pageX,t.pageY),e&&this.cellOver(e)},drag:function(t,e,i){var n;se.prototype.drag.apply(this,arguments),n=this.getCell(i.pageX,i.pageY),_t(n,this.cell)||(this.cell&&this.cellOut(),n&&this.cellOver(n))},dragStop:function(){this.cellDone(),se.prototype.dragStop.apply(this,arguments)},cellOver:function(t){this.cell=t,this.trigger("cellOver",t,_t(t,this.origCell),this.origCell)},cellOut:function(){this.cell&&(this.trigger("cellOut",this.cell),this.cellDone(),this.cell=null)},cellDone:function(){this.cell&&this.trigger("cellDone",this.cell)},listenStop:function(){se.prototype.listenStop.apply(this,arguments),this.origCell=this.cell=null,this.coordMap.clear()},scrollStop:function(){se.prototype.scrollStop.apply(this,arguments),this.computeCoords()},getCell:function(t,e){return this.coordAdjust&&(t+=this.coordAdjust.left,e+=this.coordAdjust.top),this.coordMap.getCell(t,e)}}),ae=vt.extend({options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,mouseY0:null,mouseX0:null,topDelta:null,leftDelta:null,mousemoveProxy:null,isFollowing:!1,isHidden:!1,isAnimating:!1,constructor:function(e,i){this.options=i=i||{},this.sourceEl=e,this.parentEl=i.parentEl?t(i.parentEl):e.parent()},start:function(e){this.isFollowing||(this.isFollowing=!0,this.mouseY0=e.pageY,this.mouseX0=e.pageX,this.topDelta=0,this.leftDelta=0,this.isHidden||this.updatePosition(),t(document).on("mousemove",this.mousemoveProxy=it(this,"mousemove")))},stop:function(e,i){function n(){this.isAnimating=!1,o.removeElement(),this.top0=this.left0=null,i&&i()}var o=this,s=this.options.revertDuration;this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,t(document).off("mousemove",this.mousemoveProxy),e&&s&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:s,complete:n})):n())},getEl:function(){var t=this.el;return t||(this.sourceEl.width(),t=this.el=this.sourceEl.clone().css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}).appendTo(this.parentEl)),t},removeElement:function(){this.el&&(this.el.remove(),this.el=null)},updatePosition:function(){var t,e;this.getEl(),null===this.top0&&(this.sourceEl.width(),t=this.sourceEl.offset(),e=this.el.offsetParent().offset(),this.top0=t.top-e.top,this.left0=t.left-e.left),this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},mousemove:function(t){this.topDelta=t.pageY-this.mouseY0,this.leftDelta=t.pageX-this.mouseX0,this.isHidden||this.updatePosition()},hide:function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}}),le=vt.extend({view:null,isRTL:null,cellHtml:"<td/>",constructor:function(t){this.view=t,this.isRTL=t.opt("isRTL")},rowHtml:function(t,e){var i,n,o=this.getHtmlRenderer("cell",t),s="";for(e=e||0,i=0;i<this.colCnt;i++)n=this.getCell(e,i),s+=o(n);return s=this.bookendCells(s,t,e),"<tr>"+s+"</tr>"},bookendCells:function(t,e,i){var n=this.getHtmlRenderer("intro",e)(i||0),o=this.getHtmlRenderer("outro",e)(i||0),s=this.isRTL?o:n,r=this.isRTL?n:o;return"string"==typeof t?s+t+r:t.prepend(s).append(r)},getHtmlRenderer:function(t,e){var i,n,o,s,r=this.view;return i=t+"Html",e&&(n=e+K(t)+"Html"),n&&(s=r[n])?o=r:n&&(s=this[n])?o=this:(s=r[i])?o=r:(s=this[i])&&(o=this),"function"==typeof s?function(){return s.apply(o,arguments)||""}:function(){return s||""}}}),ue=It.Grid=le.extend({start:null,end:null,rowCnt:0,colCnt:0,el:null,coordMap:null,elsByFill:null,externalDragStartProxy:null,colHeadFormat:null,eventTimeFormat:null,displayEventTime:null,displayEventEnd:null,cellDuration:null,largeUnit:null,constructor:function(){le.apply(this,arguments),this.coordMap=new ne(this),this.elsByFill={},this.externalDragStartProxy=it(this,"externalDragStart")},computeColHeadFormat:function(){},computeEventTimeFormat:function(){return this.view.opt("smallTimeFormat")},computeDisplayEventTime:function(){return!0},computeDisplayEventEnd:function(){return!0},setRange:function(t){this.start=t.start.clone(),this.end=t.end.clone(),this.rangeUpdated(),this.processRangeOptions()},rangeUpdated:function(){},processRangeOptions:function(){var t,e,i=this.view;this.colHeadFormat=i.opt("columnFormat")||this.computeColHeadFormat(),this.eventTimeFormat=i.opt("eventTimeFormat")||i.opt("timeFormat")||this.computeEventTimeFormat(),
t=i.opt("displayEventTime"),null==t&&(t=this.computeDisplayEventTime()),e=i.opt("displayEventEnd"),null==e&&(e=this.computeDisplayEventEnd()),this.displayEventTime=t,this.displayEventEnd=e},build:function(){},clear:function(){},rangeToSegs:function(){},diffDates:function(t,e){return this.largeUnit?A(t,e,this.largeUnit):P(t,e)},getCell:function(e,i){var n;return null==i&&("number"==typeof e?(i=e%this.colCnt,e=Math.floor(e/this.colCnt)):(i=e.col,e=e.row)),n={row:e,col:i},t.extend(n,this.getRowData(e),this.getColData(i)),t.extend(n,this.computeCellRange(n)),n},computeCellRange:function(t){var e=this.computeCellDate(t);return{start:e,end:e.clone().add(this.cellDuration)}},computeCellDate:function(){},getRowData:function(){return{}},getColData:function(){return{}},getRowEl:function(){},getColEl:function(){},getCellDayEl:function(t){return this.getColEl(t.col)||this.getRowEl(t.row)},computeRowCoords:function(){var t,e,i,n=[];for(t=0;t<this.rowCnt;t++)e=this.getRowEl(t),i=e.offset().top,n.push({top:i,bottom:i+e.outerHeight()});return n},computeColCoords:function(){var t,e,i,n=[];for(t=0;t<this.colCnt;t++)e=this.getColEl(t),i=e.offset().left,n.push({left:i,right:i+e.outerWidth()});return n},setElement:function(e){var i=this;this.el=e,e.on("mousedown",function(e){t(e.target).is(".fc-event-container *, .fc-more")||t(e.target).closest(".fc-popover").length||i.dayMousedown(e)}),this.bindSegHandlers(),this.bindGlobalHandlers()},removeElement:function(){this.unbindGlobalHandlers(),this.el.remove()},renderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},bindGlobalHandlers:function(){t(document).on("dragstart sortstart",this.externalDragStartProxy)},unbindGlobalHandlers:function(){t(document).off("dragstart sortstart",this.externalDragStartProxy)},dayMousedown:function(t){var e,i,n=this,o=this.view,s=o.opt("selectable"),l=new re(this.coordMap,{scroll:o.opt("dragScroll"),dragStart:function(){o.unselect()},cellOver:function(t,o,a){a&&(e=o?t:null,s&&(i=n.computeSelection(a,t),i?n.renderSelection(i):r()))},cellOut:function(){e=null,i=null,n.unrenderSelection(),a()},listenStop:function(t){e&&o.triggerDayClick(e,n.getCellDayEl(e),t),i&&o.reportSelection(i,t),a()}});l.mousedown(t)},renderRangeHelper:function(t,e){var i=this.fabricateHelperEvent(t,e);this.renderHelper(i,e)},fabricateHelperEvent:function(t,e){var i=e?U(e.event):{};return i.start=t.start.clone(),i.end=t.end?t.end.clone():null,i.allDay=null,this.view.calendar.normalizeEventRange(i),i.className=(i.className||[]).concat("fc-helper"),e||(i.editable=!1),i},renderHelper:function(){},unrenderHelper:function(){},renderSelection:function(t){this.renderHighlight(this.selectionRangeToSegs(t))},unrenderSelection:function(){this.unrenderHighlight()},computeSelection:function(t,e){var i,n=[t.start,t.end,e.start,e.end];return n.sort(tt),i={start:n[0].clone(),end:n[3].clone()},this.view.calendar.isSelectionRangeAllowed(i)?i:null},selectionRangeToSegs:function(t){return this.rangeToSegs(t)},renderHighlight:function(t){this.renderFill("highlight",t)},unrenderHighlight:function(){this.unrenderFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderFill:function(){},unrenderFill:function(t){var e=this.elsByFill[t];e&&(e.remove(),delete this.elsByFill[t])},renderFillSegEls:function(e,i){var n,o=this,s=this[e+"SegEl"],r="",a=[];if(i.length){for(n=0;n<i.length;n++)r+=this.fillSegHtml(e,i[n]);t(r).each(function(e,n){var r=i[e],l=t(n);s&&(l=s.call(o,r,l)),l&&(l=t(l),l.is(o.fillSegTag)&&(r.el=l,a.push(r)))})}return a},fillSegTag:"div",fillSegHtml:function(t,e){var i=this[t+"SegClasses"],n=this[t+"SegCss"],o=i?i.call(this,e):[],s=J(n?n.call(this,e):{});return"<"+this.fillSegTag+(o.length?' class="'+o.join(" ")+'"':"")+(s?' style="'+s+'"':"")+" />"},headHtml:function(){return'<div class="fc-row '+this.view.widgetHeaderClass+'"><table><thead>'+this.rowHtml("head")+"</thead></table></div>"},headCellHtml:function(t){var e=this.view,i=t.start;return'<th class="fc-day-header '+e.widgetHeaderClass+" fc-"+zt[i.day()]+'">'+X(i.format(this.colHeadFormat))+"</th>"},bgCellHtml:function(t){var e=this.view,i=t.start,n=this.getDayClasses(i);return n.unshift("fc-day",e.widgetContentClass),'<td class="'+n.join(" ")+'" data-date="'+i.format("YYYY-MM-DD")+'"></td>'},getDayClasses:function(t){var e=this.view,i=e.calendar.getNow().stripTime(),n=["fc-"+zt[t.day()]];return 1==e.intervalDuration.as("months")&&t.month()!=e.intervalStart.month()&&n.push("fc-other-month"),t.isSame(i,"day")?n.push("fc-today",e.highlightStateClass):t<i?n.push("fc-past"):n.push("fc-future"),n}});ue.mixin({mousedOverSeg:null,isDraggingSeg:!1,isResizingSeg:!1,isDraggingExternal:!1,segs:null,renderEvents:function(t){var e,i,n=this.eventsToSegs(t),o=[],s=[];for(e=0;e<n.length;e++)i=n[e],yt(i.event)?o.push(i):s.push(i);o=this.renderBgSegs(o)||o,s=this.renderFgSegs(s)||s,this.segs=o.concat(s)},unrenderEvents:function(){this.triggerSegMouseout(),this.unrenderFgSegs(),this.unrenderBgSegs(),this.segs=null},getEventSegs:function(){return this.segs||[]},renderFgSegs:function(){},unrenderFgSegs:function(){},renderFgSegEls:function(e,i){var n,o=this.view,s="",r=[];if(e.length){for(n=0;n<e.length;n++)s+=this.fgSegHtml(e[n],i);t(s).each(function(i,n){var s=e[i],a=o.resolveEventEl(s.event,t(n));a&&(a.data("fc-seg",s),s.el=a,r.push(s))})}return r},fgSegHtml:function(){},renderBgSegs:function(t){return this.renderFill("bgEvent",t)},unrenderBgSegs:function(){this.unrenderFill("bgEvent")},bgEventSegEl:function(t,e){return this.view.resolveEventEl(t.event,e)},bgEventSegClasses:function(t){var e=t.event,i=e.source||{};return["fc-bgevent"].concat(e.className,i.className||[])},bgEventSegCss:function(t){var e=this.view,i=t.event,n=i.source||{};return{"background-color":i.backgroundColor||i.color||n.backgroundColor||n.color||e.opt("eventBackgroundColor")||e.opt("eventColor")}},businessHoursSegClasses:function(){return["fc-nonbusiness","fc-bgevent"]},bindSegHandlers:function(){var e=this,i=this.view;t.each({mouseenter:function(t,i){e.triggerSegMouseover(t,i)},mouseleave:function(t,i){e.triggerSegMouseout(t,i)},click:function(t,e){return i.trigger("eventClick",this,t.event,e)},mousedown:function(n,o){t(o.target).is(".fc-resizer")&&i.isEventResizable(n.event)?e.segResizeMousedown(n,o,t(o.target).is(".fc-start-resizer")):i.isEventDraggable(n.event)&&e.segDragMousedown(n,o)}},function(i,n){e.el.on(i,".fc-event-container > *",function(i){var o=t(this).data("fc-seg");if(o&&!e.isDraggingSeg&&!e.isResizingSeg)return n.call(this,o,i)})})},triggerSegMouseover:function(t,e){this.mousedOverSeg||(this.mousedOverSeg=t,this.view.trigger("eventMouseover",t.el[0],t.event,e))},triggerSegMouseout:function(t,e){e=e||{},this.mousedOverSeg&&(t=t||this.mousedOverSeg,this.mousedOverSeg=null,this.view.trigger("eventMouseout",t.el[0],t.event,e))},segDragMousedown:function(t,e){var i,n=this,o=this.view,s=o.calendar,l=t.el,u=t.event,c=new ae(t.el,{parentEl:o.el,opacity:o.opt("dragOpacity"),revertDuration:o.opt("dragRevertDuration"),zIndex:2}),h=new re(o.coordMap,{distance:5,scroll:o.opt("dragScroll"),subjectEl:l,subjectCenter:!0,listenStart:function(t){c.hide(),c.start(t)},dragStart:function(e){n.triggerSegMouseout(t,e),n.segDragStart(t,e),o.hideEvent(u)},cellOver:function(e,a,l){t.cell&&(l=t.cell),i=n.computeEventDrop(l,e,u),i&&!s.isEventRangeAllowed(i,u)&&(r(),i=null),i&&o.renderDrag(i,t)?c.hide():c.show(),a&&(i=null)},cellOut:function(){o.unrenderDrag(),c.show(),i=null},cellDone:function(){a()},dragStop:function(e){c.stop(!i,function(){o.unrenderDrag(),o.showEvent(u),n.segDragStop(t,e),i&&o.reportEventDrop(u,i,this.largeUnit,l,e)})},listenStop:function(){c.stop()}});h.mousedown(e)},segDragStart:function(t,e){this.isDraggingSeg=!0,this.view.trigger("eventDragStart",t.el[0],t.event,e,{})},segDragStop:function(t,e){this.isDraggingSeg=!1,this.view.trigger("eventDragStop",t.el[0],t.event,e,{})},computeEventDrop:function(t,e,i){var n,o,s=this.view.calendar,r=t.start,a=e.start;return r.hasTime()===a.hasTime()?(n=this.diffDates(a,r),i.allDay&&R(n)?(o={start:i.start.clone(),end:s.getEventEnd(i),allDay:!1},s.normalizeEventRangeTimes(o)):o={start:i.start.clone(),end:i.end?i.end.clone():null,allDay:i.allDay},o.start.add(n),o.end&&o.end.add(n)):o={start:a.clone(),end:null,allDay:!a.hasTime()},o},applyDragOpacity:function(t){var e=this.view.opt("dragOpacity");null!=e&&t.each(function(t,i){i.style.opacity=e})},externalDragStart:function(e,i){var n,o,s=this.view;s.opt("droppable")&&(n=t((i?i.item:null)||e.target),o=s.opt("dropAccept"),(t.isFunction(o)?o.call(n[0],n):n.is(o))&&(this.isDraggingExternal||this.listenToExternalDrag(n,e,i)))},listenToExternalDrag:function(t,e,i){var n,o,s=this,l=Ct(t);n=new re(this.coordMap,{listenStart:function(){s.isDraggingExternal=!0},cellOver:function(t){o=s.computeExternalDrop(t,l),o?s.renderDrag(o):r()},cellOut:function(){o=null,s.unrenderDrag(),a()},dragStop:function(){s.unrenderDrag(),a(),o&&s.view.reportExternalDrop(l,o,t,e,i)},listenStop:function(){s.isDraggingExternal=!1}}),n.startDrag(e)},computeExternalDrop:function(t,e){var i={start:t.start.clone(),end:null};return e.startTime&&!i.start.hasTime()&&i.start.time(e.startTime),e.duration&&(i.end=i.start.clone().add(e.duration)),this.view.calendar.isExternalDropRangeAllowed(i,e.eventProps)?i:null},renderDrag:function(){},unrenderDrag:function(){},segResizeMousedown:function(t,e,i){var n,o,s=this,l=this.view,u=l.calendar,c=t.el,h=t.event,d=u.getEventEnd(h);n=new re(this.coordMap,{distance:5,scroll:l.opt("dragScroll"),subjectEl:c,dragStart:function(e){s.triggerSegMouseout(t,e),s.segResizeStart(t,e)},cellOver:function(e,n,a){o=i?s.computeEventStartResize(a,e,h):s.computeEventEndResize(a,e,h),o&&(u.isEventRangeAllowed(o,h)?o.start.isSame(h.start)&&o.end.isSame(d)&&(o=null):(r(),o=null)),o&&(l.hideEvent(h),s.renderEventResize(o,t))},cellOut:function(){o=null},cellDone:function(){s.unrenderEventResize(),l.showEvent(h),a()},dragStop:function(e){s.segResizeStop(t,e),o&&l.reportEventResize(h,o,this.largeUnit,c,e)}}),n.mousedown(e)},segResizeStart:function(t,e){this.isResizingSeg=!0,this.view.trigger("eventResizeStart",t.el[0],t.event,e,{})},segResizeStop:function(t,e){this.isResizingSeg=!1,this.view.trigger("eventResizeStop",t.el[0],t.event,e,{})},computeEventStartResize:function(t,e,i){return this.computeEventResize("start",t,e,i)},computeEventEndResize:function(t,e,i){return this.computeEventResize("end",t,e,i)},computeEventResize:function(t,e,i,n){var o,s,r=this.view.calendar,a=this.diffDates(i[t],e[t]);return o={start:n.start.clone(),end:r.getEventEnd(n),allDay:n.allDay},o.allDay&&R(a)&&(o.allDay=!1,r.normalizeEventRangeTimes(o)),o[t].add(a),o.start.isBefore(o.end)||(s=n.allDay?r.defaultAllDayEventDuration:r.defaultTimedEventDuration,this.cellDuration&&this.cellDuration<s&&(s=this.cellDuration),"start"==t?o.start=o.end.clone().subtract(s):o.end=o.start.clone().add(s)),o},renderEventResize:function(){},unrenderEventResize:function(){},getEventTimeText:function(t,e,i){return null==e&&(e=this.eventTimeFormat),null==i&&(i=this.displayEventEnd),this.displayEventTime&&t.start.hasTime()?i&&t.end?this.view.formatRange(t,e):t.start.format(e):""},getSegClasses:function(t,e,i){var n=t.event,o=["fc-event",t.isStart?"fc-start":"fc-not-start",t.isEnd?"fc-end":"fc-not-end"].concat(n.className,n.source?n.source.className:[]);return e&&o.push("fc-draggable"),i&&o.push("fc-resizable"),o},getEventSkinCss:function(t){var e=this.view,i=t.source||{},n=t.color,o=i.color,s=e.opt("eventColor");return{"background-color":t.backgroundColor||n||i.backgroundColor||o||e.opt("eventBackgroundColor")||s,"border-color":t.borderColor||n||i.borderColor||o||e.opt("eventBorderColor")||s,color:t.textColor||i.textColor||e.opt("eventTextColor")}},eventsToSegs:function(t,e){var i,n=this.eventsToRanges(t),o=[];for(i=0;i<n.length;i++)o.push.apply(o,this.eventRangeToSegs(n[i],e));return o},eventsToRanges:function(e){var i=this,n=St(e),o=[];return t.each(n,function(t,e){e.length&&o.push.apply(o,bt(e[0])?i.eventsToInverseRanges(e):i.eventsToNormalRanges(e))}),o},eventsToNormalRanges:function(t){var e,i,n,o,s=this.view.calendar,r=[];for(e=0;e<t.length;e++)i=t[e],n=i.start.clone().stripZone(),o=s.getEventEnd(i).stripZone(),r.push({event:i,start:n,end:o,eventStartMS:+n,eventDurationMS:o-n});return r},eventsToInverseRanges:function(t){var e,i,n=this.view,o=n.start.clone().stripZone(),s=n.end.clone().stripZone(),r=this.eventsToNormalRanges(t),a=[],l=t[0],u=o;for(r.sort(xt),e=0;e<r.length;e++)i=r[e],i.start>u&&a.push({event:l,start:u,end:i.start}),u=i.end;return u<s&&a.push({event:l,start:u,end:s}),a},eventRangeToSegs:function(t,e){var i,n,o;for(t=this.view.calendar.ensureVisibleEventRange(t),i=e?e(t):this.rangeToSegs(t),n=0;n<i.length;n++)o=i[n],o.event=t.event,o.eventStartMS=t.eventStartMS,o.eventDurationMS=t.eventDurationMS;return i},sortSegs:function(t){t.sort(it(this,"compareSegs"))},compareSegs:function(t,e){return t.eventStartMS-e.eventStartMS||e.eventDurationMS-t.eventDurationMS||e.event.allDay-t.event.allDay||T(t.event,e.event,this.view.eventOrderSpecs)}}),It.dataAttrPrefix="";var ce=ue.extend({numbersVisible:!1,bottomCoordPadding:0,breakOnWeeks:null,cellDates:null,dayToCellOffsets:null,rowEls:null,dayEls:null,helperEls:null,constructor:function(){ue.apply(this,arguments),this.cellDuration=e.duration(1,"day")},renderDates:function(t){var e,i,n,o=this.view,s=this.rowCnt,r=this.colCnt,a=s*r,l="";for(e=0;e<s;e++)l+=this.dayRowHtml(e,t);for(this.el.html(l),this.rowEls=this.el.find(".fc-row"),this.dayEls=this.el.find(".fc-day"),i=0;i<a;i++)n=this.getCell(i),o.trigger("dayRender",null,n.start,this.dayEls.eq(i))},unrenderDates:function(){this.removeSegPopover()},renderBusinessHours:function(){var t=this.view.calendar.getBusinessHoursEvents(!0),e=this.eventsToSegs(t);this.renderFill("businessHours",e,"bgevent")},dayRowHtml:function(t,e){var i=this.view,n=["fc-row","fc-week",i.widgetContentClass];return e&&n.push("fc-rigid"),'<div class="'+n.join(" ")+'"><div class="fc-bg"><table>'+this.rowHtml("day",t)+'</table></div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?"<thead>"+this.rowHtml("number",t)+"</thead>":"")+"</table></div></div>"},dayCellHtml:function(t){return this.bgCellHtml(t)},computeColHeadFormat:function(){return this.rowCnt>1?"ddd":this.colCnt>1?this.view.opt("dayOfMonthFormat"):"dddd"},computeEventTimeFormat:function(){return this.view.opt("extraSmallTimeFormat")},computeDisplayEventEnd:function(){return 1==this.colCnt},rangeUpdated:function(){var t,e,i,n;if(this.updateCellDates(),t=this.cellDates,this.breakOnWeeks){for(e=t[0].day(),n=1;n<t.length&&t[n].day()!=e;n++);i=Math.ceil(t.length/n)}else i=1,n=t.length;this.rowCnt=i,this.colCnt=n},updateCellDates:function(){for(var t=this.view,e=this.start.clone(),i=[],n=-1,o=[];e.isBefore(this.end);)t.isHiddenDay(e)?o.push(n+.5):(n++,o.push(n),i.push(e.clone())),e.add(1,"days");this.cellDates=i,this.dayToCellOffsets=o},computeCellDate:function(t){var e=this.colCnt,i=t.row*e+(this.isRTL?e-t.col-1:t.col);return this.cellDates[i].clone()},getRowEl:function(t){return this.rowEls.eq(t)},getColEl:function(t){return this.dayEls.eq(t)},getCellDayEl:function(t){return this.dayEls.eq(t.row*this.colCnt+t.col)},computeRowCoords:function(){var t=ue.prototype.computeRowCoords.call(this);return t[t.length-1].bottom+=this.bottomCoordPadding,t},rangeToSegs:function(t){var e,i,n,o,s,r,a,l,u,c,h=this.isRTL,d=this.rowCnt,p=this.colCnt,f=[];for(t=this.view.computeDayRange(t),e=this.dateToCellOffset(t.start),i=this.dateToCellOffset(t.end.subtract(1,"days")),n=0;n<d;n++)o=n*p,s=o+p-1,l=Math.max(o,e),u=Math.min(s,i),l=Math.ceil(l),u=Math.floor(u),l<=u&&(r=l===e,a=u===i,l-=o,u-=o,c={row:n,isStart:r,isEnd:a},h?(c.leftCol=p-u-1,c.rightCol=p-l-1):(c.leftCol=l,c.rightCol=u),f.push(c));return f},dateToCellOffset:function(t){var e=this.dayToCellOffsets,i=t.diff(this.start,"days");return i<0?e[0]-1:i>=e.length?e[e.length-1]+1:e[i]},renderDrag:function(t,e){if(this.renderHighlight(this.eventRangeToSegs(t)),e&&!e.el.closest(this.el).length)return this.renderRangeHelper(t,e),this.applyDragOpacity(this.helperEls),!0},unrenderDrag:function(){this.unrenderHighlight(),this.unrenderHelper()},renderEventResize:function(t,e){this.renderHighlight(this.eventRangeToSegs(t)),this.renderRangeHelper(t,e)},unrenderEventResize:function(){this.unrenderHighlight(),this.unrenderHelper()},renderHelper:function(e,i){var n,o=[],s=this.eventsToSegs([e]);s=this.renderFgSegEls(s),n=this.renderSegRows(s),this.rowEls.each(function(e,s){var r,a=t(s),l=t('<div class="fc-helper-skeleton"><table/></div>');r=i&&i.row===e?i.el.position().top:a.find(".fc-content-skeleton tbody").position().top,l.css("top",r).find("table").append(n[e].tbodyEl),a.append(l),o.push(l[0])}),this.helperEls=t(o)},unrenderHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},fillSegTag:"td",renderFill:function(e,i,n){var o,s,r,a=[];for(i=this.renderFillSegEls(e,i),o=0;o<i.length;o++)s=i[o],r=this.renderFillRow(e,s,n),this.rowEls.eq(s.row).append(r),a.push(r[0]);return this.elsByFill[e]=t(a),i},renderFillRow:function(e,i,n){var o,s,r=this.colCnt,a=i.leftCol,l=i.rightCol+1;return n=n||e.toLowerCase(),o=t('<div class="fc-'+n+'-skeleton"><table><tr/></table></div>'),s=o.find("tr"),a>0&&s.append('<td colspan="'+a+'"/>'),s.append(i.el.attr("colspan",l-a)),l<r&&s.append('<td colspan="'+(r-l)+'"/>'),this.bookendCells(s,e),o}});ce.mixin({rowStructs:null,unrenderEvents:function(){this.removeSegPopover(),ue.prototype.unrenderEvents.apply(this,arguments)},getEventSegs:function(){return ue.prototype.getEventSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(e){var i=t.grep(e,function(t){return t.event.allDay});return ue.prototype.renderBgSegs.call(this,i)},renderFgSegs:function(e){var i;return e=this.renderFgSegEls(e),i=this.rowStructs=this.renderSegRows(e),this.rowEls.each(function(e,n){t(n).find(".fc-content-skeleton > table").append(i[e].tbodyEl)}),e},unrenderFgSegs:function(){for(var t,e=this.rowStructs||[];t=e.pop();)t.tbodyEl.remove();this.rowStructs=null},renderSegRows:function(t){var e,i,n=[];for(e=this.groupSegRows(t),i=0;i<e.length;i++)n.push(this.renderSegRow(i,e[i]));return n},fgSegHtml:function(t,e){var i,n,o=this.view,s=t.event,r=o.isEventDraggable(s),a=!e&&s.allDay&&t.isStart&&o.isEventResizableFromStart(s),l=!e&&s.allDay&&t.isEnd&&o.isEventResizableFromEnd(s),u=this.getSegClasses(t,r,a||l),c=J(this.getEventSkinCss(s)),h="";return u.unshift("fc-day-grid-event","fc-h-event"),t.isStart&&(i=this.getEventTimeText(s),i&&(h='<span class="fc-time">'+X(i)+"</span>")),n='<span class="fc-title">'+(X(s.title||"")||"&nbsp;")+"</span>",'<a class="'+u.join(" ")+'"'+(s.url?' href="'+X(s.url)+'"':"")+(c?' style="'+c+'"':"")+'><div class="fc-content">'+(this.isRTL?n+" "+h:h+" "+n)+"</div>"+(a?'<div class="fc-resizer fc-start-resizer" />':"")+(l?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},renderSegRow:function(e,i){function n(e){for(;r<e;)c=(v[o-1]||[])[r],c?c.attr("rowspan",parseInt(c.attr("rowspan")||1,10)+1):(c=t("<td/>"),a.append(c)),g[o][r]=c,v[o][r]=c,r++}var o,s,r,a,l,u,c,h=this.colCnt,d=this.buildSegLevels(i),p=Math.max(1,d.length),f=t("<tbody/>"),m=[],g=[],v=[];for(o=0;o<p;o++){if(s=d[o],r=0,a=t("<tr/>"),m.push([]),g.push([]),v.push([]),s)for(l=0;l<s.length;l++){for(u=s[l],n(u.leftCol),c=t('<td class="fc-event-container"/>').append(u.el),u.leftCol!=u.rightCol?c.attr("colspan",u.rightCol-u.leftCol+1):v[o][r]=c;r<=u.rightCol;)g[o][r]=c,m[o][r]=u,r++;a.append(c)}n(h),this.bookendCells(a,"eventSkeleton"),f.append(a)}return{row:e,tbodyEl:f,cellMatrix:g,segMatrix:m,segLevels:d,segs:i}},buildSegLevels:function(t){var e,i,n,o=[];for(this.sortSegs(t),e=0;e<t.length;e++){for(i=t[e],n=0;n<o.length&&Et(i,o[n]);n++);i.level=n,(o[n]||(o[n]=[])).push(i)}for(n=0;n<o.length;n++)o[n].sort(kt);return o},groupSegRows:function(t){var e,i=[];for(e=0;e<this.rowCnt;e++)i.push([]);for(e=0;e<t.length;e++)i[t[e].row].push(t[e]);return i}}),ce.mixin({segPopover:null,popoverSegs:null,removeSegPopover:function(){this.segPopover&&this.segPopover.hide()},limitRows:function(t){var e,i,n=this.rowStructs||[];for(e=0;e<n.length;e++)this.unlimitRow(e),i=!!t&&("number"==typeof t?t:this.computeRowLevelLimit(e)),i!==!1&&this.limitRow(e,i)},computeRowLevelLimit:function(e){function i(e,i){s=Math.max(s,t(i).outerHeight())}var n,o,s,r=this.rowEls.eq(e),a=r.height(),l=this.rowStructs[e].tbodyEl.children();for(n=0;n<l.length;n++)if(o=l.eq(n).removeClass("fc-limited"),s=0,o.find("> td > :first-child").each(i),o.position().top+s>a)return n;return!1},limitRow:function(e,i){function n(n){for(;x<n;)o=b.getCell(e,x),c=b.getCellSegs(o,i),c.length&&(p=r[i-1][x],y=b.renderMoreLink(o,c),_=t("<div/>").append(y),p.append(_),S.push(_[0])),x++}var o,s,r,a,l,u,c,h,d,p,f,m,g,v,_,y,b=this,w=this.rowStructs[e],S=[],x=0;if(i&&i<w.segLevels.length){for(s=w.segLevels[i-1],r=w.cellMatrix,a=w.tbodyEl.children().slice(i).addClass("fc-limited").get(),l=0;l<s.length;l++){for(u=s[l],n(u.leftCol),d=[],h=0;x<=u.rightCol;)o=this.getCell(e,x),c=this.getCellSegs(o,i),d.push(c),h+=c.length,x++;if(h){for(p=r[i-1][u.leftCol],f=p.attr("rowspan")||1,m=[],g=0;g<d.length;g++)v=t('<td class="fc-more-cell"/>').attr("rowspan",f),c=d[g],o=this.getCell(e,u.leftCol+g),y=this.renderMoreLink(o,[u].concat(c)),_=t("<div/>").append(y),v.append(_),m.push(v[0]),S.push(v[0]);p.addClass("fc-limited").after(t(m)),a.push(p[0])}}n(this.colCnt),w.moreEls=t(S),w.limitedEls=t(a)}},unlimitRow:function(t){var e=this.rowStructs[t];e.moreEls&&(e.moreEls.remove(),e.moreEls=null),e.limitedEls&&(e.limitedEls.removeClass("fc-limited"),e.limitedEls=null)},renderMoreLink:function(e,i){var n=this,o=this.view;return t('<a class="fc-more"/>').text(this.getMoreLinkText(i.length)).on("click",function(s){var r=o.opt("eventLimitClick"),a=e.start,l=t(this),u=n.getCellDayEl(e),c=n.getCellSegs(e),h=n.resliceDaySegs(c,a),d=n.resliceDaySegs(i,a);"function"==typeof r&&(r=o.trigger("eventLimitClick",null,{date:a,dayEl:u,moreEl:l,segs:h,hiddenSegs:d},s)),"popover"===r?n.showSegPopover(e,l,h):"string"==typeof r&&o.calendar.zoomTo(a,r)})},showSegPopover:function(t,e,i){var n,o,s=this,r=this.view,a=e.parent();n=1==this.rowCnt?r.el:this.rowEls.eq(t.row),o={className:"fc-more-popover",content:this.renderSegPopoverContent(t,i),parentEl:this.el,top:n.offset().top,autoHide:!0,viewportConstrain:r.opt("popoverViewportConstrain"),hide:function(){s.segPopover.removeElement(),s.segPopover=null,s.popoverSegs=null}},this.isRTL?o.right=a.offset().left+a.outerWidth()+1:o.left=a.offset().left-1,this.segPopover=new ie(o),this.segPopover.show()},renderSegPopoverContent:function(e,i){var n,o=this.view,s=o.opt("theme"),r=e.start.format(o.opt("dayPopoverFormat")),a=t('<div class="fc-header '+o.widgetHeaderClass+'"><span class="fc-close '+(s?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span><span class="fc-title">'+X(r)+'</span><div class="fc-clear"/></div><div class="fc-body '+o.widgetContentClass+'"><div class="fc-event-container"></div></div>'),l=a.find(".fc-event-container");for(i=this.renderFgSegEls(i,!0),this.popoverSegs=i,n=0;n<i.length;n++)i[n].cell=e,l.append(i[n].el);return a},resliceDaySegs:function(e,i){var n=t.map(e,function(t){return t.event}),o=i.clone().stripTime(),s=o.clone().add(1,"days"),r={start:o,end:s};return e=this.eventsToSegs(n,function(t){var e=M(t,r);return e?[e]:[]}),this.sortSegs(e),e},getMoreLinkText:function(t){var e=this.view.opt("eventLimitText");return"function"==typeof e?e(t):"+"+t+" "+e},getCellSegs:function(t,e){for(var i,n=this.rowStructs[t.row].segMatrix,o=e||0,s=[];o<n.length;)i=n[o][t.col],i&&s.push(i),o++;return s}});var he=ue.extend({slotDuration:null,snapDuration:null,minTime:null,maxTime:null,colDates:null,labelFormat:null,labelInterval:null,dayEls:null,slatEls:null,slatTops:null,helperEl:null,businessHourSegs:null,constructor:function(){ue.apply(this,arguments),this.processOptions()},renderDates:function(){this.el.html(this.renderHtml()),this.dayEls=this.el.find(".fc-day"),this.slatEls=this.el.find(".fc-slats tr")},renderBusinessHours:function(){var t=this.view.calendar.getBusinessHoursEvents();this.businessHourSegs=this.renderFill("businessHours",this.eventsToSegs(t),"bgevent")},renderHtml:function(){return'<div class="fc-bg"><table>'+this.rowHtml("slotBg")+'</table></div><div class="fc-slats"><table>'+this.slatRowHtml()+"</table></div>"},slotBgCellHtml:function(t){return this.bgCellHtml(t)},slatRowHtml:function(){for(var t,i,n,o=this.view,s=this.isRTL,r="",a=e.duration(+this.minTime);a<this.maxTime;)t=this.start.clone().time(a),i=et(N(a,this.labelInterval)),n='<td class="fc-axis fc-time '+o.widgetContentClass+'" '+o.axisStyleAttr()+">"+(i?"<span>"+X(t.format(this.labelFormat))+"</span>":"")+"</td>",r+="<tr "+(i?"":'class="fc-minor"')+">"+(s?"":n)+'<td class="'+o.widgetContentClass+'"/>'+(s?n:"")+"</tr>",a.add(this.slotDuration);return r},processOptions:function(){var i,n=this.view,o=n.opt("slotDuration"),s=n.opt("snapDuration");o=e.duration(o),s=s?e.duration(s):o,this.slotDuration=o,this.snapDuration=s,this.cellDuration=s,this.minTime=e.duration(n.opt("minTime")),this.maxTime=e.duration(n.opt("maxTime")),i=n.opt("slotLabelFormat"),t.isArray(i)&&(i=i[i.length-1]),this.labelFormat=i||n.opt("axisFormat")||n.opt("smallTimeFormat"),i=n.opt("slotLabelInterval"),this.labelInterval=i?e.duration(i):this.computeLabelInterval(o)},computeLabelInterval:function(t){var i,n,o;for(i=Ce.length-1;i>=0;i--)if(n=e.duration(Ce[i]),o=N(n,t),et(o)&&o>1)return n;return e.duration(t)},computeColHeadFormat:function(){return this.colCnt>1?this.view.opt("dayOfMonthFormat"):"dddd"},computeEventTimeFormat:function(){return this.view.opt("noMeridiemTimeFormat")},computeDisplayEventEnd:function(){return!0},rangeUpdated:function(){var t,e=this.view,i=[];for(t=this.start.clone();t.isBefore(this.end);)i.push(t.clone()),t.add(1,"day"),t=e.skipHiddenDays(t);this.isRTL&&i.reverse(),this.colDates=i,this.colCnt=i.length,this.rowCnt=Math.ceil((this.maxTime-this.minTime)/this.snapDuration)},computeCellDate:function(t){var e=this.colDates[t.col],i=this.computeSnapTime(t.row);return e=this.view.calendar.rezoneDate(e),e.time(i),e},getColEl:function(t){return this.dayEls.eq(t)},computeSnapTime:function(t){return e.duration(this.minTime+this.snapDuration*t)},rangeToSegs:function(t){var e,i,n,o,s=this.colCnt,r=[];for(t={start:t.start.clone().stripZone(),end:t.end.clone().stripZone()},i=0;i<s;i++)n=this.colDates[i],o={start:n.clone().time(this.minTime),end:n.clone().time(this.maxTime)},e=M(t,o),e&&(e.col=i,r.push(e));return r},updateSize:function(t){this.computeSlatTops(),t&&this.updateSegVerticals()},computeRowCoords:function(){var t,e,i=this.el.offset().top,n=[];for(t=0;t<this.rowCnt;t++)e={top:i+this.computeTimeTop(this.computeSnapTime(t))},t>0&&(n[t-1].bottom=e.top),n.push(e);return e.bottom=e.top+this.computeTimeTop(this.computeSnapTime(t)),n},computeDateTop:function(t,i){return this.computeTimeTop(e.duration(t.clone().stripZone()-i.clone().stripTime()))},computeTimeTop:function(t){var e,i,n,o,s=(t-this.minTime)/this.slotDuration;return s=Math.max(0,s),s=Math.min(this.slatEls.length,s),e=Math.floor(s),i=s-e,n=this.slatTops[e],i?(o=this.slatTops[e+1],n+(o-n)*i):n},computeSlatTops:function(){var e,i=[];this.slatEls.each(function(n,o){e=t(o).position().top,i.push(e)}),i.push(e+this.slatEls.last().outerHeight()),this.slatTops=i},renderDrag:function(t,e){return e?(this.renderRangeHelper(t,e),this.applyDragOpacity(this.helperEl),!0):void this.renderHighlight(this.eventRangeToSegs(t))},unrenderDrag:function(){this.unrenderHelper(),this.unrenderHighlight()},renderEventResize:function(t,e){this.renderRangeHelper(t,e)},unrenderEventResize:function(){this.unrenderHelper()},renderHelper:function(e,i){var n,o,s,r,a=this.eventsToSegs([e]);for(a=this.renderFgSegEls(a),n=this.renderSegTable(a),o=0;o<a.length;o++)s=a[o],i&&i.col===s.col&&(r=i.el,s.el.css({left:r.css("left"),right:r.css("right"),"margin-left":r.css("margin-left"),"margin-right":r.css("margin-right")}));this.helperEl=t('<div class="fc-helper-skeleton"/>').append(n).appendTo(this.el)},unrenderHelper:function(){this.helperEl&&(this.helperEl.remove(),this.helperEl=null)},renderSelection:function(t){this.view.opt("selectHelper")?this.renderRangeHelper(t):this.renderHighlight(this.selectionRangeToSegs(t))},unrenderSelection:function(){this.unrenderHelper(),this.unrenderHighlight()},renderFill:function(e,i,n){var o,s,r,a,l,u,c,h,d,p;if(i.length){for(i=this.renderFillSegEls(e,i),o=this.groupSegCols(i),n=n||e.toLowerCase(),s=t('<div class="fc-'+n+'-skeleton"><table><tr/></table></div>'),r=s.find("tr"),a=0;a<o.length;a++)if(l=o[a],u=t("<td/>").appendTo(r),l.length)for(c=t('<div class="fc-'+n+'-container"/>').appendTo(u),h=this.colDates[a],d=0;d<l.length;d++)p=l[d],c.append(p.el.css({top:this.computeDateTop(p.start,h),bottom:-this.computeDateTop(p.end,h)}));this.bookendCells(r,e),this.el.append(s),this.elsByFill[e]=s}return i}});he.mixin({eventSkeletonEl:null,renderFgSegs:function(e){return e=this.renderFgSegEls(e),this.el.append(this.eventSkeletonEl=t('<div class="fc-content-skeleton"/>').append(this.renderSegTable(e))),e},unrenderFgSegs:function(){this.eventSkeletonEl&&(this.eventSkeletonEl.remove(),this.eventSkeletonEl=null)},renderSegTable:function(e){var i,n,o,s,r,a,l=t("<table><tr/></table>"),u=l.find("tr");for(i=this.groupSegCols(e),this.computeSegVerticals(e),s=0;s<i.length;s++){for(r=i[s],this.placeSlotSegs(r),a=t('<div class="fc-event-container"/>'),n=0;n<r.length;n++)o=r[n],o.el.css(this.generateSegPositionCss(o)),o.bottom-o.top<30&&o.el.addClass("fc-short"),a.append(o.el);u.append(t("<td/>").append(a))}return this.bookendCells(u,"eventSkeleton"),l},placeSlotSegs:function(t){var e,i,n;if(this.sortSegs(t),e=Tt(t),Lt(e),i=e[0]){for(n=0;n<i.length;n++)Dt(i[n]);for(n=0;n<i.length;n++)this.computeSlotSegCoords(i[n],0,0)}},computeSlotSegCoords:function(t,e,i){var n,o=t.forwardSegs;if(void 0===t.forwardCoord)for(o.length?(this.sortForwardSlotSegs(o),this.computeSlotSegCoords(o[0],e+1,i),t.forwardCoord=o[0].backwardCoord):t.forwardCoord=1,t.backwardCoord=t.forwardCoord-(t.forwardCoord-i)/(e+1),n=0;n<o.length;n++)this.computeSlotSegCoords(o[n],0,t.forwardCoord)},updateSegVerticals:function(){var t,e=(this.segs||[]).concat(this.businessHourSegs||[]);for(this.computeSegVerticals(e),t=0;t<e.length;t++)e[t].el.css(this.generateSegVerticalCss(e[t]))},computeSegVerticals:function(t){var e,i;for(e=0;e<t.length;e++)i=t[e],i.top=this.computeDateTop(i.start,i.start),i.bottom=this.computeDateTop(i.end,i.start)},fgSegHtml:function(t,e){var i,n,o,s=this.view,r=t.event,a=s.isEventDraggable(r),l=!e&&t.isStart&&s.isEventResizableFromStart(r),u=!e&&t.isEnd&&s.isEventResizableFromEnd(r),c=this.getSegClasses(t,a,l||u),h=J(this.getEventSkinCss(r));return c.unshift("fc-time-grid-event","fc-v-event"),s.isMultiDayEvent(r)?(t.isStart||t.isEnd)&&(i=this.getEventTimeText(t),n=this.getEventTimeText(t,"LT"),o=this.getEventTimeText(t,null,!1)):(i=this.getEventTimeText(r),n=this.getEventTimeText(r,"LT"),o=this.getEventTimeText(r,null,!1)),'<a class="'+c.join(" ")+'"'+(r.url?' href="'+X(r.url)+'"':"")+(h?' style="'+h+'"':"")+'><div class="fc-content">'+(i?'<div class="fc-time" data-start="'+X(o)+'" data-full="'+X(n)+'"><span>'+X(i)+"</span></div>":"")+(r.title?'<div class="fc-title">'+X(r.title)+"</div>":"")+'</div><div class="fc-bg"/>'+(u?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},generateSegPositionCss:function(t){var e,i,n=this.view.opt("slotEventOverlap"),o=t.backwardCoord,s=t.forwardCoord,r=this.generateSegVerticalCss(t);return n&&(s=Math.min(1,o+2*(s-o))),this.isRTL?(e=1-s,i=o):(e=o,i=1-s),r.zIndex=t.level+1,r.left=100*e+"%",r.right=100*i+"%",n&&t.forwardPressure&&(r[this.isRTL?"marginLeft":"marginRight"]=20),r},generateSegVerticalCss:function(t){return{top:t.top,bottom:-t.bottom}},groupSegCols:function(t){var e,i=[];for(e=0;e<this.colCnt;e++)i.push([]);for(e=0;e<t.length;e++)i[t[e].col].push(t[e]);return i},sortForwardSlotSegs:function(t){t.sort(it(this,"compareForwardSlotSegs"))},compareForwardSlotSegs:function(t,e){return e.forwardPressure-t.forwardPressure||(t.backwardCoord||0)-(e.backwardCoord||0)||this.compareSegs(t,e)}});var de=It.View=vt.extend({type:null,name:null,title:null,calendar:null,options:null,coordMap:null,el:null,displaying:null,isSkeletonRendered:!1,isEventsRendered:!1,start:null,end:null,intervalStart:null,intervalEnd:null,intervalDuration:null,intervalUnit:null,isRTL:!1,isSelected:!1,eventOrderSpecs:null,scrollerEl:null,scrollTop:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,nextDayThreshold:null,isHiddenDayHash:null,documentMousedownProxy:null,constructor:function(t,i,n,o){this.calendar=t,
this.type=this.name=i,this.options=n,this.intervalDuration=o||e.duration(1,"day"),this.nextDayThreshold=e.duration(this.opt("nextDayThreshold")),this.initThemingProps(),this.initHiddenDays(),this.isRTL=this.opt("isRTL"),this.eventOrderSpecs=k(this.opt("eventOrder")),this.documentMousedownProxy=it(this,"documentMousedown"),this.initialize()},initialize:function(){},opt:function(t){return this.options[t]},trigger:function(t,e){var i=this.calendar;return i.trigger.apply(i,[t,e||this].concat(Array.prototype.slice.call(arguments,2),[this]))},setDate:function(t){this.setRange(this.computeRange(t))},setRange:function(e){t.extend(this,e),this.updateTitle()},computeRange:function(t){var e,i,n=F(this.intervalDuration),o=t.clone().startOf(n),s=o.clone().add(this.intervalDuration);return/year|month|week|day/.test(n)?(o.stripTime(),s.stripTime()):(o.hasTime()||(o=this.calendar.rezoneDate(o)),s.hasTime()||(s=this.calendar.rezoneDate(s))),e=o.clone(),e=this.skipHiddenDays(e),i=s.clone(),i=this.skipHiddenDays(i,-1,!0),{intervalUnit:n,intervalStart:o,intervalEnd:s,start:e,end:i}},computePrevDate:function(t){return this.massageCurrentDate(t.clone().startOf(this.intervalUnit).subtract(this.intervalDuration),-1)},computeNextDate:function(t){return this.massageCurrentDate(t.clone().startOf(this.intervalUnit).add(this.intervalDuration))},massageCurrentDate:function(t,e){return this.intervalDuration.as("days")<=1&&this.isHiddenDay(t)&&(t=this.skipHiddenDays(t,e),t.startOf("day")),t},updateTitle:function(){this.title=this.computeTitle()},computeTitle:function(){return this.formatRange({start:this.intervalStart,end:this.intervalEnd},this.opt("titleFormat")||this.computeTitleFormat(),this.opt("titleRangeSeparator"))},computeTitleFormat:function(){return"year"==this.intervalUnit?"YYYY":"month"==this.intervalUnit?this.opt("monthYearFormat"):this.intervalDuration.as("days")>1?"ll":"LL"},formatRange:function(t,e,i){var n=t.end;return n.hasTime()||(n=n.clone().subtract(1)),dt(t.start,n,e,i,this.opt("isRTL"))},setElement:function(t){this.el=t,this.bindGlobalHandlers()},removeElement:function(){this.clear(),this.isSkeletonRendered&&(this.unrenderSkeleton(),this.isSkeletonRendered=!1),this.unbindGlobalHandlers(),this.el.remove()},display:function(e){var i=this,n=null;return this.displaying&&(n=this.queryScroll()),this.clear().then(function(){return i.displaying=t.when(i.displayView(e)).then(function(){i.forceScroll(i.computeInitialScroll(n)),i.triggerRender()})})},clear:function(){var e=this,i=this.displaying;return i?i.then(function(){return e.displaying=null,e.clearEvents(),e.clearView()}):t.when()},displayView:function(t){this.isSkeletonRendered||(this.renderSkeleton(),this.isSkeletonRendered=!0),this.setDate(t),this.render&&this.render(),this.renderDates(),this.updateSize(),this.renderBusinessHours()},clearView:function(){this.unselect(),this.triggerUnrender(),this.unrenderBusinessHours(),this.unrenderDates(),this.destroy&&this.destroy()},renderSkeleton:function(){},unrenderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},renderBusinessHours:function(){},unrenderBusinessHours:function(){},triggerRender:function(){this.trigger("viewRender",this,this,this.el)},triggerUnrender:function(){this.trigger("viewDestroy",this,this,this.el)},bindGlobalHandlers:function(){t(document).on("mousedown",this.documentMousedownProxy)},unbindGlobalHandlers:function(){t(document).off("mousedown",this.documentMousedownProxy)},initThemingProps:function(){var t=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=t+"-widget-header",this.widgetContentClass=t+"-widget-content",this.highlightStateClass=t+"-state-highlight"},updateSize:function(t){var e;t&&(e=this.queryScroll()),this.updateHeight(t),this.updateWidth(t),t&&this.setScroll(e)},updateWidth:function(){},updateHeight:function(){var t=this.calendar;this.setHeight(t.getSuggestedViewHeight(),t.isHeightAuto())},setHeight:function(){},computeScrollerHeight:function(t){var e,i,n=this.scrollerEl;return e=this.el.add(n),e.css({position:"relative",left:-1}),i=this.el.outerHeight()-n.height(),e.css({position:"",left:""}),t-i},computeInitialScroll:function(){return 0},queryScroll:function(){if(this.scrollerEl)return this.scrollerEl.scrollTop()},setScroll:function(t){if(this.scrollerEl)return this.scrollerEl.scrollTop(t)},forceScroll:function(t){var e=this;this.setScroll(t),setTimeout(function(){e.setScroll(t)},0)},displayEvents:function(t){var e=this.queryScroll();this.clearEvents(),this.renderEvents(t),this.isEventsRendered=!0,this.setScroll(e),this.triggerEventRender()},clearEvents:function(){this.isEventsRendered&&(this.triggerEventUnrender(),this.destroyEvents&&this.destroyEvents(),this.unrenderEvents(),this.isEventsRendered=!1)},renderEvents:function(){},unrenderEvents:function(){},triggerEventRender:function(){this.renderedEventSegEach(function(t){this.trigger("eventAfterRender",t.event,t.event,t.el)}),this.trigger("eventAfterAllRender")},triggerEventUnrender:function(){this.renderedEventSegEach(function(t){this.trigger("eventDestroy",t.event,t.event,t.el)})},resolveEventEl:function(e,i){var n=this.trigger("eventRender",e,e,i);return n===!1?i=null:n&&n!==!0&&(i=t(n)),i},showEvent:function(t){this.renderedEventSegEach(function(t){t.el.css("visibility","")},t)},hideEvent:function(t){this.renderedEventSegEach(function(t){t.el.css("visibility","hidden")},t)},renderedEventSegEach:function(t,e){var i,n=this.getEventSegs();for(i=0;i<n.length;i++)e&&n[i].event._id!==e._id||n[i].el&&t.call(this,n[i])},getEventSegs:function(){return[]},isEventDraggable:function(t){var e=t.source||{};return Y(t.startEditable,e.startEditable,this.opt("eventStartEditable"),t.editable,e.editable,this.opt("editable"))},reportEventDrop:function(t,e,i,n,o){var s=this.calendar,r=s.mutateEvent(t,e,i),a=function(){r.undo(),s.reportEventChange()};this.triggerEventDrop(t,r.dateDelta,a,n,o),s.reportEventChange()},triggerEventDrop:function(t,e,i,n,o){this.trigger("eventDrop",n[0],t,e,i,o,{})},reportExternalDrop:function(e,i,n,o,s){var r,a,l=e.eventProps;l&&(r=t.extend({},l,i),a=this.calendar.renderEvent(r,e.stick)[0]),this.triggerExternalDrop(a,i,n,o,s)},triggerExternalDrop:function(t,e,i,n,o){this.trigger("drop",i[0],e.start,n,o),t&&this.trigger("eventReceive",null,t)},renderDrag:function(){},unrenderDrag:function(){},isEventResizableFromStart:function(t){return this.opt("eventResizableFromStart")&&this.isEventResizable(t)},isEventResizableFromEnd:function(t){return this.isEventResizable(t)},isEventResizable:function(t){var e=t.source||{};return Y(t.durationEditable,e.durationEditable,this.opt("eventDurationEditable"),t.editable,e.editable,this.opt("editable"))},reportEventResize:function(t,e,i,n,o){var s=this.calendar,r=s.mutateEvent(t,e,i),a=function(){r.undo(),s.reportEventChange()};this.triggerEventResize(t,r.durationDelta,a,n,o),s.reportEventChange()},triggerEventResize:function(t,e,i,n,o){this.trigger("eventResize",n[0],t,e,i,o,{})},select:function(t,e){this.unselect(e),this.renderSelection(t),this.reportSelection(t,e)},renderSelection:function(){},reportSelection:function(t,e){this.isSelected=!0,this.triggerSelect(t,e)},triggerSelect:function(t,e){this.trigger("select",null,t.start,t.end,e)},unselect:function(t){this.isSelected&&(this.isSelected=!1,this.destroySelection&&this.destroySelection(),this.unrenderSelection(),this.trigger("unselect",null,t))},unrenderSelection:function(){},documentMousedown:function(e){var i;this.isSelected&&this.opt("unselectAuto")&&w(e)&&(i=this.opt("unselectCancel"),i&&t(e.target).closest(i).length||this.unselect(e))},triggerDayClick:function(t,e,i){this.trigger("dayClick",e,t.start,i)},initHiddenDays:function(){var e,i=this.opt("hiddenDays")||[],n=[],o=0;for(this.opt("weekends")===!1&&i.push(0,6),e=0;e<7;e++)(n[e]=t.inArray(e,i)!==-1)||o++;if(!o)throw"invalid hiddenDays";this.isHiddenDayHash=n},isHiddenDay:function(t){return e.isMoment(t)&&(t=t.day()),this.isHiddenDayHash[t]},skipHiddenDays:function(t,e,i){var n=t.clone();for(e=e||1;this.isHiddenDayHash[(n.day()+(i?e:0)+7)%7];)n.add(e,"days");return n},computeDayRange:function(t){var e,i=t.start.clone().stripTime(),n=t.end,o=null;return n&&(o=n.clone().stripTime(),e=+n.time(),e&&e>=this.nextDayThreshold&&o.add(1,"days")),(!n||o<=i)&&(o=i.clone().add(1,"days")),{start:i,end:o}},isMultiDayEvent:function(t){var e=this.computeDayRange(t);return e.end.diff(e.start,"days")>1}}),pe=It.Calendar=vt.extend({dirDefaults:null,langDefaults:null,overrides:null,options:null,viewSpecCache:null,view:null,header:null,loadingLevel:0,constructor:jt,initialize:function(){},initOptions:function(t){var e,o,s,r;t=n(t),e=t.lang,o=fe[e],o||(e=pe.defaults.lang,o=fe[e]||{}),s=Y(t.isRTL,o.isRTL,pe.defaults.isRTL),r=s?pe.rtlDefaults:{},this.dirDefaults=r,this.langDefaults=o,this.overrides=t,this.options=i([pe.defaults,r,o,t]),At(this.options),this.viewSpecCache={}},getViewSpec:function(t){var e=this.viewSpecCache;return e[t]||(e[t]=this.buildViewSpec(t))},getUnitViewSpec:function(e){var i,n,o;if(t.inArray(e,Ut)!=-1)for(i=this.header.getViewsWithButtons(),t.each(It.views,function(t){i.push(t)}),n=0;n<i.length;n++)if(o=this.getViewSpec(i[n]),o&&o.singleUnit==e)return o},buildViewSpec:function(t){for(var n,o,s,r,a=this.overrides.views||{},l=[],u=[],c=[],h=t;h;)n=Rt[h],o=a[h],h=null,"function"==typeof n&&(n={"class":n}),n&&(l.unshift(n),u.unshift(n.defaults||{}),s=s||n.duration,h=h||n.type),o&&(c.unshift(o),s=s||o.duration,h=h||o.type);return n=z(l),n.type=t,!!n["class"]&&(s&&(s=e.duration(s),s.valueOf()&&(n.duration=s,r=F(s),1===s.as(r)&&(n.singleUnit=r,c.unshift(a[r]||{})))),n.defaults=i(u),n.overrides=i(c),this.buildViewSpecOptions(n),this.buildViewSpecButtonText(n,t),n)},buildViewSpecOptions:function(t){t.options=i([pe.defaults,t.defaults,this.dirDefaults,this.langDefaults,this.overrides,t.overrides]),At(t.options)},buildViewSpecButtonText:function(t,e){function i(i){var n=i.buttonText||{};return n[e]||(t.singleUnit?n[t.singleUnit]:null)}t.buttonTextOverride=i(this.overrides)||t.overrides.buttonText,t.buttonTextDefault=i(this.langDefaults)||i(this.dirDefaults)||t.defaults.buttonText||i(pe.defaults)||(t.duration?this.humanizeDuration(t.duration):null)||e},instantiateView:function(t){var e=this.getViewSpec(t);return new e["class"](this,t,e.options,e.duration)},isValidViewType:function(t){return Boolean(this.getViewSpec(t))},pushLoading:function(){this.loadingLevel++||this.trigger("loading",null,!0,this.view)},popLoading:function(){--this.loadingLevel||this.trigger("loading",null,!1,this.view)},buildSelectRange:function(t,e){return t=this.moment(t),e=e?this.moment(e):t.hasTime()?t.clone().add(this.defaultTimedEventDuration):t.clone().add(this.defaultAllDayEventDuration),{start:t,end:e}}});pe.mixin(ee),pe.defaults={titleRangeSeparator:" \u2014 ",monthYearFormat:"MMMM YYYY",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",scrollTime:"06:00:00",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,isRTL:!1,buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventOrder:"title",eventLimit:!1,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:200},pe.englishDefaults={dayPopoverFormat:"dddd, MMMM D"},pe.rtlDefaults={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}};var fe=It.langs={};It.datepickerLang=function(e,i,n){var o=fe[e]||(fe[e]={});o.isRTL=n.isRTL,o.weekNumberTitle=n.weekHeader,t.each(me,function(t,e){o[t]=e(n)}),t.datepicker&&(t.datepicker.regional[i]=t.datepicker.regional[e]=n,t.datepicker.regional.en=t.datepicker.regional[""],t.datepicker.setDefaults(n))},It.lang=function(e,n){var o,s;o=fe[e]||(fe[e]={}),n&&(o=fe[e]=i([o,n])),s=Ft(e),t.each(ge,function(t,e){null==o[t]&&(o[t]=e(s,o))}),pe.defaults.lang=e};var me={buttonText:function(t){return{prev:Q(t.prevText),next:Q(t.nextText),today:Q(t.currentText)}},monthYearFormat:function(t){return t.showMonthAfterYear?"YYYY["+t.yearSuffix+"] MMMM":"MMMM YYYY["+t.yearSuffix+"]"}},ge={dayOfMonthFormat:function(t,e){var i=t.longDateFormat("l");return i=i.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),e.isRTL?i+=" ddd":i="ddd "+i,i},mediumTimeFormat:function(t){return t.longDateFormat("LT").replace(/\s*a$/i,"a")},smallTimeFormat:function(t){return t.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},extraSmallTimeFormat:function(t){return t.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")},hourFormat:function(t){return t.longDateFormat("LT").replace(":mm","").replace(/(\Wmm)$/,"").replace(/\s*a$/i,"a")},noMeridiemTimeFormat:function(t){return t.longDateFormat("LT").replace(/\s*a$/i,"")}},ve={smallDayDateFormat:function(t){return t.isRTL?"D dd":"dd D"},weekFormat:function(t){return t.isRTL?"w[ "+t.weekNumberTitle+"]":"["+t.weekNumberTitle+" ]w"},smallWeekFormat:function(t){return t.isRTL?"w["+t.weekNumberTitle+"]":"["+t.weekNumberTitle+"]w"}};It.lang("en",pe.englishDefaults),It.sourceNormalizers=[],It.sourceFetchers=[];var _e={dataType:"json",cache:!1},ye=1;pe.prototype.getPeerEvents=function(t){var e,i,n=this.getEventCache(),o=[];for(e=0;e<n.length;e++)i=n[e],t&&t._id===i._id||o.push(i);return o};var be=de.extend({dayGrid:null,dayNumbersVisible:!1,weekNumbersVisible:!1,weekNumberWidth:null,headRowEl:null,initialize:function(){this.dayGrid=new ce(this),this.coordMap=this.dayGrid.coordMap},setRange:function(t){de.prototype.setRange.call(this,t),this.dayGrid.breakOnWeeks=/year|month|week/.test(this.intervalUnit),this.dayGrid.setRange(t)},computeRange:function(t){var e=de.prototype.computeRange.call(this,t);return/year|month/.test(e.intervalUnit)&&(e.start.startOf("week"),e.start=this.skipHiddenDays(e.start),e.end.weekday()&&(e.end.add(1,"week").startOf("week"),e.end=this.skipHiddenDays(e.end,-1,!0))),e},renderDates:function(){this.dayNumbersVisible=this.dayGrid.rowCnt>1,this.weekNumbersVisible=this.opt("weekNumbers"),this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible,this.el.addClass("fc-basic-view").html(this.renderHtml()),this.headRowEl=this.el.find("thead .fc-row"),this.scrollerEl=this.el.find(".fc-day-grid-container"),this.dayGrid.coordMap.containerEl=this.scrollerEl,this.dayGrid.setElement(this.el.find(".fc-day-grid")),this.dayGrid.renderDates(this.hasRigidRows())},unrenderDates:function(){this.dayGrid.unrenderDates(),this.dayGrid.removeElement()},renderBusinessHours:function(){this.dayGrid.renderBusinessHours()},renderHtml:function(){return'<table><thead class="fc-head"><tr><td class="'+this.widgetHeaderClass+'">'+this.dayGrid.headHtml()+'</td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'"><div class="fc-day-grid-container"><div class="fc-day-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){if(this.weekNumbersVisible)return'<th class="fc-week-number '+this.widgetHeaderClass+'" '+this.weekNumberStyleAttr()+"><span>"+X(this.opt("weekNumberTitle"))+"</span></th>"},numberIntroHtml:function(t){if(this.weekNumbersVisible)return'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"><span>"+this.dayGrid.getCell(t,0).start.format("w")+"</span></td>"},dayIntroHtml:function(){if(this.weekNumbersVisible)return'<td class="fc-week-number '+this.widgetContentClass+'" '+this.weekNumberStyleAttr()+"></td>"},introHtml:function(){if(this.weekNumbersVisible)return'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"></td>"},numberCellHtml:function(t){var e,i=t.start;return this.dayNumbersVisible?(e=this.dayGrid.getDayClasses(i),e.unshift("fc-day-number"),'<td class="'+e.join(" ")+'" data-date="'+i.format()+'">'+i.date()+"</td>"):"<td/>"},weekNumberStyleAttr:function(){return null!==this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},hasRigidRows:function(){var t=this.opt("eventLimit");return t&&"number"!=typeof t},updateWidth:function(){this.weekNumbersVisible&&(this.weekNumberWidth=c(this.el.find(".fc-week-number")))},setHeight:function(t,e){var i,n=this.opt("eventLimit");d(this.scrollerEl),s(this.headRowEl),this.dayGrid.removeSegPopover(),n&&"number"==typeof n&&this.dayGrid.limitRows(n),i=this.computeScrollerHeight(t),this.setGridHeight(i,e),n&&"number"!=typeof n&&this.dayGrid.limitRows(n),!e&&h(this.scrollerEl,i)&&(o(this.headRowEl,v(this.scrollerEl)),i=this.computeScrollerHeight(t),this.scrollerEl.height(i))},setGridHeight:function(t,e){e?u(this.dayGrid.rowEls):l(this.dayGrid.rowEls,t,!0)},renderEvents:function(t){this.dayGrid.renderEvents(t),this.updateHeight()},getEventSegs:function(){return this.dayGrid.getEventSegs()},unrenderEvents:function(){this.dayGrid.unrenderEvents()},renderDrag:function(t,e){return this.dayGrid.renderDrag(t,e)},unrenderDrag:function(){this.dayGrid.unrenderDrag()},renderSelection:function(t){this.dayGrid.renderSelection(t)},unrenderSelection:function(){this.dayGrid.unrenderSelection()}}),we=be.extend({computeRange:function(t){var e,i=be.prototype.computeRange.call(this,t);return this.isFixedWeeks()&&(e=Math.ceil(i.end.diff(i.start,"weeks",!0)),i.end.add(6-e,"weeks")),i},setGridHeight:function(t,e){e=e||"variable"===this.opt("weekMode"),e&&(t*=this.rowCnt/6),l(this.dayGrid.rowEls,t,!e)},isFixedWeeks:function(){var t=this.opt("weekMode");return t?"fixed"===t:this.opt("fixedWeekCount")}});Rt.basic={"class":be},Rt.basicDay={type:"basic",duration:{days:1}},Rt.basicWeek={type:"basic",duration:{weeks:1}},Rt.month={"class":we,duration:{months:1},defaults:{fixedWeekCount:!0}};var Se=de.extend({timeGrid:null,dayGrid:null,axisWidth:null,noScrollRowEls:null,bottomRuleEl:null,bottomRuleHeight:null,initialize:function(){this.timeGrid=new he(this),this.opt("allDaySlot")?(this.dayGrid=new ce(this),this.coordMap=new oe([this.dayGrid.coordMap,this.timeGrid.coordMap])):this.coordMap=this.timeGrid.coordMap},setRange:function(t){de.prototype.setRange.call(this,t),this.timeGrid.setRange(t),this.dayGrid&&this.dayGrid.setRange(t)},renderDates:function(){this.el.addClass("fc-agenda-view").html(this.renderHtml()),this.scrollerEl=this.el.find(".fc-time-grid-container"),this.timeGrid.coordMap.containerEl=this.scrollerEl,this.timeGrid.setElement(this.el.find(".fc-time-grid")),this.timeGrid.renderDates(),this.bottomRuleEl=t('<hr class="fc-divider '+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el),this.dayGrid&&(this.dayGrid.setElement(this.el.find(".fc-day-grid")),this.dayGrid.renderDates(),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()),this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)")},unrenderDates:function(){this.timeGrid.unrenderDates(),this.timeGrid.removeElement(),this.dayGrid&&(this.dayGrid.unrenderDates(),this.dayGrid.removeElement())},renderBusinessHours:function(){this.timeGrid.renderBusinessHours(),this.dayGrid&&this.dayGrid.renderBusinessHours()},renderHtml:function(){return'<table><thead class="fc-head"><tr><td class="'+this.widgetHeaderClass+'">'+this.timeGrid.headHtml()+'</td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="fc-divider '+this.widgetHeaderClass+'"/>':"")+'<div class="fc-time-grid-container"><div class="fc-time-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){var t,e;return this.opt("weekNumbers")?(t=this.timeGrid.getCell(0).start,e=t.format(this.opt("smallWeekFormat")),'<th class="fc-axis fc-week-number '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"><span>"+X(e)+"</span></th>"):'<th class="fc-axis '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"></th>"},dayIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"><span>"+(this.opt("allDayHtml")||X(this.opt("allDayText")))+"</span></td>"},slotBgIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"></td>"},introHtml:function(){return'<td class="fc-axis" '+this.axisStyleAttr()+"></td>"},axisStyleAttr:function(){return null!==this.axisWidth?'style="width:'+this.axisWidth+'px"':""},updateSize:function(t){this.timeGrid.updateSize(t),de.prototype.updateSize.call(this,t)},updateWidth:function(){this.axisWidth=c(this.el.find(".fc-axis"))},setHeight:function(t,e){var i,n;null===this.bottomRuleHeight&&(this.bottomRuleHeight=this.bottomRuleEl.outerHeight()),this.bottomRuleEl.hide(),this.scrollerEl.css("overflow",""),d(this.scrollerEl),s(this.noScrollRowEls),this.dayGrid&&(this.dayGrid.removeSegPopover(),i=this.opt("eventLimit"),i&&"number"!=typeof i&&(i=xe),i&&this.dayGrid.limitRows(i)),e||(n=this.computeScrollerHeight(t),h(this.scrollerEl,n)?(o(this.noScrollRowEls,v(this.scrollerEl)),n=this.computeScrollerHeight(t),this.scrollerEl.height(n)):(this.scrollerEl.height(n).css("overflow","hidden"),this.bottomRuleEl.show()))},computeInitialScroll:function(){var t=e.duration(this.opt("scrollTime")),i=this.timeGrid.computeTimeTop(t);return i=Math.ceil(i),i&&i++,i},renderEvents:function(t){var e,i,n=[],o=[],s=[];for(i=0;i<t.length;i++)t[i].allDay?n.push(t[i]):o.push(t[i]);e=this.timeGrid.renderEvents(o),this.dayGrid&&(s=this.dayGrid.renderEvents(n)),this.updateHeight()},getEventSegs:function(){return this.timeGrid.getEventSegs().concat(this.dayGrid?this.dayGrid.getEventSegs():[])},unrenderEvents:function(){this.timeGrid.unrenderEvents(),this.dayGrid&&this.dayGrid.unrenderEvents()},renderDrag:function(t,e){return t.start.hasTime()?this.timeGrid.renderDrag(t,e):this.dayGrid?this.dayGrid.renderDrag(t,e):void 0},unrenderDrag:function(){this.timeGrid.unrenderDrag(),this.dayGrid&&this.dayGrid.unrenderDrag()},renderSelection:function(t){t.start.hasTime()||t.end.hasTime()?this.timeGrid.renderSelection(t):this.dayGrid&&this.dayGrid.renderSelection(t)},unrenderSelection:function(){this.timeGrid.unrenderSelection(),this.dayGrid&&this.dayGrid.unrenderSelection()}}),xe=5,Ce=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];return Rt.agenda={"class":Se,defaults:{allDaySlot:!0,allDayText:"all-day",slotDuration:"00:30:00",minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0}},Rt.agendaDay={type:"agenda",duration:{days:1}},Rt.agendaWeek={type:"agenda",duration:{weeks:1}},It}),function(t){t.fn.featureList=function(e){var i=t(this),n=t(e.output);return new jQuery.featureList(i,n,e),this},t.featureList=function(e,i,n){function o(t){"undefined"==typeof t&&(t=r+1,t=t>=s?0:t),e.removeClass("current").filter(":eq("+t+")").addClass("current"),i.stop(!0,!0).filter(":visible").fadeOut(),i.filter(":eq("+t+")").fadeIn(function(){r=t})}var n=n||{},s=e.length,r=n.start_item||0;if(n.pause_on_hover=n.pause_on_hover||!1,n.transition_interval=n.transition_interval||0,i.hide().eq(r).show(),e.eq(r).addClass("current"),e.click(function(){return!t(this).hasClass("current")&&void o(e.index(this))}),n.transition_interval>0){var a=setInterval(function(){o()},n.transition_interval);n.pause_on_hover&&e.mouseenter(function(){clearInterval(a)}).mouseleave(function(){clearInterval(a),a=setInterval(function(){o()},n.transition_interval)})}}}(jQuery),function(){var t,e,i,n,o,s={}.hasOwnProperty,r=function(t,e){function i(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};n=function(){function t(){this.options_index=0,this.parsed=[]}return t.prototype.add_node=function(t){return"OPTGROUP"===t.nodeName.toUpperCase()?this.add_group(t):this.add_option(t)},t.prototype.add_group=function(t){var e,i,n,o,s,r;for(e=this.parsed.length,this.parsed.push({array_index:e,group:!0,label:this.escapeExpression(t.label),title:t.title?t.title:void 0,children:0,disabled:t.disabled,classes:t.className}),s=t.childNodes,r=[],n=0,o=s.length;n<o;n++)i=s[n],r.push(this.add_option(i,e,t.disabled));return r},t.prototype.add_option=function(t,e,i){if("OPTION"===t.nodeName.toUpperCase())return""!==t.text?(null!=e&&(this.parsed[e].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:t.value,text:t.text,html:t.innerHTML,title:t.title?t.title:void 0,selected:t.selected,disabled:i===!0?i:t.disabled,group_array_index:e,group_label:null!=e?this.parsed[e].label:null,classes:t.className,style:t.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},t.prototype.escapeExpression=function(t){var e,i;return null==t||t===!1?"":/[\&\<\>\"\'\`]/.test(t)?(e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/&(?!\w+;)|[\<\>\"\'\`]/g,t.replace(i,function(t){return e[t]||"&amp;"})):t},t}(),n.select_to_array=function(t){var e,i,o,s,r;for(i=new n,r=t.childNodes,o=0,s=r.length;o<s;o++)e=r[o],i.add_node(e);return i.parsed},e=function(){function t(e,i){this.form_field=e,this.options=null!=i?i:{},t.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.on_ready())}return t.prototype.set_default_values=function(){var t=this;return this.click_test_action=function(e){return t.test_active_click(e)},this.activate_action=function(e){return t.activate_field(e)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text&&this.options.allow_single_deselect,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null==this.options.enable_split_word_search||this.options.enable_split_word_search,this.group_search=null==this.options.group_search||this.options.group_search,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null==this.options.single_backstroke_delete||this.options.single_backstroke_delete,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null==this.options.display_selected_options||this.options.display_selected_options,this.display_disabled_options=null==this.options.display_disabled_options||this.options.display_disabled_options,this.include_group_label_in_selected=this.options.include_group_label_in_selected||!1},t.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||t.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||t.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||t.default_no_result_text},t.prototype.choice_label=function(t){return this.include_group_label_in_selected&&null!=t.group_label?"<b class='group-name'>"+t.group_label+"</b>"+t.html:t.html},t.prototype.mouse_enter=function(){return this.mouse_on_container=!0},t.prototype.mouse_leave=function(){return this.mouse_on_container=!1},t.prototype.input_focus=function(){var t=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return t.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},t.prototype.input_blur=function(){var t=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return t.blur_test()},100)},t.prototype.results_option_build=function(t){var e,i,n,o,s;for(e="",s=this.results_data,n=0,o=s.length;n<o;n++)i=s[n],e+=i.group?this.result_add_group(i):this.result_add_option(i),(null!=t?t.first:void 0)&&(i.selected&&this.is_multiple?this.choice_build(i):i.selected&&!this.is_multiple&&this.single_set_selected_text(this.choice_label(i)));return e},t.prototype.result_add_option=function(t){var e,i;return t.search_match&&this.include_option_in_results(t)?(e=[],t.disabled||t.selected&&this.is_multiple||e.push("active-result"),!t.disabled||t.selected&&this.is_multiple||e.push("disabled-result"),t.selected&&e.push("result-selected"),null!=t.group_array_index&&e.push("group-option"),""!==t.classes&&e.push(t.classes),i=document.createElement("li"),i.className=e.join(" "),i.style.cssText=t.style,i.setAttribute("data-option-array-index",t.array_index),i.innerHTML=t.search_text,t.title&&(i.title=t.title),this.outerHTML(i)):""},t.prototype.result_add_group=function(t){var e,i;return(t.search_match||t.group_match)&&t.active_options>0?(e=[],e.push("group-result"),t.classes&&e.push(t.classes),i=document.createElement("li"),i.className=e.join(" "),i.innerHTML=t.search_text,t.title&&(i.title=t.title),this.outerHTML(i)):""},t.prototype.results_update_field=function(){if(this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing)return this.winnow_results()},t.prototype.reset_single_select_options=function(){var t,e,i,n,o;for(n=this.results_data,o=[],e=0,i=n.length;e<i;e++)t=n[e],t.selected?o.push(t.selected=!1):o.push(void 0);return o},t.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},t.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},t.prototype.winnow_results=function(){var t,e,i,n,o,s,r,a,l,u,c,h;for(this.no_results_clear(),n=0,s=this.get_search_text(),t=s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),l=new RegExp(t,"i"),i=this.get_search_regex(t),h=this.results_data,u=0,c=h.length;u<c;u++)e=h[u],e.search_match=!1,o=null,this.include_option_in_results(e)&&(e.group&&(e.group_match=!1,e.active_options=0),null!=e.group_array_index&&this.results_data[e.group_array_index]&&(o=this.results_data[e.group_array_index],0===o.active_options&&o.search_match&&(n+=1),o.active_options+=1),e.search_text=e.group?e.label:e.html,e.group&&!this.group_search||(e.search_match=this.search_string_match(e.search_text,i),e.search_match&&!e.group&&(n+=1),e.search_match?(s.length&&(r=e.search_text.search(l),a=e.search_text.substr(0,r+s.length)+"</em>"+e.search_text.substr(r+s.length),e.search_text=a.substr(0,r)+"<em>"+a.substr(r)),null!=o&&(o.group_match=!0)):null!=e.group_array_index&&this.results_data[e.group_array_index].search_match&&(e.search_match=!0)));return this.result_clear_highlight(),n<1&&s.length?(this.update_results_content(""),this.no_results(s)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},t.prototype.get_search_regex=function(t){var e;return e=this.search_contains?"":"^",new RegExp(e+t,"i")},t.prototype.search_string_match=function(t,e){var i,n,o,s;if(e.test(t))return!0;if(this.enable_split_word_search&&(t.indexOf(" ")>=0||0===t.indexOf("["))&&(n=t.replace(/\[|\]/g,"").split(" "),n.length))for(o=0,s=n.length;o<s;o++)if(i=n[o],e.test(i))return!0},t.prototype.choices_count=function(){var t,e,i,n;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,n=this.form_field.options,e=0,i=n.length;e<i;e++)t=n[e],t.selected&&(this.selected_option_count+=1);return this.selected_option_count},t.prototype.choices_click=function(t){if(t.preventDefault(),!this.results_showing&&!this.is_disabled)return this.results_show()},t.prototype.keyup_checker=function(t){var e,i;switch(e=null!=(i=t.which)?i:t.keyCode,this.search_field_scale(),e){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(t.preventDefault(),this.results_showing)return this.result_select(t);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:
case 16:case 91:case 17:break;default:return this.results_search()}},t.prototype.clipboard_event_checker=function(){var t=this;return setTimeout(function(){return t.results_search()},50)},t.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},t.prototype.include_option_in_results=function(t){return!(this.is_multiple&&!this.display_selected_options&&t.selected)&&(!(!this.display_disabled_options&&t.disabled)&&!t.empty)},t.prototype.search_results_touchstart=function(t){return this.touch_started=!0,this.search_results_mouseover(t)},t.prototype.search_results_touchmove=function(t){return this.touch_started=!1,this.search_results_mouseout(t)},t.prototype.search_results_touchend=function(t){if(this.touch_started)return this.search_results_mouseup(t)},t.prototype.outerHTML=function(t){var e;return t.outerHTML?t.outerHTML:(e=document.createElement("div"),e.appendChild(t),e.innerHTML)},t.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:!/iP(od|hone)/i.test(window.navigator.userAgent)&&(!/Android/i.test(window.navigator.userAgent)||!/Mobile/i.test(window.navigator.userAgent))},t.default_multiple_text="Select Some Options",t.default_single_text="Select an Option",t.default_no_result_text="No results match",t}(),t=jQuery,t.fn.extend({chosen:function(n){return e.browser_is_supported()?this.each(function(){var e,o;e=t(this),o=e.data("chosen"),"destroy"===n&&o instanceof i?o.destroy():o instanceof i||e.data("chosen",new i(this,n))}):this}}),i=function(e){function i(){return o=i.__super__.constructor.apply(this,arguments)}return r(i,e),i.prototype.setup=function(){return this.form_field_jq=t(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},i.prototype.set_up_html=function(){var e,i;return e=["chosen-container"],e.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&e.push(this.form_field.className),this.is_rtl&&e.push("chosen-rtl"),i={"class":e.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(i.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=t("<div />",i),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior()},i.prototype.on_ready=function(){return this.form_field_jq.trigger("chosen:ready",{chosen:this})},i.prototype.register_observers=function(){var t=this;return this.container.bind("touchstart.chosen",function(e){return t.container_mousedown(e),e.preventDefault()}),this.container.bind("touchend.chosen",function(e){return t.container_mouseup(e),e.preventDefault()}),this.container.bind("mousedown.chosen",function(e){t.container_mousedown(e)}),this.container.bind("mouseup.chosen",function(e){t.container_mouseup(e)}),this.container.bind("mouseenter.chosen",function(e){t.mouse_enter(e)}),this.container.bind("mouseleave.chosen",function(e){t.mouse_leave(e)}),this.search_results.bind("mouseup.chosen",function(e){t.search_results_mouseup(e)}),this.search_results.bind("mouseover.chosen",function(e){t.search_results_mouseover(e)}),this.search_results.bind("mouseout.chosen",function(e){t.search_results_mouseout(e)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(e){t.search_results_mousewheel(e)}),this.search_results.bind("touchstart.chosen",function(e){t.search_results_touchstart(e)}),this.search_results.bind("touchmove.chosen",function(e){t.search_results_touchmove(e)}),this.search_results.bind("touchend.chosen",function(e){t.search_results_touchend(e)}),this.form_field_jq.bind("chosen:updated.chosen",function(e){t.results_update_field(e)}),this.form_field_jq.bind("chosen:activate.chosen",function(e){t.activate_field(e)}),this.form_field_jq.bind("chosen:open.chosen",function(e){t.container_mousedown(e)}),this.form_field_jq.bind("chosen:close.chosen",function(e){t.input_blur(e)}),this.search_field.bind("blur.chosen",function(e){t.input_blur(e)}),this.search_field.bind("keyup.chosen",function(e){t.keyup_checker(e)}),this.search_field.bind("keydown.chosen",function(e){t.keydown_checker(e)}),this.search_field.bind("focus.chosen",function(e){t.input_focus(e)}),this.search_field.bind("cut.chosen",function(e){t.clipboard_event_checker(e)}),this.search_field.bind("paste.chosen",function(e){t.clipboard_event_checker(e)}),this.is_multiple?this.search_choices.bind("click.chosen",function(e){t.choices_click(e)}):this.container.bind("click.chosen",function(t){t.preventDefault()})},i.prototype.destroy=function(){return t(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},i.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},i.prototype.container_mousedown=function(e){if(!this.is_disabled&&(e&&"mousedown"===e.type&&!this.results_showing&&e.preventDefault(),null==e||!t(e.target).hasClass("search-choice-close")))return this.active_field?this.is_multiple||!e||t(e.target)[0]!==this.selected_item[0]&&!t(e.target).parents("a.chosen-single").length||(e.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),t(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field()},i.prototype.container_mouseup=function(t){if("ABBR"===t.target.nodeName&&!this.is_disabled)return this.results_reset(t)},i.prototype.search_results_mousewheel=function(t){var e;if(t.originalEvent&&(e=t.originalEvent.deltaY||-t.originalEvent.wheelDelta||t.originalEvent.detail),null!=e)return t.preventDefault(),"DOMMouseScroll"===t.type&&(e=40*e),this.search_results.scrollTop(e+this.search_results.scrollTop())},i.prototype.blur_test=function(){if(!this.active_field&&this.container.hasClass("chosen-container-active"))return this.close_field()},i.prototype.close_field=function(){return t(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},i.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},i.prototype.test_active_click=function(e){var i;return i=t(e.target).closest(".chosen-container"),i.length&&this.container[0]===i[0]?this.active_field=!0:this.close_field()},i.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=n.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},i.prototype.result_do_highlight=function(t){var e,i,n,o,s;if(t.length){if(this.result_clear_highlight(),this.result_highlight=t,this.result_highlight.addClass("highlighted"),n=parseInt(this.search_results.css("maxHeight"),10),s=this.search_results.scrollTop(),o=n+s,i=this.result_highlight.position().top+this.search_results.scrollTop(),e=i+this.result_highlight.outerHeight(),e>=o)return this.search_results.scrollTop(e-n>0?e-n:0);if(i<s)return this.search_results.scrollTop(i)}},i.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},i.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},i.prototype.update_results_content=function(t){return this.search_results.html(t)},i.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},i.prototype.set_tab_index=function(){var t;if(this.form_field.tabIndex)return t=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=t},i.prototype.set_label_behavior=function(){var e=this;if(this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=t("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0)return this.form_field_label.bind("click.chosen",function(t){return e.is_multiple?e.container_mousedown(t):e.activate_field()})},i.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},i.prototype.search_results_mouseup=function(e){var i;if(i=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),i.length)return this.result_highlight=i,this.result_select(e),this.search_field.focus()},i.prototype.search_results_mouseover=function(e){var i;if(i=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first())return this.result_do_highlight(i)},i.prototype.search_results_mouseout=function(e){if(t(e.target).hasClass("active-result"))return this.result_clear_highlight()},i.prototype.choice_build=function(e){var i,n,o=this;return i=t("<li />",{"class":"search-choice"}).html("<span>"+this.choice_label(e)+"</span>"),e.disabled?i.addClass("search-choice-disabled"):(n=t("<a />",{"class":"search-choice-close","data-option-array-index":e.array_index}),n.bind("click.chosen",function(t){return o.choice_destroy_link_click(t)}),i.append(n)),this.search_container.before(i)},i.prototype.choice_destroy_link_click=function(e){if(e.preventDefault(),e.stopPropagation(),!this.is_disabled)return this.choice_destroy(t(e.target))},i.prototype.choice_destroy=function(t){if(this.result_deselect(t[0].getAttribute("data-option-array-index")))return this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),t.parents("li").first().remove(),this.search_field_scale()},i.prototype.results_reset=function(){if(this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field)return this.results_hide()},i.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},i.prototype.result_select=function(t){var e,i;if(this.result_highlight)return e=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?e.removeClass("active-result"):this.reset_single_select_options(),e.addClass("result-selected"),i=this.results_data[e[0].getAttribute("data-option-array-index")],i.selected=!0,this.form_field.options[i.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(i):this.single_set_selected_text(this.choice_label(i)),(t.metaKey||t.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[i.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,t.preventDefault(),this.search_field_scale())},i.prototype.single_set_selected_text=function(t){return null==t&&(t=this.default_text),t===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").html(t)},i.prototype.result_deselect=function(t){var e;return e=this.results_data[t],!this.form_field.options[e.options_index].disabled&&(e.selected=!1,this.form_field.options[e.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[e.options_index].value}),this.search_field_scale(),!0)},i.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect)return this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")},i.prototype.get_search_text=function(){return t("<div/>").text(t.trim(this.search_field.val())).html()},i.prototype.winnow_results_set_highlight=function(){var t,e;if(e=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),t=e.length?e.first():this.search_results.find(".active-result").first(),null!=t)return this.result_do_highlight(t)},i.prototype.no_results=function(e){var i;return i=t('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),i.find("span").first().html(e),this.search_results.append(i),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},i.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},i.prototype.keydown_arrow=function(){var t;return this.results_showing&&this.result_highlight?(t=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(t):void 0:this.results_show()},i.prototype.keyup_arrow=function(){var t;return this.results_showing||this.is_multiple?this.result_highlight?(t=this.result_highlight.prevAll("li.active-result"),t.length?this.result_do_highlight(t.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},i.prototype.keydown_backstroke=function(){var t;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(t=this.search_container.siblings("li.search-choice").last(),t.length&&!t.hasClass("search-choice-disabled")?(this.pending_backstroke=t,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},i.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},i.prototype.keydown_checker=function(t){var e,i;switch(e=null!=(i=t.which)?i:t.keyCode,this.search_field_scale(),8!==e&&this.pending_backstroke&&this.clear_backstroke(),e){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(t),this.mouse_on_container=!1;break;case 13:this.results_showing&&t.preventDefault();break;case 32:this.disable_search&&t.preventDefault();break;case 38:t.preventDefault(),this.keyup_arrow();break;case 40:t.preventDefault(),this.keydown_arrow()}},i.prototype.search_field_scale=function(){var e,i,n,o,s,r,a,l,u;if(this.is_multiple){for(n=0,a=0,s="position:absolute; left: -1000px; top: -1000px; display:none;",r=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],l=0,u=r.length;l<u;l++)o=r[l],s+=o+":"+this.search_field.css(o)+";";return e=t("<div />",{style:s}),e.text(this.search_field.val()),t("body").append(e),a=e.width()+25,e.remove(),i=this.container.outerWidth(),a>i-10&&(a=i-10),this.search_field.css({width:a+"px"})}},i}(e)}.call(this),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(e,n){var o,s,r,a=e.nodeName.toLowerCase();return"area"===a?(o=e.parentNode,s=o.name,!(!e.href||!s||"map"!==o.nodeName.toLowerCase())&&(r=t("img[usemap='#"+s+"']")[0],!!r&&i(r))):(/^(input|select|textarea|button|object)$/.test(a)?!e.disabled:"a"===a?e.href||n:n)&&i(e)}function i(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}t.ui=t.ui||{},t.extend(t.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({scrollParent:function(e){var i=this.css("position"),n="absolute"===i,o=e?/(auto|scroll|hidden)/:/(auto|scroll)/,s=this.parents().filter(function(){var e=t(this);return(!n||"static"!==e.css("position"))&&o.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==i&&s.length?s:t(this[0].ownerDocument||document)},uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,n){return!!t.data(e,n[3])},focusable:function(i){return e(i,!isNaN(t.attr(i,"tabindex")))},tabbable:function(i){var n=t.attr(i,"tabindex"),o=isNaN(n);return(o||n>=0)&&e(i,!o)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(e,i){function n(e,i,n,s){return t.each(o,function(){i-=parseFloat(t.css(e,"padding"+this))||0,n&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),s&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var o="Width"===i?["Left","Right"]:["Top","Bottom"],s=i.toLowerCase(),r={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(e){return void 0===e?r["inner"+i].call(this):this.each(function(){t(this).css(s,n(this,e)+"px")})},t.fn["outer"+i]=function(e,o){return"number"!=typeof e?r["outer"+i].call(this,e):this.each(function(){t(this).css(s,n(this,e,!0,o)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.fn.extend({focus:function(e){return function(i,n){return"number"==typeof i?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),n&&n.call(e)},i)}):e.apply(this,arguments)}}(t.fn.focus),disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length)for(var i,n,o=t(this[0]);o.length&&o[0]!==document;){if(i=o.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(n=parseInt(o.css("zIndex"),10),!isNaN(n)&&0!==n))return n;o=o.parent()}return 0}}),t.ui.plugin={add:function(e,i,n){var o,s=t.ui[e].prototype;for(o in n)s.plugins[o]=s.plugins[o]||[],s.plugins[o].push([i,n[o]])},call:function(t,e,i,n){var o,s=t.plugins[e];if(s&&(n||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(o=0;o<s.length;o++)t.options[s[o][0]]&&s[o][1].apply(t.element,i)}};var n=0,o=Array.prototype.slice;t.cleanData=function(e){return function(i){var n,o,s;for(s=0;null!=(o=i[s]);s++)try{n=t._data(o,"events"),n&&n.remove&&t(o).triggerHandler("remove")}catch(t){}e(i)}}(t.cleanData),t.widget=function(e,i,n){var o,s,r,a,l={},u=e.split(".")[0];return e=e.split(".")[1],o=u+"-"+e,n||(n=i,i=t.Widget),t.expr[":"][o.toLowerCase()]=function(e){return!!t.data(e,o)},t[u]=t[u]||{},s=t[u][e],r=t[u][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new r(t,e)},t.extend(r,s,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),a=new i,a.options=t.widget.extend({},a.options),t.each(n,function(e,n){return t.isFunction(n)?void(l[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},o=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,s=this._superApply;return this._super=t,this._superApply=o,e=n.apply(this,arguments),this._super=i,this._superApply=s,e}}()):void(l[e]=n)}),r.prototype=t.widget.extend(a,{widgetEventPrefix:s?a.widgetEventPrefix||e:e},l,{constructor:r,namespace:u,widgetName:e,widgetFullName:o}),s?(t.each(s._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,r,i._proto)}),delete s._childConstructors):i._childConstructors.push(r),t.widget.bridge(e,r),r},t.widget.extend=function(e){for(var i,n,s=o.call(arguments,1),r=0,a=s.length;r<a;r++)for(i in s[r])n=s[r][i],s[r].hasOwnProperty(i)&&void 0!==n&&(t.isPlainObject(n)?e[i]=t.isPlainObject(e[i])?t.widget.extend({},e[i],n):t.widget.extend({},n):e[i]=n);return e},t.widget.bridge=function(e,i){var n=i.prototype.widgetFullName||e;t.fn[e]=function(s){var r="string"==typeof s,a=o.call(arguments,1),l=this;return r?this.each(function(){var i,o=t.data(this,n);return"instance"===s?(l=o,!1):o?t.isFunction(o[s])&&"_"!==s.charAt(0)?(i=o[s].apply(o,a),i!==o&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+s+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+s+"'")}):(a.length&&(s=t.widget.extend.apply(null,[s].concat(a))),this.each(function(){var e=t.data(this,n);e?(e.option(s||{}),e._init&&e._init()):t.data(this,n,new i(s,this))})),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var n,o,s,r=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(r={},n=e.split("."),e=n.shift(),n.length){for(o=r[e]=t.widget.extend({},this.options[e]),s=0;s<n.length-1;s++)o[n[s]]=o[n[s]]||{},o=o[n[s]];if(e=n.pop(),1===arguments.length)return void 0===o[e]?null:o[e];o[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];r[e]=i}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(e,i,n){var o,s=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=o=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,o=this.widget()),t.each(n,function(n,r){function a(){if(e||s.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof r?s[r]:r).apply(s,arguments)}"string"!=typeof r&&(a.guid=r.guid=r.guid||a.guid||t.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),u=l[1]+s.eventNamespace,c=l[2];c?o.delegate(c,u,a):i.bind(u,a)})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(i).undelegate(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function i(){return("string"==typeof t?n[t]:t).apply(n,arguments)}var n=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,n){var o,s,r=this.options[e];if(n=n||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],s=i.originalEvent)for(o in s)o in i||(i[o]=s[o]);return this.element.trigger(i,n),!(t.isFunction(r)&&r.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,o,s){"string"==typeof o&&(o={effect:o});var r,a=o?o===!0||"number"==typeof o?i:o.effect||i:e;o=o||{},"number"==typeof o&&(o={duration:o}),r=!t.isEmptyObject(o),o.complete=s,o.delay&&n.delay(o.delay),r&&t.effects&&t.effects.effect[a]?n[e](o):a!==e&&n[a]?n[a](o.duration,o.easing,s):n.queue(function(i){t(this)[e](),s&&s.call(n[0]),i()})}});var s=(t.widget,!1);t(document).mouseup(function(){s=!1});t.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){if(!0===t.data(i.target,e.widgetName+".preventClickEvent"))return t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!s){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,n=1===e.which,o=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;return!(n&&!o&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),s=!0,!0))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),s=!1,!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),t.widget("ui.sortable",t.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return t>=e&&t<e+i},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),t.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,i){var n=null,o=!1,s=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(e),
t(e.target).parents().each(function(){if(t.data(this,s.widgetName+"-item")===s)return n=t(this),!1}),t.data(e.target,s.widgetName+"-item")===s&&(n=t(e.target)),!!n&&(!(this.options.handle&&!i&&(t(this.options.handle,n).find("*").addBack().each(function(){this===e.target&&(o=!0)}),!o))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(e,i,n){var o,s,r=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&"auto"!==r.cursor&&(s=this.document.find("body"),this.storedCursor=s.css("cursor"),s.css("cursor",r.cursor),this.storedStylesheet=t("<style>*{ cursor: "+r.cursor+" !important; }</style>").appendTo(s)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!r.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,n,o,s,r=this.options,a=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<r.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+r.scrollSpeed:e.pageY-this.overflowOffset.top<r.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-r.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<r.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+r.scrollSpeed:e.pageX-this.overflowOffset.left<r.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-r.scrollSpeed)):(e.pageY-this.document.scrollTop()<r.scrollSensitivity?a=this.document.scrollTop(this.document.scrollTop()-r.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<r.scrollSensitivity&&(a=this.document.scrollTop(this.document.scrollTop()+r.scrollSpeed)),e.pageX-this.document.scrollLeft()<r.scrollSensitivity?a=this.document.scrollLeft(this.document.scrollLeft()-r.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<r.scrollSensitivity&&(a=this.document.scrollLeft(this.document.scrollLeft()+r.scrollSpeed))),a!==!1&&t.ui.ddmanager&&!r.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(n=this.items[i],o=n.item[0],s=this._intersectsWithPointer(n),s&&n.instance===this.currentContainer&&!(o===this.currentItem[0]||this.placeholder[1===s?"next":"prev"]()[0]===o||t.contains(this.placeholder[0],o)||"semi-dynamic"===this.options.type&&t.contains(this.element[0],o))){if(this.direction=1===s?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(e,n),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var n=this,o=this.placeholder.offset(),s=this.options.axis,r={};s&&"x"!==s||(r.left=o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),s&&"y"!==s||(r.top=o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(r,parseInt(this.options.revert,10)||500,function(){n._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&n.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!n.length&&e.key&&n.push(e.key+"="),n.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},i.each(function(){n.push(t(e.item||this).attr(e.attribute||"id")||"")}),n},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,n=this.positionAbs.top,o=n+this.helperProportions.height,s=t.left,r=s+t.width,a=t.top,l=a+t.height,u=this.offset.click.top,c=this.offset.click.left,h="x"===this.options.axis||n+u>a&&n+u<l,d="y"===this.options.axis||e+c>s&&e+c<r,p=h&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:s<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<r&&a<n+this.helperProportions.height/2&&o-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var e="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),n=e&&i,o=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return!!n&&(this.floating?s&&"right"===s||"down"===o?2:1:o&&("down"===o?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),n=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&i||"left"===o&&!i:n&&("down"===n&&e||"up"===n&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){function i(){a.push(this)}var n,o,s,r,a=[],l=[],u=this._connectWith();if(u&&e)for(n=u.length-1;n>=0;n--)for(s=t(u[n],this.document[0]),o=s.length-1;o>=0;o--)r=t.data(s[o],this.widgetFullName),r&&r!==this&&!r.options.disabled&&l.push([t.isFunction(r.options.items)?r.options.items.call(r.element):t(r.options.items,r.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),r]);for(l.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=l.length-1;n>=0;n--)l[n][0].each(i);return t(a)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;i<e.length;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,n,o,s,r,a,l,u,c=this.items,h=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(i=d.length-1;i>=0;i--)for(o=t(d[i],this.document[0]),n=o.length-1;n>=0;n--)s=t.data(o[n],this.widgetFullName),s&&s!==this&&!s.options.disabled&&(h.push([t.isFunction(s.options.items)?s.options.items.call(s.element[0],e,{item:this.currentItem}):t(s.options.items,s.element),s]),this.containers.push(s));for(i=h.length-1;i>=0;i--)for(r=h[i][1],a=h[i][0],n=0,u=a.length;n<u;n++)l=t(a[n]),l.data(this.widgetName+"-item",r),c.push({item:l,instance:r,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,n,o,s;for(i=this.items.length-1;i>=0;i--)n=this.items[i],n.instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(o=this.options.toleranceElement?t(this.options.toleranceElement,n.item):n.item,e||(n.width=o.outerWidth(),n.height=o.outerHeight()),s=o.offset(),n.left=s.left,n.top=s.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)s=this.containers[i].element.offset(),this.containers[i].containerCache.left=s.left,this.containers[i].containerCache.top=s.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var i,n=e.options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=e.currentItem[0].nodeName.toLowerCase(),o=t("<"+n+">",e.document[0]).addClass(i||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===n?e._createTrPlaceholder(e.currentItem.find("tr").eq(0),t("<tr>",e.document[0]).appendTo(o)):"tr"===n?e._createTrPlaceholder(e.currentItem,o):"img"===n&&o.attr("src",e.currentItem.attr("src")),i||o.css("visibility","hidden"),o},update:function(t,o){i&&!n.forcePlaceholderSize||(o.height()||o.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),o.width()||o.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(n.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),n.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,i){var n=this;e.children().each(function(){t("<td>&#160;</td>",n.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(e){var i,n,o,s,r,a,l,u,c,h,d=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!t.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(d&&t.contains(this.containers[i].element[0],d.element[0]))continue;d=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",e,this._uiHash(this)),this.containers[i].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(o=1e4,s=null,c=d.floating||this._isFloating(this.currentItem),r=c?"left":"top",a=c?"width":"height",h=c?"clientX":"clientY",n=this.items.length-1;n>=0;n--)t.contains(this.containers[p].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(l=this.items[n].item.offset()[r],u=!1,e[h]-l>this.items[n][a]/2&&(u=!0),Math.abs(e[h]-l)<o&&(o=Math.abs(e[h]-l),s=this.items[n],this.direction=u?"up":"down"));if(!s&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return void(this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1));s?this._rearrange(e,s,null,!0):this._rearrange(e,null,this.containers[p].element,!0),this._trigger("change",e,this._uiHash()),this.containers[p]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),n[0].style.width&&!i.forceHelperSize||n.width(this.currentItem.width()),n[0].style.height&&!i.forceHelperSize||n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),"document"!==o.containment&&"window"!==o.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===o.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===o.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(e=t(o.containment)[0],i=t(o.containment).offset(),n="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var n="absolute"===e?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(o[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:o.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:o.scrollLeft())*n}},_generatePosition:function(e){var i,n,o=this.options,s=e.pageX,r=e.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(r=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(r=this.containment[3]+this.offset.click.top)),o.grid&&(i=this.originalPageY+Math.round((r-this.originalPageY)/o.grid[1])*o.grid[1],r=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-o.grid[1]:i+o.grid[1]:i,n=this.originalPageX+Math.round((s-this.originalPageX)/o.grid[0])*o.grid[0],s=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-o.grid[0]:n+o.grid[0]:n)),{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(t,e,i,n){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o===this.counter&&this.refreshPositions(!n)})},_clear:function(t,e){function i(t,e,i){return function(n){i._trigger(t,n,e._uiHash(e))}}this.reverting=!1;var n,o=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)"auto"!==this._storedCSS[n]&&"static"!==this._storedCSS[n]||(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&o.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||o.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(o.push(function(t){this._trigger("remove",t,this._uiHash())}),o.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),o.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)e||o.push(i("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(o.push(i("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(n=0;n<o.length;n++)o[n].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}})}),jQuery.fn.highlight=function(t){var e=t.endcolor||this.css("background-color"),i=t.duration||1;this.css("background-color","yellow"),this.animate({"background-color":e},1e3*i)};